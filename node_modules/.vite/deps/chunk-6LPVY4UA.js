import {
  $,
  $s,
  A,
  Ae,
  Ao,
  Ar,
  B,
  C,
  Ce,
  Co,
  De,
  Do,
  Ee,
  F,
  Fe,
  G,
  H,
  I,
  Ie,
  Io,
  Ir,
  Je,
  Jr,
  Js,
  K,
  Ks,
  L,
  Le,
  M,
  Me,
  Mo,
  N,
  Ne,
  No,
  Nr,
  O,
  Oe,
  P,
  Ps,
  Q,
  R,
  S,
  Sr,
  To,
  Ue,
  V,
  Vr,
  W,
  We,
  Ws,
  X,
  Xr,
  Y,
  Ye,
  Yr,
  Ze,
  Zs,
  _,
  _e,
  _o,
  _s,
  a,
  ao,
  as,
  be,
  c,
  ce,
  co,
  d,
  de,
  eo,
  es,
  et,
  f,
  fe,
  fo,
  g,
  ge,
  he,
  ho,
  hs,
  i,
  ie,
  io,
  it,
  j,
  k,
  ke,
  ko,
  kr,
  l,
  le,
  me,
  mr,
  n,
  no,
  ns,
  nt,
  o,
  oe,
  oo,
  os,
  p,
  pe,
  po,
  q,
  qe,
  qs,
  r,
  re,
  ro,
  s,
  se,
  so,
  st,
  t,
  te,
  to,
  ts,
  tt,
  u,
  uo,
  v,
  ve,
  w,
  xe,
  xo,
  xr,
  y,
  ye,
  z,
  zr
} from "./chunk-OQ72IX5E.js";
import {
  BROWSER_SUPPORT_MIME_TYPE_LIST,
  VOICE_MESSAGE_FILE_NAME,
  VOICE_MESSAGE_FILE_NAME__XM4A,
  VOICE_MESSAGE_MIME_TYPE,
  VOICE_MESSAGE_MIME_TYPE__XM4A,
  VOICE_PLAYER_AUDIO_ID,
  VOICE_PLAYER_ROOT_ID,
  VOICE_RECORDER_AUDIO_BIT_RATE
} from "./chunk-ZRNKNDBU.js";
import {
  require_react_dom
} from "./chunk-VGGCA2L5.js";
import {
  require_react
} from "./chunk-73THXJN7.js";
import {
  __toESM
} from "./chunk-2TUXWMP5.js";

// node_modules/@sendbird/uikit-react/chunks/bundle-B1SLZ0HT.js
var extendStatics = function(d5, b6) {
  extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d6, b7) {
    d6.__proto__ = b7;
  } || function(d6, b7) {
    for (var p4 in b7) if (Object.prototype.hasOwnProperty.call(b7, p4)) d6[p4] = b7[p4];
  };
  return extendStatics(d5, b6);
};
function __extends(d5, b6) {
  if (typeof b6 !== "function" && b6 !== null)
    throw new TypeError("Class extends value " + String(b6) + " is not a constructor or null");
  extendStatics(d5, b6);
  function __() {
    this.constructor = d5;
  }
  d5.prototype = b6 === null ? Object.create(b6) : (__.prototype = b6.prototype, new __());
}
var __assign = function() {
  __assign = Object.assign || function __assign2(t7) {
    for (var s6, i4 = 1, n4 = arguments.length; i4 < n4; i4++) {
      s6 = arguments[i4];
      for (var p4 in s6) if (Object.prototype.hasOwnProperty.call(s6, p4)) t7[p4] = s6[p4];
    }
    return t7;
  };
  return __assign.apply(this, arguments);
};
function __rest(s6, e3) {
  var t7 = {};
  for (var p4 in s6) if (Object.prototype.hasOwnProperty.call(s6, p4) && e3.indexOf(p4) < 0)
    t7[p4] = s6[p4];
  if (s6 != null && typeof Object.getOwnPropertySymbols === "function")
    for (var i4 = 0, p4 = Object.getOwnPropertySymbols(s6); i4 < p4.length; i4++) {
      if (e3.indexOf(p4[i4]) < 0 && Object.prototype.propertyIsEnumerable.call(s6, p4[i4]))
        t7[p4[i4]] = s6[p4[i4]];
    }
  return t7;
}
function __awaiter(thisArg, _arguments, P2, generator) {
  function adopt(value) {
    return value instanceof P2 ? value : new P2(function(resolve) {
      resolve(value);
    });
  }
  return new (P2 || (P2 = Promise))(function(resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e3) {
        reject(e3);
      }
    }
    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e3) {
        reject(e3);
      }
    }
    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }
    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
}
function __generator(thisArg, body) {
  var _2 = { label: 0, sent: function() {
    if (t7[0] & 1) throw t7[1];
    return t7[1];
  }, trys: [], ops: [] }, f4, y6, t7, g4;
  return g4 = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g4[Symbol.iterator] = function() {
    return this;
  }), g4;
  function verb(n4) {
    return function(v5) {
      return step([n4, v5]);
    };
  }
  function step(op) {
    if (f4) throw new TypeError("Generator is already executing.");
    while (g4 && (g4 = 0, op[0] && (_2 = 0)), _2) try {
      if (f4 = 1, y6 && (t7 = op[0] & 2 ? y6["return"] : op[0] ? y6["throw"] || ((t7 = y6["return"]) && t7.call(y6), 0) : y6.next) && !(t7 = t7.call(y6, op[1])).done) return t7;
      if (y6 = 0, t7) op = [op[0] & 2, t7.value];
      switch (op[0]) {
        case 0:
        case 1:
          t7 = op;
          break;
        case 4:
          _2.label++;
          return { value: op[1], done: false };
        case 5:
          _2.label++;
          y6 = op[1];
          op = [0];
          continue;
        case 7:
          op = _2.ops.pop();
          _2.trys.pop();
          continue;
        default:
          if (!(t7 = _2.trys, t7 = t7.length > 0 && t7[t7.length - 1]) && (op[0] === 6 || op[0] === 2)) {
            _2 = 0;
            continue;
          }
          if (op[0] === 3 && (!t7 || op[1] > t7[0] && op[1] < t7[3])) {
            _2.label = op[1];
            break;
          }
          if (op[0] === 6 && _2.label < t7[1]) {
            _2.label = t7[1];
            t7 = op;
            break;
          }
          if (t7 && _2.label < t7[2]) {
            _2.label = t7[2];
            _2.ops.push(op);
            break;
          }
          if (t7[2]) _2.ops.pop();
          _2.trys.pop();
          continue;
      }
      op = body.call(thisArg, _2);
    } catch (e3) {
      op = [6, e3];
      y6 = 0;
    } finally {
      f4 = t7 = 0;
    }
    if (op[0] & 5) throw op[1];
    return { value: op[0] ? op[1] : void 0, done: true };
  }
}
function __spreadArray(to2, from, pack) {
  if (pack || arguments.length === 2) for (var i4 = 0, l3 = from.length, ar3; i4 < l3; i4++) {
    if (ar3 || !(i4 in from)) {
      if (!ar3) ar3 = Array.prototype.slice.call(from, 0, i4);
      ar3[i4] = from[i4];
    }
  }
  return to2.concat(ar3 || Array.prototype.slice.call(from));
}

// node_modules/@sendbird/chat/lib/__bundle-9fca8547.js
var Ce2;
var Oe2 = function() {
  function r4(e3, t7, n4) {
    var r5, i4;
    this.width = 0, this.height = 0, this.realWidth = 0, this.realHeight = 0, this._requireAuth = false, this._iid = e3, this.plainUrl = t7.url, this.width = t7.width, this.height = t7.height, this.realWidth = null !== (r5 = t7.real_width) && void 0 !== r5 ? r5 : t7.width, this.realHeight = null !== (i4 = t7.real_height) && void 0 !== i4 ? i4 : t7.height, this._requireAuth = n4;
  }
  return r4.payloadify = function(n4) {
    return re(se(n4 instanceof r4 ? { url: n4.plainUrl, width: n4.width, height: n4.height, real_width: n4.realWidth, real_height: n4.realHeight } : { url: "", width: n4.maxWidth, height: n4.maxHeight, real_width: 0, real_height: 0 }));
  }, Object.defineProperty(r4.prototype, "url", { get: function() {
    var e3 = Ws.of(this._iid).sessionManager;
    return this._requireAuth && e3.ekey ? "".concat(this.plainUrl, "?auth=").concat(e3.ekey) : this.plainUrl;
  }, enumerable: false, configurable: true }), r4;
}();
var Pe = function(t7) {
  function n4(n5) {
    var r4 = t7.call(this) || this;
    if (r4.method = oe.POST, r4.path = "".concat(le), r4.params = re({ file: n5.file, channel_url: n5.channelUrl }), n5.thumbnailSizes) for (var a5 = 0; a5 < n5.thumbnailSizes.length; a5++) {
      var o3 = n5.thumbnailSizes[a5], u4 = o3.maxWidth, c4 = o3.maxHeight;
      r4.params["thumbnail".concat(a5 + 1)] = "".concat(u4, ",").concat(c4);
    }
    return r4.requestId = n5.requestId, r4;
  }
  return t(n4, t7), n4;
}(xe);
var ke2 = function(e3) {
  function t7(t8, n4) {
    var r4, i4, s6, a5, o3 = this;
    return (o3 = e3.call(this, t8, n4) || this).url = n4.url, o3.fileSize = null !== (r4 = n4.file_size) && void 0 !== r4 ? r4 : 0, o3.thumbnails = null !== (s6 = null === (i4 = n4.thumbnails) || void 0 === i4 ? void 0 : i4.map(function(e4) {
      return new Oe2(t8, e4, false);
    })) && void 0 !== s6 ? s6 : [], o3.requireAuth = null !== (a5 = n4.require_auth) && void 0 !== a5 && a5, o3;
  }
  return t(t7, e3), t7;
}(Ue);
var Re = function(n4) {
  function i4(e3, t7) {
    var r4, i5, s6, a5, o3, u4 = this;
    return (u4 = n4.call(this, e3) || this).replyCount = 0, u4.memberCount = 0, u4.lastRepliedAt = 0, u4.updatedAt = 0, u4.replyCount = null !== (r4 = t7.reply_count) && void 0 !== r4 ? r4 : 0, u4.memberCount = null !== (i5 = t7.member_count) && void 0 !== i5 ? i5 : 0, u4.mostRepliedUsers = t7.most_replies && N("object", t7.most_replies) ? t7.most_replies.map(function(e4) {
      return new es(u4._iid, e4);
    }) : [], u4.unreadReplyCount = null !== (s6 = t7.unread_message_count) && void 0 !== s6 ? s6 : 0, u4.isPushNotificationEnabled = "number" == typeof t7.push_enabled ? t7.push_enabled > 0 : void 0, u4.lastRepliedAt = null !== (a5 = t7.last_replied_at) && void 0 !== a5 ? a5 : 0, u4.updatedAt = null !== (o3 = t7.updated_at) && void 0 !== o3 ? o3 : 0, u4;
  }
  return t(i4, n4), i4.payloadify = function(r4) {
    return re(se(n(n({}, n4.payloadify.call(this, r4)), { reply_count: r4.replyCount, unread_message_count: r4.unreadReplyCount, member_count: r4.memberCount, most_replies: Array.isArray(r4.mostRepliedUsers) ? r4.mostRepliedUsers.map(function(e3) {
      return es.payloadify(e3);
    }) : [], push_enabled: "boolean" == typeof r4.isPushNotificationEnabled ? r4.isPushNotificationEnabled ? 1 : 0 : void 0, last_replied_at: r4.lastRepliedAt, updated_at: r4.updatedAt })));
  }, Object.defineProperty(i4.prototype, "_isUpdateRequired", { get: function() {
    return void 0 === this.unreadReplyCount || void 0 === this.isPushNotificationEnabled;
  }, enumerable: false, configurable: true }), i4.prototype._updateFrom = function(e3) {
    var t7, n5;
    this.unreadReplyCount = null !== (t7 = e3.unreadReplyCount) && void 0 !== t7 ? t7 : this.unreadReplyCount, this.isPushNotificationEnabled = null !== (n5 = e3.isPushNotificationEnabled) && void 0 !== n5 ? n5 : this.isPushNotificationEnabled;
  }, i4;
}(zr);
!function(e3) {
  e3.ADD = "add", e3.DELETE = "delete";
}(Ce2 || (Ce2 = {}));
var xe2;
var De2 = function(e3) {
  this.messageId = 0, this.operation = null, this.updatedAt = 0;
  var t7 = w("string", e3.msg_id) ? parseInt(e3.msg_id) : e3.msg_id, n4 = e3.user_id, r4 = e3.operation ? e3.operation.toLowerCase() : null, i4 = e3.reaction, s6 = e3.updated_at;
  t7 && w("string", n4) && w("string", r4) && S(Ce2, r4) && w("string", i4) && i4 && w("number", s6) && (this.messageId = t7, this.userId = n4, this.key = i4, this.operation = r4, this.updatedAt = s6);
};
var Le2 = function() {
  function n4(e3) {
    var t7, n5, r4, i4 = e3.key, s6 = null !== (r4 = c([], a(e3.user_ids), false)) && void 0 !== r4 ? r4 : [], a5 = e3.updated_at;
    w("string", i4) && i4 && N("string", s6) && s6.length > 0 && w("number", a5) && (this.key = i4, this.userIds = s6, this.updatedAt = a5);
    var o3 = {};
    try {
      for (var u4 = o(this.userIds), c4 = u4.next(); !c4.done; c4 = u4.next()) {
        o3[c4.value] = this.updatedAt;
      }
    } catch (e4) {
      t7 = { error: e4 };
    } finally {
      try {
        c4 && !c4.done && (n5 = u4.return) && n5.call(u4);
      } finally {
        if (t7) throw t7.error;
      }
    }
    this._version = o3;
  }
  return Object.defineProperty(n4.prototype, "isEmpty", { get: function() {
    return 0 === this.userIds.length;
  }, enumerable: false, configurable: true }), n4.payloadify = function(n5) {
    return re(se({ key: n5.key, user_ids: n5.userIds, updated_at: n5.updatedAt }));
  }, n4.prototype.applyEvent = function(e3) {
    if (e3.key === this.key && this.updatedAt <= e3.updatedAt) {
      if (!this._version[e3.userId] || this._version[e3.userId] <= e3.updatedAt) {
        var t7 = this.userIds.indexOf(e3.userId);
        switch (e3.operation) {
          case Ce2.ADD:
            t7 < 0 && this.userIds.push(e3.userId);
            break;
          case Ce2.DELETE:
            t7 >= 0 && this.userIds.splice(t7, 1);
        }
        this._version[e3.userId] = e3.updatedAt;
      }
      this.updatedAt = Math.max(this.updatedAt, e3.updatedAt);
    }
  }, n4;
}();
var Fe2 = function() {
  function n4(e3) {
    this.secureUrl = null, this.type = null, this.width = 0, this.height = 0, this.alt = null, this.url = e3.url, e3.secure_url && (this.secureUrl = e3.secure_url), e3.type && (this.type = e3.type), e3.width && (this.width = e3.width), e3.height && (this.height = e3.height), e3.alt && (this.alt = e3.alt);
  }
  return n4.payloadify = function(n5) {
    var r4, i4;
    return re(se({ url: n5.url, secure_url: n5.secureUrl, type: n5.type, width: null !== (r4 = n5.width) && void 0 !== r4 ? r4 : 0, height: null !== (i4 = n5.height) && void 0 !== i4 ? i4 : 0, alt: n5.alt }));
  }, n4;
}();
var qe2 = function() {
  function n4(e3) {
    this.title = null, this.url = null, this.description = null, this.defaultImage = null, e3["og:title"] && (this.title = e3["og:title"]), e3["og:url"] && (this.url = e3["og:url"]), e3["og:description"] && (this.description = e3["og:description"]), e3["og:image"] && (this.defaultImage = new Fe2(e3["og:image"]));
  }
  return n4.payloadify = function(n5) {
    return re(se({ "og:title": n5.title, "og:url": n5.url, "og:description": n5.description, "og:image": n5.defaultImage ? Fe2.payloadify(n5.defaultImage) : null }));
  }, n4;
}();
var ze = function() {
  function n4(e3) {
    var t7, n5;
    this.volume = 0, this.name = null !== (t7 = e3.name) && void 0 !== t7 ? t7 : "default", this.volume = null !== (n5 = e3.volume) && void 0 !== n5 ? n5 : 1;
  }
  return n4.prototype.serialize = function() {
    return { name: this.name, volume: this.volume };
  }, n4.payloadify = function(n5) {
    return re(se({ name: n5.name, volume: n5.volume }));
  }, n4;
}();
!function(e3) {
  e3.GOOD = "good", e3.BAD = "bad";
}(xe2 || (xe2 = {}));
var Be = function() {
  function n4(e3) {
    this.id = e3.id, this.rating = e3.rating, this.comment = e3.comment;
  }
  return n4._getStatus = function(e3) {
    return e3 ? "id" in e3 ? "SUBMITTED" : "NO_FEEDBACK" : "NOT_APPLICABLE";
  }, n4._isSubmitted = function(e3) {
    return "SUBMITTED" === n4._getStatus(e3);
  }, n4._getPayloadByStatus = function(e3) {
    return "NO_FEEDBACK" === e3 ? {} : null;
  }, n4.payloadify = function(n5) {
    return re(se({ id: n5.id, rating: n5.rating, comment: n5.comment }));
  }, n4;
}();
var Ke = function(n4) {
  function i4(e3, t7) {
    var r4, i5 = this;
    return (i5 = n4.call(this, e3, t7) || this).isBlockedByMe = false, i5.role = S(V, t7.role) ? t7.role : V.NONE, i5.isBlockedByMe = null !== (r4 = t7.is_blocked_by_me) && void 0 !== r4 && r4, i5;
  }
  return t(i4, n4), i4.payloadify = function(r4) {
    return re(se(n(n({}, n4.payloadify.call(this, r4)), { role: r4.role, is_blocked_by_me: r4.isBlockedByMe })));
  }, i4;
}(es);
var je = function() {
  function n4(e3) {
    this.key = e3.key, this.value = N("string", e3.value) ? c([], a(e3.value), false) : [];
  }
  return n4.payloadify = function(n5) {
    var r4;
    return re(se({ key: n5.key, value: null !== (r4 = n5.value) && void 0 !== r4 ? r4 : [] }));
  }, n4;
}();
var Qe = function(e3) {
  switch (e3) {
    case z.BASE:
      return "";
    case z.USER:
      return "MESG";
    case z.FILE:
      return "FILE";
    case z.ADMIN:
      return "ADMM";
  }
};
var Ge = function(n4) {
  function i4(e3, t7) {
    var r4, i5, s6, a5, o3, u4, l3, d5, h4, p4, m5 = this;
    (m5 = n4.call(this, e3) || this).channelType = q.BASE, m5.messageType = z.BASE, m5.mentionType = null, m5.mentionedUsers = null, m5.mentionedUserIds = null, m5.metaArrays = [], m5.extendedMessage = {}, m5.createdAt = 0, m5.updatedAt = 0, m5.channelUrl = t7.channel_url, m5.channelType = S(q, t7.channel_type) ? t7.channel_type : q.GROUP, t7.channel && (t7.channel.channel_url && (m5.channelUrl = t7.channel.channel_url), t7.channel.channel_type && (m5.channelType = t7.channel.channel_type)), m5.data = null !== (r4 = t7.data) && void 0 !== r4 ? r4 : "", m5.customType = null !== (i5 = t7.custom_type) && void 0 !== i5 ? i5 : "", m5.mentionType = S(K, t7.mention_type) ? t7.mention_type : null, m5.mentionedUsers = t7.mentioned_users ? t7.mentioned_users.map(function(e4) {
      return new es(m5._iid, e4);
    }) : null, m5.mentionedUserIds = null !== (s6 = t7.mentioned_user_ids) && void 0 !== s6 ? s6 : null, m5.mentionedUsers && !m5.mentionedUserIds && (m5.mentionedUserIds = m5.mentionedUsers.map(function(e4) {
      return e4.userId;
    })), m5.mentionedMessageTemplate = null !== (a5 = t7.mentioned_message_template) && void 0 !== a5 ? a5 : "";
    var v5 = null !== (o3 = t7.metaarray) && void 0 !== o3 ? o3 : {}, y6 = null !== (u4 = t7.metaarray_key_order) && void 0 !== u4 ? u4 : Object.keys(v5).sort(function(e4, t8) {
      return e4.localeCompare(t8);
    });
    m5.metaArrays = [];
    for (var _2 = 0; _2 < y6.length; _2++) {
      var b6 = y6[_2];
      m5.metaArrays.push(new je({ key: b6, value: v5[b6] || [] }));
    }
    return t7.sorted_metaarray && (m5.metaArrays = t7.sorted_metaarray.map(function(e4) {
      return new je(e4);
    })), m5.extendedMessage = null !== (l3 = t7.extended_message) && void 0 !== l3 ? l3 : {}, m5.extendedMessagePayload = t7.extended_message_payload, m5.createdAt = null !== (h4 = null !== (d5 = t7.created_at) && void 0 !== d5 ? d5 : t7.ts) && void 0 !== h4 ? h4 : 0, m5.updatedAt = null !== (p4 = t7.updated_at) && void 0 !== p4 ? p4 : 0, m5;
  }
  return t(i4, n4), i4.payloadify = function(r4) {
    var i5, s6;
    return re(se(n(n({}, n4.payloadify.call(this, r4)), { channel_url: r4.channelUrl, channel_type: r4.channelType, type: Qe(r4.messageType), data: r4.data, custom_type: r4.customType, mention_type: r4.mentionType, mentioned_user_ids: r4.mentionedUserIds, mentioned_users: null === (i5 = r4.mentionedUsers) || void 0 === i5 ? void 0 : i5.map(function(e3) {
      return es.payloadify(e3);
    }), mentioned_message_template: r4.mentionedMessageTemplate, sorted_metaarray: null === (s6 = r4.metaArrays) || void 0 === s6 ? void 0 : s6.map(function(e3) {
      return je.payloadify(e3);
    }), extended_message: r4.extendedMessage, extended_message_payload: r4.extendedMessagePayload, created_at: r4.createdAt, updated_at: r4.updatedAt })));
  }, i4.prototype.isIdentical = function(e3) {
    return true;
  }, i4.prototype.isEqual = function(e3) {
    return y(this, e3);
  }, i4.prototype.isUserMessage = function() {
    return this.messageType === z.USER;
  }, i4.prototype.isFileMessage = function() {
    return this.messageType === z.FILE && !Object.prototype.hasOwnProperty.call(this, "fileInfoList");
  }, i4.prototype.isMultipleFilesMessage = function() {
    return this.messageType === z.FILE && Object.prototype.hasOwnProperty.call(this, "fileInfoList");
  }, i4.prototype.isAdminMessage = function() {
    return this.messageType === z.ADMIN;
  }, i4.prototype.serialize = function() {
    return Yr(this);
  }, i4.prototype.getMetaArraysByKeys = function(e3) {
    return this.metaArrays.filter(function(t7) {
      return e3.includes(t7.key);
    });
  }, i4;
}(zr);
var Ve = function(e3) {
  function t7(t8, n4) {
    var r4, i4, s6 = this;
    return (s6 = e3.call(this, t8) || this).channelUrl = null !== (r4 = n4.channel_url) && void 0 !== r4 ? r4 : "", s6.channelType = null !== (i4 = n4.channel_type) && void 0 !== i4 ? i4 : q.GROUP, s6.reader = new es(s6._iid, n4.user), s6.readAt = n4.ts, s6;
  }
  return t(t7, e3), t7;
}(zr);
var He = function(e3) {
  function t7(t8) {
    var n4 = t8.channelUrl;
    return e3.call(this, { code: "READ", ackRequired: true, payload: { channel_url: n4 } }) || this;
  }
  return t(t7, e3), t7;
}(qe);
var We2 = function(n4) {
  function s6(r4) {
    var s7 = n4.call(this) || this, a5 = r4.channelUrl, o3 = r4.channelType, u4 = r4.userId, c4 = r4.notificationIds;
    return s7.method = oe.PUT, s7.path = "".concat(Ie(o3), "/").concat(encodeURIComponent(a5), "/messages/mark_as_read"), s7.params = re(se({ user_id: u4, message_ids: c4 })), s7;
  }
  return t(s6, n4), s6;
}(xe);
var Ye2 = function(e3) {
  function t7(t8, n4, r4) {
    var i4 = e3.call(this, t8, "READ", r4) || this;
    return i4.readStatus = new Ve(t8, r4), i4;
  }
  return t(t7, e3), t7;
}(Fe);
var Je2 = function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this;
    return r4.readAt = n4.ts, r4.unreadMessageCount = n4.unread_message_count, r4;
  }
  return t(t7, e3), t7;
}(Ue);
var Xe = function(e3) {
  function t7(t8) {
    var n4 = t8.channelUrl, r4 = t8.messageId;
    return e3.call(this, { code: "READ", ackRequired: true, payload: { channel_url: n4, parent_message_id: r4 } }) || this;
  }
  return t(t7, e3), t7;
}(qe);
var Ze2 = function(e3) {
  function t7(t8) {
    var n4 = t8.channelType, r4 = t8.channelUrl, s6 = t8.messageId, a5 = t8.pushEnabled, o3 = e3.call(this) || this;
    return o3.method = oe.PUT, o3.path = "".concat(Ie(n4), "/").concat(encodeURIComponent(r4), "/messages/").concat(s6, "/thread_push"), o3.params = { push_enabled: a5 }, o3;
  }
  return t(t7, e3), t7;
}(xe);
!function(e3) {
  function t7(t8, n4) {
    return e3.call(this, t8, n4) || this;
  }
  t(t7, e3);
}(Ue);
var $e = function(e3) {
  function t7(t8) {
    var n4 = t8.channelType, r4 = t8.channelUrl, s6 = t8.messageId, a5 = t8.rating, o3 = t8.comment, u4 = e3.call(this) || this;
    return u4.method = oe.POST, u4.path = "".concat(Ie(n4), "/").concat(encodeURIComponent(r4), "/messages/").concat(s6, "/feedbacks"), u4.params = { rating: a5, comment: o3 }, u4;
  }
  return t(t7, e3), t7;
}(xe);
var et2 = function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this;
    return r4.feedback = new Be(n4), r4;
  }
  return t(t7, e3), t7;
}(Ue);
var tt2 = function(e3) {
  function t7(t8) {
    var n4 = t8.channelType, r4 = t8.channelUrl, s6 = t8.messageId, a5 = t8.feedbackId, o3 = t8.rating, u4 = t8.comment, c4 = e3.call(this) || this;
    return c4.method = oe.PUT, c4.path = "".concat(Ie(n4), "/").concat(encodeURIComponent(r4), "/messages/").concat(s6, "/feedbacks/").concat(a5), c4.params = { rating: o3, comment: u4 }, c4;
  }
  return t(t7, e3), t7;
}(xe);
var nt2 = function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this;
    return r4.feedback = new Be(n4), r4;
  }
  return t(t7, e3), t7;
}(Ue);
var rt = function(e3) {
  function t7(t8) {
    var n4 = t8.channelType, r4 = t8.channelUrl, s6 = t8.messageId, a5 = t8.feedbackId, o3 = e3.call(this) || this;
    return o3.method = oe.DELETE, o3.path = "".concat(Ie(n4), "/").concat(encodeURIComponent(r4), "/messages/").concat(s6, "/feedbacks/").concat(a5), o3;
  }
  return t(t7, e3), t7;
}(xe);
!function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this;
    return r4.feedback = new Be(n4), r4;
  }
  t(t7, e3);
}(Ue);
var it2;
var st2;
var at = function(i4) {
  function s6(e3, t7) {
    var n4, r4, s7, a5, o3, c4 = this;
    return (c4 = i4.call(this, e3) || this).plainUrl = "", c4.fileName = null, c4.mimeType = null, c4.fileSize = 0, c4.thumbnails = [], c4._requireAuth = false, c4.plainUrl = null !== (n4 = t7.url) && void 0 !== n4 ? n4 : "", c4.fileName = null !== (r4 = t7.file_name) && void 0 !== r4 ? r4 : null, c4.mimeType = null !== (s7 = t7.file_type) && void 0 !== s7 ? s7 : null, c4.fileSize = null !== (a5 = t7.file_size) && void 0 !== a5 ? a5 : 0, c4._requireAuth = null !== (o3 = t7.require_auth) && void 0 !== o3 && o3, c4.thumbnails = t7.thumbnails ? t7.thumbnails.map(function(e4) {
      var t8;
      return new Oe2(c4._iid, "string" == typeof e4 ? { url: e4, width: 0, height: 0 } : n(n({}, e4), { url: (null !== (t8 = e4.url) && void 0 !== t8 ? t8 : "").split("auth=")[0] }), c4._requireAuth);
    }) : [], c4;
  }
  return t(s6, i4), s6.payloadify = function(n4) {
    var r4;
    return re(se({ url: n4.plainUrl, file_name: n4.fileName, file_type: n4.mimeType, file_size: n4.fileSize, thumbnails: null === (r4 = n4.thumbnails) || void 0 === r4 ? void 0 : r4.map(function(e3) {
      var t7;
      return { url: (null !== (t7 = e3.plainUrl) && void 0 !== t7 ? t7 : "").split("auth=")[0], width: e3.width, height: e3.height, real_width: e3.realWidth, real_height: e3.realHeight };
    }), require_auth: n4._requireAuth }));
  }, Object.defineProperty(s6.prototype, "url", { get: function() {
    var e3 = Ws.of(this._iid).sessionManager;
    return this._requireAuth && e3.ekey ? "".concat(this.plainUrl, "?auth=").concat(e3.ekey) : this.plainUrl;
  }, enumerable: false, configurable: true }), s6;
}(zr);
var ot = function(e3) {
  var t7 = e3.channelUrl, n4 = e3.channelType, r4 = e3.parentMessage;
  this.channelUrl = t7, this.channelType = n4, this.parentMessage = r4;
};
!function(e3) {
  e3.NUMBER = "number", e3.ENUM = "enum", e3.TEXT = "text", e3.REGEX = "regex", e3.DECIMAL_PLACE = "decimal_place";
}(it2 || (it2 = {})), function(e3) {
  e3.TEXT = "text", e3.TEXTAREA = "textarea", e3.NUMBER = "number", e3.PHONE = "phone", e3.EMAIL = "email", e3.CHIP = "chip";
}(st2 || (st2 = {}));
var ut;
var ct;
var lt = function() {
  function n4(e3, t7) {
    var n5 = t7.id, r4 = t7.name, i4 = t7.items, s6 = t7.version, a5 = t7.is_submitted;
    this.messageId = e3, this.id = n5, this.name = r4, this.items = i4.map(function(e4) {
      return new dt(e4);
    }).sort(function(e4, t8) {
      return e4.sortOrder - t8.sortOrder;
    }), this.version = null != s6 ? s6 : 1, this._isSubmitted = a5;
  }
  return Object.defineProperty(n4.prototype, "isSubmitted", { get: function() {
    var e3;
    return null !== (e3 = this._isSubmitted) && void 0 !== e3 ? e3 : this.items.some(function(e4) {
      return Array.isArray(e4.submittedValues);
    });
  }, enumerable: false, configurable: true }), Object.defineProperty(n4.prototype, "isSubmittable", { get: function() {
    return this.items.every(function(e3) {
      return e3.required ? !!(Array.isArray(e3.draftValues) && e3.draftValues.length > 0) && e3.isValid(e3.draftValues) : !(Array.isArray(e3.draftValues) && e3.draftValues.length > 0) || e3.isValid(e3.draftValues);
    });
  }, enumerable: false, configurable: true }), n4.payloadify = function(n5) {
    return re(se({ id: n5.id, name: n5.name, items: n5.items.map(function(e3) {
      return dt.payloadify(e3);
    }), version: n5.version, is_submitted: n5._isSubmitted }));
  }, n4.isMessageFormPayload = function(e3) {
    return Boolean(null == e3 ? void 0 : e3.message_form);
  }, n4;
}();
var dt = function() {
  function n4(t7) {
    var n5 = t7.id, r4 = t7.name, i4 = t7.required, s6 = t7.sort_order, a5 = t7.placeholder, o3 = t7.style, u4 = t7.item_type, c4 = t7.validators, l3 = t7.value, d5 = t7.values;
    this.id = n5, this.name = r4, this.required = i4, this.sortOrder = s6, this.placeholder = a5, 0 === Object.keys(o3).length ? this.style = { layout: u4 } : this.style = re({ layout: o3.layout, options: o3.options, defaultOptions: o3.default_options, resultCount: o3.result_count }), d5 ? this.submittedValues = d5 : l3 && (this.submittedValues = [l3]), this._validators = c4;
  }
  return n4.prototype.isValid = function(e3) {
    var t7 = this;
    return e3.every(function(e4) {
      var n5 = function(e5, t8) {
        return t8.every(function(t9) {
          switch (t9.key) {
            case it2.NUMBER:
              var n6 = Number(e5);
              return !(isNaN(n6) || t9.min && "number" != typeof t9.min || t9.max && "number" != typeof t9.max || "number" == typeof t9.min && n6 < t9.min || "number" == typeof t9.max && n6 > t9.max);
            case it2.ENUM:
              return "string" == typeof e5 && (!(t9.enums && Array.isArray(t9.enums) && t9.enums.length > 0 && !t9.enums.includes(e5)) || t9.allow_other);
            case it2.TEXT:
              return !("string" != typeof e5 || "number" == typeof t9.min_length && e5.length < t9.min_length || "number" == typeof t9.max_length && e5.length > t9.max_length);
            case it2.REGEX:
              if ("string" != typeof e5) return false;
              if (t9.regex) {
                if ("string" != typeof t9.regex) return false;
                if (!new RegExp(t9.regex).test(e5)) return false;
              }
              return true;
            case it2.DECIMAL_PLACE:
              return 0 !== e5.length && (n6 = Number(e5), !(isNaN(n6) || (!t9.max_decimal_place || "number" == typeof t9.max_decimal_place) && t9.max_decimal_place && !function(e6, t10) {
                var n7 = e6.toString(), r4 = n7.indexOf(".");
                return -1 === r4 || n7.slice(r4 + 1).length <= t10;
              }(n6, t9.max_decimal_place)));
            default:
              return true;
          }
        });
      }(e4, t7._validators);
      return n5;
    });
  }, n4.payloadify = function(n5) {
    return re(se({ id: n5.id, name: n5.name, required: n5.required, sort_order: n5.sortOrder, placeholder: n5.placeholder, style: re({ layout: n5.style.layout, options: n5.style.options, default_options: n5.style.defaultOptions, result_count: n5.style.resultCount }), item_type: n5.style.layout, validators: n5._validators, values: n5.submittedValues }));
  }, n4;
}();
var ht = function(t7) {
  function n4(n5) {
    var r4 = t7.call(this) || this;
    return r4.method = oe.POST, r4.path = "".concat(Ae, "/").concat(n5.formId, "/submit"), r4.params = re({ message_id: n5.messageId, items: n5.items }), r4;
  }
  return t(n4, t7), n4;
}(xe);
!function(e3) {
  e3.PENDING = "pending", e3.SENT = "sent", e3.FAILED = "failed", e3.CANCELED = "canceled";
}(ut || (ut = {})), function(e3) {
  e3.PENDING = "pending", e3.IN_QUEUE = "in_queue", e3.SENT = "sent", e3.FAILED = "failed", e3.CANCELED = "canceled", e3.REMOVED = "removed";
}(ct || (ct = {}));
var ft;
var pt = function(i4) {
  function s6(e3, t7) {
    var n4, r4, s7, a5, o3, u4, c4, l3, d5 = this;
    return (d5 = i4.call(this, e3, t7) || this).parentMessage = null, d5.silent = false, d5.isOperatorMessage = false, d5.threadInfo = null, d5.reactions = [], d5.appleCriticalAlertOptions = null, d5.scheduledInfo = null, d5.suggestedReplies = null, d5.myFeedback = null, d5.myFeedbackStatus = "NOT_APPLICABLE", d5.messageForm = null, d5._isContinuousMessages = false, d5._scheduledStatus = null, d5.messageId = null !== (r4 = null !== (n4 = t7.msg_id) && void 0 !== n4 ? n4 : t7.message_id) && void 0 !== r4 ? r4 : 0, d5.parentMessageId = null !== (s7 = "string" == typeof t7.parent_message_id ? parseInt(t7.parent_message_id) : t7.parent_message_id) && void 0 !== s7 ? s7 : 0, d5.threadInfo = t7.thread_info ? new Re(d5._iid, t7.thread_info) : null, d5.reactions = t7.reactions ? t7.reactions.map(function(e4) {
      return new Le2(e4);
    }) : [], d5.ogMetaData = t7.og_tag ? new qe2(t7.og_tag) : null, d5.silent = null !== (a5 = t7.silent) && void 0 !== a5 && a5, d5.isOperatorMessage = null !== (o3 = t7.is_op_msg) && void 0 !== o3 && o3, d5.appleCriticalAlertOptions = t7.apple_critical_alert_options ? new ze(t7.apple_critical_alert_options) : null, "number" == typeof t7.scheduled_message_id && "number" == typeof t7.scheduled_at && t7.scheduled_status && (d5.scheduledInfo = { scheduledMessageId: t7.scheduled_message_id, scheduledAt: t7.scheduled_at }, d5._scheduledStatus = t7.scheduled_status), d5._isContinuousMessages = null !== (u4 = t7.is_continuous_messages) && void 0 !== u4 && u4, d5.myFeedback = Be._isSubmitted(t7.feedback) ? new Be(t7.feedback) : null, d5.myFeedbackStatus = Be._getStatus(t7.feedback), d5.suggestedReplies = null !== (l3 = null === (c4 = t7.extended_message_payload) || void 0 === c4 ? void 0 : c4.suggested_replies) && void 0 !== l3 ? l3 : null, d5.messageForm = lt.isMessageFormPayload(t7.extended_message_payload) ? new lt(d5.messageId, t7.extended_message_payload.message_form) : null, d5;
  }
  return t(s6, i4), s6.payloadify = function(n4) {
    var r4, s7;
    return re(se(n(n({}, i4.payloadify.call(this, n4)), { message_id: n4.messageId, parent_message_id: n4.parentMessageId, thread_info: n4.threadInfo ? Re.payloadify(n4.threadInfo) : null, reactions: n4.reactions.map(function(e3) {
      return Le2.payloadify(e3);
    }), og_tag: n4.ogMetaData ? qe2.payloadify(n4.ogMetaData) : null, silent: n4.silent, is_op_msg: n4.isOperatorMessage, apple_critical_alert_options: n4.appleCriticalAlertOptions ? ze.payloadify(n4.appleCriticalAlertOptions) : null, scheduled_message_id: null === (r4 = n4.scheduledInfo) || void 0 === r4 ? void 0 : r4.scheduledMessageId, scheduled_at: null === (s7 = n4.scheduledInfo) || void 0 === s7 ? void 0 : s7.scheduledAt, scheduled_status: n4._scheduledStatus, feedback: n4.myFeedback ? Be.payloadify(n4.myFeedback) : Be._getPayloadByStatus(n4.myFeedbackStatus) })));
  }, s6._getParentMessageInfoPayload = function(n4) {
    return re(se({ type: Qe(n4.messageType), ts: n4.createdAt, user: n4.sender ? Ke.payloadify(n4.sender) : null, message: n4.message, file: { url: n4.plainUrl, name: n4.name, type: n4.type, require_auth: n4.requireAuth }, files: Array.isArray(n4.fileInfoList) ? n4.fileInfoList.map(function(e3) {
      return at.payloadify(e3);
    }) : null }));
  }, s6.prototype.isIdentical = function(e3) {
    return this.messageId === e3.messageId;
  }, s6.prototype.applyThreadInfoUpdateEvent = function(e3) {
    return this.messageId === e3.targetMessageId && (e3.threadInfo._isUpdateRequired && this.threadInfo && e3.threadInfo._updateFrom(this.threadInfo), this.threadInfo = e3.threadInfo, true);
  }, s6.prototype.applyReactionEvent = function(e3) {
    if (this.messageId === e3.messageId) {
      for (var t7 = false, n4 = 0; n4 < this.reactions.length; n4++) if (this.reactions[n4].key === e3.key) {
        this.reactions[n4].applyEvent(e3), this.reactions[n4].isEmpty && this.reactions.splice(n4, 1), t7 = true;
        break;
      }
      t7 || "add" !== e3.operation || this.reactions.push(new Le2(Le2.payloadify({ key: e3.key, userIds: [e3.userId], updatedAt: e3.updatedAt })));
    }
  }, s6.prototype.applyParentMessage = function(e3) {
    if (!this.parentMessage) return this.parentMessage = e3, true;
    if (this.parentMessageId === e3.messageId) {
      var t7 = this.parentMessage.updatedAt;
      if (e3.updatedAt >= t7) return this.parentMessage = e3, true;
    }
    return false;
  }, s6.prototype._triggerThreadInfoUpdatedEvent = function() {
    return r(this, void 0, void 0, function() {
      var e3;
      return s(this, function(t7) {
        return (e3 = Ws.of(this._iid).dispatcher).dispatch(new ot({ channelType: q.GROUP, channelUrl: this.channelUrl, parentMessage: this })), e3.dispatch(new $s({ messages: [this], source: Ks.EVENT_MESSAGE_THREADINFO_UPDATED })), [2];
      });
    });
  }, s6.prototype.markThreadAsRead = function() {
    return r(this, void 0, void 0, function() {
      var e3, t7;
      return s(this, function(r4) {
        switch (r4.label) {
          case 0:
            return e3 = Ws.of(this._iid).requestQueue, t7 = new Xe({ channelUrl: this.channelUrl, messageId: this.messageId }), [4, e3.send(t7)];
          case 1:
            return r4.sent(), this.threadInfo && 0 !== this.threadInfo.unreadReplyCount ? (this.threadInfo.unreadReplyCount = 0, [4, this._triggerThreadInfoUpdatedEvent()]) : [3, 3];
          case 2:
            r4.sent(), r4.label = 3;
          case 3:
            return [2];
        }
      });
    });
  }, s6.prototype.setPushNotificationEnabled = function(e3) {
    return r(this, void 0, void 0, function() {
      var t7, r4;
      return s(this, function(i5) {
        switch (i5.label) {
          case 0:
            return t7 = Ws.of(this._iid).requestQueue, r4 = new Ze2({ channelUrl: this.channelUrl, channelType: this.channelType, messageId: this.messageId, pushEnabled: e3 }), [4, t7.send(r4)];
          case 1:
            return i5.sent(), this.threadInfo && this.threadInfo.isPushNotificationEnabled !== e3 && (this.threadInfo.isPushNotificationEnabled = e3), [2];
        }
      });
    });
  }, s6.prototype.submitMessageForm = function(e3) {
    return r(this, void 0, void 0, function() {
      var t7, r4, i5, s7, a5;
      return s(this, function(o3) {
        switch (o3.label) {
          case 0:
            if (t7 = Ws.of(this._iid).requestQueue, r4 = null, i5 = null, s7 = this.messageForm, !e3 && s7) {
              if (!s7.isSubmittable) throw new v({ code: u.INVALID_PARAMETER, message: "The form is not submittable. Please check all form items are valid before submitting." });
              if (s7.isSubmitted) throw new v({ code: u.INVALID_PARAMETER, message: "The form has already been submitted." });
              r4 = s7.id, i5 = s7.items.reduce(function(e4, t8) {
                return e4.push({ form_item_id: t8.id, values: Array.isArray(t8.draftValues) ? t8.draftValues : [] }), e4;
              }, []);
            } else e3 && (r4 = e3.formId, i5 = Object.entries(e3.answers).reduce(function(e4, t8) {
              var n4 = a(t8, 2), r5 = n4[0], i6 = n4[1], s8 = Number(r5);
              if (Number.isNaN(s8)) throw new v({ code: u.INVALID_PARAMETER, message: "Keys in answers must be numeric string." });
              return e4.push({ form_item_id: s8, value: i6 }), e4;
            }, []));
            if (!r4 || !i5) throw new v({ code: u.INVALID_PARAMETER, message: "Missing one or more required inputs: formId, answers." });
            return a5 = new ht({ messageId: this.messageId, formId: r4, items: i5 }), [4, t7.send(a5)];
          case 1:
            return o3.sent(), [2];
        }
      });
    });
  }, s6.prototype.submitFeedback = function(e3) {
    return r(this, void 0, void 0, function() {
      var t7, r4, i5, s7, a5, o3;
      return s(this, function(u4) {
        switch (u4.label) {
          case 0:
            return t7 = Ws.of(this._iid), r4 = t7.requestQueue, i5 = t7.dispatcher, s7 = new $e({ channelUrl: this.channelUrl, channelType: this.channelType, messageId: this.messageId, rating: e3.rating, comment: e3.comment }), [4, r4.send(s7)];
          case 1:
            return a5 = u4.sent(), o3 = a5.as(et2), this.myFeedback = o3.feedback, this.myFeedbackStatus = "SUBMITTED", i5.dispatch(new $s({ messages: [this], source: Ks.EVENT_MESSAGE_FEEDBACK_ADDED })), [2];
        }
      });
    });
  }, s6.prototype.updateFeedback = function(e3) {
    return r(this, void 0, void 0, function() {
      var t7, r4, i5, s7, a5, o3;
      return s(this, function(u4) {
        switch (u4.label) {
          case 0:
            return t7 = Ws.of(this._iid), r4 = t7.requestQueue, i5 = t7.dispatcher, s7 = new tt2({ channelUrl: this.channelUrl, channelType: this.channelType, messageId: this.messageId, feedbackId: e3.id, rating: e3.rating, comment: e3.comment }), [4, r4.send(s7)];
          case 1:
            return a5 = u4.sent(), o3 = a5.as(nt2), this.myFeedback = o3.feedback, this.myFeedbackStatus = "SUBMITTED", i5.dispatch(new $s({ messages: [this], source: Ks.EVENT_MESSAGE_FEEDBACK_UPDATED })), [2];
        }
      });
    });
  }, s6.prototype.deleteFeedback = function(e3) {
    return r(this, void 0, void 0, function() {
      var t7, r4, i5, s7;
      return s(this, function(a5) {
        switch (a5.label) {
          case 0:
            return t7 = Ws.of(this._iid), r4 = t7.requestQueue, i5 = t7.dispatcher, s7 = new rt({ channelUrl: this.channelUrl, channelType: this.channelType, messageId: this.messageId, feedbackId: e3 }), [4, r4.send(s7)];
          case 1:
            return a5.sent(), this.myFeedback = null, this.myFeedbackStatus = "NO_FEEDBACK", i5.dispatch(new $s({ messages: [this], source: Ks.EVENT_MESSAGE_FEEDBACK_DELETED })), [2];
        }
      });
    });
  }, s6;
}(Ge);
var mt = function(n4) {
  function i4(e3, t7) {
    var r4, i5, s6, a5, o3 = this;
    if ((o3 = n4.call(this, e3, t7) || this).reqId = "", o3.replyToChannel = false, o3.errorCode = 0, o3.sender = t7.user ? new Ke(o3._iid, t7.user) : t7.sender_id, o3.reqId = null !== (i5 = null !== (r4 = t7.req_id) && void 0 !== r4 ? r4 : t7.request_id) && void 0 !== i5 ? i5 : "", o3.replyToChannel = null !== (s6 = t7.is_reply_to_channel) && void 0 !== s6 && s6, t7.request_state && S(W, t7.request_state) && (o3.sendingStatus = t7.request_state), !o3.sendingStatus) if (o3.messageId > 0) o3.sendingStatus = W.SUCCEEDED;
    else if (o3.scheduledInfo) switch (t7.scheduled_status && (o3._scheduledStatus = t7.scheduled_status), t7.scheduled_status) {
      case ct.SENT:
      case ct.IN_QUEUE:
        o3.sendingStatus = W.SUCCEEDED;
        break;
      case ct.PENDING:
        o3.sendingStatus = W.SCHEDULED;
        break;
      case ct.FAILED:
      case ct.REMOVED:
        o3.sendingStatus = W.FAILED;
        break;
      case ct.CANCELED:
        o3.sendingStatus = W.CANCELED;
    }
    else o3.sendingStatus = W.PENDING;
    return o3.errorCode = null !== (a5 = t7.error_code) && void 0 !== a5 ? a5 : 0, o3._messageToken = t7.mesg_token, o3;
  }
  return t(i4, n4), i4.payloadify = function(r4) {
    return re(se(n(n({}, n4.payloadify.call(this, r4)), { user: Ke.payloadify(r4.sender), req_id: r4.reqId, is_reply_to_channel: r4.replyToChannel, request_state: r4.sendingStatus, error_code: r4.errorCode, mesg_token: r4._messageToken })));
  }, Object.defineProperty(i4.prototype, "isResendable", { get: function() {
    return (this.sendingStatus === W.FAILED || this.sendingStatus === W.CANCELED) && A(this.errorCode);
  }, enumerable: false, configurable: true }), i4.prototype.isIdentical = function(e3) {
    return this.messageId > 0 && e3.messageId > 0 ? this.messageId === e3.messageId : this.reqId === e3.reqId;
  }, i4;
}(pt);
var vt = { prevResultSize: 0, nextResultSize: 0, isInclusive: false, reverse: false, messageTypeFilter: G.ALL, customTypesFilter: void 0, senderUserIdsFilter: void 0, includeReactions: false, includeMetaArray: false, includeParentMessageInfo: false };
var yt = function(e3) {
  return w("number", e3.prevResultSize) && w("number", e3.nextResultSize) && w("boolean", e3.isInclusive) && w("boolean", e3.reverse) && w("string", e3.messageTypeFilter) && S(G, e3.messageTypeFilter) && N("string", e3.customTypesFilter, true) && N("string", e3.senderUserIdsFilter, true) && w("boolean", e3.includeMetaArray) && w("boolean", e3.includeReactions) && w("boolean", e3.includeParentMessageInfo);
};
var _t = function(n4) {
  function i4(r4, i5) {
    var s6, a5, o3, c4, l3 = this;
    if ((l3 = n4.call(this, r4, i5) || this).translations = {}, l3.message = null !== (s6 = i5.message) && void 0 !== s6 ? s6 : "", l3.messageType = z.ADMIN, l3.translations = null !== (a5 = i5.translations) && void 0 !== a5 ? a5 : {}, i5.parent_message_info) {
      var d5 = i5.parent_message_info;
      l3.parentMessage = Mt(r4, re(se(n(n({}, d5), { message_id: l3.parentMessageId, channel_url: l3.channelUrl, channel_type: l3.channelType, file: d5.file, url: null === (o3 = d5.file) || void 0 === o3 ? void 0 : o3.url, require_auth: null === (c4 = d5.file) || void 0 === c4 ? void 0 : c4.require_auth }))));
    }
    return l3;
  }
  return t(i4, n4), i4.payloadify = function(r4) {
    return re(se(n(n({}, n4.payloadify.call(this, r4)), { message: r4.message, translations: r4.translations, parent_message_info: r4.parentMessage ? n4._getParentMessageInfoPayload.call(this, r4.parentMessage) : null })));
  }, i4.prototype.getThreadedMessagesByTimestamp = function(e3, t7) {
    return r(this, void 0, void 0, function() {
      var n5;
      return s(this, function(r4) {
        switch (r4.label) {
          case 0:
            return n5 = n(n({}, vt), t7), Jr(this.messageId > 0 && w("number", e3) && yt(n5)).throw(v.invalidParameters), [4, ea.of(this._iid).getThreadedMessagesByTimestamp(this, e3, n5)];
          case 1:
            return [2, r4.sent()];
        }
      });
    });
  }, i4;
}(pt);
var gt = function() {
  function n4(e3) {
    var t7, n5;
    this.detail = {}, this.type = null !== (t7 = e3.type) && void 0 !== t7 ? t7 : "", this.vendor = null !== (n5 = e3.vendor) && void 0 !== n5 ? n5 : "", e3.detail && w("object", e3.detail) && !Array.isArray(e3.detail) && (this.detail = e3.detail);
  }
  return n4.payloadify = function(n5) {
    return re(se({ type: n5.type, vendor: n5.vendor, detail: n5.detail }));
  }, n4;
}();
var bt = function() {
  function t7(e3) {
    this.status = e3.status, e3.original_message_info && (this.originalMessageInfo = { createdAt: e3.original_message_info.ts, messageId: e3.original_message_info.id });
  }
  return t7.payloadify = function(t8) {
    return re({ status: t8.status, original_message_info: t8.originalMessageInfo ? { id: t8.originalMessageInfo.messageId, ts: t8.originalMessageInfo.createdAt } : void 0 });
  }, t7;
}();
var It = function(n4) {
  function i4(r4, i5) {
    var s6, a5, o3, c4, l3, d5, h4, f4 = this;
    if ((f4 = n4.call(this, r4, i5) || this).message = "", f4.messageParams = null, f4.translations = {}, f4.translationTargetLanguages = [], f4.messageSurvivalSeconds = -1, f4.plugins = [], f4._poll = null, f4.message = i5.message, f4.messageType = z.USER, f4.translations = null !== (o3 = i5.translations) && void 0 !== o3 ? o3 : {}, f4.translationTargetLanguages = null !== (c4 = i5.target_langs) && void 0 !== c4 ? c4 : [], 0 === Object.keys(f4.translations).length && f4.translationTargetLanguages.length > 0) try {
      for (var p4 = o(f4.translationTargetLanguages), m5 = p4.next(); !m5.done; m5 = p4.next()) {
        var y6 = m5.value;
        f4.translations[y6] = "";
      }
    } catch (e3) {
      s6 = { error: e3 };
    } finally {
      try {
        m5 && !m5.done && (a5 = p4.return) && a5.call(p4);
      } finally {
        if (s6) throw s6.error;
      }
    }
    if (f4.messageSurvivalSeconds = null !== (l3 = i5.message_survival_seconds) && void 0 !== l3 ? l3 : -1, f4.plugins = i5.plugins ? i5.plugins.map(function(e3) {
      return new gt(e3);
    }) : [], f4._poll = i5.poll ? new ho(f4._iid, i5.poll) : null, i5.parent_message_info) {
      var _2 = i5.parent_message_info;
      f4.parentMessage = Mt(r4, re(se(n(n({}, _2), { created_at: _2.ts, message_id: f4.parentMessageId, channel_url: f4.channelUrl, channel_type: f4.channelType, file: _2.file, url: null === (d5 = _2.file) || void 0 === d5 ? void 0 : d5.url, require_auth: null === (h4 = _2.file) || void 0 === h4 ? void 0 : h4.require_auth }))));
    }
    return i5.review_info && (f4.messageReviewInfo = new bt(i5.review_info)), f4;
  }
  return t(i4, n4), i4.payloadify = function(r4) {
    return re(se(n(n({}, n4.payloadify.call(this, r4)), { message: r4.message, translations: r4.translations, message_survival_seconds: r4.messageSurvivalSeconds, plugins: r4.plugins.map(function(e3) {
      return gt.payloadify(e3);
    }), poll: r4._poll ? ho.payloadify(r4._poll) : null, parent_message_info: r4.parentMessage ? n4._getParentMessageInfoPayload.call(this, r4.parentMessage) : null, review_info: r4.messageReviewInfo ? bt.payloadify(r4.messageReviewInfo) : void 0 })));
  }, i4.prototype.getThreadedMessagesByTimestamp = function(e3, t7) {
    return r(this, void 0, void 0, function() {
      var n5;
      return s(this, function(r4) {
        switch (r4.label) {
          case 0:
            return n5 = n(n({}, vt), t7), Jr(this.messageId > 0 && w("number", e3) && yt(n5)).throw(v.invalidParameters), [4, ea.of(this._iid).getThreadedMessagesByTimestamp(this, e3, n5)];
          case 1:
            return [2, r4.sent()];
        }
      });
    });
  }, i4.prototype.applyPoll = function(e3) {
    return !(this._poll && this._poll.id === e3.id && this._poll.updatedAt > e3.updatedAt) && (this._poll = e3, true);
  }, Object.defineProperty(i4.prototype, "poll", { get: function() {
    return this._poll;
  }, enumerable: false, configurable: true }), i4;
}(mt);
var Et = function(n4) {
  function i4(r4, i5) {
    var s6, a5, o3, c4, l3, d5, h4, f4, p4 = this;
    if ((p4 = n4.call(this, r4, i5) || this).messageParams = null, p4.fileInfoList = [], p4.messageSurvivalSeconds = -1, p4.messageType = z.FILE, p4.data = null !== (o3 = null !== (a5 = null === (s6 = i5.file) || void 0 === s6 ? void 0 : s6.data) && void 0 !== a5 ? a5 : i5.custom) && void 0 !== o3 ? o3 : "", p4.fileInfoList = null !== (l3 = null === (c4 = i5.files) || void 0 === c4 ? void 0 : c4.map(function(e3) {
      return new at(r4, e3);
    })) && void 0 !== l3 ? l3 : [], p4.messageSurvivalSeconds = null !== (d5 = i5.message_survival_seconds) && void 0 !== d5 ? d5 : -1, i5.parent_message_info) {
      var m5 = i5.parent_message_info;
      p4.parentMessage = Mt(r4, re(se(n(n({}, m5), { created_at: m5.ts, message_id: p4.parentMessageId, channel_url: p4.channelUrl, channel_type: p4.channelType, file: m5.file, url: null === (h4 = m5.file) || void 0 === h4 ? void 0 : h4.url, require_auth: null === (f4 = m5.file) || void 0 === f4 ? void 0 : f4.require_auth }))));
    }
    return p4;
  }
  return t(i4, n4), i4.prototype.getThreadedMessagesByTimestamp = function(e3, t7) {
    return r(this, void 0, void 0, function() {
      var n5;
      return s(this, function(r4) {
        switch (r4.label) {
          case 0:
            return n5 = n(n({}, vt), t7), Jr(this.messageId > 0 && w("number", e3) && yt(n5)).throw(v.invalidParameters), [4, ea.of(this._iid).getThreadedMessagesByTimestamp(this, e3, n5)];
          case 1:
            return [2, r4.sent()];
        }
      });
    });
  }, i4.payloadify = function(r4) {
    var i5, s6, a5, o3, c4, l3;
    return re(se(n(n({}, n4.payloadify.call(this, r4)), { file: { name: null !== (s6 = null === (i5 = r4.fileInfoList[0]) || void 0 === i5 ? void 0 : i5.fileName) && void 0 !== s6 ? s6 : "", size: null !== (o3 = null === (a5 = r4.fileInfoList[0]) || void 0 === a5 ? void 0 : a5.fileSize) && void 0 !== o3 ? o3 : 0, type: null !== (l3 = null === (c4 = r4.fileInfoList[0]) || void 0 === c4 ? void 0 : c4.mimeType) && void 0 !== l3 ? l3 : "", data: r4.data }, files: Array.isArray(r4.fileInfoList) ? r4.fileInfoList.map(function(e3) {
      return at.payloadify(e3);
    }) : null, message_survival_seconds: r4.messageSurvivalSeconds, parent_message_info: r4.parentMessage ? n4._getParentMessageInfoPayload.call(this, r4.parentMessage) : null })));
  }, i4._isMultipleFilesMessagePayload = function(e3) {
    var t7 = e3.files;
    return Array.isArray(t7) && t7.length >= 2;
  }, i4._isMultipleFilesMessageSerializedData = function(e3) {
    var t7 = e3.fileInfoList;
    return Array.isArray(t7);
  }, i4;
}(mt);
!function(e3) {
  e3.SENT = "SENT", e3.READ = "READ";
}(ft || (ft = {}));
var Tt = function(n4) {
  function i4(e3, t7) {
    var r4, i5, s6 = this;
    if ((s6 = n4.call(this, e3, t7) || this).notificationData = null, s6.notificationId = t7.notification_message_id, s6.messageType = z.ADMIN, s6.messageStatus = null !== (r4 = t7.message_status) && void 0 !== r4 ? r4 : ft.SENT, s6.priority = null !== (i5 = t7.priority) && void 0 !== i5 ? i5 : Y.NORMAL, s6.notificationEventDeadline = t7.notification_event_deadline, 0 === s6.extendedMessage.sub_type) try {
      var a5 = JSON.parse(s6.extendedMessage.sub_data), o3 = a5.label, u4 = a5.tags, c4 = void 0 === u4 ? [] : u4, l3 = a5.template_key, d5 = a5.template_variables;
      s6.notificationData = { label: o3, tags: c4, templateKey: l3, templateVariables: d5 };
    } catch (e4) {
    }
    return s6;
  }
  return t(i4, n4), i4.payloadify = function(r4) {
    return re(se(n(n({}, n4.payloadify.call(this, r4)), { notification_message_id: r4.notificationId, message_status: r4.messageStatus, priority: r4.priority, notification_event_deadline: r4.notificationEventDeadline })));
  }, i4.prototype.isIdentical = function(e3) {
    return this.notificationId === e3.notificationId;
  }, i4;
}(Ge);
var wt = function(e3) {
  if (e3.notificationId) return Tt.payloadify(e3);
  switch (e3.messageType) {
    case z.USER:
      return It.payloadify(e3);
    case z.FILE:
      return e3.fileInfoList ? Et.payloadify(e3) : St.payloadify(e3);
    case z.ADMIN:
      return _t.payloadify(e3);
    default:
      throw v.unknown;
  }
};
var Mt = function(e3, t7) {
  if (t7.notification_message_id) return new Tt(e3, t7);
  switch (t7.type) {
    case "MESG":
      return new It(e3, t7);
    case "FILE":
      return Et._isMultipleFilesMessagePayload(t7) ? new Et(e3, t7) : new St(e3, t7);
    case "ADMM":
    case "BRDM":
      return new _t(e3, t7);
    default:
      return null;
  }
};
var St = function(i4) {
  function s6(n4, r4) {
    var s7, a5, o3, c4, l3, d5, h4, f4, p4, m5, v5, y6, _2, b6, I5 = this;
    (I5 = i4.call(this, n4, r4) || this).messageParams = null, I5.plainUrl = "", I5.requireAuth = false, I5.thumbnails = [], I5.messageSurvivalSeconds = -1, I5.messageType = z.FILE;
    var E4 = r4.file;
    if (I5.plainUrl = (null !== (a5 = null !== (s7 = null == E4 ? void 0 : E4.url) && void 0 !== s7 ? s7 : r4.url) && void 0 !== a5 ? a5 : "").split("?auth=")[0], I5.name = null !== (c4 = null !== (o3 = null == E4 ? void 0 : E4.name) && void 0 !== o3 ? o3 : r4.name) && void 0 !== c4 ? c4 : "File", I5.size = null !== (d5 = null !== (l3 = null == E4 ? void 0 : E4.size) && void 0 !== l3 ? l3 : r4.size) && void 0 !== d5 ? d5 : 0, I5.data = null !== (f4 = null !== (h4 = null == E4 ? void 0 : E4.data) && void 0 !== h4 ? h4 : r4.custom) && void 0 !== f4 ? f4 : "", I5.type = E4 ? null !== (p4 = E4.type) && void 0 !== p4 ? p4 : "" : null !== (m5 = r4.type) && void 0 !== m5 ? m5 : "", I5.requireAuth = null !== (v5 = r4.require_auth) && void 0 !== v5 && v5, I5.thumbnails = r4.thumbnails ? r4.thumbnails.map(function(e3) {
      var t7;
      return new Oe2(I5._iid, "string" == typeof e3 ? { url: e3, width: 0, height: 0 } : n(n({}, e3), { url: (null !== (t7 = e3.url) && void 0 !== t7 ? t7 : "").split("auth=")[0] }), I5.requireAuth);
    }) : [], I5.messageSurvivalSeconds = null !== (y6 = r4.message_survival_seconds) && void 0 !== y6 ? y6 : -1, r4.parent_message_info) {
      var T4 = r4.parent_message_info;
      I5.parentMessage = Mt(n4, re(se(n(n({}, T4), { created_at: T4.ts, message_id: I5.parentMessageId, channel_url: I5.channelUrl, channel_type: I5.channelType, file: T4.file, url: null === (_2 = T4.file) || void 0 === _2 ? void 0 : _2.url, require_auth: null === (b6 = T4.file) || void 0 === b6 ? void 0 : b6.require_auth }))));
    }
    return I5;
  }
  return t(s6, i4), s6.payloadify = function(n4) {
    var r4;
    return re(se(n(n({}, i4.payloadify.call(this, n4)), { url: n4.plainUrl, require_auth: n4.requireAuth, file: { name: n4.name, size: n4.size, type: n4.type, data: n4.data }, thumbnails: null === (r4 = n4.thumbnails) || void 0 === r4 ? void 0 : r4.map(function(e3) {
      return { url: e3.plainUrl, width: e3.width, height: e3.height, real_width: e3.realWidth, real_height: e3.realHeight };
    }), message_survival_seconds: n4.messageSurvivalSeconds, parent_message_info: n4.parentMessage ? i4._getParentMessageInfoPayload.call(this, n4.parentMessage) : null })));
  }, Object.defineProperty(s6.prototype, "url", { get: function() {
    var e3 = Ws.of(this._iid).sessionManager;
    return this.requireAuth && e3.ekey ? "".concat(this.plainUrl, "?auth=").concat(e3.ekey) : this.plainUrl;
  }, enumerable: false, configurable: true }), s6.prototype.getThreadedMessagesByTimestamp = function(e3, t7) {
    return r(this, void 0, void 0, function() {
      var n4;
      return s(this, function(r4) {
        switch (r4.label) {
          case 0:
            return n4 = n(n({}, vt), t7), Jr(this.messageId > 0 && w("number", e3) && yt(n4)).throw(v.invalidParameters), [4, ea.of(this._iid).getThreadedMessagesByTimestamp(this, e3, n4)];
          case 1:
            return [2, r4.sent()];
        }
      });
    });
  }, s6;
}(mt);
var At = function(e3) {
  function t7(t8, n4) {
    var r4 = n4.file, i4 = n4.fileUrl, s6 = n4.fileName, a5 = n4.fileSize, o3 = n4.mimeType, u4 = n4.thumbnailSizes, c4 = n4._uploadedMetaData, l3 = n4._thumbnails, d5 = e3.call(this, t8) || this;
    return d5._plainUrl = i4, d5.file = r4, d5.fileName = s6, d5.fileSize = a5, d5.mimeType = o3, d5.thumbnailSizes = u4, d5._uploadedMetaData = c4, d5._thumbnails = l3, d5;
  }
  return t(t7, e3), t7.getPlainUrl = function(e4) {
    return e4 instanceof t7 ? e4._plainUrl : e4.fileUrl;
  }, Object.defineProperty(t7.prototype, "fileUrl", { get: function() {
    var e4, t8 = Ws.of(this._iid).sessionManager;
    return this._plainUrl && (null === (e4 = this._uploadedMetaData) || void 0 === e4 ? void 0 : e4.requireAuth) && t8.ekey ? "".concat(this._plainUrl, "?auth=").concat(t8.ekey) : this._plainUrl;
  }, set: function(e4) {
    this._plainUrl = e4;
  }, enumerable: false, configurable: true }), t7.prototype.toJSON = function() {
    return { file: this.file, fileUrl: this._plainUrl, fileName: this.fileName, fileSize: this.fileSize, mimeType: this.mimeType, thumbnailSizes: this.thumbnailSizes, _thumbnails: this._thumbnails, _uploadedMetaData: this._uploadedMetaData };
  }, t7;
}(zr);
var Ut = function(n4) {
  function i4(r4) {
    var i5, s6, a5, o3, u4 = [];
    return r4.mentionType === K.USERS && (r4.mentionedUserIds ? u4 = r4.mentionedUserIds : r4.mentionedUsers && (u4 = r4.mentionedUsers.map(function(e3) {
      return e3.userId;
    }))), n4.call(this, { code: "FILE", ackRequired: true, payload: re(se({ channel_url: r4.channelUrl, files: r4.files ? Pt(r4.files) : null, url: r4.url, name: null !== (i5 = r4.fileName) && void 0 !== i5 ? i5 : "", type: null !== (s6 = r4.mimeType) && void 0 !== s6 ? s6 : "", size: null !== (a5 = r4.fileSize) && void 0 !== a5 ? a5 : 0, custom: r4.data, custom_type: r4.customType, thumbnails: null === (o3 = r4._thumbnails) || void 0 === o3 ? void 0 : o3.map(function(e3) {
      return Oe2.payloadify(e3);
    }), require_auth: r4.requireAuth, metaarray: r4.metaArrays, mention_type: r4.mentionType, mentioned_user_ids: u4, push_option: r4.pushNotificationDeliveryOption && r4.pushNotificationDeliveryOption !== Q.DEFAULT ? r4.pushNotificationDeliveryOption : void 0, apple_critical_alert_options: r4.appleCriticalAlertOptions ? ze.payloadify(r4.appleCriticalAlertOptions) : null, silent: r4.silent, reply_to_channel: r4.isReplyToChannel, parent_message_id: r4.parentMessageId ? r4.parentMessageId : null, req_id: r4.reqId, pin_message: r4.isPinnedMessage })) }) || this;
  }
  return t(i4, n4), i4;
}(qe);
var Nt = function(n4) {
  function s6(r4) {
    var s7, a5, o3 = this;
    o3 = n4.call(this) || this;
    var u4 = [];
    return r4.mentionType === K.USERS && (r4.mentionedUserIds ? u4 = r4.mentionedUserIds : r4.mentionedUsers && (u4 = r4.mentionedUsers.map(function(e3) {
      return e3.userId;
    }))), o3.method = oe.POST, o3.path = "".concat(Ie(r4.channelType), "/").concat(encodeURIComponent(r4.channelUrl), "/messages"), o3.params = re(se({ message_type: z.FILE, user_id: r4.userId, files: r4.files ? Pt(r4.files) : null, url: r4.fileUrl, mention_type: r4.mentionType, mentioned_user_ids: u4, file_name: r4.fileName, file_size: r4.fileSize, file_type: r4.mimeType, data: r4.data, custom_type: r4.customType, thumbnails: null === (s7 = r4._thumbnails) || void 0 === s7 ? void 0 : s7.map(function(e3) {
      return Oe2.payloadify(e3);
    }), require_auth: r4.requireAuth, sorted_metaarray: null === (a5 = r4.metaArrays) || void 0 === a5 ? void 0 : a5.map(function(e3) {
      return je.payloadify(e3);
    }), push_option: r4.pushNotificationDeliveryOption, parent_message_id: r4.parentMessageId ? r4.parentMessageId : null, apple_critical_alert_options: r4.appleCriticalAlertOptions ? ze.payloadify(r4.appleCriticalAlertOptions) : null, reply_to_channel: r4.isReplyToChannel, req_id: r4.reqId, pin_message: r4.isPinnedMessage })), o3;
  }
  return t(s6, n4), s6;
}(xe);
var Ct = function(e3) {
  function t7(t8, r4, i4) {
    var s6, a5, o3, u4, c4 = this;
    (c4 = e3.call(this, t8, "FILE", i4) || this).message = i4.files && i4.files.length >= 2 ? new Et(t8, i4) : new St(t8, i4);
    var l3 = Ws.of(t8).sdkState;
    return c4.isMentioned = Oe(c4.message.mentionType, null !== (o3 = null !== (s6 = c4.message.mentionedUserIds) && void 0 !== s6 ? s6 : null === (a5 = c4.message.mentionedUsers) || void 0 === a5 ? void 0 : a5.map(function(e4) {
      return e4.userId;
    })) && void 0 !== o3 ? o3 : [], l3.userId), c4.forceUpdateLastMessage = null !== (u4 = i4.force_update_last_message) && void 0 !== u4 && u4, c4;
  }
  return t(t7, e3), t7;
}(Fe);
var Ot = function(e3) {
  function t7(t8, r4) {
    var i4, s6, a5, o3, u4 = this;
    (u4 = e3.call(this, t8, r4) || this).message = r4.files && r4.files.length >= 2 ? new Et(t8, r4) : new St(t8, r4);
    var c4 = Ws.of(t8).sdkState;
    return u4.isMentioned = Oe(u4.message.mentionType, null !== (a5 = null !== (i4 = u4.message.mentionedUserIds) && void 0 !== i4 ? i4 : null === (s6 = u4.message.mentionedUsers) || void 0 === s6 ? void 0 : s6.map(function(e4) {
      return e4.userId;
    })) && void 0 !== a5 ? a5 : [], c4.userId), u4.forceUpdateLastMessage = null !== (o3 = r4.force_update_last_message) && void 0 !== o3 && o3, u4;
  }
  return t(t7, e3), t7;
}(Ue);
function Pt(n4) {
  return n4.map(function(n5) {
    var r4, i4;
    return re(se({ url: At.getPlainUrl(n5), file_name: n5.fileName, file_type: n5.mimeType, file_size: n5.fileSize, thumbnails: null === (r4 = n5._thumbnails) || void 0 === r4 ? void 0 : r4.map(function(e3) {
      return Oe2.payloadify(e3);
    }), require_auth: null === (i4 = n5._uploadedMetaData) || void 0 === i4 ? void 0 : i4.requireAuth }));
  });
}
var kt;
!function(e3) {
  e3[e3.PENDING = 0] = "PENDING", e3[e3.UPLOADING = 1] = "UPLOADING", e3[e3.UPLOADED = 2] = "UPLOADED", e3[e3.SENDING = 3] = "SENDING", e3[e3.FAILED = 4] = "FAILED";
}(kt || (kt = {}));
var Rt = function() {
  function e3(e4, t7) {
    var n4 = t7.sdkState, r4 = t7.dispatcher, i4 = t7.requestQueue, s6 = t7.onlineDetector, a5 = t7.cacheContext, o3 = this;
    this._queueMap = /* @__PURE__ */ new Map(), this._iid = e4, this._sdkState = n4, this._requestQueue = i4, this._cacheContext = a5, this._dispatcher = r4, this._dispatcher.on(function(e5) {
      e5 instanceof kr && (o3._connectionState = e5.stateType);
    }), this._onlineDetector = s6;
  }
  return Object.defineProperty(e3.prototype, "_shouldSendThroughWebSocket", { get: function() {
    return this._connectionState === Sr.CONNECTED || this._connectionState === Sr.CONNECTING || this._connectionState === Sr.RECONNECTING;
  }, enumerable: false, configurable: true }), e3.prototype._sendFileMessage = function(e4, t7) {
    return r(this, void 0, void 0, function() {
      var n4, r4, i4;
      return s(this, function(s6) {
        switch (s6.label) {
          case 0:
            return n4 = this._createSendFileMessageRequestParams(e4, t7), this._shouldSendThroughWebSocket ? (r4 = new Ut(n4), [4, this._requestQueue.send(r4)]) : [3, 2];
          case 1:
            return i4 = s6.sent(), [2, i4.as(Ct).message];
          case 2:
            return r4 = new Nt(n(n({}, n4), { userId: this._sdkState.userId })), [4, this._requestQueue.send(r4)];
          case 3:
            return i4 = s6.sent(), [2, i4.as(Ot).message];
        }
      });
    });
  }, e3.prototype._createSendFileMessageRequestParams = function(e4, t7) {
    var n4 = n(n({}, t7.params), { channelUrl: e4.url, channelType: e4.channelType, reqId: t7.requestId, url: "" });
    if (t7.multipleFileUploadInfo) {
      var r4 = t7.params;
      n4.files = r4.fileInfoList;
    } else {
      r4 = t7.params;
      n4.url = r4.fileUrl, n4.requireAuth = r4.requireAuth;
    }
    return n4;
  }, e3.prototype._resolveMessageQueue = function(e4) {
    var t7;
    return r(this, void 0, void 0, function() {
      var n4, r4, i4, s6, a5, o3, u4, c4, l3, d5, h4, f4, p4;
      return s(this, function(m5) {
        switch (m5.label) {
          case 0:
            if (!(n4 = this._queueMap.get(e4.url))) return [3, 21];
            if (n4.isResolving) return [3, 20];
            n4.isResolving = true, r4 = [], i4 = true, m5.label = 1;
          case 1:
            m5.trys.push([1, 15, 16, 17]), s6 = o(n4.messageQueue), a5 = s6.next(), m5.label = 2;
          case 2:
            if (a5.done) return [3, 14];
            switch (o3 = a5.value, o3.state) {
              case kt.PENDING:
              case kt.UPLOADING:
                return [3, 3];
              case kt.UPLOADED:
                return [3, 4];
              case kt.FAILED:
                return [3, 12];
            }
            return [3, 13];
          case 3:
            return i4 = false, r4.push(o3), [3, 13];
          case 4:
            if (!i4) return [3, 10];
            m5.label = 5;
          case 5:
            return m5.trys.push([5, 8, , 9]), o3.state = kt.SENDING, [4, this._sendFileMessage(e4, o3)];
          case 6:
            return u4 = m5.sent(), o3.deferred.resolve(u4), [4, hs(100)];
          case 7:
            return m5.sent(), [3, 9];
          case 8:
            return c4 = m5.sent(), o3.deferred.reject(c4), [3, 9];
          case 9:
            return [3, 11];
          case 10:
            r4.push(o3), m5.label = 11;
          case 11:
            return [3, 13];
          case 12:
            return l3 = null !== (t7 = o3.error) && void 0 !== t7 ? t7 : v.unknown, o3.deferred.reject(l3.code === u.REQUEST_CANCELED ? v.fileUploadCanceled : l3), [3, 13];
          case 13:
            return a5 = s6.next(), [3, 2];
          case 14:
            return [3, 17];
          case 15:
            return d5 = m5.sent(), f4 = { error: d5 }, [3, 17];
          case 16:
            try {
              a5 && !a5.done && (p4 = s6.return) && p4.call(s6);
            } finally {
              if (f4) throw f4.error;
            }
            return [7];
          case 17:
            return h4 = n4.isResolveRequestPending, n4.messageQueue = r4, n4.isResolving = false, n4.isResolveRequestPending = false, h4 ? [4, this._resolveMessageQueue(e4)] : [3, 19];
          case 18:
            m5.sent(), m5.label = 19;
          case 19:
            return [3, 21];
          case 20:
            n4.isResolveRequestPending = true, m5.label = 21;
          case 21:
            return [2];
        }
      });
    });
  }, e3.prototype._uploadNextPendingItem = function(e4) {
    var t7;
    return r(this, void 0, void 0, function() {
      var n4, r4, i4, s6, a5, o3, u4, c4, l3, d5;
      return s(this, function(h4) {
        switch (h4.label) {
          case 0:
            return (n4 = this._queueMap.get(e4.url)) && (r4 = n4.messageQueue.find(function(e5) {
              return e5.state === kt.PENDING;
            })) ? r4.multipleFileUploadInfo ? (i4 = r4.multipleFileUploadInfo, s6 = i4.uploadIndex, a5 = i4.uploadCount, o3 = i4.requestHandler, d5 = r4.params, u4 = d5.fileInfoList[s6], !k(u4.file) || (null === (t7 = u4._uploadedMetaData) || void 0 === t7 ? void 0 : t7.isUploaded) ? [3, 2] : [4, this._tryUploadNextItemAndUpdateItemState(e4, n4, r4)]) : [3, 4] : [3, 9];
          case 1:
            return h4.sent(), [3, 3];
          case 2:
            r4.state = s6 < a5 - 1 ? kt.PENDING : kt.UPLOADED, h4.label = 3;
          case 3:
            return c4 = d5.fileInfoList[s6], l3 = r4.multipleFileUploadInfo.uploadIndex++, r4.multipleFileUploadInfo.isCopy || null == o3 || o3._triggerOnFileUploaded(r4.requestId, l3, c4, r4.error), [3, 7];
          case 4:
            return d5 = r4.params, k(d5.file) ? [4, this._tryUploadNextItemAndUpdateItemState(e4, n4, r4)] : [3, 6];
          case 5:
            return h4.sent(), [3, 7];
          case 6:
            d5.thumbnailSizes = [], r4.state = kt.UPLOADED, h4.label = 7;
          case 7:
            return this._uploadNextPendingItem(e4), [4, this._resolveMessageQueue(e4)];
          case 8:
            h4.sent(), h4.label = 9;
          case 9:
            return [2];
        }
      });
    });
  }, e3.prototype._tryUploadNextItemAndUpdateItemState = function(e4, t7, r4) {
    return r(this, void 0, void 0, function() {
      var i4, s6, a5, o3, u4, c4;
      return s(this, function(l3) {
        switch (l3.label) {
          case 0:
            return [4, this._onlineDetector.isOnline()];
          case 1:
            if (i4 = l3.sent(), !Ws.of(this._iid).sessionManager.currentUser || !i4) return r4.error = v.connectionRequired, r4.state = kt.FAILED, [2];
            if (!(t7.uploadQueue.length < 6)) return [3, 9];
            r4.state = kt.UPLOADING, t7.uploadQueue.push(r4), l3.label = 2;
          case 2:
            return l3.trys.push([2, 7, , 8]), r4.multipleFileUploadInfo ? (s6 = r4.multipleFileUploadInfo, a5 = s6.uploadIndex, o3 = s6.uploadCount, u4 = r4.params, [4, this._uploadNextFileForMultipleFilesItemAndUpdateParams(e4, r4, u4)]) : [3, 4];
          case 3:
            return l3.sent(), r4.state = a5 < o3 - 1 ? kt.PENDING : kt.UPLOADED, [3, 6];
          case 4:
            return u4 = r4.params, [4, this._uploadNextFileForSingleFileItemAndUpdateParams(e4, r4, u4)];
          case 5:
            l3.sent(), r4.state = kt.UPLOADED, l3.label = 6;
          case 6:
            return [3, 8];
          case 7:
            switch ((c4 = l3.sent()).code) {
              case u.REQUEST_FAILED:
                r4.error = new v({ code: u.NETWORK_ERROR, message: "Failed to upload a file." });
                break;
              case u.REQUEST_CANCELED:
                r4.error = v.fileUploadCanceled;
                break;
              default:
                r4.error = c4;
            }
            return r4.state = kt.FAILED, [3, 8];
          case 8:
            this._dequeueUploadItem(t7, r4), l3.label = 9;
          case 9:
            return [2];
        }
      });
    });
  }, e3.prototype._dequeueUploadItem = function(e4, t7) {
    var n4 = e4.uploadQueue.findIndex(function(e5) {
      return e5.requestId === t7.requestId;
    });
    n4 >= 0 && e4.uploadQueue.splice(n4, 1);
  }, e3.prototype._uploadNextFileForSingleFileItemAndUpdateParams = function(e4, t7, n4) {
    var r4, i4, s6;
    return r(this, void 0, void 0, function() {
      var a5, o3, u4, c4, l3, d5, h4, f4, p4, m5;
      return s(this, function(v5) {
        switch (v5.label) {
          case 0:
            return a5 = new Pe({ file: n4.file, channelUrl: e4.url, thumbnailSizes: n4.thumbnailSizes, requestId: t7.requestId }), [4, this._requestQueue.send(a5)];
          case 1:
            return o3 = v5.sent(), u4 = o3.as(ke2), c4 = u4.url, l3 = u4.fileSize, d5 = void 0 === l3 ? n4.fileSize : l3, h4 = u4.thumbnails, f4 = void 0 === h4 ? [] : h4, p4 = u4.requireAuth, m5 = void 0 !== p4 && p4, n4.fileName = null !== (r4 = n4.fileName) && void 0 !== r4 ? r4 : n4.file.name, n4.mimeType = null !== (i4 = n4.mimeType) && void 0 !== i4 ? i4 : n4.file.type, n4.fileSize = null !== (s6 = n4.fileSize) && void 0 !== s6 ? s6 : n4.file.size, n4.fileUrl = c4, n4.fileSize = d5, n4.requireAuth = m5, n4._thumbnails = f4, [2];
        }
      });
    });
  }, e3.prototype._uploadNextFileForMultipleFilesItemAndUpdateParams = function(e4, t7, n4) {
    var r4, i4, s6;
    return r(this, void 0, void 0, function() {
      var a5, o3, c4, l3, d5, h4, f4, p4, m5, v5, y6;
      return s(this, function(_2) {
        switch (_2.label) {
          case 0:
            return a5 = t7.multipleFileUploadInfo.uploadIndex, o3 = n4.fileInfoList[a5], c4 = new Pe({ file: o3.file, channelUrl: e4.url, thumbnailSizes: o3.thumbnailSizes, requestId: t7.requestId }), [4, this._requestQueue.send(c4)];
          case 1:
            return l3 = _2.sent(), d5 = l3.as(ke2), h4 = d5.url, f4 = d5.fileSize, p4 = void 0 === f4 ? o3.fileSize : f4, m5 = d5.thumbnails, v5 = d5.requireAuth, y6 = void 0 !== v5 && v5, o3.fileName = null !== (r4 = o3.fileName) && void 0 !== r4 ? r4 : o3.file.name, o3.mimeType = null !== (i4 = o3.mimeType) && void 0 !== i4 ? i4 : o3.file.type, o3.fileSize = null !== (s6 = o3.fileSize) && void 0 !== s6 ? s6 : o3.file.size, o3.file = void 0, o3.fileUrl = h4, o3.fileSize = p4, o3._thumbnails = m5, o3._uploadedMetaData = n(n({}, o3._uploadedMetaData), { requireAuth: y6, isUploaded: true }), o3 instanceof At || (n4.fileInfoList[a5] = new At(this._iid, o3)), [2];
        }
      });
    });
  }, e3.prototype.request = function(e4, t7, n4, r4) {
    return void 0 === r4 && (r4 = {}), r(this, void 0, void 0, function() {
      var i4, s6, a5, o3, c4;
      return s(this, function(l3) {
        return this._queueMap.has(e4.url) || (i4 = { messageQueue: [], uploadQueue: [], isResolving: false, isResolveRequestPending: false }, this._queueMap.set(e4.url, i4)), s6 = this._queueMap.get(e4.url), a5 = new et(), o3 = { requestId: t7, params: n4, state: kt.PENDING, deferred: a5 }, function(e5) {
          return "fileInfoList" in e5;
        }(n4) && (c4 = n({ uploadIndex: 0, uploadCount: n4.fileInfoList.length }, r4), o3.multipleFileUploadInfo = c4), s6.messageQueue.push(o3), this._uploadNextPendingItem(e4), [2, a5.promise];
      });
    });
  }, e3.prototype.cancel = function(e4, t7) {
    var n4, r4, i4 = this._queueMap.get(e4.url);
    if (i4) {
      var s6 = t7 ? [i4.messageQueue.find(function(e5) {
        return e5.requestId === t7;
      })] : c([], a(i4.messageQueue), false);
      try {
        for (var a5 = o(s6), o3 = a5.next(); !o3.done; o3 = a5.next()) {
          var u4 = o3.value;
          if (u4) switch (u4.state) {
            case kt.PENDING:
              if (u4.state = kt.FAILED, u4.error = v.requestCanceled, u4.multipleFileUploadInfo && !u4.multipleFileUploadInfo.isCopy) {
                var c4 = u4.multipleFileUploadInfo, l3 = c4.uploadIndex, d5 = c4.requestHandler, h4 = u4.params.fileInfoList[l3];
                null == d5 || d5._triggerOnFileUploaded(u4.requestId, l3, h4, v.fileUploadCanceled);
              }
              this._resolveMessageQueue(e4);
              break;
            case kt.UPLOADING:
              this._requestQueue.cancel(u4.requestId), this._dispatcher.dispatch(new tt({ requestId: u4.requestId }));
          }
        }
      } catch (e5) {
        n4 = { error: e5 };
      } finally {
        try {
          o3 && !o3.done && (r4 = a5.return) && r4.call(a5);
        } finally {
          if (n4) throw n4.error;
        }
      }
    } else t7 && (this._requestQueue.cancel(t7), this._dispatcher.dispatch(new tt({ requestId: t7 })));
  }, e3;
}();
var xt;
var Dt = { prevResultSize: 0, nextResultSize: 0, isInclusive: false, reverse: false, messageTypeFilter: G.ALL, customTypesFilter: void 0, senderUserIdsFilter: void 0, replyType: B.NONE, includeReactions: false, includeMetaArray: false, includeParentMessageInfo: false, includeThreadInfo: false, showSubchannelMessagesOnly: false };
var Lt = function(e3) {
  return w("number", e3.prevResultSize) && w("number", e3.nextResultSize) && w("boolean", e3.isInclusive) && w("boolean", e3.reverse) && w("string", e3.messageTypeFilter) && S(G, e3.messageTypeFilter) && N("string", e3.customTypesFilter, true) && N("string", e3.senderUserIdsFilter, true) && S(B, e3.replyType) && w("boolean", e3.includeMetaArray) && w("boolean", e3.includeReactions) && w("boolean", e3.includeParentMessageInfo) && w("boolean", e3.includeThreadInfo) && w("boolean", e3.showSubchannelMessagesOnly);
};
var Ft = { replyType: B.NONE, includeReactions: false, includeThreadInfo: false, includeMetaArray: false, includeParentMessageInfo: false };
var qt = function(e3) {
  return S(B, e3.replyType) && w("boolean", e3.includeReactions) && w("boolean", e3.includeMetaArray) && w("boolean", e3.includeParentMessageInfo) && w("boolean", e3.includeThreadInfo);
};
var zt = function(e3) {
  function t7(t8) {
    var n4 = t8.channelType, r4 = t8.channelUrl, s6 = t8.messageId, a5 = t8.includeMetaArray, o3 = t8.includeReactions, u4 = t8.includeThreadInfo, c4 = t8.includeParentMessageInfo, l3 = e3.call(this) || this;
    return l3.method = oe.GET, l3.path = "".concat(Ie(n4), "/").concat(encodeURIComponent(r4), "/messages/").concat(encodeURIComponent(s6)), l3.params = { is_sdk: true, with_sorted_meta_array: a5, include_reactions: o3, include_thread_info: u4, include_parent_message_info: c4, include_poll_details: true }, l3;
  }
  return t(t7, e3), t7;
}(xe);
var Bt = function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this;
    return r4.message = n4 ? Mt(t8, n({}, n4)) : null, r4;
  }
  return t(t7, e3), t7;
}(Ue);
var Kt = function(n4) {
  function s6(r4) {
    var s7 = r4.channelType, a5 = r4.channelUrl, o3 = r4.timestamp, u4 = r4.token, c4 = r4.prevResultSize, l3 = r4.nextResultSize, d5 = r4.isInclusive, h4 = r4.reverse, f4 = r4.messageTypeFilter, p4 = r4.customTypesFilter, m5 = r4.senderUserIdsFilter, v5 = r4.replyType, y6 = r4.includeMetaArray, _2 = r4.includeReactions, g4 = r4.parentMessageId, b6 = r4.includeThreadInfo, I5 = r4.includeParentMessageInfo, E4 = r4.showSubchannelMessagesOnly, T4 = r4.checkingHasNext, M5 = r4.checkingContinuousMessages, S6 = n4.call(this) || this;
    return S6.method = oe.GET, S6.path = "".concat(Ie(s7), "/").concat(encodeURIComponent(a5), "/messages"), S6.params = re(se({ is_sdk: true, prev_limit: c4, next_limit: l3, include: d5, reverse: h4, message_ts: o3, message_id: u4, message_type: null != f4 ? f4 : null, custom_types: p4, sender_ids: m5, include_reply_type: v5, with_sorted_meta_array: y6, include_reactions: _2, parent_message_id: g4, include_thread_info: b6, include_parent_message_info: I5, show_subchannel_message_only: E4, include_poll_details: true, checking_has_next: T4, checking_continuous_messages: M5 })), S6;
  }
  return t(s6, n4), s6;
}(xe);
var jt = function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this;
    return void 0 !== n4.is_continuous_messages && (r4.isContinuousMessages = n4.is_continuous_messages), void 0 !== n4.has_next && (r4.hasNext = n4.has_next), r4.messages = n4.messages.map(function(e4) {
      return Mt(t8, e4);
    }), r4;
  }
  return t(t7, e3), t7;
}(Ue);
var Qt = function(e3) {
  function t7(t8) {
    var n4 = t8.channelType, r4 = t8.channelUrl, s6 = t8.timestamp, a5 = t8.token, o3 = t8.replyType, u4 = t8.includeMetaArray, c4 = t8.includeReactions, l3 = t8.includeThreadInfo, d5 = t8.includeParentMessageInfo, h4 = e3.call(this) || this;
    return h4.method = oe.GET, h4.path = "".concat(Ie(n4), "/").concat(encodeURIComponent(r4), "/messages/changelogs"), h4.params = { change_ts: s6, token: a5, with_sorted_meta_array: u4, include_reactions: c4, include_thread_info: l3, include_reply_type: o3, include_parent_message_info: d5, include_poll_details: true }, h4;
  }
  return t(t7, e3), t7;
}(xe);
var Gt = function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this;
    return r4.updatedMessages = n4.updated.map(function(e4) {
      return Mt(t8, e4);
    }), r4.deletedMessagesInfo = n4.deleted.map(function(e4) {
      return { messageId: e4.message_id, deletedAt: e4.deleted_at };
    }), r4.hasMore = n4.has_more, r4.nextToken = n4.next, r4;
  }
  return t(t7, e3), t7;
}(Ue);
var Vt = function(e3) {
  function t7(t8) {
    var n4 = t8.channelUrl, r4 = t8.scheduledMessageId, s6 = e3.call(this) || this;
    return s6.method = oe.GET, s6.path = "".concat(he, "/").concat(encodeURIComponent(n4), "/scheduled_messages/").concat(encodeURIComponent(r4)), s6.params = {}, s6;
  }
  return t(t7, e3), t7;
}(xe);
var Ht = function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this;
    return r4.message = n4 ? Mt(t8, n({}, n4)) : null, r4;
  }
  return t(t7, e3), t7;
}(Ue);
!function(e3) {
  e3.MUTED = "muted", e3.BANNED = "banned";
}(xt || (xt = {}));
var Wt = function() {
  function n4(e3) {
    var t7, n5, r4, i4;
    this.restrictionType = null, S(xt, e3.restriction_type) && (this.restrictionType = e3.restriction_type), this.description = null !== (t7 = e3.description) && void 0 !== t7 ? t7 : null, this.endAt = null !== (r4 = null !== (n5 = e3.end_at) && void 0 !== n5 ? n5 : e3.muted_end_at) && void 0 !== r4 ? r4 : -1, this.remainingDuration = null !== (i4 = e3.remaining_duration) && void 0 !== i4 ? i4 : -1;
  }
  return n4.payloadify = function(n5) {
    return re(se({ restriction_type: n5.restrictionType, description: n5.description, end_at: n5.endAt, remaining_duration: n5.remainingDuration }));
  }, n4;
}();
var Yt = function(n4) {
  function i4(e3, t7) {
    var r4 = n4.call(this, e3, t7) || this;
    return r4.restrictionInfo = new Wt(t7), r4;
  }
  return t(i4, n4), i4.payloadify = function(r4) {
    return re(se(n(n({}, n4.payloadify.call(this, r4)), Wt.payloadify(r4.restrictionInfo))));
  }, i4;
}(es);
var Jt = function(e3) {
  function t7(t8, n4) {
    var r4, i4 = this;
    return (i4 = e3.call(this, t8, n4) || this).isMuted = false, i4.isMuted = null !== (r4 = n4.is_muted) && void 0 !== r4 && r4, i4;
  }
  return t(t7, e3), t7;
}(es);
var Xt = function() {
  function e3() {
    this._onPending = st, this._onFailed = st, this._onSucceeded = st;
  }
  return e3.prototype._trigger = function(e4) {
    switch (null == e4 ? void 0 : e4.sendingStatus) {
      case W.PENDING:
        0 === e4.errorCode && this._onPending(e4);
        break;
      case W.SCHEDULED:
      case W.SUCCEEDED:
        this._onSucceeded(e4);
    }
  }, e3.prototype._triggerFailed = function(e4, t7) {
    switch (null == t7 ? void 0 : t7.sendingStatus) {
      case W.FAILED:
      case W.CANCELED:
        this._onFailed(e4, t7.scheduledInfo ? null : t7);
    }
  }, e3.prototype.onPending = function(e4) {
    return this._onPending = e4, this;
  }, e3.prototype.onFailed = function(e4) {
    return this._onFailed = e4, this;
  }, e3.prototype.onSucceeded = function(e4) {
    return this._onSucceeded = e4, this;
  }, e3;
}();
var Zt = { data: void 0, customType: void 0, mentionType: K.USERS, mentionedUserIds: void 0, mentionedUsers: void 0, mentionedMessageTemplate: void 0, metaArrays: void 0, parentMessageId: void 0, isReplyToChannel: false, pushNotificationDeliveryOption: void 0, appleCriticalAlertOptions: void 0, isPinnedMessage: false };
var $t = function(e3) {
  return w("string", e3.data, true) && w("string", e3.customType, true) && S(K, e3.mentionType) && N("string", e3.mentionedUserIds, true) && N(es, e3.mentionedUsers, true) && w("string", e3.mentionedMessageTemplate, true) && N(je, e3.metaArrays, true) && w("number", e3.parentMessageId, true) && w("boolean", e3.isReplyToChannel) && S(Q, e3.pushNotificationDeliveryOption, true) && w(ze, e3.appleCriticalAlertOptions, true) && w("boolean", e3.isPinnedMessage, true);
};
var en = function(e3) {
  return { isReplyToChannel: e3.isReplyToChannel, pushNotificationDeliveryOption: e3.pushNotificationDeliveryOption, pollId: e3.pollId };
};
var tn = n(n({}, Zt), { message: "", translationTargetLanguages: void 0, pollId: void 0, extendedMessagePayload: void 0 });
function nn(e3) {
  var n4, r4, i4;
  return null !== (n4 = e3.messageParams) && void 0 !== n4 ? n4 : se(n(n({}, e3), { mentionType: e3.mentionType, mentionedUserIds: null !== (r4 = e3.mentionedUserIds) && void 0 !== r4 ? r4 : null === (i4 = e3.mentionedUsers) || void 0 === i4 ? void 0 : i4.map(function(e4) {
    return e4.userId;
  }), translationTargetLanguages: Object.keys(e3.translations), pushNotificationDeliveryOption: Q.DEFAULT, parentMessageId: null, isReplyToChannel: false, isPinnedMessage: false }));
}
var rn;
var sn = function(n4) {
  var r4;
  return re(se({ data: n4.data, customType: n4.customType, mentionType: n4.mentionType, mentionedUsers: n4.mentionedUsers, mentionedUserIds: n4.mentionedUserIds, mentionedMessageTemplate: n4.mentionedMessageTemplate, metaArrays: n4.metaArrays, pollId: null === (r4 = n4.poll) || void 0 === r4 ? void 0 : r4.id, parentMessageId: n4.parentMessageId, appleCriticalAlertOptions: n4.appleCriticalAlertOptions, message: n4.message, translationTargetLanguages: Object.keys(n4.translations), extendedMessagePayload: n4.extendedMessagePayload }));
};
var an = function(e3) {
  return $t(e3) && w("string", e3.message) && N("string", e3.translationTargetLanguages, true) && w("number", e3.pollId, true) && w("object", e3.extendedMessagePayload, true);
};
!function(e3) {
  e3.FILE = "file", e3.BLOB = "blob", e3.BLOB_LIKE_OBJECT = "blobLikeObject", e3.URL = "url";
}(rn || (rn = {}));
var on = function(e3) {
  return "undefined" != typeof window && "Blob" in window && "undefined" != typeof Blob && e3 instanceof Blob;
};
var un = function(e3) {
  return e3 === rn.BLOB || e3 === rn.FILE;
};
var cn = function(e3) {
  return { file: e3.file, fileKey: e3.fileKey, fileType: e3.fileType, isReplyToChannel: e3.isReplyToChannel, pushNotificationDeliveryOption: e3.pushNotificationDeliveryOption };
};
var ln = n(n({}, Zt), { file: void 0, fileKey: void 0, fileUrl: void 0, fileName: void 0, fileType: void 0, fileSize: void 0, mimeType: void 0, thumbnailSizes: void 0, requireAuth: false });
function dn(e3) {
  var n4, r4, i4, s6;
  return null !== (n4 = e3.messageParams) && void 0 !== n4 ? n4 : se(n(n({}, e3), { fileUrl: e3.plainUrl, fileName: e3.name, fileSize: e3.size, mimeType: e3.type, mentionType: e3.mentionType, mentionedUserIds: null !== (r4 = e3.mentionedUserIds) && void 0 !== r4 ? r4 : null === (i4 = e3.mentionedUsers) || void 0 === i4 ? void 0 : i4.map(function(e4) {
    return e4.userId;
  }), pushNotificationDeliveryOption: Q.DEFAULT, parentMessageId: null, isReplyToChannel: false, thumbnailSizes: null === (s6 = e3.thumbnails) || void 0 === s6 ? void 0 : s6.map(function(e4) {
    return { maxWidth: e4.width, maxHeight: e4.height };
  }), requireAuth: e3.requireAuth, isPinnedMessage: false, _thumbnails: e3.thumbnails }));
}
var hn;
var fn = function(n4, r4) {
  var i4;
  return n4.messageParams ? (!n4.url && k(r4) && (n4.messageParams.file = r4), n4.messageParams) : re(se({ data: n4.data, customType: n4.customType, mentionType: n4.mentionType, mentionedUsers: n4.mentionedUsers, mentionedUserIds: n4.mentionedUserIds, metaArrays: n4.metaArrays, parentMessageId: n4.parentMessageId, appleCriticalAlertOptions: n4.appleCriticalAlertOptions, file: r4, fileUrl: n4.url, fileName: n4.name, fileSize: n4.size, mimeType: n4.type, thumbnailSizes: null === (i4 = n4.thumbnails) || void 0 === i4 ? void 0 : i4.map(function(e3) {
    return { maxWidth: e3.width, maxHeight: e3.height };
  }) }));
};
var pn = function(e3) {
  return $t(e3) && (k(e3.file) || w("string", e3.fileUrl)) && w("string", e3.fileName, true) && w("string", e3.mimeType, true) && w("number", e3.fileSize, true) && (null === e3.thumbnailSizes || void 0 === e3.thumbnailSizes || Array.isArray(e3.thumbnailSizes) && e3.thumbnailSizes.every(function(e4) {
    return w("object", e4) && e4.maxWidth > 0 && e4.maxHeight > 0;
  }));
};
var mn = { data: void 0, customType: void 0, mentionType: K.USERS, mentionedUserIds: void 0, mentionedUsers: void 0, mentionedMessageTemplate: void 0, metaArrays: void 0, pushNotificationDeliveryOption: void 0, appleCriticalAlertOptions: void 0 };
var vn = function(e3) {
  return w("string", e3.data, true) && w("string", e3.customType, true) && S(K, e3.mentionType) && N("string", e3.mentionedUserIds, true) && N(es, e3.mentionedUsers, true) && w("string", e3.mentionedMessageTemplate, true) && N(je, e3.metaArrays, true) && S(Q, e3.pushNotificationDeliveryOption, true) && w(ze, e3.appleCriticalAlertOptions, true);
};
var yn = n(n({}, mn), { message: void 0, translationTargetLanguages: void 0, pollId: void 0 });
var _n = function(e3) {
  return vn(e3) && w("string", e3.message, true) && N("string", e3.translationTargetLanguages, true) && w("number", e3.pollId, true);
};
var gn = n({}, mn);
var bn = function(e3) {
  function t7(t8) {
    var n4 = t8.channelUrl, r4 = t8.channelType, s6 = t8.token, a5 = t8.limit, o3 = e3.call(this) || this;
    return o3.method = oe.GET, o3.path = "".concat(Ie(r4), "/").concat(encodeURIComponent(n4), "/operators"), o3.params = { token: s6, limit: a5 }, o3;
  }
  return t(t7, e3), t7;
}(xe);
var In = function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this;
    return r4.operators = n4.operators.map(function(e4) {
      return new es(t8, e4);
    }), r4.token = n4.next, r4;
  }
  return t(t7, e3), t7;
}(Ue);
var En = function(e3) {
  function t7(t8, n4, r4, i4) {
    return e3.call(this, t8, n4, r4, i4) || this;
  }
  return t(t7, e3), t7.prototype._validate = function() {
    return e3.prototype._validate.call(this);
  }, t7.prototype.next = function() {
    return r(this, void 0, void 0, function() {
      var e4, t8, r4, i4, s6, a5, o3;
      return s(this, function(c4) {
        switch (c4.label) {
          case 0:
            return this._validate() ? this._isLoading ? [3, 3] : (e4 = [], this._hasNext ? (this._isLoading = true, t8 = Ws.of(this._iid).requestQueue, r4 = new bn(n(n({}, this), { channelUrl: this.channelUrl, token: this._token })), [4, t8.send(r4)]) : [3, 2]) : [3, 5];
          case 1:
            return i4 = c4.sent(), s6 = i4.as(In), a5 = s6.operators, o3 = s6.token, this._token = o3, this._hasNext = !!o3, this._isLoading = false, [2, a5];
          case 2:
            return [2, e4];
          case 3:
            throw v.queryInProgress;
          case 4:
            return [3, 6];
          case 5:
            throw v.invalidParameters;
          case 6:
            return [2];
        }
      });
    });
  }, t7;
}(fo);
var Tn = function(e3) {
  function n4(t7, n5, r4, i4) {
    var s6, a5, o3, u4, c4, l3, d5, h4, f4, p4, m5 = this;
    return (m5 = e3.call(this, t7, n5, r4, i4) || this).reverse = false, m5.messageTypeFilter = G.ALL, m5.customTypesFilter = null, m5.senderUserIdsFilter = null, m5.replyType = B.NONE, m5.includeMetaArray = false, m5.includeReactions = false, m5.includeParentMessageInfo = false, m5.includeThreadInfo = false, m5.showSubchannelMessagesOnly = false, m5._edge = Number.MAX_SAFE_INTEGER, m5.reverse = null !== (s6 = i4.reverse) && void 0 !== s6 && s6, m5.messageTypeFilter = null !== (a5 = i4.messageTypeFilter) && void 0 !== a5 ? a5 : G.ALL, m5.customTypesFilter = null !== (o3 = i4.customTypesFilter) && void 0 !== o3 ? o3 : null, m5.senderUserIdsFilter = null !== (u4 = i4.senderUserIdsFilter) && void 0 !== u4 ? u4 : null, m5.replyType = null !== (c4 = i4.replyType) && void 0 !== c4 ? c4 : B.NONE, m5.includeMetaArray = null !== (l3 = i4.includeMetaArray) && void 0 !== l3 && l3, m5.includeReactions = null !== (d5 = i4.includeReactions) && void 0 !== d5 && d5, m5.includeParentMessageInfo = null !== (h4 = i4.includeParentMessageInfo) && void 0 !== h4 && h4, m5.includeThreadInfo = null !== (f4 = i4.includeThreadInfo) && void 0 !== f4 && f4, m5.showSubchannelMessagesOnly = null !== (p4 = i4.showSubchannelMessagesOnly) && void 0 !== p4 && p4, m5;
  }
  return t(n4, e3), n4.prototype._validate = function() {
    return e3.prototype._validate.call(this) && w("boolean", this.reverse) && S(G, this.messageTypeFilter) && S(B, this.replyType) && N("string", this.customTypesFilter, true) && N("string", this.senderUserIdsFilter, true) && w("boolean", this.includeMetaArray) && w("boolean", this.includeReactions) && w("boolean", this.includeParentMessageInfo) && w("boolean", this.includeThreadInfo) && w("boolean", this.showSubchannelMessagesOnly);
  }, n4.prototype.load = function() {
    return r(this, void 0, void 0, function() {
      var e4;
      return s(this, function(n5) {
        switch (n5.label) {
          case 0:
            return this._validate() ? this._isLoading ? [3, 3] : this._hasNext ? (this._isLoading = true, [4, ea.of(this._iid).getMessagesByTimestamp(this.channelUrl, this.channelType, this._edge, se({ prevResultSize: this.limit, nextResultSize: 0, isInclusive: false, reverse: this.reverse, messageTypeFilter: this.messageTypeFilter, customTypesFilter: this.customTypesFilter, replyType: this.replyType, senderUserIdsFilter: this.senderUserIdsFilter, includeReactions: this.includeReactions, includeMetaArray: this.includeMetaArray, includeParentMessageInfo: this.includeParentMessageInfo, includeThreadInfo: this.includeThreadInfo, showSubchannelMessagesOnly: this.showSubchannelMessagesOnly }))]) : [3, 2] : [3, 5];
          case 1:
            return e4 = n5.sent(), this._edge = Math.min.apply(Math, c([Number.MAX_SAFE_INTEGER], a(e4.map(function(e5) {
              return e5.createdAt;
            })), false)), this._hasNext = e4.length >= this.limit, this._isLoading = false, [2, e4];
          case 2:
            return [2, []];
          case 3:
            throw v.queryInProgress;
          case 4:
            return [3, 6];
          case 5:
            throw v.invalidParameters;
          case 6:
            return [2];
        }
      });
    });
  }, n4;
}(fo);
var wn = function(e3) {
  function t7(t8) {
    var n4 = this, r4 = t8.channelUrl, s6 = t8.channelType, a5 = t8.limit, o3 = t8.token;
    return (n4 = e3.call(this) || this).method = oe.GET, n4.path = "".concat(Ie(s6), "/").concat(encodeURIComponent(r4), "/mute"), n4.params = { limit: a5, token: o3 }, n4;
  }
  return t(t7, e3), t7;
}(xe);
var Mn = function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this;
    r4.mutedUsers = [];
    var i4 = n4.next, s6 = n4.muted_list;
    return r4.token = i4, s6 && s6.length > 0 && (r4.mutedUsers = s6.map(function(e4) {
      return new Yt(t8, e4);
    })), r4;
  }
  return t(t7, e3), t7;
}(Ue);
var Sn = function(e3) {
  function t7(t8, n4, r4, i4) {
    return e3.call(this, t8, n4, r4, i4) || this;
  }
  return t(t7, e3), t7.prototype.next = function() {
    return r(this, void 0, void 0, function() {
      var e4, t8, r4, i4, s6, a5;
      return s(this, function(o3) {
        switch (o3.label) {
          case 0:
            return this._validate() ? this._isLoading ? [3, 3] : this._hasNext ? (this._isLoading = true, e4 = Ws.of(this._iid).requestQueue, t8 = new wn(n(n({}, this), { token: this._token })), [4, e4.send(t8)]) : [3, 2] : [3, 5];
          case 1:
            return r4 = o3.sent(), i4 = r4.as(Mn), s6 = i4.mutedUsers, a5 = i4.token, this._token = a5, this._hasNext = !!a5, this._isLoading = false, [2, s6];
          case 2:
            return [2, []];
          case 3:
            throw v.queryInProgress;
          case 4:
            return [3, 6];
          case 5:
            throw v.invalidParameters;
          case 6:
            return [2];
        }
      });
    });
  }, t7;
}(fo);
var An = function(t7) {
  function n4(n5) {
    var r4 = this, s6 = n5.channelUrl, a5 = n5.channelType, o3 = n5.limit, u4 = n5.token;
    return (r4 = t7.call(this) || this).method = oe.GET, r4.path = "".concat(Ie(a5), "/").concat(encodeURIComponent(s6), "/ban"), r4.params = re({ limit: o3, token: u4 }), r4;
  }
  return t(n4, t7), n4;
}(xe);
var Un = function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this;
    r4.bannedUsers = [];
    var i4 = n4.next, s6 = n4.banned_list;
    return r4.token = i4, s6 && s6.length > 0 && (r4.bannedUsers = s6.map(function(e4) {
      return new Yt(t8, e4.user);
    })), r4;
  }
  return t(t7, e3), t7;
}(Ue);
var Nn = function(e3) {
  function t7(t8, n4, r4, i4) {
    return e3.call(this, t8, n4, r4, i4) || this;
  }
  return t(t7, e3), t7.prototype._validate = function() {
    return e3.prototype._validate.call(this);
  }, t7.prototype.next = function() {
    return r(this, void 0, void 0, function() {
      var e4, t8, r4, i4, s6, a5;
      return s(this, function(o3) {
        switch (o3.label) {
          case 0:
            return this._validate() ? this._isLoading ? [3, 3] : this._hasNext ? (this._isLoading = true, e4 = Ws.of(this._iid).requestQueue, t8 = new An(n(n({}, this), { token: this._token })), [4, e4.send(t8)]) : [3, 2] : [3, 5];
          case 1:
            return r4 = o3.sent(), i4 = r4.as(Un), s6 = i4.bannedUsers, a5 = i4.token, this._token = a5, this._hasNext = !!a5, this._isLoading = false, [2, s6];
          case 2:
            return [2, []];
          case 3:
            throw v.queryInProgress;
          case 4:
            return [3, 6];
          case 5:
            throw v.invalidParameters;
          case 6:
            return [2];
        }
      });
    });
  }, t7;
}(fo);
!function(e3) {
  e3.SPAM = "spam", e3.HARASSING = "harassing", e3.SUSPICIOUS = "suspicious", e3.INAPPROPRIATE = "inappropriate";
}(hn || (hn = {}));
var Cn = function(e3) {
  function t7(t8) {
    var n4 = this, r4 = t8.channelUrl, s6 = t8.channelType, a5 = t8.operatorUserIds;
    return (n4 = e3.call(this) || this).method = oe.POST, n4.path = "".concat(Ie(s6), "/").concat(encodeURIComponent(r4), "/operators"), n4.params = { operator_ids: a5 }, n4;
  }
  return t(t7, e3), t7;
}(xe);
!function(e3) {
  function t7() {
    return null !== e3 && e3.apply(this, arguments) || this;
  }
  t(t7, e3);
}(Ue);
var On = function(e3) {
  function t7(t8) {
    var n4 = this, r4 = t8.channelUrl, s6 = t8.channelType, a5 = t8.operatorUserIds;
    return (n4 = e3.call(this) || this).method = oe.DELETE, n4.path = "".concat(Ie(s6), "/").concat(encodeURIComponent(r4), "/operators"), n4.params = { operator_ids: a5 }, n4;
  }
  return t(t7, e3), t7;
}(xe);
!function(e3) {
  function t7(t8, n4) {
    return e3.call(this, t8, n4) || this;
  }
  t(t7, e3);
}(Ue);
var Pn = function(e3) {
  function t7(t8) {
    var n4 = this, r4 = t8.channelUrl, s6 = t8.channelType, a5 = t8.userId;
    return (n4 = e3.call(this) || this).method = oe.GET, n4.path = "".concat(Ie(s6), "/").concat(encodeURIComponent(r4), "/mute/").concat(a5), n4;
  }
  return t(t7, e3), t7;
}(xe);
var kn = function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this;
    r4.isMuted = false, r4.startAt = 0, r4.endAt = 0;
    var i4 = n4.is_muted, s6 = n4.start_at, a5 = n4.end_at, o3 = n4.remaining_duration, u4 = n4.description;
    return r4.isMuted = i4, r4.startAt = s6, r4.endAt = a5, r4.remainingDuration = o3, r4.description = u4, r4;
  }
  return t(t7, e3), t7;
}(Ue);
var Rn = function(e3) {
  function t7(t8) {
    var n4 = this, r4 = t8.channelUrl, s6 = t8.channelType, a5 = t8.keys;
    return (n4 = e3.call(this) || this).method = oe.GET, n4.path = "".concat(Ie(s6), "/").concat(encodeURIComponent(r4), "/metadata"), n4.params = { keys: a5, include_ts: true }, n4;
  }
  return t(t7, e3), t7;
}(xe);
var xn = function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this, i4 = n4.metadata, s6 = n4.ts;
    return r4.metadata = i4, r4.ts = s6, r4;
  }
  return t(t7, e3), t7;
}(Ue);
var Dn = function(e3) {
  function t7(t8) {
    var n4 = this, r4 = t8.channelUrl, s6 = t8.channelType, a5 = t8.metadata;
    return (n4 = e3.call(this) || this).method = oe.POST, n4.path = "".concat(Ie(s6), "/").concat(encodeURIComponent(r4), "/metadata"), n4.params = { metadata: a5, include_ts: true }, n4;
  }
  return t(t7, e3), t7;
}(xe);
var Ln = function(e3) {
  function t7(t8, n4) {
    var r4, i4, s6 = this;
    return (s6 = e3.call(this, t8, n4) || this).metaData = null !== (r4 = n4.metadata) && void 0 !== r4 ? r4 : {}, s6.ts = null !== (i4 = n4.ts) && void 0 !== i4 ? i4 : null, s6;
  }
  return t(t7, e3), t7;
}(Ue);
var Fn = function(e3) {
  function t7(t8) {
    var n4 = this, r4 = t8.channelUrl, s6 = t8.channelType, a5 = t8.metadata, o3 = t8.upsert;
    return (n4 = e3.call(this) || this).method = oe.PUT, n4.path = "".concat(Ie(s6), "/").concat(encodeURIComponent(r4), "/metadata"), n4.params = { metadata: a5, include_ts: true, upsert: null != o3 && o3 }, n4;
  }
  return t(t7, e3), t7;
}(xe);
var qn = function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this, i4 = n4.metadata, s6 = n4.ts;
    return r4.metadata = i4, r4.ts = s6, r4;
  }
  return t(t7, e3), t7;
}(Ue);
var zn = function(e3) {
  function t7(t8, n4, r4) {
    var i4 = e3.call(this, t8, "SYEV", r4) || this;
    return r4.data && (i4.created = r4.data.created, i4.updated = r4.data.updated, i4.deleted = r4.data.deleted), i4;
  }
  return t(t7, e3), t7;
}(Fe);
var Bn = function(e3) {
  function t7(t8) {
    var n4 = this, r4 = t8.channelUrl, s6 = t8.channelType, a5 = t8.key;
    return (n4 = e3.call(this) || this).method = oe.DELETE, n4.path = "".concat(Ie(s6), "/").concat(encodeURIComponent(r4), "/metadata/").concat(a5), n4.params = { include_ts: true }, n4;
  }
  return t(t7, e3), t7;
}(xe);
var Kn = function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this, i4 = n4.ts;
    return r4.ts = i4, r4;
  }
  return t(t7, e3), t7;
}(Ue);
var jn = function(e3) {
  function t7(t8) {
    var n4 = this, r4 = t8.channelUrl, s6 = t8.channelType;
    return (n4 = e3.call(this) || this).method = oe.DELETE, n4.path = "".concat(Ie(s6), "/").concat(encodeURIComponent(r4), "/metadata"), n4.params = { include_ts: true }, n4;
  }
  return t(t7, e3), t7;
}(xe);
var Qn = function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this, i4 = n4.ts;
    return r4.ts = i4, r4;
  }
  return t(t7, e3), t7;
}(Ue);
var Gn = function(e3) {
  function t7(t8) {
    var n4 = this, r4 = t8.channelUrl, s6 = t8.channelType, a5 = t8.keys;
    return (n4 = e3.call(this) || this).method = oe.GET, n4.path = "".concat(Ie(s6), "/").concat(encodeURIComponent(r4), "/metacounter"), n4.params = { keys: a5 }, n4;
  }
  return t(t7, e3), t7;
}(xe);
var Vn = function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this;
    return r4.metaCounter = n4, r4;
  }
  return t(t7, e3), t7;
}(Ue);
var Hn = function(e3) {
  function t7(t8) {
    var n4 = this, r4 = t8.channelUrl, s6 = t8.channelType, a5 = t8.metaCounter;
    return (n4 = e3.call(this) || this).method = oe.POST, n4.path = "".concat(Ie(s6), "/").concat(encodeURIComponent(r4), "/metacounter"), n4.params = { metacounter: a5 }, n4;
  }
  return t(t7, e3), t7;
}(xe);
var Wn = function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this;
    return r4.metaCounter = n4, r4;
  }
  return t(t7, e3), t7;
}(Ue);
var Yn = function(e3) {
  function t7(t8) {
    var n4 = this, r4 = t8.channelUrl, s6 = t8.channelType, a5 = t8.metaCounter, o3 = t8.upsert, u4 = void 0 !== o3 && o3, c4 = t8.mode, l3 = void 0 === c4 ? "set" : c4;
    return (n4 = e3.call(this) || this).method = oe.PUT, n4.path = "".concat(Ie(s6), "/").concat(encodeURIComponent(r4), "/metacounter"), n4.params = { metacounter: a5, upsert: u4, mode: l3 }, n4;
  }
  return t(t7, e3), t7;
}(xe);
var Jn = function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this;
    return r4.metaCounter = n4, r4;
  }
  return t(t7, e3), t7;
}(Ue);
var Xn = function(e3) {
  function t7(t8, n4, r4) {
    var i4 = e3.call(this, t8, "SYEV", r4) || this;
    return r4.data && (i4.created = r4.data.created, i4.updated = r4.data.updated, i4.deleted = r4.data.deleted), i4;
  }
  return t(t7, e3), t7;
}(Fe);
var Zn = function(e3) {
  function t7(t8) {
    var n4 = this, r4 = t8.channelUrl, s6 = t8.channelType, a5 = t8.key;
    return (n4 = e3.call(this) || this).method = oe.DELETE, n4.path = "".concat(Ie(s6), "/").concat(encodeURIComponent(r4), "/metacounter/").concat(a5), n4.params = {}, n4;
  }
  return t(t7, e3), t7;
}(xe);
!function(e3) {
  function t7(t8, n4) {
    return e3.call(this, t8, n4) || this;
  }
  t(t7, e3);
}(Ue);
var $n = function(e3) {
  function t7(t8) {
    var n4 = this, r4 = t8.channelUrl, s6 = t8.channelType;
    return (n4 = e3.call(this) || this).method = oe.DELETE, n4.path = "".concat(Ie(s6), "/").concat(encodeURIComponent(r4), "/metacounter"), n4.params = {}, n4;
  }
  return t(t7, e3), t7;
}(xe);
!function(e3) {
  function t7() {
    return null !== e3 && e3.apply(this, arguments) || this;
  }
  t(t7, e3);
}(Ue);
var er = function(e3) {
  function t7(t8) {
    var n4 = this, r4 = t8.channelUrl, s6 = t8.channelType, a5 = t8.userId, o3 = t8.seconds, u4 = t8.description;
    return (n4 = e3.call(this) || this).method = oe.POST, n4.path = "".concat(Ie(s6), "/").concat(encodeURIComponent(r4), "/mute"), n4.params = { user_id: a5, seconds: o3, description: u4 }, n4;
  }
  return t(t7, e3), t7;
}(xe);
!function(e3) {
  function t7(t8, n4) {
    return e3.call(this, t8, n4) || this;
  }
  t(t7, e3);
}(Ue);
var tr = function(e3) {
  function t7(t8, n4, r4) {
    var i4 = e3.call(this, t8, "SYEV", r4) || this;
    return i4.user = new Yt(t8, r4.data), i4;
  }
  return t(t7, e3), t7;
}(Fe);
var nr = function(e3) {
  function t7(t8) {
    var n4 = this, r4 = t8.channelUrl, s6 = t8.channelType, a5 = t8.userId;
    return (n4 = e3.call(this) || this).method = oe.DELETE, n4.path = "".concat(Ie(s6), "/").concat(encodeURIComponent(r4), "/mute/").concat(encodeURIComponent(a5)), n4;
  }
  return t(t7, e3), t7;
}(xe);
!function(e3) {
  function t7() {
    return null !== e3 && e3.apply(this, arguments) || this;
  }
  t(t7, e3);
}(Ue);
var rr = function(e3) {
  function t7(t8, n4, r4) {
    var i4 = e3.call(this, t8, "SYEV", r4) || this;
    return i4.user = new Yt(t8, r4.data), i4;
  }
  return t(t7, e3), t7;
}(Fe);
var ir = function(t7) {
  function n4(n5) {
    var r4 = this, s6 = n5.channelUrl, a5 = n5.channelType, o3 = n5.userId, u4 = n5.seconds, c4 = n5.description;
    return (r4 = t7.call(this) || this).method = oe.POST, r4.path = "".concat(Ie(a5), "/").concat(encodeURIComponent(s6), "/ban"), r4.params = re({ user_id: o3, seconds: u4, description: c4 }), r4;
  }
  return t(n4, t7), n4;
}(xe);
!function(e3) {
  function t7() {
    return null !== e3 && e3.apply(this, arguments) || this;
  }
  t(t7, e3);
}(Ue);
var sr = function(e3) {
  function t7(t8, n4, r4) {
    var i4 = e3.call(this, t8, "SYEV", r4) || this;
    return i4.user = new Yt(t8, r4.data), r4.data.member_count && (i4.memberCount = r4.data.member_count), r4.data.joined_member_count && (i4.joinedMemberCount = r4.data.joined_member_count), i4;
  }
  return t(t7, e3), t7;
}(Fe);
var ar = function(e3) {
  function t7(t8) {
    var n4 = this, r4 = t8.channelUrl, s6 = t8.channelType, a5 = t8.userId;
    return (n4 = e3.call(this) || this).method = oe.DELETE, n4.path = "".concat(Ie(s6), "/").concat(encodeURIComponent(r4), "/ban/").concat(encodeURIComponent(a5)), n4;
  }
  return t(t7, e3), t7;
}(xe);
!function(e3) {
  function t7() {
    return null !== e3 && e3.apply(this, arguments) || this;
  }
  t(t7, e3);
}(Ue);
var or = function(e3) {
  function t7(t8, n4, r4) {
    var i4 = e3.call(this, t8, "SYEV", r4) || this;
    return i4.user = new Yt(t8, r4.data), i4;
  }
  return t(t7, e3), t7;
}(Fe);
var ur = function(e3) {
  function t7(t8) {
    var n4 = this, r4 = t8.channelUrl, s6 = t8.channelType, a5 = t8.freezing;
    return (n4 = e3.call(this) || this).method = oe.PUT, n4.path = "".concat(Ie(s6), "/").concat(encodeURIComponent(r4), "/freeze"), n4.params = { freeze: a5 }, n4;
  }
  return t(t7, e3), t7;
}(xe);
!function(e3) {
  function t7() {
    return null !== e3 && e3.apply(this, arguments) || this;
  }
  t(t7, e3);
}(Ue);
var cr = function(e3) {
  function t7(t8, n4, r4) {
    var i4 = e3.call(this, t8, "SYEV", r4) || this;
    return i4.freeze = r4.data.freeze, i4;
  }
  return t(t7, e3), t7;
}(Fe);
var lr = function(e3) {
  function t7(t8) {
    var n4 = this, r4 = t8.channelUrl, s6 = t8.channelType, a5 = t8.category, o3 = t8.userId, u4 = t8.description;
    return (n4 = e3.call(this) || this).method = oe.POST, n4.path = "".concat(ke(s6), "/").concat(encodeURIComponent(r4)), n4.params = { report_category: a5, reporting_user_id: o3, report_description: u4 }, n4;
  }
  return t(t7, e3), t7;
}(xe);
var dr = function(e3) {
  function t7(t8) {
    var n4 = this, r4 = t8.channelUrl, s6 = t8.channelType, a5 = t8.category, o3 = t8.userId, u4 = t8.offendingUserId, c4 = t8.description;
    return (n4 = e3.call(this) || this).method = oe.POST, n4.path = "".concat(Ee, "/users/").concat(u4), n4.params = { channel_url: r4, channel_type: s6 === q.OPEN ? "open_channels" : "group_channels", report_category: a5, reporting_user_id: o3, report_description: c4 }, n4;
  }
  return t(t7, e3), t7;
}(xe);
var hr = function(t7) {
  function n4(n5) {
    var r4 = this, s6 = n5.channelUrl, a5 = n5.channelType, o3 = n5.category, u4 = n5.userId, c4 = n5.offendingUserId, l3 = n5.messageId, d5 = n5.description, h4 = n5.messageToken;
    return (r4 = t7.call(this) || this).method = oe.POST, r4.path = "".concat(ke(a5), "/").concat(encodeURIComponent(s6), "/messages/").concat(l3), r4.params = re({ report_category: o3, reporting_user_id: u4, report_description: d5, offending_user_id: c4, mesg_token: h4 }), r4;
  }
  return t(n4, t7), n4;
}(xe);
var fr = function(n4) {
  function i4(r4) {
    var i5 = [];
    return r4.mentionType === K.USERS && (r4.mentionedUserIds ? i5 = r4.mentionedUserIds : r4.mentionedUsers && (i5 = r4.mentionedUsers.map(function(e3) {
      return e3.userId;
    }))), n4.call(this, { code: "MESG", ackRequired: true, payload: re(se({ channel_url: r4.channelUrl, message: r4.message, data: r4.data, custom_type: r4.customType, metaarray: r4.metaArrays, mention_type: r4.mentionType, mentioned_user_ids: i5, mentioned_message_template: r4.mentionedMessageTemplate, target_langs: r4.translationTargetLanguages, push_option: r4.pushNotificationDeliveryOption && r4.pushNotificationDeliveryOption !== Q.DEFAULT ? r4.pushNotificationDeliveryOption : void 0, apple_critical_alert_options: r4.appleCriticalAlertOptions, silent: r4.silent, reply_to_channel: r4.isReplyToChannel, parent_message_id: r4.parentMessageId ? r4.parentMessageId : null, req_id: r4.reqId, poll_id: r4.pollId, pin_message: r4.isPinnedMessage, extended_message_payload: r4.extendedMessagePayload })) }) || this;
  }
  return t(i4, n4), i4;
}(qe);
var pr = function(e3) {
  function t7(t8, r4, i4) {
    var s6, a5, o3, u4, c4 = this;
    (c4 = e3.call(this, t8, "MESG", i4) || this).message = new It(t8, i4);
    var l3 = Ws.of(t8).sdkState;
    return c4.isMentioned = Oe(c4.message.mentionType, null !== (o3 = null !== (s6 = c4.message.mentionedUserIds) && void 0 !== s6 ? s6 : null === (a5 = c4.message.mentionedUsers) || void 0 === a5 ? void 0 : a5.map(function(e4) {
      return e4.userId;
    })) && void 0 !== o3 ? o3 : [], l3.userId), c4.forceUpdateLastMessage = null !== (u4 = i4.force_update_last_message) && void 0 !== u4 && u4, c4;
  }
  return t(t7, e3), t7;
}(Fe);
var mr2 = function(n4) {
  function i4(r4) {
    var i5 = null;
    return r4.mentionType === K.USERS && (r4.mentionedUserIds ? i5 = r4.mentionedUserIds : r4.mentionedUsers && (i5 = r4.mentionedUsers.map(function(e3) {
      return e3.userId;
    }))), n4.call(this, { code: "MEDI", ackRequired: true, payload: re(se({ channel_url: r4.channelUrl, msg_id: r4.messageId, message: r4.message, data: r4.data, custom_type: r4.customType, metaarray: r4.metaArrayParams, mention_type: r4.mentionType, mentioned_user_ids: i5, mentioned_message_template: r4.mentionedMessageTemplate, apple_critical_alert_options: r4.appleCriticalAlertOptions ? ze.payloadify(r4.appleCriticalAlertOptions) : null, poll_id: r4.pollId })) }) || this;
  }
  return t(i4, n4), i4;
}(qe);
var vr = function(e3) {
  function i4(r4, i5, s6) {
    var a5, o3, u4, c4, l3, d5 = this;
    (d5 = e3.call(this, r4, "MEDI", s6) || this).message = new It(r4, s6);
    var h4 = Ws.of(r4).sdkState;
    return d5.mentionCountChange = De({ mentionType: null === (a5 = s6.old_values) || void 0 === a5 ? void 0 : a5.mention_type, mentionedUserIds: null !== (u4 = null === (o3 = s6.old_values) || void 0 === o3 ? void 0 : o3.mentioned_user_ids) && void 0 !== u4 ? u4 : [] }, se({ mentionType: d5.message.mentionType, mentionedUserIds: null !== (c4 = d5.message.mentionedUserIds) && void 0 !== c4 ? c4 : null === (l3 = d5.message.mentionedUsers) || void 0 === l3 ? void 0 : l3.map(function(e4) {
      return e4.userId;
    }) }), h4.userId), d5;
  }
  return t(i4, e3), i4;
}(Fe);
var yr = function(n4) {
  function i4(r4) {
    var i5 = null;
    return r4.mentionType === K.USERS && (r4.mentionedUserIds ? i5 = r4.mentionedUserIds : r4.mentionedUsers && (i5 = r4.mentionedUsers.map(function(e3) {
      return e3.userId;
    }))), n4.call(this, { code: "FEDI", ackRequired: true, payload: re(se({ channel_url: r4.channelUrl, msg_id: r4.messageId, data: r4.data, custom_type: r4.customType, metaarray: r4.metaArrayParams, mention_type: r4.mentionType, mentioned_user_ids: i5, apple_critical_alert_options: r4.appleCriticalAlertOptions })) }) || this;
  }
  return t(i4, n4), i4;
}(qe);
var _r = function(e3) {
  function i4(r4, i5, s6) {
    var a5, o3, u4, c4, l3, d5 = this;
    (d5 = e3.call(this, r4, "FEDI", s6) || this).message = new St(r4, s6);
    var h4 = Ws.of(r4).sdkState;
    return d5.mentionCountChange = De({ mentionType: null === (a5 = s6.old_values) || void 0 === a5 ? void 0 : a5.mention_type, mentionedUserIds: null !== (u4 = null === (o3 = s6.old_values) || void 0 === o3 ? void 0 : o3.mentioned_user_ids) && void 0 !== u4 ? u4 : [] }, se({ mentionType: d5.message.mentionType, mentionedUserIds: null !== (c4 = d5.message.mentionedUserIds) && void 0 !== c4 ? c4 : null === (l3 = d5.message.mentionedUsers) || void 0 === l3 ? void 0 : l3.map(function(e4) {
      return e4.userId;
    }) }), h4.userId), d5;
  }
  return t(i4, e3), i4;
}(Fe);
var gr = function(e3) {
  function t7(t8) {
    var n4 = t8.channelType, r4 = t8.channelUrl, s6 = t8.messageId, a5 = t8.reactionKey, o3 = e3.call(this) || this;
    return o3.method = oe.POST, o3.path = "".concat(Ie(n4), "/").concat(encodeURIComponent(r4), "/messages/").concat(s6, "/reactions"), o3.params = { reaction: a5 }, o3;
  }
  return t(t7, e3), t7;
}(xe);
var br = function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this;
    return r4.reactionEvent = new De2(n4), r4;
  }
  return t(t7, e3), t7;
}(Ue);
var Ir2 = function(e3) {
  function t7(t8) {
    var n4 = t8.channelType, r4 = t8.channelUrl, s6 = t8.messageId, a5 = t8.reactionKey, o3 = e3.call(this) || this;
    return o3.method = oe.DELETE, o3.path = "".concat(Ie(n4), "/").concat(encodeURIComponent(r4), "/messages/").concat(s6, "/reactions"), o3.params = { reaction: a5 }, o3;
  }
  return t(t7, e3), t7;
}(xe);
var Er = function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this;
    return r4.reactionEvent = new De2(n({}, n4)), r4;
  }
  return t(t7, e3), t7;
}(Ue);
var Tr = function(e3) {
  function t7(t8) {
    var n4 = t8.channelType, r4 = t8.channelUrl, s6 = t8.messageId, a5 = t8.translationTargetLanguages, o3 = e3.call(this) || this;
    return o3.method = oe.POST, o3.path = "".concat(Ie(n4), "/").concat(encodeURIComponent(r4), "/messages/").concat(encodeURIComponent(s6), "/translation"), o3.params = { target_langs: a5 }, o3;
  }
  return t(t7, e3), t7;
}(xe);
var wr = function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this;
    return r4.message = new It(t8, n4), r4;
  }
  return t(t7, e3), t7;
}(Ue);
var Mr = function(n4) {
  function s6(r4) {
    var s7, a5 = this;
    a5 = n4.call(this) || this;
    var o3 = [];
    r4.mentionType === K.USERS && (r4.mentionedUserIds ? o3 = r4.mentionedUserIds : r4.mentionedUsers && (o3 = r4.mentionedUsers.map(function(e3) {
      return e3.userId;
    })));
    var u4 = r4.channelType, c4 = r4.channelUrl;
    return a5.method = oe.POST, a5.path = "".concat(Ie(u4), "/").concat(encodeURIComponent(c4), "/scheduled_messages"), a5.params = re(se({ req_id: r4.reqId, scheduled_at: r4.scheduledAt, message_type: j.USER, message: r4.message, custom_type: r4.customType, data: r4.data, mention_type: r4.mentionType, mentioned_user_ids: o3, sorted_metaarray: null === (s7 = r4.metaArrays) || void 0 === s7 ? void 0 : s7.map(function(e3) {
      return je.payloadify(e3);
    }), apple_critical_alert_options: r4.appleCriticalAlertOptions ? ze.payloadify(r4.appleCriticalAlertOptions) : null, target_langs: r4.translationTargetLanguages, push_option: r4.pushNotificationDeliveryOption })), a5;
  }
  return t(s6, n4), s6;
}(xe);
var Sr2 = function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this;
    return r4.message = new It(t8, n4), r4;
  }
  return t(t7, e3), t7;
}(Ue);
var Ar2 = function(e3) {
  function n4(n5) {
    var r4, s6, a5 = this;
    a5 = e3.call(this) || this;
    var o3 = [];
    n5.mentionType === K.USERS && (n5.mentionedUserIds ? o3 = n5.mentionedUserIds : n5.mentionedUsers && (o3 = n5.mentionedUsers.map(function(e4) {
      return e4.userId;
    })));
    var u4 = n5.channelType, c4 = n5.channelUrl;
    return a5.method = oe.POST, a5.path = "".concat(Ie(u4), "/").concat(encodeURIComponent(c4), "/scheduled_messages"), a5.params = se({ req_id: n5.reqId, scheduled_at: n5.scheduledAt, message_type: j.FILE, url: n5.fileUrl, file_name: n5.fileName, file_size: n5.fileSize, file_type: n5.mimeType, thumbnails: null === (r4 = n5._thumbnails) || void 0 === r4 ? void 0 : r4.map(function(e4) {
      return Oe2.payloadify(e4);
    }), custom_type: n5.customType, data: n5.data, require_auth: n5.requireAuth, mention_type: n5.mentionType, mentioned_user_ids: o3, sorted_metaarray: null === (s6 = n5.metaArrays) || void 0 === s6 ? void 0 : s6.map(function(e4) {
      return je.payloadify(e4);
    }), apple_critical_alert_options: n5.appleCriticalAlertOptions ? ze.payloadify(n5.appleCriticalAlertOptions) : null, push_option: n5.pushNotificationDeliveryOption }), a5;
  }
  return t(n4, e3), n4;
}(xe);
var Ur = function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this;
    return r4.message = new St(t8, n4), r4;
  }
  return t(t7, e3), t7;
}(Ue);
var Nr2 = function(e3) {
  function t7(t8) {
    var n4 = t8.pollId, r4 = t8.title, s6 = t8.data, a5 = t8.allowUserSuggestion, o3 = t8.allowMultipleVotes, u4 = t8.closeAt, c4 = e3.call(this) || this;
    return c4.method = oe.PUT, c4.path = "".concat(be, "/").concat(encodeURIComponent(n4)), c4.params = { title: r4, data: s6, allow_user_suggestion: a5, allow_multiple_votes: o3, close_at: u4 }, c4;
  }
  return t(t7, e3), t7;
}(xe);
var Cr = function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this;
    return r4.poll = new ho(t8, n4), r4;
  }
  return t(t7, e3), t7;
}(Ue);
var Or = function(e3) {
  function t7(t8) {
    var n4 = t8.pollId, r4 = e3.call(this) || this;
    return r4.method = oe.DELETE, r4.path = "".concat(be, "/").concat(encodeURIComponent(n4)), r4;
  }
  return t(t7, e3), t7;
}(xe);
!function(e3) {
  function t7() {
    return null !== e3 && e3.apply(this, arguments) || this;
  }
  t(t7, e3);
}(Ue);
var Pr = function(e3) {
  function t7(t8) {
    var n4 = t8.pollId, r4 = e3.call(this) || this;
    return r4.method = oe.PUT, r4.path = "".concat(be, "/").concat(encodeURIComponent(n4), "/close"), r4;
  }
  return t(t7, e3), t7;
}(xe);
var kr2 = function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this;
    return r4.poll = new ho(t8, n4), r4;
  }
  return t(t7, e3), t7;
}(Ue);
var Rr = function(e3) {
  function t7(t8) {
    var n4 = t8.channelUrl, r4 = t8.channelType, s6 = t8.pollId, a5 = t8.optionText, o3 = e3.call(this) || this;
    return o3.method = oe.POST, o3.path = "".concat(be, "/").concat(encodeURIComponent(s6), "/options"), o3.params = { channel_url: n4, channel_type: r4, text: a5 }, o3;
  }
  return t(t7, e3), t7;
}(xe);
var xr2 = function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this;
    return r4.poll = new ho(t8, n4), r4;
  }
  return t(t7, e3), t7;
}(Ue);
var Dr = function(e3) {
  function t7(t8) {
    var n4 = t8.pollId, r4 = t8.pollOptionId, s6 = t8.optionText, a5 = e3.call(this) || this;
    return a5.method = oe.PUT, a5.path = "".concat(be, "/").concat(encodeURIComponent(n4), "/options/").concat(encodeURIComponent(r4)), a5.params = { text: s6 }, a5;
  }
  return t(t7, e3), t7;
}(xe);
var Lr = function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this;
    return r4.poll = new ho(t8, n4), r4;
  }
  return t(t7, e3), t7;
}(Ue);
var Fr = function(e3) {
  function t7(t8) {
    var n4 = t8.pollId, r4 = t8.pollOptionId, s6 = e3.call(this) || this;
    return s6.method = oe.DELETE, s6.path = "".concat(be, "/").concat(encodeURIComponent(n4), "/options/").concat(encodeURIComponent(r4)), s6;
  }
  return t(t7, e3), t7;
}(xe);
!function(e3) {
  function t7() {
    return null !== e3 && e3.apply(this, arguments) || this;
  }
  t(t7, e3);
}(Ue);
var qr = function(t7) {
  function n4(n5) {
    var r4 = n5.reqId, i4 = n5.channelType, s6 = n5.channelUrl, a5 = n5.pollId, o3 = n5.pollOptionIds;
    return t7.call(this, { code: "VOTE", ackRequired: true, payload: re({ req_id: r4, channel_type: i4 === q.OPEN ? "open_channels" : "group_channels", channel_url: s6, poll_id: a5, option_ids: o3 }) }) || this;
  }
  return t(n4, t7), n4;
}(qe);
var zr2 = function(e3) {
  function t7(t8, n4, r4) {
    var i4 = e3.call(this, t8, "VOTE", r4) || this;
    return i4.event = new po(r4), i4.channelUrl = r4.channel_url, i4.channelType = r4.channel_type, i4;
  }
  return t(t7, e3), t7;
}(Fe);
var Br = 100;
var Kr = "GroupChannel";
var jr = "url";
var Qr = 100;
var Gr = "Message";
var Vr2 = "messageId";
var Wr = "NotificationMessage";
var Yr2 = "notificationId";
var Jr2 = "Poll";
var Xr2 = "pollId";
var $r = "FeedChannel";
var ei = "url";
function ti(e3) {
  var n4, r4, i4;
  return null !== (n4 = e3.messageParams) && void 0 !== n4 ? n4 : se(n(n({}, e3), { isReplyToChannel: false, mentionedUserIds: null !== (r4 = e3.mentionedUserIds) && void 0 !== r4 ? r4 : null === (i4 = e3.mentionedUsers) || void 0 === i4 ? void 0 : i4.map(function(e4) {
    return e4.userId;
  }), pushNotificationDeliveryOption: Q.DEFAULT, isPinnedMessage: false, fileInfoList: e3.fileInfoList.map(function(e4) {
    var t7;
    return { fileUrl: e4.plainUrl, fileName: e4.fileName, fileSize: e4.fileSize, mimeType: e4.mimeType, thumbnailSizes: null === (t7 = e4.thumbnails) || void 0 === t7 ? void 0 : t7.map(function(e5) {
      return { maxWidth: e5.width, maxHeight: e5.height };
    }), _thumbnails: e4.thumbnails, _uploadedMetaData: { requireAuth: e4._requireAuth, isUploaded: true } };
  }) }));
}
var ni = n(n({}, Zt), { fileInfoList: [] });
var ri = function(e3) {
  return (k(e3.file) || w("string", e3.fileUrl)) && w("string", e3.fileName, true) && w("string", e3.mimeType, true) && w("number", e3.fileSize, true) && (void 0 === e3.thumbnailSizes || Array.isArray(e3.thumbnailSizes) && e3.thumbnailSizes.every(function(e4) {
    return e4.maxWidth > 0 && e4.maxHeight > 0;
  }));
};
var ii = function(e3) {
  function t7() {
    var t8 = null !== e3 && e3.apply(this, arguments) || this;
    return t8._onFileUploaded = st, t8;
  }
  return t(t7, e3), t7.prototype._triggerOnFileUploaded = function(e4, t8, n4, r4) {
    this._onFileUploaded(e4, t8, n4, r4);
  }, t7.prototype.onFileUploaded = function(e4) {
    return this._onFileUploaded = e4, this;
  }, t7.prototype.onPending = function(t8) {
    return e3.prototype.onPending.call(this, t8), this;
  }, t7.prototype.onFailed = function(t8) {
    return e3.prototype.onFailed.call(this, t8), this;
  }, t7.prototype.onSucceeded = function(t8) {
    return e3.prototype.onSucceeded.call(this, t8), this;
  }, t7;
}(Xt);
var si = function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8) || this;
    return r4.message = null, r4.message = Mt(t8, n4.message), r4;
  }
  return t(t7, e3), t7;
}(zr);
var ai = function(t7) {
  function n4(n5) {
    var r4 = this, s6 = n5.channelType, a5 = n5.channelUrl, o3 = n5.limit, u4 = n5.token, c4 = n5.includeReactions, l3 = n5.includeMetaArray, d5 = n5.includeParentMessageInfo, h4 = n5.includeThreadInfo, f4 = n5.includePollDetails;
    return (r4 = t7.call(this) || this).method = oe.GET, r4.path = "".concat(Ie(s6), "/").concat(encodeURIComponent(a5), "/pinned_messages"), r4.params = re({ limit: o3, token: u4, include_reactions: c4, with_sorted_meta_array: l3, include_thread_info: h4, include_parent_message_info: d5, include_poll_details: f4 }), r4;
  }
  return t(n4, t7), n4;
}(xe);
var oi = function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this, i4 = n4.pinned_messages, s6 = n4.has_more, a5 = n4.next;
    return r4.pinnedMessages = i4.map(function(e4) {
      return new si(t8, e4);
    }), r4.hasMore = s6, r4.token = a5, r4;
  }
  return t(t7, e3), t7;
}(Ue);
var ui = function(e3) {
  function t7(t8, n4, r4, i4) {
    var s6 = e3.call(this, t8, n4, r4, i4) || this;
    return s6.includeMetaArray = i4.includeMetaArray, s6.includeReactions = i4.includeReactions, s6.includeParentMessageInfo = i4.includeParentMessageInfo, s6.includeThreadInfo = i4.includeThreadInfo, s6.includePollDetails = i4.includePollDetails, s6;
  }
  return t(t7, e3), t7.prototype._validate = function() {
    return e3.prototype._validate.call(this) && w("boolean", this.includeMetaArray, true) && w("boolean", this.includeReactions, true) && w("boolean", this.includeParentMessageInfo, true) && w("boolean", this.includeThreadInfo, true) && w("boolean", this.includePollDetails, true);
  }, t7.prototype.next = function() {
    return r(this, void 0, void 0, function() {
      var e4, t8, r4, i4, s6, a5, o3;
      return s(this, function(c4) {
        switch (c4.label) {
          case 0:
            return this._validate() ? this._isLoading ? [3, 3] : this._hasNext ? (this._isLoading = true, e4 = Ws.of(this._iid).requestQueue, t8 = new ai(n(n({}, this), { token: this._token })), [4, e4.send(t8)]) : [3, 2] : [3, 5];
          case 1:
            return r4 = c4.sent(), i4 = r4.as(oi), s6 = i4.pinnedMessages, a5 = i4.hasMore, o3 = i4.token, this._token = o3, this._hasNext = !!a5, this._isLoading = false, [2, s6];
          case 2:
            return [2, []];
          case 3:
            throw v.queryInProgress;
          case 4:
            return [3, 6];
          case 5:
            throw v.invalidParameters;
          case 6:
            return [2];
        }
      });
    });
  }, t7;
}(fo);
var ci = function(e3) {
  function t7(t8) {
    var n4 = t8.channelType, r4 = t8.channelUrl, s6 = t8.messageId, a5 = e3.call(this) || this;
    return a5.method = oe.POST, a5.path = "".concat(Ie(n4), "/").concat(encodeURIComponent(r4), "/messages/").concat(s6, "/pin"), a5;
  }
  return t(t7, e3), t7;
}(xe);
!function(e3) {
  function t7(t8, n4) {
    return e3.call(this, t8, n4) || this;
  }
  t(t7, e3);
}(Ue);
var li = function(e3) {
  function t7(t8) {
    var n4 = t8.channelType, r4 = t8.channelUrl, s6 = t8.messageId, a5 = e3.call(this) || this;
    return a5.method = oe.DELETE, a5.path = "".concat(Ie(n4), "/").concat(encodeURIComponent(r4), "/messages/").concat(s6, "/pin"), a5;
  }
  return t(t7, e3), t7;
}(xe);
!function(e3) {
  function t7(t8, n4) {
    return e3.call(this, t8, n4) || this;
  }
  t(t7, e3);
}(Ue);
var di;
var hi = 2;
!function(e3) {
  e3.SEND = "send", e3.RESEND = "resend", e3.COPY = "copy";
}(di || (di = {}));
var fi;
var pi = function(i4) {
  function s6(e3, t7) {
    var n4, r4, s7, a5, o3, u4, l3, d5 = this;
    return (d5 = i4.call(this, e3) || this)._name = "", d5._createdAt = 0, d5.pinnedMessageIds = [], d5.channelType = q.BASE, d5.coverUrl = "", d5.customType = "", d5.data = "", d5.isFrozen = false, d5.isEphemeral = false, d5.creator = null, d5._messageCollectionLastAccessedAt = 0, d5._url = t7.channel_url, d5._name = null !== (n4 = t7.name) && void 0 !== n4 ? n4 : "", d5._createdAt = 1e3 * t7.created_at, d5.coverUrl = null !== (r4 = t7.cover_url) && void 0 !== r4 ? r4 : "", d5.customType = null !== (s7 = t7.custom_type) && void 0 !== s7 ? s7 : "", d5.data = null !== (a5 = t7.data) && void 0 !== a5 ? a5 : "", d5.isFrozen = null !== (o3 = t7.freeze) && void 0 !== o3 && o3, d5.isEphemeral = null !== (u4 = t7.is_ephemeral) && void 0 !== u4 && u4, d5.creator = t7.created_by ? new es(d5._iid, t7.created_by) : null, t7.metadata && Object.keys(t7.metadata).length > 0 && t7.ts ? (d5._cachedMetaData = /* @__PURE__ */ new Map(), Object.keys(t7.metadata).forEach(function(e4) {
      d5._cachedMetaData.set(e4, { value: t7.metadata[e4], isRemoved: false, updatedAt: t7.ts });
    })) : "string" == typeof t7.metadata && (d5._cachedMetaData = new Map(Object.entries(JSON.parse(t7.metadata)))), d5.pinnedMessageIds = null !== (l3 = t7.pinned_message_ids) && void 0 !== l3 ? l3 : [], d5;
  }
  return t(s6, i4), Object.defineProperty(s6.prototype, "url", { get: function() {
    return this._url;
  }, enumerable: false, configurable: true }), Object.defineProperty(s6.prototype, "name", { get: function() {
    return this._name;
  }, set: function(e3) {
    this._name = e3;
  }, enumerable: false, configurable: true }), Object.defineProperty(s6.prototype, "createdAt", { get: function() {
    return this._createdAt;
  }, enumerable: false, configurable: true }), s6.prototype.toJSON = function() {
    return n(n({}, this), { url: this._url, name: this._name, createdAt: this._createdAt });
  }, s6.payloadify = function(n4) {
    return re(se(n(n({}, i4.payloadify.call(this, n4)), { channel_url: n4.url, name: n4.name, cover_url: n4.coverUrl, custom_type: n4.customType, data: n4.data, freeze: n4.isFrozen, is_ephemeral: n4.isEphemeral, created_by: n4.creator ? es.payloadify(n4.creator) : null, created_at: n4.createdAt / 1e3, metadata: n4.cachedMetaData, pinned_message_ids: n4.pinnedMessageIds })));
  }, s6.prototype.isGroupChannel = function() {
    return this.channelType === q.GROUP;
  }, s6.prototype.isOpenChannel = function() {
    return this.channelType === q.OPEN;
  }, s6.prototype.isFeedChannel = function() {
    return this.channelType === q.FEED;
  }, Object.defineProperty(s6.prototype, "cachedMetaData", { get: function() {
    var e3 = {};
    return this._cachedMetaData ? (this._cachedMetaData.forEach(function(t7, n4) {
      t7.isRemoved || (e3[n4] = t7.value);
    }), e3) : e3;
  }, enumerable: false, configurable: true }), Object.defineProperty(s6.prototype, "messageCollectionLastAccessedAt", { get: function() {
    return this._messageCollectionLastAccessedAt;
  }, enumerable: false, configurable: true }), s6.prototype._serializeCachedMetaData = function() {
    return this._cachedMetaData ? { cachedMetaData: JSON.stringify(Object.fromEntries(this._cachedMetaData)) } : {};
  }, s6.prototype._updateMessageCollectionLastAccessedAt = function() {
    this._messageCollectionLastAccessedAt = Date.now();
  }, s6.prototype._update = function(t7) {
    var n4 = re(t7);
    Object.assign(this, n4);
  }, s6.prototype._upsertCachedMetaData = function(e3, t7) {
    var n4 = this;
    Object.keys(e3).forEach(function(r4) {
      n4._cachedMetaData || (n4._cachedMetaData = /* @__PURE__ */ new Map());
      var i5 = n4._cachedMetaData.get(r4);
      (!i5 || i5.updatedAt <= t7) && n4._cachedMetaData.set(r4, { value: e3[r4], isRemoved: false, updatedAt: t7 });
    });
  }, s6.prototype._updateCachedMetaData = function(e3, t7) {
    var n4 = this, r4 = false;
    return this._cachedMetaData ? this._cachedMetaData.forEach(function(i5, s7) {
      var a5;
      i5.updatedAt <= t7 && (n4._cachedMetaData.set(s7, { value: null !== (a5 = e3[s7]) && void 0 !== a5 ? a5 : i5.value, isRemoved: !e3[s7], updatedAt: t7 }), r4 = true);
    }) : (this._cachedMetaData = /* @__PURE__ */ new Map(), Object.keys(e3).forEach(function(r5) {
      n4._cachedMetaData.set(r5, { value: e3[r5], isRemoved: false, updatedAt: t7 });
    }), r4 = true), { isUpdated: r4 };
  }, s6.prototype._removeFromCachedMetaData = function(e3, t7) {
    var n4 = this;
    this._cachedMetaData && e3.forEach(function(e4) {
      var r4 = n4._cachedMetaData.get(e4);
      r4 && r4.updatedAt < t7 && (r4.isRemoved = true, r4.updatedAt = t7);
    });
  }, s6.prototype._clearCachedMetaData = function() {
    this._cachedMetaData && this._cachedMetaData.clear();
  }, s6.prototype._runIfHandleableWithGroupChannel = function(e3) {
    this.isGroupChannel() ? e3(this) : this.isFeedChannel() && e3(this.groupChannel);
  }, s6.prototype._generateRequestId = function() {
    return "rq-".concat($());
  }, s6.prototype.isIdentical = function(e3) {
    return e3 && this.url === e3.url;
  }, s6.prototype.isEqual = function(e3) {
    return y(this, e3);
  }, s6.prototype.createOperatorListQuery = function(e3) {
    return void 0 === e3 && (e3 = {}), new En(this._iid, this.url, this.channelType, e3);
  }, s6.prototype.createMutedUserListQuery = function(e3) {
    return void 0 === e3 && (e3 = {}), new Sn(this._iid, this.url, this.channelType, e3);
  }, s6.prototype.createBannedUserListQuery = function(e3) {
    return void 0 === e3 && (e3 = {}), new Nn(this._iid, this.url, this.channelType, e3);
  }, s6.prototype.createPreviousMessageListQuery = function(e3) {
    return void 0 === e3 && (e3 = {}), new Tn(this._iid, this.url, this.channelType, e3);
  }, s6.prototype.createPinnedMessageListQuery = function(e3) {
    return void 0 === e3 && (e3 = {}), new ui(this._iid, this.url, this.channelType, e3);
  }, s6.prototype.addOperators = function(e3) {
    return r(this, void 0, void 0, function() {
      var t7, r4;
      return s(this, function(i5) {
        switch (i5.label) {
          case 0:
            return Jr(N("string", e3)).throw(v.invalidParameters), t7 = Ws.of(this._iid).requestQueue, r4 = new Cn({ channelUrl: this.url, channelType: this.channelType, operatorUserIds: e3 }), [4, t7.send(r4)];
          case 1:
            return i5.sent(), [2];
        }
      });
    });
  }, s6.prototype.removeOperators = function(e3) {
    return r(this, void 0, void 0, function() {
      var t7, r4;
      return s(this, function(i5) {
        switch (i5.label) {
          case 0:
            return Jr(N("string", e3)).throw(v.invalidParameters), t7 = Ws.of(this._iid).requestQueue, r4 = new On({ channelUrl: this.url, channelType: this.channelType, operatorUserIds: e3 }), [4, t7.send(r4)];
          case 1:
            return i5.sent(), [2];
        }
      });
    });
  }, s6.prototype.getMyMutedInfo = function() {
    return r(this, void 0, void 0, function() {
      var e3, t7, r4, i5, s7, a5, o3, u4, c4, l3, d5;
      return s(this, function(h4) {
        switch (h4.label) {
          case 0:
            return e3 = Ws.of(this._iid), t7 = e3.sdkState, r4 = e3.requestQueue, i5 = new Pn({ channelUrl: this.url, channelType: this.channelType, userId: t7.userId }), [4, r4.send(i5)];
          case 1:
            return s7 = h4.sent(), a5 = s7.as(kn), o3 = a5.isMuted, u4 = a5.startAt, c4 = a5.endAt, l3 = a5.remainingDuration, d5 = a5.description, [2, { isMuted: o3, startAt: u4, endAt: c4, remainingDuration: l3, description: d5 }];
        }
      });
    });
  }, s6.prototype.getMetaData = function(e3) {
    return r(this, void 0, void 0, function() {
      var t7, r4, i5, s7, a5, o3;
      return s(this, function(u4) {
        switch (u4.label) {
          case 0:
            return Jr(N("string", e3)).throw(v.invalidParameters), t7 = Ws.of(this._iid).requestQueue, r4 = new Rn({ channelUrl: this.url, channelType: this.channelType, keys: e3 }), [4, t7.send(r4)];
          case 1:
            return i5 = u4.sent(), s7 = i5.as(xn), a5 = s7.metadata, o3 = s7.ts, this._upsertCachedMetaData(a5, o3), [2, a5];
        }
      });
    });
  }, s6.prototype.getAllMetaData = function() {
    return r(this, void 0, void 0, function() {
      var e3, t7, r4, i5, s7, a5;
      return s(this, function(o3) {
        switch (o3.label) {
          case 0:
            return e3 = Ws.of(this._iid).requestQueue, t7 = new Rn({ channelUrl: this.url, channelType: this.channelType, keys: [] }), [4, e3.send(t7)];
          case 1:
            return r4 = o3.sent(), i5 = r4.as(xn), s7 = i5.metadata, a5 = i5.ts, this._updateCachedMetaData(s7, a5), [2, s7];
        }
      });
    });
  }, s6.prototype.createMetaData = function(e3) {
    return r(this, void 0, void 0, function() {
      var t7, r4, i5, s7;
      return s(this, function(a5) {
        switch (a5.label) {
          case 0:
            return t7 = Ws.of(this._iid).requestQueue, r4 = new Dn({ channelUrl: this.url, channelType: this.channelType, metadata: e3 }), [4, t7.send(r4)];
          case 1:
            return i5 = a5.sent(), s7 = i5.as(Ln).metaData, this._upsertCachedMetaData(s7, 0), [2, s7];
        }
      });
    });
  }, s6.prototype.updateMetaData = function(e3, t7) {
    return void 0 === t7 && (t7 = false), r(this, void 0, void 0, function() {
      var r4, i5, s7, a5, o3, u4;
      return s(this, function(c4) {
        switch (c4.label) {
          case 0:
            return r4 = Ws.of(this._iid).requestQueue, i5 = new Fn({ channelUrl: this.url, channelType: this.channelType, metadata: e3, upsert: t7 }), [4, r4.send(i5)];
          case 1:
            return s7 = c4.sent(), a5 = s7.as(qn), o3 = a5.metadata, u4 = a5.ts, this._upsertCachedMetaData(o3, u4), [2, o3];
        }
      });
    });
  }, s6.prototype.deleteMetaData = function(e3) {
    return r(this, void 0, void 0, function() {
      var t7, r4, i5, s7;
      return s(this, function(a5) {
        switch (a5.label) {
          case 0:
            return Jr(w("string", e3)).throw(v.invalidParameters), t7 = Ws.of(this._iid).requestQueue, r4 = new Bn({ channelUrl: this.url, channelType: this.channelType, key: e3 }), [4, t7.send(r4)];
          case 1:
            return i5 = a5.sent(), s7 = i5.as(Kn).ts, this._removeFromCachedMetaData([e3], s7), [2];
        }
      });
    });
  }, s6.prototype.deleteAllMetaData = function() {
    return r(this, void 0, void 0, function() {
      var e3, t7, r4, i5;
      return s(this, function(s7) {
        switch (s7.label) {
          case 0:
            return e3 = Ws.of(this._iid).requestQueue, t7 = new jn({ channelUrl: this.url, channelType: this.channelType }), [4, e3.send(t7)];
          case 1:
            return r4 = s7.sent(), i5 = r4.as(Qn).ts, this._removeFromCachedMetaData(c([], a(this._cachedMetaData.keys()), false), i5), [2];
        }
      });
    });
  }, s6.prototype.getMetaCounters = function(e3) {
    return r(this, void 0, void 0, function() {
      var t7, r4, i5;
      return s(this, function(s7) {
        switch (s7.label) {
          case 0:
            return Jr(N("string", e3)).throw(v.invalidParameters), t7 = Ws.of(this._iid).requestQueue, r4 = new Gn({ channelUrl: this.url, channelType: this.channelType, keys: e3 }), [4, t7.send(r4)];
          case 1:
            return i5 = s7.sent(), [2, i5.as(Vn).metaCounter];
        }
      });
    });
  }, s6.prototype.getAllMetaCounters = function() {
    return r(this, void 0, void 0, function() {
      var e3, t7, r4;
      return s(this, function(i5) {
        switch (i5.label) {
          case 0:
            return e3 = Ws.of(this._iid).requestQueue, t7 = new Gn({ channelUrl: this.url, channelType: this.channelType, keys: [] }), [4, e3.send(t7)];
          case 1:
            return r4 = i5.sent(), [2, r4.as(Vn).metaCounter];
        }
      });
    });
  }, s6.prototype.createMetaCounters = function(e3) {
    return r(this, void 0, void 0, function() {
      var t7, r4, i5;
      return s(this, function(s7) {
        switch (s7.label) {
          case 0:
            return t7 = Ws.of(this._iid).requestQueue, r4 = new Hn({ channelUrl: this.url, channelType: this.channelType, metaCounter: e3 }), [4, t7.send(r4)];
          case 1:
            return i5 = s7.sent(), [2, i5.as(Wn).metaCounter];
        }
      });
    });
  }, s6.prototype.updateMetaCounters = function(e3, t7) {
    return void 0 === t7 && (t7 = false), r(this, void 0, void 0, function() {
      var r4, i5, s7;
      return s(this, function(a5) {
        switch (a5.label) {
          case 0:
            return r4 = Ws.of(this._iid).requestQueue, i5 = new Yn({ channelUrl: this.url, channelType: this.channelType, metaCounter: e3, upsert: t7 }), [4, r4.send(i5)];
          case 1:
            return s7 = a5.sent(), [2, s7.as(Jn).metaCounter];
        }
      });
    });
  }, s6.prototype.increaseMetaCounters = function(e3) {
    return r(this, void 0, void 0, function() {
      var t7, r4, i5;
      return s(this, function(s7) {
        switch (s7.label) {
          case 0:
            return t7 = Ws.of(this._iid).requestQueue, r4 = new Yn({ channelUrl: this.url, channelType: this.channelType, metaCounter: e3, upsert: false, mode: "increase" }), [4, t7.send(r4)];
          case 1:
            return i5 = s7.sent(), [2, i5.as(Jn).metaCounter];
        }
      });
    });
  }, s6.prototype.decreaseMetaCounters = function(e3) {
    return r(this, void 0, void 0, function() {
      var t7, r4, i5;
      return s(this, function(s7) {
        switch (s7.label) {
          case 0:
            return t7 = Ws.of(this._iid).requestQueue, r4 = new Yn({ channelUrl: this.url, channelType: this.channelType, metaCounter: e3, upsert: false, mode: "decrease" }), [4, t7.send(r4)];
          case 1:
            return i5 = s7.sent(), [2, i5.as(Jn).metaCounter];
        }
      });
    });
  }, s6.prototype.deleteMetaCounter = function(e3) {
    return r(this, void 0, void 0, function() {
      var t7, r4;
      return s(this, function(i5) {
        switch (i5.label) {
          case 0:
            return Jr(w("string", e3)).throw(v.invalidParameters), t7 = Ws.of(this._iid).requestQueue, r4 = new Zn({ channelUrl: this.url, channelType: this.channelType, key: e3 }), [4, t7.send(r4)];
          case 1:
            return i5.sent(), [2];
        }
      });
    });
  }, s6.prototype.deleteAllMetaCounters = function() {
    return r(this, void 0, void 0, function() {
      var e3, t7;
      return s(this, function(r4) {
        switch (r4.label) {
          case 0:
            return e3 = Ws.of(this._iid).requestQueue, t7 = new $n({ channelUrl: this.url, channelType: this.channelType }), [4, e3.send(t7)];
          case 1:
            return r4.sent(), [2];
        }
      });
    });
  }, s6.prototype.muteUser = function(e3, t7, n4) {
    return r(this, void 0, void 0, function() {
      return s(this, function(r4) {
        return [2, this.muteUserWithUserId(e3.userId, t7, n4)];
      });
    });
  }, s6.prototype.muteUserWithUserId = function(e3, t7, r4) {
    return r(this, void 0, void 0, function() {
      var i5, s7;
      return s(this, function(a5) {
        switch (a5.label) {
          case 0:
            return Jr(w("string", e3) && w("number", t7, true) && w("string", r4, true)).throw(v.invalidParameters), i5 = Ws.of(this._iid).requestQueue, s7 = new er({ channelUrl: this.url, channelType: this.channelType, userId: e3, seconds: t7, description: r4 }), [4, i5.send(s7)];
          case 1:
            return a5.sent(), [2];
        }
      });
    });
  }, s6.prototype.unmuteUser = function(e3) {
    return r(this, void 0, void 0, function() {
      return s(this, function(t7) {
        return [2, this.unmuteUserWithUserId(e3.userId)];
      });
    });
  }, s6.prototype.unmuteUserWithUserId = function(e3) {
    return r(this, void 0, void 0, function() {
      var t7, r4;
      return s(this, function(i5) {
        switch (i5.label) {
          case 0:
            return Jr(w("string", e3)).throw(v.invalidParameters), t7 = Ws.of(this._iid).requestQueue, r4 = new nr({ channelUrl: this.url, channelType: this.channelType, userId: e3 }), [4, t7.send(r4)];
          case 1:
            return i5.sent(), [2];
        }
      });
    });
  }, s6.prototype.banUser = function(e3, t7, n4) {
    return r(this, void 0, void 0, function() {
      return s(this, function(r4) {
        return [2, this.banUserWithUserId(e3.userId, t7, n4)];
      });
    });
  }, s6.prototype.banUserWithUserId = function(e3, t7, r4) {
    return r(this, void 0, void 0, function() {
      var i5, s7;
      return s(this, function(a5) {
        switch (a5.label) {
          case 0:
            return Jr(w("string", e3) && w("number", t7, true) && w("string", r4, true)).throw(v.invalidParameters), i5 = Ws.of(this._iid).requestQueue, s7 = new ir({ channelUrl: this.url, channelType: this.channelType, userId: e3, seconds: t7, description: r4 }), [4, i5.send(s7)];
          case 1:
            return a5.sent(), [2];
        }
      });
    });
  }, s6.prototype.unbanUser = function(e3) {
    return r(this, void 0, void 0, function() {
      return s(this, function(t7) {
        return [2, this.unbanUserWithUserId(e3.userId)];
      });
    });
  }, s6.prototype.unbanUserWithUserId = function(e3) {
    return r(this, void 0, void 0, function() {
      var t7, r4;
      return s(this, function(i5) {
        switch (i5.label) {
          case 0:
            return Jr(w("string", e3)).throw(v.invalidParameters), t7 = Ws.of(this._iid).requestQueue, r4 = new ar({ channelUrl: this.url, channelType: this.channelType, userId: e3 }), [4, t7.send(r4)];
          case 1:
            return i5.sent(), [2];
        }
      });
    });
  }, s6.prototype.freeze = function() {
    return r(this, void 0, void 0, function() {
      var e3, t7;
      return s(this, function(r4) {
        switch (r4.label) {
          case 0:
            return e3 = Ws.of(this._iid).requestQueue, t7 = new ur({ channelUrl: this.url, channelType: this.channelType, freezing: true }), [4, e3.send(t7)];
          case 1:
            return r4.sent(), this.isFrozen = true, [2];
        }
      });
    });
  }, s6.prototype.unfreeze = function() {
    return r(this, void 0, void 0, function() {
      var e3, t7;
      return s(this, function(r4) {
        switch (r4.label) {
          case 0:
            return e3 = Ws.of(this._iid).requestQueue, t7 = new ur({ channelUrl: this.url, channelType: this.channelType, freezing: false }), [4, e3.send(t7)];
          case 1:
            return r4.sent(), this.isFrozen = false, [2];
        }
      });
    });
  }, s6.prototype.getMessagesByMessageId = function(e3, t7) {
    return r(this, void 0, void 0, function() {
      var n4;
      return s(this, function(r4) {
        switch (r4.label) {
          case 0:
            return n4 = n(n({}, Dt), t7), Jr(w("number", e3) && Lt(n4)).throw(v.invalidParameters), [4, ea.of(this._iid).getMessagesByMessageId(this.url, this.channelType, e3, n4)];
          case 1:
            return [2, r4.sent()];
        }
      });
    });
  }, s6.prototype.getMessagesByTimestamp = function(e3, t7) {
    return r(this, void 0, void 0, function() {
      var n4;
      return s(this, function(r4) {
        switch (r4.label) {
          case 0:
            return n4 = n(n({}, Dt), t7), Jr(w("number", e3) && Lt(n4)).throw(v.invalidParameters), [4, ea.of(this._iid).getMessagesByTimestamp(this.url, this.channelType, e3, n4)];
          case 1:
            return [2, r4.sent()];
        }
      });
    });
  }, s6.prototype.getMessageChangeLogsSinceTimestamp = function(e3, t7) {
    return void 0 === t7 && (t7 = {}), r(this, void 0, void 0, function() {
      var n4;
      return s(this, function(r4) {
        switch (r4.label) {
          case 0:
            return n4 = n(n({}, Ft), t7), Jr(w("number", e3) && qt(n4)).throw(v.invalidParameters), [4, ea.of(this._iid).getMessageChangelogs(this.url, this.channelType, e3, n4)];
          case 1:
            return [2, r4.sent()];
        }
      });
    });
  }, s6.prototype.getMessageChangeLogsSinceToken = function(e3, t7) {
    return void 0 === t7 && (t7 = {}), r(this, void 0, void 0, function() {
      var n4;
      return s(this, function(r4) {
        switch (r4.label) {
          case 0:
            return n4 = n(n({}, Ft), t7), Jr(w("string", e3) && qt(n4)).throw(v.invalidParameters), [4, ea.of(this._iid).getMessageChangelogs(this.url, this.channelType, e3, n4)];
          case 1:
            return [2, r4.sent()];
        }
      });
    });
  }, s6.prototype._createPendingSendableMessagePayload = function(r4, i5, s7) {
    var a5, o3 = Ws.of(this._iid).sessionManager;
    return re(se({ channel_url: this.url, channel_type: this.channelType, msg_id: 0, parent_message_id: r4.parentMessageId, data: r4.data, custom_type: r4.customType, mention_type: r4.mentionType, sorted_metaarray: r4.metaArrays ? r4.metaArrays.map(function(e3) {
      return je.payloadify(e3);
    }) : null, apple_critical_alert_options: r4.appleCriticalAlertOptions ? ze.payloadify(r4.appleCriticalAlertOptions) : null, created_at: s7, user: o3.currentUser ? Ke.payloadify(o3.currentUser) : null, req_id: i5, request_state: W.PENDING, mentioned_user_ids: r4.mentionedUserIds, mentioned_users: null === (a5 = r4.mentionedUsers) || void 0 === a5 ? void 0 : a5.map(function(e3) {
      return es.payloadify(e3);
    }) }));
  }, s6.prototype._createPendingUserMessage = function(t7, n4, r4) {
    var i5, s7, a5 = {};
    if (t7.translationTargetLanguages) try {
      for (var o3 = o(t7.translationTargetLanguages), c4 = o3.next(); !c4.done; c4 = o3.next()) {
        a5[c4.value] = "";
      }
    } catch (e3) {
      i5 = { error: e3 };
    } finally {
      try {
        c4 && !c4.done && (s7 = o3.return) && s7.call(o3);
      } finally {
        if (i5) throw i5.error;
      }
    }
    var l3 = re(n(n({}, this._createPendingSendableMessagePayload(t7, n4, r4)), { type: z.USER, message: t7.message, translations: a5, extended_message_payload: t7.extendedMessagePayload })), d5 = new It(this._iid, l3);
    return d5.messageParams = t7, d5;
  }, s6.prototype._createPendingScheduledUserMessage = function(e3, t7, n4) {
    var r4 = this._createPendingUserMessage(e3, t7, n4);
    return r4.scheduledInfo = { scheduledMessageId: 0, scheduledAt: e3.scheduledAt, scheduledMessageParams: e3 }, r4;
  }, s6.prototype._createPendingFileMessage = function(t7, n4, r4) {
    var i5, s7, a5, o3, c4, l3, d5, h4 = re(n(n({}, this._createPendingSendableMessagePayload(t7, n4, r4)), { type: z.FILE, url: t7.fileUrl, file: { name: null !== (i5 = t7.fileName) && void 0 !== i5 ? i5 : null === (s7 = t7.file) || void 0 === s7 ? void 0 : s7.name, size: null !== (a5 = t7.fileSize) && void 0 !== a5 ? a5 : null === (o3 = t7.file) || void 0 === o3 ? void 0 : o3.size, type: null !== (c4 = t7.mimeType) && void 0 !== c4 ? c4 : null === (l3 = t7.file) || void 0 === l3 ? void 0 : l3.type, data: t7.data }, thumbnails: null === (d5 = t7._thumbnails) || void 0 === d5 ? void 0 : d5.map(function(e3) {
      return Oe2.payloadify(e3);
    }) })), f4 = new St(this._iid, h4);
    return f4.messageParams = t7, f4;
  }, s6.prototype._createPendingMultipleFilesMessage = function(t7, n4, r4) {
    var i5 = re(n(n({}, this._createPendingSendableMessagePayload(t7, n4, r4)), { type: z.FILE, file: t7.fileInfoList.length > 0 ? { name: t7.fileInfoList[0].fileName, size: t7.fileInfoList[0].fileSize, type: t7.fileInfoList[0].mimeType, data: t7.data } : void 0 })), s7 = new Et(this._iid, i5);
    return s7.messageParams = t7, s7;
  }, s6.prototype._validateFailedFileMessageHasFile = function(e3, t7) {
    var n4;
    return Boolean(e3.url) || k(t7) || k(null === (n4 = e3.messageParams) || void 0 === n4 ? void 0 : n4.file);
  }, s6.prototype._createPendingScheduledFileMessage = function(e3, t7, n4) {
    var r4 = this._createPendingFileMessage(e3, t7, n4);
    return r4.scheduledInfo = { scheduledMessageId: 0, scheduledAt: e3.scheduledAt, scheduledMessageParams: e3 }, r4;
  }, s6.prototype._markMessageAsFailed = function(e3, t7, n4) {
    void 0 === n4 && (n4 = false), e3.errorCode = t7.code, t7.code === u.REQUEST_CANCELED || t7.code === u.FILE_UPLOAD_CANCEL_FAILED ? e3.sendingStatus = W.CANCELED : n4 || (e3.sendingStatus = W.FAILED);
  }, s6.prototype.sendUserMessage = function(e3) {
    var t7 = n(n({}, tn), e3);
    return Jr(an(t7)).throw(v.invalidParameters), this._sendUserMessage(t7);
  }, s6.prototype._sendUserMessage = function(e3, t7, r4) {
    var i5 = this;
    void 0 === t7 && (t7 = di.SEND);
    var s7 = Ws.of(this._iid), a5 = s7.dispatcher, o3 = s7.requestQueue, c4 = null != r4 ? r4 : this._generateRequestId(), l3 = Date.now(), d5 = new Xt();
    return hs(2).then(function() {
      var r5 = i5._createPendingUserMessage(e3, c4, l3);
      a5.dispatch(new $s({ messages: [r5], source: t7 === di.RESEND ? Ks.LOCAL_MESSAGE_RESEND_STARTED : Ks.EVENT_MESSAGE_SENT_PENDING })), os(function() {
        return r(i5, void 0, void 0, function() {
          return s(this, function(e4) {
            return [2, d5._trigger(r5)];
          });
        });
      });
      var s8 = new fr(n(n({}, e3), { channelUrl: i5.url, channelType: i5.channelType, reqId: c4 }));
      o3.send(s8).then(function(e4) {
        var t8 = e4.as(pr).message;
        a5.dispatch(new $s({ messages: [t8], source: Ks.EVENT_MESSAGE_SENT_SUCCESS })), os(function() {
          return r(i5, void 0, void 0, function() {
            return s(this, function(e5) {
              return [2, d5._trigger(t8)];
            });
          });
        });
      }).catch(function(t8) {
        if (g(t8)) throw t8;
        hs(2).then(function() {
          var r6 = i5._createPendingUserMessage(e3, c4, l3), s9 = Ws.of(i5._iid).cacheContext, o4 = s9.localCacheEnabled && s9.localCacheConfig.enableAutoResend && I(t8.code);
          i5._markMessageAsFailed(r6, t8, o4), a5.dispatch(new $s({ messages: [r6], source: r6.sendingStatus === W.PENDING ? Ks.REQUEST_RESEND_MESSAGE : Ks.EVENT_MESSAGE_SENT_FAILED })), os(function() {
            return r(i5, void 0, void 0, function() {
              return s(this, function(e4) {
                return [2, d5._triggerFailed(t8, r6)];
              });
            });
          });
        });
      });
    }), d5;
  }, s6.prototype._autoResendUserMessage = function(e3) {
    return Jr(e3 instanceof It && !!e3.messageParams).throw(v.invalidParameters), this._sendUserMessage(e3.messageParams, di.SEND, e3.reqId);
  }, s6.prototype.resendUserMessage = function(e3) {
    var t7;
    return r(this, void 0, void 0, function() {
      var n4, r4;
      return s(this, function(i5) {
        return Jr(e3 instanceof It && !e3.scheduledInfo).throw(v.invalidParameters), n4 = new et(), r4 = null !== (t7 = e3.messageParams) && void 0 !== t7 ? t7 : sn(e3), this._sendUserMessage(r4, di.RESEND, e3.reqId).onFailed(function(e4) {
          return n4.reject(e4);
        }).onSucceeded(function(e4) {
          return n4.resolve(e4);
        }), [2, n4.promise];
      });
    });
  }, s6.prototype.updateUserMessage = function(e3, t7) {
    return r(this, void 0, void 0, function() {
      var r4, i5, s7, a5;
      return s(this, function(o3) {
        switch (o3.label) {
          case 0:
            return r4 = n(n({}, yn), t7), Jr(w("number", e3) && _n(r4)).throw(v.invalidParameters), i5 = Ws.of(this._iid).requestQueue, s7 = new mr2(n({ channelType: this.channelType, channelUrl: this.url, messageId: e3, metaArrayParams: r4.metaArrays ? { array: r4.metaArrays, mode: "add", upsert: true } : void 0 }, r4)), [4, i5.send(s7)];
          case 1:
            return a5 = o3.sent(), [2, a5.as(vr).message];
        }
      });
    });
  }, s6.prototype.copyUserMessage = function(e3, n4) {
    var r4, i5, a5;
    return r(this, void 0, void 0, function() {
      var o3, c4;
      return s(this, function(l3) {
        return Jr(e3 instanceof s6 && n4 instanceof It && n4.sendingStatus === W.SUCCEEDED && this.url === n4.channelUrl && !n4.scheduledInfo).throw(v.invalidParameters), Jr(!n4.poll).throw(v.notSupportedError), o3 = new et(), c4 = null !== (r4 = n4.messageParams) && void 0 !== r4 ? r4 : se(n(n({}, n4), { mentionType: n4.mentionType, mentionedUserIds: null !== (i5 = n4.mentionedUserIds) && void 0 !== i5 ? i5 : null === (a5 = n4.mentionedUsers) || void 0 === a5 ? void 0 : a5.map(function(e4) {
          return e4.userId;
        }), translationTargetLanguages: Object.keys(n4.translations), pushNotificationDeliveryOption: Q.DEFAULT, parentMessageId: null, isReplyToChannel: false, isPinnedMessage: false })), e3._sendUserMessage(c4).onSucceeded(function(e4) {
          o3.resolve(e4);
        }).onFailed(function(e4) {
          return o3.reject(e4);
        }), [2, o3.promise];
      });
    });
  }, s6.prototype.translateUserMessage = function(e3, t7) {
    return r(this, void 0, void 0, function() {
      var r4, i5, s7;
      return s(this, function(a5) {
        switch (a5.label) {
          case 0:
            return Jr(e3 instanceof It && e3.messageId > 0 && N("string", t7)).throw(v.invalidParameters), r4 = Ws.of(this._iid).requestQueue, i5 = new Tr({ channelType: this.channelType, channelUrl: this.url, messageId: e3.messageId, translationTargetLanguages: t7 }), [4, r4.send(i5)];
          case 1:
            return s7 = a5.sent(), [2, s7.as(wr).message];
        }
      });
    });
  }, s6.prototype._createScheduledUserMessage = function(e3, t7) {
    var r4 = this, i5 = Ws.of(this._iid).requestQueue, s7 = Date.now(), a5 = this._generateRequestId();
    hs(2).then(function() {
      var n4 = r4._createPendingScheduledUserMessage(e3, a5, s7);
      os(function() {
        return r(r4, void 0, void 0, function() {
          return s(this, function(e4) {
            return [2, t7._trigger(n4)];
          });
        });
      });
    });
    var o3 = new Mr(n({ reqId: a5, channelType: this.channelType, channelUrl: this.url }, e3));
    i5.send(o3).then(function(e4) {
      var n4 = e4.as(Sr2).message;
      os(function() {
        return r(r4, void 0, void 0, function() {
          return s(this, function(e5) {
            return [2, t7._trigger(n4)];
          });
        });
      });
    }).catch(function(n4) {
      if (g(n4)) throw n4;
      hs(2).then(function() {
        var i6 = r4._createPendingScheduledUserMessage(e3, a5, s7);
        r4._markMessageAsFailed(i6, n4), os(function() {
          return r(r4, void 0, void 0, function() {
            return s(this, function(e4) {
              return [2, t7._triggerFailed(n4, i6)];
            });
          });
        });
      });
    });
  }, s6.prototype.sendFileMessage = function(e3) {
    var t7 = n(n({}, ln), e3);
    return Jr(pn(t7)).throw(v.invalidParameters), this._sendFileMessage(t7);
  }, s6.prototype.sendMultipleFilesMessage = function(e3) {
    var t7, r4 = n(n({}, ni), e3), i5 = Ws.of(this._iid);
    Jr(function(e4, t8) {
      return void 0 === t8 && (t8 = Vr), $t(e4) && Array.isArray(e4.fileInfoList) && e4.fileInfoList.length >= 2 && e4.fileInfoList.length <= t8 && e4.fileInfoList.every(function(e5) {
        return ri(e5);
      });
    }(r4, null === (t7 = i5.appInfo) || void 0 === t7 ? void 0 : t7.multipleFilesMessageFileCountLimit)).throw(v.invalidParameters);
    var s7 = !!e3.fileInfoList.find(function(e4) {
      var t8 = i5.appInfo.uploadSizeLimit;
      return e4.file instanceof Blob && e4.file.size > t8 || e4.fileSize > t8;
    });
    return Jr(!s7).throw(v.fileSizeLimitExceededError), this._sendMultipleFilesMessage(r4);
  }, s6.prototype._sendFileMessage = function(e3, t7, r4) {
    var i5 = this;
    void 0 === t7 && (t7 = di.SEND);
    var s7 = Ws.of(this._iid).dispatcher, a5 = ea.of(this._iid).fileMessageQueue, o3 = null != r4 ? r4 : this._generateRequestId(), u4 = Date.now(), c4 = new Xt();
    return hs(2).then(function() {
      var r5 = i5._createPendingFileMessage(e3, o3, u4);
      s7.dispatch(new $s({ messages: [r5], source: t7 === di.RESEND ? Ks.LOCAL_MESSAGE_RESEND_STARTED : Ks.EVENT_MESSAGE_SENT_PENDING })), os(function() {
        return r(i5, void 0, void 0, function() {
          return s(this, function(e4) {
            return [2, c4._trigger(r5)];
          });
        });
      }), a5.request(i5, o3, e3).then(function(e4) {
        s7.dispatch(new $s({ messages: [e4], source: Ks.EVENT_MESSAGE_SENT_SUCCESS })), os(function() {
          return r(i5, void 0, void 0, function() {
            return s(this, function(t8) {
              return [2, c4._trigger(e4)];
            });
          });
        });
      }).catch(function(t8) {
        if (g(t8)) throw t8;
        hs(2).then(function() {
          var r6 = i5._createPendingFileMessage(e3, o3, u4), a6 = Ws.of(i5._iid).cacheContext, l3 = a6.localCacheEnabled && a6.localCacheConfig.enableAutoResend && I(t8.code);
          i5._markMessageAsFailed(r6, t8, l3), s7.dispatch(new $s({ messages: [r6], source: r6.sendingStatus === W.PENDING ? Ks.REQUEST_RESEND_MESSAGE : t8.code === u.FILE_UPLOAD_CANCEL_FAILED ? Ks.LOCAL_MESSAGE_CANCELED : Ks.EVENT_MESSAGE_SENT_FAILED })), os(function() {
            return r(i5, void 0, void 0, function() {
              return s(this, function(e4) {
                return [2, c4._triggerFailed(t8, r6)];
              });
            });
          });
        });
      });
    }), c4;
  }, s6.prototype._autoResendFileMessage = function(e3) {
    Jr(e3 instanceof St && !!e3.messageParams).throw(v.invalidParameters);
    var t7 = Ws.of(this._iid).logger;
    return t7.debug("autoResendFileMessage pending", e3), this._sendFileMessage(e3.messageParams, di.SEND, e3.reqId).onFailed(function(e4) {
      t7.debug("autoResendFileMessage failed", e4);
    }).onSucceeded(function(e4) {
      t7.debug("autoResendFileMessage success", e4);
    });
  }, s6.prototype._sendMultipleFilesMessage = function(e3, t7, r4) {
    var i5 = this, s7 = Ws.of(this._iid).dispatcher, a5 = ea.of(this._iid).fileMessageQueue, o3 = null != r4 ? r4 : this._generateRequestId(), u4 = Date.now(), c4 = new ii();
    return hs(2).then(function() {
      var n4 = i5._createPendingMultipleFilesMessage(e3, o3, u4);
      s7.dispatch(new $s({ messages: [n4], source: t7 === di.RESEND ? Ks.LOCAL_MESSAGE_RESEND_STARTED : Ks.EVENT_MESSAGE_SENT_PENDING })), os(function() {
        return r(i5, void 0, void 0, function() {
          return s(this, function(e4) {
            return [2, c4._trigger(n4)];
          });
        });
      }), a5.request(i5, o3, e3, { requestHandler: c4, isCopy: t7 === di.COPY }).then(function(e4) {
        s7.dispatch(new $s({ messages: [e4], source: Ks.EVENT_MESSAGE_SENT_SUCCESS })), os(function() {
          return r(i5, void 0, void 0, function() {
            return s(this, function(t8) {
              return [2, c4._trigger(e4)];
            });
          });
        });
      }).catch(function(t8) {
        if (g(t8)) throw t8;
        hs(2).then(function() {
          var n5 = i5._createPendingMultipleFilesMessage(e3, o3, u4);
          i5._markMessageAsFailed(n5, t8), s7.dispatch(new $s({ messages: [n5], source: Ks.EVENT_MESSAGE_SENT_FAILED })), os(function() {
            return r(i5, void 0, void 0, function() {
              return s(this, function(e4) {
                return [2, c4._triggerFailed(t8, n5)];
              });
            });
          });
        });
      });
    }), c4;
  }, s6.prototype._createScheduledFileMessage = function(e3, t7, r4, i5) {
    var s7 = this, a5 = Ws.of(this._iid).requestQueue, o3 = new Ar2(n(n({ reqId: r4, channelType: this.channelType, channelUrl: this.url }, e3), { fileUrl: e3.fileUrl, requireAuth: e3.requireAuth }));
    a5.send(o3).then(function(e4) {
      var n4 = e4.as(Ur).message;
      os(function() {
        return r(s7, void 0, void 0, function() {
          return s(this, function(e5) {
            return [2, t7._trigger(n4)];
          });
        });
      });
    }).catch(function(n4) {
      if (g(n4)) throw n4;
      hs(2).then(function() {
        var a6 = s7._createPendingScheduledFileMessage(e3, r4, i5);
        s7._markMessageAsFailed(a6, n4), os(function() {
          return r(s7, void 0, void 0, function() {
            return s(this, function(e4) {
              return [2, t7._triggerFailed(n4, a6)];
            });
          });
        });
      });
    });
  }, s6.prototype.sendFileMessages = function(e3) {
    var t7, n4;
    Jr(e3.every(function(e4) {
      return pn(n(n({}, ln), e4));
    })).throw(v.invalidParameters);
    var r4 = new Xt();
    try {
      for (var i5 = o(e3), s7 = i5.next(); !s7.done; s7 = i5.next()) {
        var a5 = s7.value;
        this.sendFileMessage(a5).onPending(function(e4) {
          return r4._trigger(e4);
        }).onFailed(function(e4, t8) {
          return r4._triggerFailed(e4, t8);
        }).onSucceeded(function(e4) {
          return r4._trigger(e4);
        });
      }
    } catch (e4) {
      t7 = { error: e4 };
    } finally {
      try {
        s7 && !s7.done && (n4 = i5.return) && n4.call(i5);
      } finally {
        if (t7) throw t7.error;
      }
    }
    return r4;
  }, s6.prototype.resendFileMessage = function(e3, t7) {
    return r(this, void 0, void 0, function() {
      var n4, r4, i5;
      return s(this, function(s7) {
        return n4 = this._validateFailedFileMessageHasFile(e3, t7), Jr(e3 instanceof St && n4 && !e3.scheduledInfo).throw(v.invalidParameters), r4 = new et(), i5 = fn(e3, t7), this._sendFileMessage(i5, di.RESEND, e3.reqId).onFailed(function(e4) {
          return r4.reject(e4);
        }).onSucceeded(function(e4) {
          return r4.resolve(e4);
        }), [2, r4.promise];
      });
    });
  }, s6.prototype.resendMessage = function(e3, t7) {
    var n4, r4;
    if (Jr(e3 instanceof mt && !e3.scheduledInfo && e3.isResendable).throw(v.invalidParameters), e3.isUserMessage()) {
      var i5 = null !== (n4 = e3.messageParams) && void 0 !== n4 ? n4 : sn(e3);
      return this._sendUserMessage(i5, di.RESEND, e3.reqId);
    }
    if (e3.isFileMessage()) {
      var s7 = this._validateFailedFileMessageHasFile(e3, t7);
      Jr(s7).throw(v.invalidParameters);
      i5 = null !== (r4 = e3.messageParams) && void 0 !== r4 ? r4 : fn(e3, t7);
      return this._sendFileMessage(i5, di.RESEND, e3.reqId);
    }
    if (e3.isMultipleFilesMessage()) throw v.channelTypeNotSupportedError;
  }, s6.prototype.updateFileMessage = function(e3, t7) {
    return r(this, void 0, void 0, function() {
      var r4, i5, s7, a5;
      return s(this, function(o3) {
        switch (o3.label) {
          case 0:
            return r4 = n(n({}, gn), t7), Jr(w("number", e3) && function(e4) {
              return vn(e4);
            }(r4)).throw(v.invalidParameters), i5 = Ws.of(this._iid).requestQueue, s7 = new yr(n({ channelType: this.channelType, channelUrl: this.url, messageId: e3, metaArrayParams: r4.metaArrays ? { array: r4.metaArrays, mode: "add", upsert: true } : void 0 }, r4)), [4, i5.send(s7)];
          case 1:
            return a5 = o3.sent(), [2, a5.as(_r).message];
        }
      });
    });
  }, s6.prototype.uploadFile = function(e3) {
    return r(this, void 0, void 0, function() {
      var t7, r4, i5, s7, a5, o3, u4;
      return s(this, function(c4) {
        switch (c4.label) {
          case 0:
            return t7 = Ws.of(this._iid).requestQueue, r4 = $(), (i5 = new Pe({ file: e3.file, channelUrl: this.url, thumbnailSizes: e3.thumbnailSizes, requestId: r4 })).uploadProgressHandler = e3.progressHandler, e3.uploadStartedHandler && e3.uploadStartedHandler(r4), [4, t7.send(i5)];
          case 1:
            return s7 = c4.sent(), a5 = s7.as(ke2), o3 = a5.url, u4 = a5.thumbnails, [2, { requestId: r4, url: o3, thumbnails: u4 }];
        }
      });
    });
  }, s6.prototype.cancelUploadingFileMessage = function(e3) {
    return r(this, void 0, void 0, function() {
      return s(this, function(t7) {
        return Jr(w("string", e3)).throw(v.invalidParameters), ea.of(this._iid).fileMessageQueue.cancel(this, e3), [2, true];
      });
    });
  }, s6.prototype.copyFileMessage = function(e3, n4) {
    var r4, i5, a5;
    return r(this, void 0, void 0, function() {
      var o3, c4;
      return s(this, function(l3) {
        return Jr(e3 instanceof s6 && n4 instanceof St && n4.sendingStatus === W.SUCCEEDED && this.url === n4.channelUrl && !n4.scheduledInfo).throw(v.invalidParameters), o3 = new et(), c4 = se(n(n({}, n4), { fileUrl: n4.url, fileName: n4.name, fileSize: n4.size, mimeType: n4.type, mentionType: n4.mentionType, mentionedUserIds: null !== (r4 = n4.mentionedUserIds) && void 0 !== r4 ? r4 : null === (i5 = n4.mentionedUsers) || void 0 === i5 ? void 0 : i5.map(function(e4) {
          return e4.userId;
        }), pushNotificationDeliveryOption: Q.DEFAULT, parentMessageId: null, isReplyToChannel: false, thumbnailSizes: null === (a5 = n4.thumbnails) || void 0 === a5 ? void 0 : a5.map(function(e4) {
          return { maxWidth: e4.width, maxHeight: e4.height };
        }), requireAuth: n4.requireAuth, isPinnedMessage: false })), e3._sendFileMessage(c4).onSucceeded(function(e4) {
          return o3.resolve(e4);
        }).onFailed(function(e4) {
          return o3.reject(e4);
        }), [2, o3.promise];
      });
    });
  }, s6.prototype.copyMessage = function(e3, t7) {
    Jr(e3 instanceof s6 && t7 instanceof mt && t7.sendingStatus === W.SUCCEEDED && this.url === t7.channelUrl && !t7.scheduledInfo).throw(v.invalidParameters);
    var n4 = t7, r4 = e3;
    if (n4.isUserMessage()) {
      Jr(!n4.poll).throw(v.notSupportedError);
      var i5 = nn(n4);
      return r4._sendUserMessage(i5);
    }
    if (n4.isFileMessage()) {
      i5 = dn(n4);
      return r4._sendFileMessage(i5);
    }
    if (t7.isMultipleFilesMessage()) throw v.channelTypeNotSupportedError;
  }, s6.prototype.deleteMessage = function(e3) {
    return r(this, void 0, void 0, function() {
      var t7, r4;
      return s(this, function(i5) {
        switch (i5.label) {
          case 0:
            return Jr(e3 instanceof pt).throw(v.invalidParameters), e3.messageId > 0 ? (t7 = Ws.of(this._iid).requestQueue, r4 = new nt({ channelType: this.channelType, channelUrl: this.url, messageId: e3.messageId, messageToken: e3 instanceof mt ? e3._messageToken : void 0 }), [4, t7.send(r4)]) : [3, 2];
          case 1:
            i5.sent(), i5.label = 2;
          case 2:
            return [2];
        }
      });
    });
  }, s6.prototype.addReaction = function(e3, t7) {
    return r(this, void 0, void 0, function() {
      var r4, i5, s7;
      return s(this, function(a5) {
        switch (a5.label) {
          case 0:
            return Jr(e3 instanceof pt && e3.messageId > 0 && w("string", t7)).throw(v.invalidParameters), r4 = Ws.of(this._iid).requestQueue, i5 = new gr({ channelType: this.channelType, channelUrl: this.url, messageId: e3.messageId, reactionKey: t7 }), [4, r4.send(i5)];
          case 1:
            return s7 = a5.sent(), [2, s7.as(br).reactionEvent];
        }
      });
    });
  }, s6.prototype.deleteReaction = function(e3, t7) {
    return r(this, void 0, void 0, function() {
      var r4, i5, s7;
      return s(this, function(a5) {
        switch (a5.label) {
          case 0:
            return Jr(e3 instanceof pt && e3.messageId > 0 && w("string", t7)).throw(v.invalidParameters), r4 = Ws.of(this._iid).requestQueue, i5 = new Ir2({ channelType: this.channelType, channelUrl: this.url, messageId: e3.messageId, reactionKey: t7 }), [4, r4.send(i5)];
          case 1:
            return s7 = a5.sent(), [2, s7.as(Er).reactionEvent];
        }
      });
    });
  }, s6.prototype._updateUserMessageMetaArray = function(e3, t7, r4, i5) {
    return r(this, void 0, void 0, function() {
      var s7, a5, o3, u4, c4, l3;
      return s(this, function(d5) {
        switch (d5.label) {
          case 0:
            return s7 = Ws.of(this._iid), a5 = s7.dispatcher, o3 = s7.requestQueue, u4 = new mr2({ channelType: this.channelType, channelUrl: this.url, messageId: e3, metaArrayParams: { array: t7, mode: r4, upsert: i5 } }), [4, o3.send(u4)];
          case 1:
            return c4 = d5.sent(), l3 = c4.as(vr).message, a5.dispatch(new $s({ messages: [l3], source: Ks.EVENT_MESSAGE_UPDATED })), [2, l3];
        }
      });
    });
  }, s6.prototype._updateFileMessageMetaArray = function(e3, t7, r4, i5) {
    return r(this, void 0, void 0, function() {
      var s7, a5, o3, u4, c4, l3;
      return s(this, function(d5) {
        switch (d5.label) {
          case 0:
            return s7 = Ws.of(this._iid), a5 = s7.dispatcher, o3 = s7.requestQueue, u4 = new yr({ channelType: this.channelType, channelUrl: this.url, messageId: e3, metaArrayParams: { array: t7, mode: r4, upsert: i5 } }), [4, o3.send(u4)];
          case 1:
            return c4 = d5.sent(), l3 = c4.as(_r).message, a5.dispatch(new $s({ messages: [l3], source: Ks.EVENT_MESSAGE_UPDATED })), [2, l3];
        }
      });
    });
  }, s6.prototype.createMessageMetaArrayKeys = function(e3, t7) {
    return r(this, void 0, void 0, function() {
      var n4;
      return s(this, function(r4) {
        return Jr(e3 instanceof pt && e3.messageId > 0 && N("string", t7)).throw(v.invalidParameters), n4 = t7.map(function(e4) {
          return new je({ key: e4 });
        }), e3 instanceof St ? [2, this._updateFileMessageMetaArray(e3.messageId, n4, "add", true)] : [2, this._updateUserMessageMetaArray(e3.messageId, n4, "add", true)];
      });
    });
  }, s6.prototype.deleteMessageMetaArrayKeys = function(e3, t7) {
    return r(this, void 0, void 0, function() {
      var n4;
      return s(this, function(r4) {
        return Jr(e3 instanceof pt && e3.messageId > 0 && N("string", t7)).throw(v.invalidParameters), n4 = t7.map(function(e4) {
          return new je({ key: e4 });
        }), e3 instanceof St ? [2, this._updateFileMessageMetaArray(e3.messageId, n4, "remove", true)] : [2, this._updateUserMessageMetaArray(e3.messageId, n4, "remove", true)];
      });
    });
  }, s6.prototype.addMessageMetaArrayValues = function(e3, t7) {
    return r(this, void 0, void 0, function() {
      return s(this, function(n4) {
        return Jr(e3 instanceof pt && e3.messageId > 0 && t7.every(function(e4) {
          return e4 instanceof je;
        })).throw(v.invalidParameters), e3 instanceof St ? [2, this._updateFileMessageMetaArray(e3.messageId, t7, "add", true)] : [2, this._updateUserMessageMetaArray(e3.messageId, t7, "add", true)];
      });
    });
  }, s6.prototype.removeMessageMetaArrayValues = function(e3, t7) {
    return r(this, void 0, void 0, function() {
      return s(this, function(n4) {
        return Jr(e3 instanceof pt && e3.messageId > 0 && t7.every(function(e4) {
          return e4 instanceof je;
        })).throw(v.invalidParameters), e3 instanceof St ? [2, this._updateFileMessageMetaArray(e3.messageId, t7, "remove", true)] : [2, this._updateUserMessageMetaArray(e3.messageId, t7, "remove", true)];
      });
    });
  }, s6.prototype.report = function(e3, t7) {
    return r(this, void 0, void 0, function() {
      var r4, i5, s7, a5;
      return s(this, function(o3) {
        switch (o3.label) {
          case 0:
            return Jr(S(hn, e3) && w("string", t7)).throw(v.invalidParameters), r4 = Ws.of(this._iid), i5 = r4.sdkState, s7 = r4.requestQueue, a5 = new lr({ channelUrl: this.url, channelType: this.channelType, userId: i5.userId, category: e3, description: t7 }), [4, s7.send(a5)];
          case 1:
            return o3.sent(), [2];
        }
      });
    });
  }, s6.prototype.reportUser = function(e3, t7, r4) {
    return r(this, void 0, void 0, function() {
      var i5, s7, a5, o3;
      return s(this, function(u4) {
        switch (u4.label) {
          case 0:
            return Jr(e3 instanceof es && S(hn, t7) && w("string", r4)).throw(v.invalidParameters), i5 = Ws.of(this._iid), s7 = i5.sdkState, a5 = i5.requestQueue, o3 = new dr({ channelUrl: this.url, channelType: this.channelType, userId: s7.userId, offendingUserId: e3.userId, category: t7, description: r4 }), [4, a5.send(o3)];
          case 1:
            return u4.sent(), [2];
        }
      });
    });
  }, s6.prototype.reportMessage = function(e3, t7, r4) {
    return r(this, void 0, void 0, function() {
      var i5, s7, a5, o3;
      return s(this, function(u4) {
        switch (u4.label) {
          case 0:
            return Jr(e3 instanceof mt && S(hn, t7) && w("string", r4)).throw(v.invalidParameters), i5 = Ws.of(this._iid), s7 = i5.sdkState, a5 = i5.requestQueue, o3 = new hr({ channelUrl: this.url, channelType: this.channelType, userId: s7.userId, offendingUserId: e3.sender.userId, messageId: e3.messageId, category: t7, description: r4, messageToken: e3._messageToken }), [4, a5.send(o3)];
          case 1:
            return u4.sent(), [2];
        }
      });
    });
  }, s6.prototype.updatePoll = function(e3, t7) {
    return r(this, void 0, void 0, function() {
      var r4, i5, s7;
      return s(this, function(a5) {
        switch (a5.label) {
          case 0:
            return Jr(w("number", e3) && function(e4) {
              return w("string", e4.title, true) && uo(e4.data) && w("boolean", e4.allowUserSuggestion, true) && w("boolean", e4.allowMultipleVotes, true) && w("number", e4.closeAt, true);
            }(t7)).throw(v.invalidParameters), r4 = Ws.of(this._iid).requestQueue, i5 = new Nr2(n({ pollId: e3 }, t7)), [4, r4.send(i5)];
          case 1:
            return s7 = a5.sent(), [2, s7.as(Cr).poll];
        }
      });
    });
  }, s6.prototype.deletePoll = function(e3) {
    return r(this, void 0, void 0, function() {
      var t7, r4, i5;
      return s(this, function(s7) {
        switch (s7.label) {
          case 0:
            return t7 = w("number", e3), Jr(t7).throw(v.invalidParameters), r4 = Ws.of(this._iid).requestQueue, i5 = new Or({ pollId: e3 }), [4, r4.send(i5)];
          case 1:
            return s7.sent(), [2];
        }
      });
    });
  }, s6.prototype.closePoll = function(e3) {
    return r(this, void 0, void 0, function() {
      var t7, r4, i5, s7;
      return s(this, function(a5) {
        switch (a5.label) {
          case 0:
            return t7 = w("number", e3), Jr(t7).throw(v.invalidParameters), r4 = Ws.of(this._iid).requestQueue, i5 = new Pr({ pollId: e3 }), [4, r4.send(i5)];
          case 1:
            return s7 = a5.sent(), [2, s7.as(kr2).poll];
        }
      });
    });
  }, s6.prototype.addPollOption = function(e3, t7) {
    return r(this, void 0, void 0, function() {
      var r4, i5, s7, a5;
      return s(this, function(o3) {
        switch (o3.label) {
          case 0:
            return r4 = w("number", e3) && w("string", t7) && "" !== t7.trim(), Jr(r4).throw(v.invalidParameters), i5 = Ws.of(this._iid).requestQueue, s7 = new Rr({ channelUrl: this.url, channelType: this.channelType, pollId: e3, optionText: t7 }), [4, i5.send(s7)];
          case 1:
            return a5 = o3.sent(), [2, a5.as(xr2).poll];
        }
      });
    });
  }, s6.prototype.updatePollOption = function(e3, t7, r4) {
    return r(this, void 0, void 0, function() {
      var i5, s7, a5, o3;
      return s(this, function(u4) {
        switch (u4.label) {
          case 0:
            return i5 = w("number", e3) && w("number", t7) && w("string", r4) && "" !== r4.trim(), Jr(i5).throw(v.invalidParameters), s7 = Ws.of(this._iid).requestQueue, a5 = new Dr({ pollId: e3, pollOptionId: t7, optionText: r4 }), [4, s7.send(a5)];
          case 1:
            return o3 = u4.sent(), [2, o3.as(Lr).poll];
        }
      });
    });
  }, s6.prototype.deletePollOption = function(e3, t7) {
    return r(this, void 0, void 0, function() {
      var r4, i5, s7;
      return s(this, function(a5) {
        switch (a5.label) {
          case 0:
            return r4 = w("number", e3) && w("number", t7), Jr(r4).throw(v.invalidParameters), i5 = Ws.of(this._iid).requestQueue, s7 = new Fr({ pollId: e3, pollOptionId: t7 }), [4, i5.send(s7)];
          case 1:
            return a5.sent(), [2];
        }
      });
    });
  }, s6.prototype.votePoll = function(e3, t7) {
    return r(this, void 0, void 0, function() {
      var r4, i5, s7, a5, o3, u4, c4;
      return s(this, function(l3) {
        switch (l3.label) {
          case 0:
            return r4 = w("number", e3) && N("number", t7), Jr(r4).throw(v.invalidParameters), i5 = Ws.of(this._iid), s7 = i5.requestQueue, a5 = i5.dispatcher, o3 = new qr({ reqId: this._generateRequestId(), channelUrl: this.url, channelType: this.channelType, pollId: e3, pollOptionIds: t7 }), [4, s7.send(o3)];
          case 1:
            return u4 = l3.sent(), c4 = u4.as(zr2).event, a5.dispatch(new oo({ event: c4, source: Ks.EVENT_POLL_VOTED })), [2, c4];
        }
      });
    });
  }, s6.prototype.getPollChangeLogsSinceTimestamp = function(e3) {
    return r(this, void 0, void 0, function() {
      return s(this, function(t7) {
        switch (t7.label) {
          case 0:
            return Jr(w("number", e3)).throw(v.invalidParameters), [4, Do.of(this._iid).getPollChangeLogs(this.url, this.channelType, e3)];
          case 1:
            return [2, t7.sent()];
        }
      });
    });
  }, s6.prototype.getPollChangeLogsSinceToken = function(e3) {
    return r(this, void 0, void 0, function() {
      return s(this, function(t7) {
        switch (t7.label) {
          case 0:
            return Jr(w("string", e3, true)), [4, Do.of(this._iid).getPollChangeLogs(this.url, this.channelType, e3)];
          case 1:
            return [2, t7.sent()];
        }
      });
    });
  }, s6.prototype.createPollListQuery = function(e3) {
    return void 0 === e3 && (e3 = 10), new xo(this._iid, { channelUrl: this.url, channelType: this.channelType, limit: e3 });
  }, s6.prototype.createPollVoterListQuery = function(e3, t7, n4) {
    return void 0 === n4 && (n4 = 20), new Mo(this._iid, { channelUrl: this.url, channelType: this.channelType, pollId: e3, pollOptionId: t7, limit: n4 });
  }, s6.prototype.pinMessage = function(e3) {
    return r(this, void 0, void 0, function() {
      var t7, r4;
      return s(this, function(i5) {
        switch (i5.label) {
          case 0:
            return Jr(w("number", e3) && e3 > 0).throw(v.invalidParameters), t7 = Ws.of(this._iid).requestQueue, r4 = new ci({ channelType: this.channelType, channelUrl: this.url, messageId: e3 }), [4, t7.send(r4)];
          case 1:
            return i5.sent(), [2];
        }
      });
    });
  }, s6.prototype.unpinMessage = function(e3) {
    return r(this, void 0, void 0, function() {
      var t7, r4;
      return s(this, function(i5) {
        switch (i5.label) {
          case 0:
            return Jr(w("number", e3) && e3 > 0).throw(v.invalidParameters), t7 = Ws.of(this._iid).requestQueue, r4 = new li({ channelType: this.channelType, channelUrl: this.url, messageId: e3 }), [4, t7.send(r4)];
          case 1:
            return i5.sent(), [2];
        }
      });
    });
  }, s6;
}(zr);
var mi = function(e3) {
  function t7(t8) {
    void 0 === t8 && (t8 = {});
    var n4 = e3.call(this) || this;
    return Object.keys(t8).forEach(function(e4) {
      n4.hasOwnProperty(e4) && (n4[e4] = t8[e4]);
    }), n4;
  }
  return t(t7, e3), t7;
}(function() {
  this.onConnected = st, this.onReconnectStarted = st, this.onReconnectSucceeded = st, this.onReconnectFailed = st, this.onDisconnected = st;
});
var vi = function(e3) {
  function t7(t8) {
    void 0 === t8 && (t8 = {});
    var n4 = e3.call(this) || this;
    return Object.keys(t8).forEach(function(e4) {
      n4.hasOwnProperty(e4) && (n4[e4] = t8[e4]);
    }), n4;
  }
  return t(t7, e3), t7;
}(function() {
  this.onSessionExpired = st, this.onSessionTokenRequired = function(e3) {
    return e3(null);
  }, this.onSessionError = st, this.onSessionRefreshed = st, this.onSessionClosed = st;
});
var yi = function(e3) {
  function t7(t8) {
    void 0 === t8 && (t8 = {});
    var n4 = e3.call(this) || this;
    return Object.keys(t8).forEach(function(e4) {
      n4.hasOwnProperty(e4) && (n4[e4] = t8[e4]);
    }), n4;
  }
  return t(t7, e3), t7;
}(function() {
  this.onFriendsDiscovered = st, this.onTotalUnreadMessageCountChanged = st, this.onTotalUnreadMessageCountUpdated = st;
});
var _i = function(t7) {
  function n4(n5) {
    var r4 = n5.limit, s6 = n5.token, a5 = n5.userIdsFilter, o3 = n5.metaDataKeyFilter, u4 = n5.metaDataValuesFilter, c4 = n5.nicknameStartsWithFilter, l3 = t7.call(this) || this;
    return l3.method = oe.GET, l3.path = ce, l3.params = re({ limit: r4, token: s6, user_ids: a5, metadatakey: o3, metadatavalues_in: u4, nickname_startswith: c4 }), l3;
  }
  return t(n4, t7), n4;
}(xe);
var gi = function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this;
    return r4.users = n4.users.map(function(e4) {
      return new es(t8, e4);
    }), r4.next = n4.next, r4;
  }
  return t(t7, e3), t7;
}(Ue);
var bi = function(e3) {
  function i4(t7, n4) {
    var r4, i5, s6, a5 = this;
    return (a5 = e3.call(this, t7, n4) || this).userIdsFilter = null, a5.metaDataKeyFilter = null, a5.metaDataValuesFilter = null, a5.nicknameStartsWithFilter = null, a5.userIdsFilter = null !== (r4 = n4.userIdsFilter) && void 0 !== r4 ? r4 : null, a5.metaDataKeyFilter = null !== (i5 = n4.metaDataKeyFilter) && void 0 !== i5 ? i5 : null, a5.metaDataValuesFilter = null !== (s6 = n4.metaDataValuesFilter) && void 0 !== s6 ? s6 : null, a5.nicknameStartsWithFilter = n4.nicknameStartsWithFilter || null, a5;
  }
  return t(i4, e3), i4.prototype._validate = function() {
    return e3.prototype._validate.call(this) && N("string", this.userIdsFilter, true) && w("string", this.metaDataKeyFilter, true) && N("string", this.metaDataValuesFilter, true) && w("string", this.nicknameStartsWithFilter, true);
  }, i4.prototype.next = function() {
    return r(this, void 0, void 0, function() {
      var e4, r4, i5, s6, a5, o3;
      return s(this, function(c4) {
        switch (c4.label) {
          case 0:
            return this._validate() ? this._isLoading ? [3, 3] : this._hasNext ? (this._isLoading = true, e4 = Ws.of(this._iid).requestQueue, r4 = new _i(se(n(n({}, this), { token: this._token }))), [4, e4.send(r4)]) : [3, 2] : [3, 5];
          case 1:
            return i5 = c4.sent(), s6 = i5.as(gi), a5 = s6.users, o3 = s6.next, this._token = o3, this._hasNext = !!o3, this._isLoading = false, [2, a5];
          case 2:
            return [2, []];
          case 3:
            throw v.queryInProgress;
          case 4:
            return [3, 6];
          case 5:
            throw v.invalidParameters;
          case 6:
            return [2];
        }
      });
    });
  }, i4;
}(_o);
var Ii = function(t7) {
  function n4(n5) {
    var r4 = n5.userId, s6 = n5.limit, a5 = n5.token, o3 = n5.userIdsFilter, u4 = t7.call(this) || this;
    return u4.method = oe.GET, u4.path = "".concat(ce, "/").concat(r4, "/block"), u4.params = re({ limit: s6, token: a5, user_ids: o3 }), u4;
  }
  return t(n4, t7), n4;
}(xe);
var Ei = function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this;
    return r4.users = n4.users.map(function(e4) {
      return new es(t8, e4);
    }), r4.next = n4.next, r4;
  }
  return t(t7, e3), t7;
}(Ue);
var Ti = function(e3) {
  function i4(t7, n4) {
    var r4, i5 = this;
    return (i5 = e3.call(this, t7, n4) || this).userIdsFilter = null, i5.userIdsFilter = null !== (r4 = n4.userIdsFilter) && void 0 !== r4 ? r4 : null, i5;
  }
  return t(i4, e3), i4.prototype._validate = function() {
    return e3.prototype._validate.call(this) && N("string", this.userIdsFilter, true);
  }, i4.prototype.next = function() {
    return r(this, void 0, void 0, function() {
      var e4, r4, i5, s6, a5, o3, c4, l3;
      return s(this, function(d5) {
        switch (d5.label) {
          case 0:
            return this._validate() ? this._isLoading ? [3, 3] : this._hasNext ? (this._isLoading = true, e4 = Ws.of(this._iid), r4 = e4.sdkState, i5 = e4.requestQueue, s6 = new Ii(se(n(n({}, this), { userId: r4.userId, token: this._token }))), [4, i5.send(s6)]) : [3, 2] : [3, 5];
          case 1:
            return a5 = d5.sent(), o3 = a5.as(Ei), c4 = o3.users, l3 = o3.next, this._token = l3, this._hasNext = !!l3, this._isLoading = false, [2, c4];
          case 2:
            return [2, []];
          case 3:
            throw v.queryInProgress;
          case 4:
            return [3, 6];
          case 5:
            throw v.invalidParameters;
          case 6:
            return [2];
        }
      });
    });
  }, i4;
}(_o);
var wi = function(e3) {
  function t7(t8) {
    var n4 = t8.userId, r4 = t8.limit, s6 = t8.token, a5 = e3.call(this) || this;
    return a5.method = oe.GET, a5.path = "".concat(ce, "/").concat(encodeURIComponent(n4), "/friends"), a5.params = { limit: r4, token: s6 }, a5;
  }
  return t(t7, e3), t7;
}(xe);
var Mi = function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this;
    return r4.hasMore = n4.has_more, r4.users = n4.users.map(function(e4) {
      return new es(t8, e4);
    }), r4.next = n4.next, r4;
  }
  return t(t7, e3), t7;
}(Ue);
var Si = function(e3) {
  function t7() {
    return null !== e3 && e3.apply(this, arguments) || this;
  }
  return t(t7, e3), t7.prototype._validate = function() {
    return e3.prototype._validate.call(this);
  }, t7.prototype.next = function() {
    return r(this, void 0, void 0, function() {
      var e4, t8, r4, i4, s6, a5, o3, c4, l3;
      return s(this, function(d5) {
        switch (d5.label) {
          case 0:
            return this._validate() ? this._isLoading ? [3, 3] : this._hasNext ? (this._isLoading = true, e4 = Ws.of(this._iid), t8 = e4.sdkState, r4 = e4.requestQueue, i4 = new wi(n(n({}, this), { userId: t8.userId, token: this._token })), [4, r4.send(i4)]) : [3, 2] : [3, 5];
          case 1:
            return s6 = d5.sent(), a5 = s6.as(Mi), o3 = a5.users, c4 = a5.hasMore, l3 = a5.next, this._token = l3, this._hasNext = c4, this._isLoading = false, [2, o3];
          case 2:
            return [2, []];
          case 3:
            throw v.queryInProgress;
          case 4:
            return [3, 6];
          case 5:
            throw v.invalidParameters;
          case 6:
            return [2];
        }
      });
    });
  }, t7;
}(_o);
var Ai = {};
var Ui = function() {
  function e3(e4) {
    var t7 = e4.dbname, n4 = e4.itemSizeLimit, r4 = void 0 === n4 ? 1048576 : n4, i4 = e4.cacheLimit, s6 = void 0 === i4 ? 256 : i4, a5 = e4.blockHashBase, o3 = void 0 === a5 ? 2 : a5, u4 = e4.blockHashMultiplier, c4 = void 0 === u4 ? 10 : u4, l3 = e4.blockHashConstant, d5 = void 0 === l3 ? 11 : l3, h4 = e4.transactionApplyDelay, f4 = void 0 === h4 ? 200 : h4, p4 = e4.disableLogger, m5 = void 0 !== p4 && p4;
    return Ai[t7] || (this.itemSizeLimit = r4, this.cacheLimit = s6, this.blockHashBase = o3, this.blockHashMultiplier = c4, this.blockHashConstant = d5, this.transactionApplyDelay = f4, this.disableLogger = m5, Ai[t7] = this), Ai[t7];
  }
  return e3.get = function(e4) {
    return Ai[e4];
  }, e3;
}();
!function(e3) {
  e3[e3.UNKNOWN_ERROR = 6e7] = "UNKNOWN_ERROR", e3[e3.STORE_NOT_DEFINED = 61001e3] = "STORE_NOT_DEFINED", e3[e3.STORE_NOT_AVAILABLE = 61001001] = "STORE_NOT_AVAILABLE", e3[e3.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING = 61001002] = "STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING", e3[e3.STORE_IS_FULL = 61001003] = "STORE_IS_FULL", e3[e3.STORE_NOT_INITIALIZED = 61001004] = "STORE_NOT_INITIALIZED", e3[e3.STORE_INVALID_KEY_TYPE = 61002e3] = "STORE_INVALID_KEY_TYPE", e3[e3.STORE_BROKEN_INTEGRITY = 61002001] = "STORE_BROKEN_INTEGRITY", e3[e3.STORE_BROKEN_BLOB = 61002002] = "STORE_BROKEN_BLOB", e3[e3.STORE_ENCRYPTION_INVALID = 61002003] = "STORE_ENCRYPTION_INVALID", e3[e3.STORE_ITEM_SIZE_LIMIT_EXCEEDED = 61017e3] = "STORE_ITEM_SIZE_LIMIT_EXCEEDED", e3[e3.STORE_READ_FAILED = 61017001] = "STORE_READ_FAILED", e3[e3.STORE_WRITE_FAILED = 61017002] = "STORE_WRITE_FAILED", e3[e3.DATABASE_SCHEMA_NOT_ON_UPGRADE = 62002e3] = "DATABASE_SCHEMA_NOT_ON_UPGRADE", e3[e3.COLLECTION_NOT_READY = 63001e3] = "COLLECTION_NOT_READY", e3[e3.COLLECTION_KEY_NOT_MATCH = 63002e3] = "COLLECTION_KEY_NOT_MATCH", e3[e3.COLLECTION_QUERY_NOT_VALID = 63002001] = "COLLECTION_QUERY_NOT_VALID", e3[e3.COLLECTION_KEY_NOT_FOUND = 63004e3] = "COLLECTION_KEY_NOT_FOUND", e3[e3.COLLECTION_KEY_NOT_GIVEN = 63004001] = "COLLECTION_KEY_NOT_GIVEN", e3[e3.COLLECTION_INSERT_DUPLICATE = 63009e3] = "COLLECTION_INSERT_DUPLICATE", e3[e3.COLLECTION_WRITE_FAILED = 63017e3] = "COLLECTION_WRITE_FAILED", e3[e3.COLLECTION_ITEM_SIZE_LIMIT_EXCEEDED = 63017001] = "COLLECTION_ITEM_SIZE_LIMIT_EXCEEDED", e3[e3.INDEX_TABLE_IS_REQUIRED = 65001e3] = "INDEX_TABLE_IS_REQUIRED", e3[e3.INDEX_TYPE_NOT_MATCH = 65002e3] = "INDEX_TYPE_NOT_MATCH", e3[e3.COMPARE_TYPE_NOT_MATCH = 69002001] = "COMPARE_TYPE_NOT_MATCH", e3[e3.CIRCULAR_REFERENCE_FOUND = 69002002] = "CIRCULAR_REFERENCE_FOUND";
}(fi || (fi = {}));
var Ni;
var Ci = function(e3) {
  function t7(n4) {
    var r4 = n4.code, i4 = void 0 === r4 ? fi.UNKNOWN_ERROR : r4, s6 = n4.message, a5 = void 0 === s6 ? "Unknown error occurred." : s6, o3 = e3.call(this, a5) || this;
    return o3.code = i4, Object.setPrototypeOf(o3, t7.prototype), o3;
  }
  return t(t7, e3), Object.defineProperty(t7, "storeNotDefined", { get: function() {
    return new t7({ code: fi.STORE_NOT_DEFINED, message: "Store is not defined. Specify the store on NestDB()" });
  }, enumerable: false, configurable: true }), Object.defineProperty(t7, "storeNotAvailable", { get: function() {
    return new t7({ code: fi.STORE_NOT_AVAILABLE, message: "Store is not available. Check your environment settings." });
  }, enumerable: false, configurable: true }), Object.defineProperty(t7, "storeNotAvailableInPrivateBrowsing", { get: function() {
    return new t7({ code: fi.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING, message: "Store is not available because it is in private browsing." });
  }, enumerable: false, configurable: true }), Object.defineProperty(t7, "storeIsFull", { get: function() {
    return new t7({ code: fi.STORE_IS_FULL, message: "Store is full." });
  }, enumerable: false, configurable: true }), Object.defineProperty(t7, "storeNotInitialized", { get: function() {
    return new t7({ code: fi.STORE_NOT_INITIALIZED, message: "Store is not initialized." });
  }, enumerable: false, configurable: true }), Object.defineProperty(t7, "storeKeyTypeIsInvalid", { get: function() {
    return new t7({ code: fi.STORE_INVALID_KEY_TYPE, message: "Store key should be string type." });
  }, enumerable: false, configurable: true }), Object.defineProperty(t7, "storeBrokenIntegrity", { get: function() {
    return new t7({ code: fi.STORE_BROKEN_INTEGRITY, message: "Data should be in a store but it does not. Integrity is broken." });
  }, enumerable: false, configurable: true }), Object.defineProperty(t7, "storeBrokenBlob", { get: function() {
    return new t7({ code: fi.STORE_BROKEN_BLOB, message: "Data should be in a store but it does not. Blob data is broken." });
  }, enumerable: false, configurable: true }), Object.defineProperty(t7, "storeEncryptionInvalid", { get: function() {
    return new t7({ code: fi.STORE_ENCRYPTION_INVALID, message: "Encryption algorithm has changed. All the store should reset." });
  }, enumerable: false, configurable: true }), Object.defineProperty(t7, "storeItemSizeExceeded", { get: function() {
    return new t7({ code: fi.STORE_ITEM_SIZE_LIMIT_EXCEEDED, message: "The size of the item exceeds the limit that the store allows." });
  }, enumerable: false, configurable: true }), Object.defineProperty(t7, "storeReadFailed", { get: function() {
    return new t7({ code: fi.STORE_READ_FAILED, message: "Failed to read from store." });
  }, enumerable: false, configurable: true }), Object.defineProperty(t7, "storeWriteFailed", { get: function() {
    return new t7({ code: fi.STORE_WRITE_FAILED, message: "Failed to write to store." });
  }, enumerable: false, configurable: true }), Object.defineProperty(t7, "databaseSchemaNotOnUpgrade", { get: function() {
    return new t7({ code: fi.DATABASE_SCHEMA_NOT_ON_UPGRADE, message: "Committing schema is not allowed when upgrade is not running." });
  }, enumerable: false, configurable: true }), Object.defineProperty(t7, "collectionNotReady", { get: function() {
    return new t7({ code: fi.COLLECTION_NOT_READY, message: "Collection is not ready due to an error during initialization." });
  }, enumerable: false, configurable: true }), Object.defineProperty(t7, "collectionKeyNotMatch", { get: function() {
    return new t7({ code: fi.COLLECTION_KEY_NOT_MATCH, message: "keyName of collection could not change." });
  }, enumerable: false, configurable: true }), Object.defineProperty(t7, "collectionQueryNotValid", { get: function() {
    return new t7({ code: fi.COLLECTION_QUERY_NOT_VALID, message: "Query parameter is not a valid format." });
  }, enumerable: false, configurable: true }), Object.defineProperty(t7, "collectionInsertDuplicate", { get: function() {
    return new t7({ code: fi.COLLECTION_INSERT_DUPLICATE, message: "The key already exists." });
  }, enumerable: false, configurable: true }), Object.defineProperty(t7, "collectionKeyNotFound", { get: function() {
    return new t7({ code: fi.COLLECTION_KEY_NOT_FOUND, message: "The key is not found." });
  }, enumerable: false, configurable: true }), Object.defineProperty(t7, "collectionKeyNotGiven", { get: function() {
    return new t7({ code: fi.COLLECTION_KEY_NOT_GIVEN, message: "The item should contain [keyName] property." });
  }, enumerable: false, configurable: true }), Object.defineProperty(t7, "collectionWriteFailed", { get: function() {
    return new t7({ code: fi.COLLECTION_WRITE_FAILED, message: "Failed to write an item." });
  }, enumerable: false, configurable: true }), Object.defineProperty(t7, "collectionItemSizeExceeded", { get: function() {
    return new t7({ code: fi.COLLECTION_ITEM_SIZE_LIMIT_EXCEEDED, message: "The size of the item exceeds the limit that a collection allows." });
  }, enumerable: false, configurable: true }), Object.defineProperty(t7, "indexTableIsRequired", { get: function() {
    return new t7({ code: fi.INDEX_TABLE_IS_REQUIRED, message: "Index table is required." });
  }, enumerable: false, configurable: true }), Object.defineProperty(t7, "indexTypesNotMatch", { get: function() {
    return new t7({ code: fi.INDEX_TYPE_NOT_MATCH, message: "Indexed column should have primitive type." });
  }, enumerable: false, configurable: true }), Object.defineProperty(t7, "compareTypesNotMatch", { get: function() {
    return new t7({ code: fi.COMPARE_TYPE_NOT_MATCH, message: "Values to compare have different types." });
  }, enumerable: false, configurable: true }), Object.defineProperty(t7, "circularReferenceFound", { get: function() {
    return new t7({ code: fi.CIRCULAR_REFERENCE_FOUND, message: "Cannot handle circular referenced object." });
  }, enumerable: false, configurable: true }), t7;
}(Error);
!function(e3) {
  e3.INIT = "init", e3.READY = "ready", e3.CLOSED = "closed";
}(Ni || (Ni = {}));
var Oi;
var Pi = function(e3, t7) {
  if (void 0 === t7 && (t7 = /* @__PURE__ */ new WeakMap()), "object" == typeof e3 && null !== e3) {
    if (t7.has(e3)) throw Ci.circularReferenceFound;
    t7.set(e3, true);
    var n4 = void 0;
    if (Array.isArray(e3)) n4 = e3.map(function(e4) {
      return Pi(e4, t7);
    });
    else if (e3 instanceof RegExp) n4 = e3;
    else if (e3 instanceof Date) n4 = e3;
    else for (var r4 in n4 = {}, e3) n4[r4] = Pi(e3[r4], t7);
    return t7.delete(e3), n4;
  }
  return e3;
};
var ki = function(e3, t7) {
  if (null == t7) return 1;
  if (null == e3) return -1;
  if (typeof e3 != typeof t7) throw Ci.compareTypesNotMatch;
  var n4 = 0;
  switch (typeof e3) {
    case "boolean":
    case "number":
      n4 = e3 - t7;
      break;
    case "string":
      n4 = e3.localeCompare(t7);
  }
  return n4;
};
var Ri = function(e3, t7) {
  for (var n4 = 0, r4 = 0; r4 < e3.length; r4++) n4 = e3.charCodeAt(r4) + (n4 << 6) + (n4 << 16) - n4;
  return (n4 >>> 0) % t7;
};
var xi = function(e3) {
  return new Promise(function(t7) {
    setTimeout(function() {
      return t7();
    }, e3);
  });
};
var Di = function(e3, t7) {
  if (!t7) return false;
  if ("function" != typeof e3) {
    for (var n4 in e3) {
      if (["/and", "&&"].includes(n4)) {
        if (e3[n4].some(function(e4) {
          return !Di(e4, t7);
        })) return false;
      } else if (["/or", "||"].includes(n4)) {
        if (e3[n4].every(function(e4) {
          return !Di(e4, t7);
        })) return false;
      } else if ("/where" === n4) {
        if (!(0, e3[n4])(t7)) return false;
      } else {
        var r4 = n4;
        if ("object" == typeof e3[r4]) {
          var i4 = e3[r4];
          for (var s6 in i4) switch (s6) {
            case "/eq":
            case "=":
              if ((a5 = t7[r4]) !== (o3 = i4[s6])) return false;
              break;
            case "/neq":
            case "!=":
              if ((a5 = t7[r4]) === (o3 = i4[s6])) return false;
              break;
            case "/gt":
            case ">":
              var a5 = t7[r4], o3 = i4[s6];
              if (!(ki(a5, o3) > 0)) return false;
              break;
            case "/gte":
            case ">=":
              a5 = t7[r4], o3 = i4[s6];
              if (!(ki(a5, o3) >= 0)) return false;
              break;
            case "/lt":
            case "<":
              a5 = t7[r4], o3 = i4[s6];
              if (!(ki(a5, o3) < 0)) return false;
              break;
            case "/lte":
            case "<=":
              a5 = t7[r4], o3 = i4[s6];
              if (!(ki(a5, o3) <= 0)) return false;
              break;
            case "/in":
              a5 = t7[r4];
              if (!(o3 = i4[s6]).includes(a5)) return false;
              break;
            case "/nin":
              a5 = t7[r4];
              if ((o3 = i4[s6]).includes(a5)) return false;
              break;
            case "/contain":
              a5 = t7[r4], o3 = i4[s6];
              if (!a5.includes(o3)) return false;
              break;
            case "/regex":
              a5 = t7[r4];
              if (!(o3 = i4[s6]).test(a5)) return false;
              break;
            case "/where":
              a5 = t7[r4];
              if (!(0, i4[s6])(a5)) return false;
          }
        } else if ("function" == typeof e3[r4]) {
          if (!e3[r4](t7[r4])) return false;
        } else if (e3[r4] !== t7[r4]) return false;
      }
    }
    return true;
  }
  return e3(t7);
};
var Li = function() {
};
var Fi = function() {
  return Promise.resolve();
};
var qi = function(e3) {
  return e3;
};
var zi = function(e3, t7) {
  t7();
};
!function(e3) {
  e3[e3.FORWARD = 0] = "FORWARD", e3[e3.BACKWARD = 1] = "BACKWARD";
}(Oi || (Oi = {}));
var Bi;
var Ki;
var ji;
var Qi = function() {
  function e3(e4) {
    var t7 = e4.initialPrevValue, n4 = void 0 === t7 ? null : t7, r4 = e4.initialNextValue, i4 = void 0 === r4 ? null : r4, s6 = e4.iterator, a5 = e4.map, o3 = void 0 === a5 ? qi : a5, u4 = e4.backward, c4 = void 0 === u4 ? Fi : u4, l3 = e4.forward, d5 = void 0 === l3 ? Fi : l3, h4 = e4.complete, f4 = void 0 === h4 ? Li : h4;
    this._prevValue = n4, this._nextValue = i4, this._error = null, this._map = o3, this._backward = c4, this._forward = d5, this._iterator = s6, this._complete = f4;
  }
  return Object.defineProperty(e3.prototype, "prevValue", { get: function() {
    return this._map(this._prevValue);
  }, enumerable: false, configurable: true }), Object.defineProperty(e3.prototype, "nextValue", { get: function() {
    return this._map(this._nextValue);
  }, enumerable: false, configurable: true }), Object.defineProperty(e3.prototype, "error", { get: function() {
    return this._error;
  }, enumerable: false, configurable: true }), Object.defineProperty(e3.prototype, "hasPrevious", { get: function() {
    return !!this._prevValue;
  }, enumerable: false, configurable: true }), Object.defineProperty(e3.prototype, "hasNext", { get: function() {
    return !!this._nextValue;
  }, enumerable: false, configurable: true }), e3.prototype.prev = function() {
    return r(this, void 0, void 0, function() {
      var e4, t7, n4;
      return s(this, function(r4) {
        switch (r4.label) {
          case 0:
            if (!this.hasPrevious) return [3, 6];
            r4.label = 1;
          case 1:
            return r4.trys.push([1, 3, , 4]), e4 = this._prevValue, t7 = this, [4, this._backward()];
          case 2:
            return t7._prevValue = r4.sent() || null, this._nextValue = e4, [3, 4];
          case 3:
            return n4 = r4.sent(), this._error = n4, [3, 4];
          case 4:
            return [4, this._iterator(this)];
          case 5:
            return [2, r4.sent()];
          case 6:
            this._complete(), r4.label = 7;
          case 7:
            return [2];
        }
      });
    });
  }, e3.prototype.next = function() {
    return r(this, void 0, void 0, function() {
      var e4, t7, n4;
      return s(this, function(r4) {
        switch (r4.label) {
          case 0:
            if (!this.hasNext) return [3, 6];
            r4.label = 1;
          case 1:
            return r4.trys.push([1, 3, , 4]), e4 = this._nextValue, t7 = this, [4, this._forward()];
          case 2:
            return t7._nextValue = r4.sent() || null, this._prevValue = e4, [3, 4];
          case 3:
            return n4 = r4.sent(), this._error = n4, [3, 4];
          case 4:
            return [4, this._iterator(this)];
          case 5:
            return [2, r4.sent()];
          case 6:
            this._complete(), r4.label = 7;
          case 7:
            return [2];
        }
      });
    });
  }, e3.prototype.stop = function() {
    this._prevValue = null, this._nextValue = null, this._complete();
  }, e3;
}();
var Gi = function() {
  function e3(e4) {
    var t7 = e4.condition, n4 = void 0 === t7 ? {} : t7, r4 = e4.backward, i4 = void 0 !== r4 && r4, s6 = e4.blockManager, a5 = e4.indexer;
    this.condition = n4, this.backward = i4, this._blockManager = s6, this._indexer = a5;
  }
  return e3.prototype.findOptimizedStartPosition = function() {
    var e4 = this, t7 = ["=", "/eq", ">", ">=", "/gt", "/gte"], n4 = ["=", "/eq", "<", "<=", "/lt", "/lte"];
    if (this.backward) {
      var r4 = this._indexer.origin.length - 1;
      if ("function" != typeof this.condition) for (var i4 in this._indexer.fields) {
        var s6 = this._indexer.fields[i4], a5 = 1;
        if ("-" === s6[0] && (s6 = s6.slice(1), a5 = -1), this.condition[s6]) {
          if ("object" == typeof this.condition[s6]) {
            var o3 = a5 > 0 ? n4 : t7;
            for (var u4 in this.condition[s6]) if (o3.includes(u4)) {
              for (var c4 = r4; c4 >= 0; c4--) if (a5 * ki(this._indexer.origin[c4].columnValues[i4], this.condition[s6][u4]) <= 0) {
                r4 = c4;
                break;
              }
            }
          } else for (c4 = r4; c4 >= 0; c4--) if (a5 * ki(this._indexer.origin[c4].columnValues[i4], this.condition[s6]) <= 0) {
            r4 = c4;
            break;
          }
        }
      }
      return Math.min(r4 + 1, this._indexer.origin.length - 1);
    }
    var l3 = 0;
    if ("function" != typeof this.condition) for (var d5 = function(r5) {
      var i5 = h4._indexer.fields[r5], s7 = 1;
      if ("-" === i5[0] && (i5 = i5.slice(1), s7 = -1), h4.condition[i5]) {
        if ("object" == typeof h4.condition[i5]) Object.keys(h4.condition[i5]).forEach(function(a7) {
          if ((s7 > 0 ? t7 : n4).includes(a7)) {
            for (var o4 = l3; o4 < e4._indexer.origin.length; o4++) if (s7 * ki(e4._indexer.origin[o4].columnValues[r5], e4.condition[i5][a7]) >= 0) {
              l3 = o4;
              break;
            }
          }
        });
        else for (var a6 = l3; a6 < h4._indexer.origin.length; a6++) if (s7 * ki(h4._indexer.origin[a6].columnValues[r5], h4.condition[i5]) >= 0) {
          l3 = a6;
          break;
        }
      }
    }, h4 = this, i4 = 0; i4 < this._indexer.fields.length; i4++) d5(i4);
    return Math.max(l3 - 1, 0);
  }, e3.prototype.each = function(e4) {
    return r(this, void 0, void 0, function() {
      var t7, n4, r4, i4, s6, a5, o3, u4 = this;
      return s(this, function(c4) {
        switch (c4.label) {
          case 0:
            if (t7 = this.findOptimizedStartPosition(), n4 = 0, this.backward && this._indexer.origin[t7] && (n4 = this._indexer.origin[t7].keys.length - 1), r4 = function() {
              if (u4._indexer.origin[t7]) {
                if (!u4._indexer.origin[t7].keys[++n4]) {
                  if (!u4._indexer.origin[++t7]) return false;
                  n4 = 0;
                }
                return true;
              }
              return false;
            }, i4 = function() {
              if (u4._indexer.origin[t7]) {
                if (!u4._indexer.origin[t7].keys[--n4]) {
                  if (!u4._indexer.origin[--t7]) return false;
                  n4 = u4._indexer.origin[t7].keys.length - 1;
                }
                return true;
              }
              return false;
            }, s6 = null, !this._indexer.origin[t7]) return [3, 4];
            a5 = this.backward ? i4 : r4, c4.label = 1;
          case 1:
            return [4, this._blockManager.getFromBlock(this._indexer.origin[t7].keys[n4])];
          case 2:
            if ((o3 = c4.sent()) && Di(this.condition, o3)) return s6 = o3, [3, 4];
            c4.label = 3;
          case 3:
            if (a5()) return [3, 1];
            c4.label = 4;
          case 4:
            return [4, new Promise(function(a6) {
              var o4 = new Qi({ initialNextValue: Pi(s6), iterator: e4, forward: function() {
                return r(u4, void 0, void 0, function() {
                  var e5, s7;
                  return s(this, function(a7) {
                    switch (a7.label) {
                      case 0:
                        e5 = this.backward ? i4 : r4, a7.label = 1;
                      case 1:
                        return e5() ? [4, this._blockManager.getFromBlock(this._indexer.origin[t7].keys[n4])] : [3, 3];
                      case 2:
                        return (s7 = a7.sent()) && Di(this.condition, s7) ? [2, Pi(s7)] : [3, 1];
                      case 3:
                        return [2, null];
                    }
                  });
                });
              }, backward: function() {
                return r(u4, void 0, void 0, function() {
                  var e5, s7;
                  return s(this, function(a7) {
                    switch (a7.label) {
                      case 0:
                        e5 = this.backward ? r4 : i4, a7.label = 1;
                      case 1:
                        return e5() ? [4, this._blockManager.getFromBlock(this._indexer.origin[t7].keys[n4])] : [3, 3];
                      case 2:
                        return (s7 = a7.sent()) && Di(this.condition, s7) ? [2, Pi(s7)] : [3, 1];
                      case 3:
                        return [2, null];
                    }
                  });
                });
              }, complete: a6 });
              e4(o4);
            })];
          case 5:
            return [2, c4.sent()];
        }
      });
    });
  }, e3;
}();
var Vi = function() {
  function e3(e4) {
    var t7 = e4.condition, n4 = void 0 === t7 ? {} : t7, r4 = e4.backward, i4 = void 0 !== r4 && r4, s6 = e4.mutex, a5 = e4.blockManager, o3 = e4.indexer;
    this._mutex = s6, this._iterator = new Gi({ condition: n4, backward: i4, blockManager: a5, indexer: o3 });
  }
  return e3.prototype.fetch = function(e4) {
    return void 0 === e4 && (e4 = {}), r(this, void 0, void 0, function() {
      var t7, n4, r4, i4, s6 = this;
      return s(this, function(a5) {
        switch (a5.label) {
          case 0:
            if (t7 = Math.max(e4.offset || 0, 0), 0 === (n4 = "number" == typeof e4.limit ? e4.limit : Number.MAX_SAFE_INTEGER)) return [2, []];
            if (n4 < 0) throw Ci.collectionQueryNotValid;
            a5.label = 1;
          case 1:
            return a5.trys.push([1, 4, , 5]), r4 = [], [4, this._mutex.lock()];
          case 2:
            return a5.sent(), [4, this._iterator.each(function(e5) {
              return r(s6, void 0, void 0, function() {
                return s(this, function(i5) {
                  return e5.error ? e5.stop() : e5.hasNext ? 0 === t7 ? (r4.push(e5.nextValue), 0 < n4 && n4 <= r4.length ? e5.stop() : e5.next()) : (t7--, e5.next()) : e5.stop(), [2];
                });
              });
            })];
          case 3:
            return a5.sent(), this._mutex.unlock(), [2, r4];
          case 4:
            throw i4 = a5.sent(), this._mutex.unlock(), i4;
          case 5:
            return [2];
        }
      });
    });
  }, e3.prototype.count = function() {
    return r(this, void 0, void 0, function() {
      var e4, t7, n4 = this;
      return s(this, function(r4) {
        switch (r4.label) {
          case 0:
            return r4.trys.push([0, 3, , 4]), e4 = 0, [4, this._mutex.lock()];
          case 1:
            return r4.sent(), [4, this._iterator.each(function(t8) {
              return r(n4, void 0, void 0, function() {
                return s(this, function(n5) {
                  return t8.error ? t8.stop() : t8.hasNext ? (e4++, t8.next()) : t8.stop(), [2];
                });
              });
            })];
          case 2:
            return r4.sent(), this._mutex.unlock(), [2, e4];
          case 3:
            throw t7 = r4.sent(), this._mutex.unlock(), t7;
          case 4:
            return [2];
        }
      });
    });
  }, e3;
}();
var Hi = function(e3) {
  return "".concat("nest", "@").concat(e3);
};
var Wi = function(e3, t7) {
  return "".concat(Hi(e3), "/").concat(t7);
};
var Yi = function(e3, t7) {
  return "".concat(Wi(e3, t7), ".metadata");
};
var Ji = function(e3, t7) {
  return "".concat(Wi(e3, t7), "/block.");
};
var Xi = function(e3, t7) {
  return "".concat(Wi(e3, t7), "/blob.");
};
var Zi = function() {
  function e3(e4) {
    var t7 = e4.dbname, n4 = e4.collectionName, r4 = e4.store;
    this.dbname = t7, this.collectionName = n4, this.store = r4;
  }
  return e3.prototype.get = function(e4) {
    return r(this, void 0, void 0, function() {
      var t7, n4, r4, i4, s6, a5, o3, u4, c4;
      return s(this, function(l3) {
        switch (l3.label) {
          case 0:
            return [4, this.store.get(e4)];
          case 1:
            return (t7 = l3.sent()) ? (n4 = t7.data, r4 = t7.type, "undefined" == typeof fetch ? [3, 4] : [4, fetch(n4)]) : [3, 5];
          case 2:
            return [4, l3.sent().blob()];
          case 3:
            return [2, l3.sent()];
          case 4:
            for (512, i4 = [], s6 = atob(n4.split(",")[1]), a5 = 0; a5 < s6.length; a5 += 512) {
              for (o3 = s6.slice(a5, a5 + 512), u4 = new Array(o3.length), c4 = 0; c4 < o3.length; c4++) u4[c4] = o3.charCodeAt(c4);
              i4.push(new Uint8Array(u4));
            }
            return [2, new Blob(i4, { type: r4 })];
          case 5:
            return [2, null];
        }
      });
    });
  }, e3.prototype.save = function(e4, t7) {
    return void 0 === t7 && (t7 = "".concat(Date.now())), r(this, void 0, void 0, function() {
      var n4, r4, i4, s6, a5 = this;
      return s(this, function(o3) {
        switch (o3.label) {
          case 0:
            return [4, new Promise(function(n5) {
              var r5 = function(e5, t8, n6, r6) {
                return void 0 === r6 && (r6 = 0), "".concat(Xi(e5, t8)).concat(n6, ".").concat(r6);
              }(a5.dbname, a5.collectionName, t7), i5 = new FileReader();
              i5.onload = function() {
                n5({ blobId: r5, data: i5.result, type: e4.type });
              }, i5.readAsDataURL(e4);
            })];
          case 1:
            return n4 = o3.sent(), r4 = n4.blobId, i4 = n4.data, s6 = n4.type, [4, this.store.set({ key: r4, value: { data: i4, type: s6 } })];
          case 2:
            return o3.sent(), [2, r4];
        }
      });
    });
  }, e3.prototype.remove = function(e4) {
    return r(this, void 0, void 0, function() {
      return s(this, function(t7) {
        switch (t7.label) {
          case 0:
            return [4, this.store.remove(e4)];
          case 1:
            return t7.sent(), [2];
        }
      });
    });
  }, e3.prototype.clear = function() {
    return r(this, void 0, void 0, function() {
      var e4, t7, n4 = this;
      return s(this, function(r4) {
        switch (r4.label) {
          case 0:
            return e4 = Xi(this.dbname, this.collectionName), [4, this.store.getAllKeys()];
          case 1:
            return t7 = r4.sent(), [4, Promise.all(t7.filter(function(t8) {
              return t8.startsWith(e4);
            }).map(function(e5) {
              return r(n4, void 0, void 0, function() {
                return s(this, function(t8) {
                  switch (t8.label) {
                    case 0:
                      return [4, this.store.remove(e5)];
                    case 1:
                      return [2, t8.sent()];
                  }
                });
              });
            }))];
          case 2:
            return r4.sent(), [2];
        }
      });
    });
  }, e3;
}();
!function(e3) {
  e3[e3.COMMIT = 0] = "COMMIT", e3[e3.WRITE = 1] = "WRITE", e3[e3.ERROR = 2] = "ERROR";
}(Bi || (Bi = {})), function(e3) {
  e3.PENDING = "pending", e3.PERSISTENT = "persistent", e3.VOLATILE = "volatile";
}(Ki || (Ki = {})), function(e3) {
  e3[e3.NO_CACHE = 0] = "NO_CACHE", e3[e3.DEFAULT = 1] = "DEFAULT", e3[e3.PERSISTENT = 2] = "PERSISTENT";
}(ji || (ji = {}));
var $i;
var es2;
var ts2 = [Ki.PENDING, Ki.VOLATILE];
var ns2 = {};
var rs = function() {
  function e3(e4) {
    var t7 = e4.dbname, n4 = e4.limit, r4 = void 0 === n4 ? 256 : n4;
    return ns2[t7] || (this.dbname = t7, this._items = [], this._limit = r4, ns2[t7] = this), ns2[t7];
  }
  return e3.get = function(e4) {
    return ns2[e4];
  }, Object.defineProperty(e3.prototype, "items", { get: function() {
    return this._items;
  }, enumerable: false, configurable: true }), e3.prototype.find = function(e4, t7, n4) {
    return void 0 === n4 && (n4 = ji.DEFAULT), r(this, void 0, void 0, function() {
      var r4, i4;
      return s(this, function(s6) {
        switch (s6.label) {
          case 0:
            return (r4 = this.get(t7)) ? [3, 2] : [4, e4.get(t7)];
          case 1:
            return (i4 = s6.sent()) && (r4 = { key: t7, value: i4, state: n4 === ji.PERSISTENT ? Ki.PERSISTENT : Ki.VOLATILE }, this.put(r4)), [3, 3];
          case 2:
            n4 === ji.PERSISTENT && (r4.state = Ki.PERSISTENT), s6.label = 3;
          case 3:
            return [2, r4];
        }
      });
    });
  }, e3.prototype.get = function(e4, t7) {
    void 0 === t7 && (t7 = ji.DEFAULT);
    var n4 = this._items.map(function(e5) {
      return e5.key;
    }).indexOf(e4);
    if (n4 > -1) {
      var r4 = this._items[n4];
      return t7 === ji.PERSISTENT && (r4.state = Ki.PERSISTENT), t7 !== ji.NO_CACHE && this.put(r4), r4;
    }
    return null;
  }, e3.prototype.put = function(e4) {
    var t7, n4;
    if (this._limit > 0) {
      var r4 = this._items.map(function(e5) {
        return e5.key;
      }).indexOf(e4.key);
      if (r4 > -1) ts2.includes(this._items[r4].state) && ts2.includes(e4.state) ? (this._items.splice(r4, 1), this._items.push(e4)) : (this._items[r4].state = e4.state, this._items[r4].value = e4.value);
      else {
        this._items.push(e4);
        var i4 = this._items.filter(function(e5) {
          return e5.state === Ki.VOLATILE;
        }), s6 = i4.length - this._limit;
        if (s6 > 0) {
          var a5 = [];
          try {
            for (var o3 = o(this._items), u4 = o3.next(); !u4.done; u4 = o3.next()) {
              var c4 = u4.value;
              c4.state === Ki.VOLATILE && s6 > 0 ? s6-- : a5.push(c4);
            }
          } catch (e5) {
            t7 = { error: e5 };
          } finally {
            try {
              u4 && !u4.done && (n4 = o3.return) && n4.call(o3);
            } finally {
              if (t7) throw t7.error;
            }
          }
          this._items = a5;
        }
      }
    }
  }, e3.prototype.remove = function(e4) {
    var t7 = this._items.map(function(e5) {
      return e5.key;
    }).indexOf(e4);
    t7 > -1 && this._items.splice(t7, 1);
  }, e3.prototype.clearByCondition = function(e4) {
    this._items = this._items.filter(function(t7) {
      return !e4(t7);
    });
  }, e3.prototype.clear = function(e4) {
    void 0 === e4 && (e4 = false), this._items = e4 ? [] : this._items.filter(function(e5) {
      return e5.state !== Ki.VOLATILE;
    });
  }, e3;
}();
var is = function() {
  function e3(e4) {
    var t7 = e4.dbname, n4 = e4.collectionName, r4 = e4.store;
    this._requests = [], this._onCommit = /* @__PURE__ */ new Map(), this._onWrite = /* @__PURE__ */ new Map(), this._onError = /* @__PURE__ */ new Map(), this.dbname = t7, this.collectionName = n4, this.metadataKey = function(e5, t8) {
      return "".concat(Wi(e5, t8), "/trans.metadata");
    }(t7, n4), this.recordsetKey = function(e5, t8) {
      return "".concat(Wi(e5, t8), "/trans.recordset");
    }(t7, n4), this._store = r4;
  }
  return Object.defineProperty(e3.prototype, "generation", { get: function() {
    return this._metadata ? this._metadata.generation : 0;
  }, enumerable: false, configurable: true }), Object.defineProperty(e3.prototype, "requestCount", { get: function() {
    return this._requests.length;
  }, enumerable: false, configurable: true }), e3.prototype._getReducedRecordset = function(e4) {
    return void 0 === e4 && (e4 = []), r(this, void 0, void 0, function() {
      var t7;
      return s(this, function(n4) {
        switch (n4.label) {
          case 0:
            return [4, this._store.get(this.recordsetKey)];
          case 1:
            return (t7 = n4.sent() || []).push.apply(t7, c([], a(e4), false)), [2, this._reduceRecordSet(t7)];
        }
      });
    });
  }, e3.prototype._reduceRecordSet = function(e4) {
    for (var t7 = [], n4 = {}, r4 = e4.length - 1; r4 >= 0; r4--) {
      for (var i4 = e4[r4], s6 = [], a5 = i4.requests.length - 1; a5 >= 0; a5--) {
        var o3 = i4.requests[a5], u4 = o3.data;
        n4[u4.key] || (s6.unshift(o3), n4[u4.key] = true);
      }
      s6.length > 0 && (i4.requests = s6, t7.unshift(i4));
    }
    return t7;
  }, e3.prototype._applyRecord = function(e4, t7) {
    return r(this, void 0, void 0, function() {
      var n4, r4, i4, s6, a5, o3, c4, l3, d5;
      return s(this, function(h4) {
        switch (h4.label) {
          case 0:
            n4 = rs.get(this.dbname), r4 = t7.generation, i4 = t7.requests, s6 = null, h4.label = 1;
          case 1:
            return h4.trys.push([1, 3, , 4]), [4, this._store.setMany(i4.map(function(e5) {
              return n(n({}, e5.data), { generation: r4 });
            }))];
          case 2:
            for (a5 = h4.sent(), o3 = 0; o3 < i4.length; o3++) a5[o3] instanceof Error && (s6 || (s6 = a5[o3]), c4 = i4[o3].data, n4.put(n(n({}, c4), { state: Ki.PERSISTENT })));
            return [3, 4];
          case 3:
            return l3 = h4.sent(), s6 = l3, [3, 4];
          case 4:
            return s6 ? [3, 6] : (d5 = e4.filter(function(e5) {
              return e5.generation !== r4;
            }), [4, this._store.set({ key: this.recordsetKey, value: d5 })]);
          case 5:
            return h4.sent(), this._onWrite.forEach(function(e5) {
              e5(i4.map(function(e6) {
                return e6.data;
              }));
            }), [3, 7];
          case 6:
            this._onError.forEach(function(e5) {
              s6 && e5(s6);
            }), h4.label = 7;
          case 7:
            return [2];
        }
      });
    });
  }, e3.prototype.init = function() {
    return r(this, void 0, void 0, function() {
      var e4, t7, n4, r4, i4, s6, a5, o3;
      return s(this, function(u4) {
        switch (u4.label) {
          case 0:
            return e4 = this, [4, this._store.get(this.metadataKey)];
          case 1:
            return e4._metadata = u4.sent() || { generation: 1 }, [4, this._getReducedRecordset()];
          case 2:
            t7 = u4.sent(), u4.label = 3;
          case 3:
            u4.trys.push([3, 8, 9, 10]), n4 = o(t7), r4 = n4.next(), u4.label = 4;
          case 4:
            return r4.done ? [3, 7] : (i4 = r4.value, [4, this._applyRecord(t7, i4)]);
          case 5:
            u4.sent(), u4.label = 6;
          case 6:
            return r4 = n4.next(), [3, 4];
          case 7:
            return [3, 10];
          case 8:
            return s6 = u4.sent(), a5 = { error: s6 }, [3, 10];
          case 9:
            try {
              r4 && !r4.done && (o3 = n4.return) && o3.call(n4);
            } finally {
              if (a5) throw a5.error;
            }
            return [7];
          case 10:
            return [2];
        }
      });
    });
  }, e3.prototype.on = function(e4, t7, n4) {
    switch (e4) {
      case Bi.COMMIT:
        this._onCommit.set(t7, n4);
        break;
      case Bi.WRITE:
        this._onWrite.set(t7, n4);
        break;
      case Bi.ERROR:
        this._onError.set(t7, n4);
    }
  }, e3.prototype.requestWrite = function(e4, t7) {
    this._requests.push({ data: e4, options: t7 }), rs.get(this.dbname).put(n({ state: Ki.PENDING }, e4));
  }, e3.prototype.requestMultipleWrite = function(e4, t7) {
    var n4, r4, i4 = rs.get(this.dbname);
    try {
      for (var s6 = o(e4), a5 = s6.next(); !a5.done; a5 = s6.next()) {
        var o3 = a5.value;
        this._requests.push({ data: o3, options: t7 }), i4.put(n({ state: Ki.PENDING }, o3));
      }
    } catch (e5) {
      n4 = { error: e5 };
    } finally {
      try {
        a5 && !a5.done && (r4 = s6.return) && r4.call(s6);
      } finally {
        if (n4) throw n4.error;
      }
    }
  }, e3.prototype.clear = function() {
    return r(this, void 0, void 0, function() {
      return s(this, function(e4) {
        return rs.get(this.dbname).clearByCondition(function(e5) {
          return e5.state === Ki.PENDING;
        }), this._requests = [], [2];
      });
    });
  }, e3.prototype.commit = function() {
    return r(this, void 0, void 0, function() {
      var e4, t7, n4, r4, i4, s6, a5, o3, c4, l3, d5, h4, f4 = this;
      return s(this, function(p4) {
        switch (p4.label) {
          case 0:
            if (!((e4 = this._requests).length > 0)) return [3, 4];
            for (t7 = [], n4 = {}, o3 = e4.length - 1; o3 >= 0; o3--) r4 = e4[o3], l3 = r4.data, n4[l3.key] || (n4[l3.key] = true, t7.unshift(r4));
            return i4 = { generation: this.generation, requests: t7 }, [4, this._getReducedRecordset([i4])];
          case 1:
            return s6 = p4.sent(), [4, this._store.set({ key: this.recordsetKey, value: s6 })];
          case 2:
            return p4.sent(), this._metadata.generation++, [4, this._store.set({ key: this.metadataKey, value: this._metadata })];
          case 3:
            for (p4.sent(), a5 = rs.get(this.dbname), o3 = 0; o3 < t7.length; o3++) c4 = t7[o3], l3 = c4.data, d5 = c4.options, a5.put(n(n({}, l3), { state: d5 && d5.persistent ? Ki.PERSISTENT : Ki.VOLATILE }));
            this._requests = [], this._onCommit.forEach(function(t8) {
              t8(e4.map(function(e5) {
                return e5.data;
              }));
            }), h4 = Ui.get(this.dbname), setTimeout(function() {
              try {
                f4._applyRecord(s6, i4);
              } catch (e5) {
                f4._onError.forEach(function(t8) {
                  return t8(e5);
                });
              }
            }, h4.transactionApplyDelay), p4.label = 4;
          case 4:
            return [2];
        }
      });
    });
  }, e3;
}();
var ss = function() {
  function e3(e4) {
    var t7 = e4.blockId, n4 = e4.keyName, r4 = e4.items, i4 = void 0 === r4 ? [] : r4, s6 = e4.limit;
    this.blockId = t7, this.keyName = n4, this.limit = s6, this._items = c([], a(i4), false);
  }
  return e3.createFromCacheItem = function(t7) {
    return t7 ? new e3(t7.value) : null;
  }, Object.defineProperty(e3.prototype, "isEmpty", { get: function() {
    return 0 === this._items.length;
  }, enumerable: false, configurable: true }), Object.defineProperty(e3.prototype, "items", { get: function() {
    return this._items;
  }, enumerable: false, configurable: true }), e3.prototype.serialize = function() {
    return { blockId: this.blockId, keyName: this.keyName, limit: this.limit, items: this._items };
  }, e3.prototype.getItemByKey = function(e4) {
    var t7 = this, n4 = this._items.find(function(n5) {
      var r4 = n5[t7.keyName];
      return e4 === r4;
    });
    return null != n4 ? n4 : null;
  }, e3.prototype.has = function(e4) {
    var t7 = this;
    return this._items.map(function(e5) {
      return e5[t7.keyName];
    }).includes(e4);
  }, e3.prototype.add = function(e4) {
    var t7 = this, n4 = this._items.map(function(e5) {
      return e5[t7.keyName];
    }).indexOf(e4[this.keyName]);
    return n4 < 0 ? this._items.length < this.limit && (this._items.push(e4), true) : (this._items[n4] = e4, true);
  }, e3.prototype.remove = function(e4) {
    for (var t7 in this._items) if (this._items[t7][this.keyName] === e4) return this._items.splice(parseInt(t7), 1), true;
    return false;
  }, e3.prototype.clear = function() {
    this._items = [];
  }, e3;
}();
var as2 = function() {
  function e3(e4) {
    var t7 = e4.dbname, n4 = e4.collectionName, r4 = e4.metadata, i4 = e4.hashFunction, s6 = void 0 === i4 ? Ri : i4, a5 = e4.transaction, o3 = e4.store;
    this.dbname = t7, this.collectionName = n4, this.hashFunction = s6, this.metadata = r4, this._transaction = a5, this._store = o3;
  }
  return Object.defineProperty(e3.prototype, "keyName", { get: function() {
    return this.metadata.keyName;
  }, enumerable: false, configurable: true }), e3.prototype.createBlockId = function(e4, t7) {
    return void 0 === t7 && (t7 = this.metadata.blockLevel), n4 = this.dbname, r4 = this.collectionName, i4 = t7, s6 = "".concat(function(e5, t8, n5) {
      var r5 = n5.base * Math.pow(n5.multiplier, t8) + n5.constant;
      return (n5.hashFunction || Ri)(e5, r5);
    }(e4, t7, { hashFunction: this.hashFunction, base: this.metadata.blockHashBase, multiplier: this.metadata.blockHashMultiplier, constant: this.metadata.blockHashConstant })), "".concat(Ji(n4, r4)).concat(i4, ".").concat(s6);
    var n4, r4, i4, s6;
  }, e3.prototype._findBlock = function(e4) {
    return r(this, void 0, void 0, function() {
      var t7, n4, r4, i4, s6;
      return s(this, function(a5) {
        switch (a5.label) {
          case 0:
            t7 = rs.get(this.dbname), n4 = this.metadata.blockLevel, a5.label = 1;
          case 1:
            return n4 > 0 ? (r4 = this.createBlockId(e4, n4), [4, t7.find(this._store, r4)]) : [3, 4];
          case 2:
            if ((i4 = a5.sent()) && (s6 = ss.createFromCacheItem(i4), null == s6 ? void 0 : s6.getItemByKey(e4))) return [2, s6];
            a5.label = 3;
          case 3:
            return n4--, [3, 1];
          case 4:
            return [2, null];
        }
      });
    });
  }, e3.prototype.getFromBlock = function(e4) {
    return r(this, void 0, void 0, function() {
      var t7;
      return s(this, function(n4) {
        switch (n4.label) {
          case 0:
            return [4, this._findBlock(e4)];
          case 1:
            return [2, (t7 = n4.sent()) ? t7.getItemByKey(e4) : null];
        }
      });
    });
  }, e3.prototype.putToBlock = function(e4, t7) {
    return r(this, void 0, void 0, function() {
      var n4, r4, i4, s6, a5;
      return s(this, function(o3) {
        switch (o3.label) {
          case 0:
            return n4 = Ui.get(this.dbname), r4 = this.createBlockId(e4), i4 = Math.floor(this._store.itemSizeLimit / n4.itemSizeLimit), [4, rs.get(this.dbname).find(this._store, r4)];
          case 1:
            return s6 = o3.sent(), (null == (a5 = s6 ? ss.createFromCacheItem(s6) : new ss({ blockId: r4, keyName: this.keyName, items: [], limit: i4 })) ? void 0 : a5.add(t7)) ? (this._transaction.requestWrite({ key: a5.blockId, value: a5.serialize() }), [2, true]) : [2, false];
        }
      });
    });
  }, e3.prototype.removeFromBlock = function(e4) {
    return r(this, void 0, void 0, function() {
      var t7;
      return s(this, function(n4) {
        switch (n4.label) {
          case 0:
            return [4, this._findBlock(e4)];
          case 1:
            return (t7 = n4.sent()) && t7.remove(e4) ? (this._transaction.requestWrite({ key: t7.blockId, value: t7.serialize() }), [2, true]) : [2, false];
        }
      });
    });
  }, e3.prototype.clearAllBlocks = function() {
    return r(this, void 0, void 0, function() {
      var e4, t7, n4;
      return s(this, function(r4) {
        switch (r4.label) {
          case 0:
            return e4 = Ji(this.dbname, this.collectionName), [4, this._store.getAllKeys()];
          case 1:
            return t7 = r4.sent(), n4 = t7.filter(function(t8) {
              return t8.startsWith(e4);
            }), [4, this._store.removeMany(n4)];
          case 2:
            return r4.sent(), [4, this._transaction.clear()];
          case 3:
            return r4.sent(), rs.get(this.dbname).clearByCondition(function(t8) {
              return t8.key.startsWith(e4);
            }), [2];
        }
      });
    });
  }, e3;
}();
var os2 = {};
var us = function() {
  function e3(e4) {
    var t7 = e4.dbname, n4 = e4.collectionName, r4 = e4.keyName, i4 = e4.fields, s6 = e4.transaction, a5 = e4.store, o3 = this;
    this._origin = [], this._table = [];
    var u4 = function(e5, t8, n5) {
      return "".concat(Wi(e5, t8), "/index.").concat(n5);
    }(t7, n4, i4.join(">"));
    return os2[u4] || (this.dbname = t7, this.collectionName = n4, this.keyName = r4, this.fields = i4, this.indexerKey = u4, this._transaction = s6, this._store = a5, this._transaction.on(Bi.COMMIT, this.indexerKey, function() {
      return o3.commit();
    }), this._transaction.on(Bi.ERROR, this.indexerKey, function() {
      return o3.abort();
    })), os2[u4];
  }
  return e3.createKey = function(e4) {
    return e4.join(">");
  }, e3.parseKey = function(e4) {
    return e4.split(">");
  }, e3.clearIndexerMap = function() {
    for (var e4 in os2) delete os2[e4];
  }, e3.prototype._addItem = function(e4) {
    var t7 = e4[this.keyName], n4 = this.getColumnValues(e4), r4 = a(this.indexOf(n4), 2), i4 = r4[0];
    return r4[1] ? !this._table[i4].keys.includes(t7) && (this._table[i4].keys.push(t7), true) : (this._table.splice(i4, 0, { columnValues: n4, keys: [t7] }), true);
  }, e3.prototype._removeItem = function(e4) {
    var t7 = e4[this.keyName], n4 = this.getColumnValues(e4), r4 = a(this.indexOf(n4), 2), i4 = r4[0];
    if (r4[1]) {
      var s6 = this._table[i4].keys.indexOf(t7);
      if (s6 > -1) return this._table[i4].keys.splice(s6, 1), 0 === this._table[i4].keys.length && this._table.splice(i4, 1), true;
    }
    return false;
  }, Object.defineProperty(e3.prototype, "origin", { get: function() {
    return this._origin;
  }, enumerable: false, configurable: true }), Object.defineProperty(e3.prototype, "table", { get: function() {
    return this._table;
  }, enumerable: false, configurable: true }), e3.prototype.getColumnValues = function(e4) {
    var t7, n4, r4, i4, s6 = [];
    try {
      for (var a5 = o(this.fields), o3 = a5.next(); !o3.done; o3 = a5.next()) {
        var u4 = o3.value;
        if ("-" === u4[0] && (u4 = u4.slice(1)), r4 = e4[u4], i4 = void 0, i4 = typeof r4, null !== r4 && "undefined" !== i4 && "boolean" !== i4 && "number" !== i4 && "string" !== i4) throw Ci.indexTypesNotMatch;
        s6.push(e4[u4]);
      }
    } catch (e5) {
      t7 = { error: e5 };
    } finally {
      try {
        o3 && !o3.done && (n4 = a5.return) && n4.call(a5);
      } finally {
        if (t7) throw t7.error;
      }
    }
    return s6;
  }, e3.prototype.diff = function(e4, t7) {
    for (var n4 in this.fields) {
      var r4 = "-" === this.fields[n4][0] ? -1 : 1, i4 = ki(e4[n4], t7[n4]);
      if (0 !== i4) return r4 * i4;
    }
    return 0;
  }, e3.prototype.indexOf = function(e4) {
    if (this._table.length > 0) {
      for (var t7 = 0, n4 = this._table.length - 1; t7 <= n4; ) {
        var r4 = Math.floor((t7 + n4) / 2), i4 = this.diff(e4, this._table[r4].columnValues);
        if (i4 > 0) t7 = r4 + 1;
        else {
          if (!(i4 < 0)) return [r4, true];
          n4 = r4 - 1;
        }
      }
      return [t7, false];
    }
    return [0, false];
  }, e3.prototype.ensure = function() {
    return r(this, void 0, void 0, function() {
      var e4, t7, n4, r4, i4, s6, a5, o3, u4, c4, l3, d5, h4, f4, p4, m5, y6;
      return s(this, function(_2) {
        switch (_2.label) {
          case 0:
            return [4, (e4 = rs.get(this.dbname)).find(this._store, this.indexerKey, ji.PERSISTENT)];
          case 1:
            return (t7 = _2.sent()) ? [3, 11] : (n4 = Ji(this.dbname, this.collectionName), [4, this._store.getAllKeys()]);
          case 2:
            r4 = _2.sent(), _2.label = 3;
          case 3:
            _2.trys.push([3, 8, 9, 10]), i4 = o(r4), s6 = i4.next(), _2.label = 4;
          case 4:
            return s6.done ? [3, 7] : (a5 = s6.value).startsWith(n4) ? [4, e4.find(this._store, a5, ji.NO_CACHE)] : [3, 6];
          case 5:
            if (o3 = _2.sent(), u4 = ss.createFromCacheItem(o3)) try {
              for (m5 = void 0, c4 = o(u4.items), l3 = c4.next(); !l3.done; l3 = c4.next()) d5 = l3.value, this._addItem(d5);
            } catch (e5) {
              m5 = { error: e5 };
            } finally {
              try {
                l3 && !l3.done && (y6 = c4.return) && y6.call(c4);
              } finally {
                if (m5) throw m5.error;
              }
            }
            _2.label = 6;
          case 6:
            return s6 = i4.next(), [3, 4];
          case 7:
            return [3, 10];
          case 8:
            return h4 = _2.sent(), f4 = { error: h4 }, [3, 10];
          case 9:
            try {
              s6 && !s6.done && (p4 = i4.return) && p4.call(i4);
            } finally {
              if (f4) throw f4.error;
            }
            return [7];
          case 10:
            return this._transaction.requestWrite({ key: this.indexerKey, value: this._table }, { persistent: true }), [3, 12];
          case 11:
            this._origin = t7.value, this._table = Pi(this._origin), _2.label = 12;
          case 12:
            return os2[this.indexerKey] = this, [2];
        }
      });
    });
  }, e3.prototype.drop = function() {
    return r(this, void 0, void 0, function() {
      return s(this, function(e4) {
        switch (e4.label) {
          case 0:
            return rs.get(this.dbname).remove(this.indexerKey), [4, this._store.remove(this.indexerKey)];
          case 1:
            return e4.sent(), delete os2[this.indexerKey], [2];
        }
      });
    });
  }, e3.prototype.addItem = function(e4) {
    return r(this, void 0, void 0, function() {
      return s(this, function(t7) {
        return this._addItem(e4) && this._transaction.requestWrite({ key: this.indexerKey, value: this._table }, { persistent: true }), [2];
      });
    });
  }, e3.prototype.removeItem = function(e4) {
    return r(this, void 0, void 0, function() {
      return s(this, function(t7) {
        return this._removeItem(e4) && this._transaction.requestWrite({ key: this.indexerKey, value: this._table }, { persistent: true }), [2];
      });
    });
  }, e3.prototype.clear = function() {
    return r(this, void 0, void 0, function() {
      return s(this, function(e4) {
        return this._table = [], this._transaction.requestWrite({ key: this.indexerKey, value: this._table }, { persistent: true }), [2];
      });
    });
  }, e3.prototype.commit = function() {
    this._origin = this._table, this._table = Pi(this._origin);
  }, e3.prototype.abort = function() {
    this._table = Pi(this._origin);
  }, e3;
}();
var cs = function() {
  return "undefined" != typeof document && "undefined" != typeof navigator && "ReactNative" !== navigator.product;
};
var ls = function() {
  var e3 = (/* @__PURE__ */ new Date()).getTime();
  return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function(t7) {
    var n4 = (e3 + 16 * Math.random()) % 16 | 0;
    return e3 = Math.floor(e3 / 16), ("x" === t7 ? n4 : 3 & n4 | 8).toString(16);
  });
};
!function(e3) {
  e3[e3.PROCESSING = 0] = "PROCESSING", e3[e3.DONE = 1] = "DONE";
}($i || ($i = {})), function(e3) {
  e3.NEWNODE = "newnode", e3.REMOVENODE = "removenode", e3.CLAIM_HOST = "claimhost", e3.SYNC_HOST = "synchost", e3.REQUEST_LOCK = "requestlock", e3.ACQUIRE_LOCK = "acquirelock", e3.RELEASE_LOCK = "releaselock";
}(es2 || (es2 = {}));
var ds;
var hs2 = {};
var fs = function() {
  function e3(e4, t7) {
    void 0 === t7 && (t7 = {});
    var n4 = this;
    return this._state = $i.PROCESSING, this._queue = [], this._activationQueue = [], hs2[e4] && !t7.forceCreate || (this.nodeId = ls(), this.key = e4, cs() && (t7.startAsInvisible ? this.registerNode() : "visible" === document.visibilityState ? this.claimHost() : this.registerNode(), document.addEventListener("visibilitychange", function() {
      "visible" === document.visibilityState && n4.claimHost();
    }), window.addEventListener("message", function(e5) {
      var t8, r4, i4 = e5.data;
      if (null == i4 ? void 0 : i4.isNestDbMessage) {
        var s6 = i4.nodeId, a5 = i4.requestId, o3 = i4.key, u4 = i4.op, c4 = i4.data;
        if (s6 !== n4.nodeId && o3 === n4.key) switch (u4) {
          case es2.NEWNODE:
            n4._sendSync();
            break;
          case es2.CLAIM_HOST:
            n4._sendSync(), n4._hostId = s6;
            break;
          case es2.SYNC_HOST:
            if (!n4.isInSync) {
              n4._activationTimeout && clearTimeout(n4._activationTimeout);
              var l3 = c4, d5 = l3.currentItemRequestId, h4 = l3.queue, f4 = function(e6) {
                var t9 = n4._queue.findIndex(function(t10) {
                  return t10.requestId === e6.requestId;
                });
                t9 < 0 && n4._requestLock({ isNestDbMessage: true, nodeId: e6.nodeId, requestId: e6.requestId, key: n4.key, op: es2.REQUEST_LOCK, ts: e6.ts });
              };
              try {
                for (var p4 = o(h4), m5 = p4.next(); !m5.done; m5 = p4.next()) {
                  f4(m5.value);
                }
              } catch (e6) {
                t8 = { error: e6 };
              } finally {
                try {
                  m5 && !m5.done && (r4 = p4.return) && r4.call(p4);
                } finally {
                  if (t8) throw t8.error;
                }
              }
              n4._currentItem = n4._queue.find(function(e6) {
                return e6.requestId === d5;
              }), n4._completeSync();
            }
            break;
          case es2.REMOVENODE:
            n4._queue = n4._queue.filter(function(e6) {
              return e6.nodeId !== i4.nodeId;
            }), n4._currentItem && n4._currentItem.nodeId === i4.nodeId && (n4._currentItem = void 0, n4._acquire(n4._queue[0]));
            break;
          case es2.REQUEST_LOCK:
            n4._requestLock(i4);
            break;
          case es2.ACQUIRE_LOCK:
            var y6 = n4._queue.find(function(e6) {
              return e6.requestId === a5;
            });
            n4._acquire(y6);
            break;
          case es2.RELEASE_LOCK:
            n4._release(a5);
        }
      }
    }), window.addEventListener("beforeunload", function() {
      n4._send(es2.REMOVENODE);
    })), hs2[e4] = this), hs2[e4];
  }
  return Object.defineProperty(e3.prototype, "locked", { get: function() {
    return !!this._currentItem;
  }, enumerable: false, configurable: true }), Object.defineProperty(e3.prototype, "isHost", { get: function() {
    return this._hostId === this.nodeId;
  }, enumerable: false, configurable: true }), Object.defineProperty(e3.prototype, "isInSync", { get: function() {
    return this._state == $i.DONE;
  }, enumerable: false, configurable: true }), e3.prototype._send = function(e4, t7) {
    var n4;
    void 0 === t7 && (t7 = {});
    var r4 = { isNestDbMessage: true, nodeId: this.nodeId, requestId: null !== (n4 = null == t7 ? void 0 : t7.requestId) && void 0 !== n4 ? n4 : ls(), key: this.key, op: e4, data: t7.data, ts: Date.now() };
    return cs() && window.postMessage(r4, "*"), r4;
  }, e3.prototype._acquire = function(e4) {
    e4 ? (this._currentItem = e4, this._currentItem.onAcquired && this._currentItem.onAcquired(e4.requestId)) : this._currentItem = void 0;
  }, e3.prototype._release = function(e4) {
    if (this._currentItem && this._currentItem.requestId === e4) {
      var t7 = this._currentItem;
      this._currentItem = void 0, t7.nodeId === this.nodeId && this._send(es2.RELEASE_LOCK, { requestId: t7.requestId });
      var n4 = this._queue.findIndex(function(t8) {
        return t8.requestId === e4;
      });
      n4 > -1 && this._queue.splice(n4, 1), t7.onReleased && t7.onReleased(e4);
    }
  }, e3.prototype._requestLock = function(e4) {
    var t7 = this;
    return new Promise(function(n4) {
      var r4 = { nodeId: e4.nodeId, requestId: e4.requestId, ts: e4.ts, onAcquired: function(e5) {
        t7.isHost && t7._send(es2.ACQUIRE_LOCK, { requestId: e5 }), n4();
      }, onReleased: function() {
        t7._acquire(t7._queue[0]);
      } }, i4 = false;
      for (var s6 in t7._queue) if (t7._queue[s6].ts > r4.ts) {
        t7._queue.splice(parseInt(s6), 0, r4), i4 = true;
        break;
      }
      i4 || t7._queue.push(r4), t7._currentItem || t7._acquire(t7._queue[0]);
    });
  }, e3.prototype._sendSync = function() {
    var e4;
    this.isHost && this._send(es2.SYNC_HOST, { data: { currentItemRequestId: null === (e4 = this._currentItem) || void 0 === e4 ? void 0 : e4.requestId, queue: this._queue.map(function(e5) {
      return { nodeId: e5.nodeId, requestId: e5.requestId, ts: e5.ts };
    }) } });
  }, e3.prototype._waitUntilSyncCompleted = function() {
    return r(this, void 0, void 0, function() {
      var e4 = this;
      return s(this, function(t7) {
        return this.isHost && !this.isInSync ? [2, new Promise(function(t8) {
          e4._activationQueue.push(t8);
        })] : [2];
      });
    });
  }, e3.prototype._waitSync = function() {
    var e4 = this;
    this.isInSync || (this._activationTimeout = setTimeout(function() {
      e4._completeSync();
    }, 8));
  }, e3.prototype._completeSync = function() {
    this.isInSync || (this._state = $i.DONE, this._activationQueue.forEach(function(e4) {
      return e4();
    }), this._activationQueue = []);
  }, e3.prototype.registerNode = function() {
    this._send(es2.NEWNODE), this._waitSync();
  }, e3.prototype.claimHost = function() {
    this._hostId = this.nodeId, this._send(es2.CLAIM_HOST), this._waitSync();
  }, e3.prototype.lock = function() {
    return r(this, void 0, void 0, function() {
      var e4;
      return s(this, function(t7) {
        switch (t7.label) {
          case 0:
            return [4, this._waitUntilSyncCompleted()];
          case 1:
            return t7.sent(), e4 = this._send(es2.REQUEST_LOCK), [4, this._requestLock(e4)];
          case 2:
            return t7.sent(), [2];
        }
      });
    });
  }, e3.prototype.unlock = function() {
    var e4;
    (null === (e4 = this._currentItem) || void 0 === e4 ? void 0 : e4.requestId) && this._release(this._currentItem.requestId);
  }, e3;
}();
var ps = function() {
  function e3(e4) {
    var t7 = e4.dbname, n4 = e4.collectionName, r4 = e4.keyName, i4 = e4.keyHash, s6 = e4.indexes, a5 = e4.store, o3 = this;
    this._state = Ni.INIT, this._indexers = [], this.dbname = t7, this.name = n4, this.keyName = r4, this.indexes = c([[r4]], a(s6.filter(function(e5) {
      return us.createKey(e5) !== o3.keyName;
    })), false), this._keyHash = i4, this._store = a5, this._mutex = new fs(function(e5, t8) {
      return "".concat(Wi(e5, t8), ".lock");
    }(t7, n4)), this._blobContainer = new Zi({ dbname: t7, collectionName: n4, store: a5 }), this._transaction = new is({ dbname: t7, collectionName: n4, store: a5 });
  }
  return e3.metadataOf = function(e4, t7, n4) {
    return r(this, void 0, void 0, function() {
      var r4;
      return s(this, function(i4) {
        switch (i4.label) {
          case 0:
            return r4 = Yi(e4, t7), [4, n4.get(r4)];
          case 1:
            return [2, i4.sent()];
        }
      });
    });
  }, Object.defineProperty(e3.prototype, "state", { get: function() {
    return this._state;
  }, enumerable: false, configurable: true }), Object.defineProperty(e3.prototype, "isReady", { get: function() {
    return this._state === Ni.READY;
  }, enumerable: false, configurable: true }), e3.prototype.init = function() {
    return r(this, void 0, void 0, function() {
      var t7, n4, r4, i4, s6, a5, o3, u4, c4, l3, d5, h4, f4, y6, _2 = this;
      return s(this, function(g4) {
        switch (g4.label) {
          case 0:
            return [4, this._mutex.lock()];
          case 1:
            g4.sent(), g4.label = 2;
          case 2:
            return g4.trys.push([2, 9, , 10]), t7 = Ui.get(this.dbname), [4, e3.metadataOf(this.dbname, this.name, this._store)];
          case 3:
            return n4 = g4.sent(), this._metadata = n4 || { keyName: this.keyName, blockLevel: 1, blockHashBase: t7.blockHashBase, blockHashMultiplier: t7.blockHashMultiplier, blockHashConstant: t7.blockHashConstant, indexes: this.indexes }, [4, this._transaction.init()];
          case 4:
            g4.sent(), this._blockManager = new as2({ dbname: this.dbname, collectionName: this.name, hashFunction: this._keyHash, metadata: this._metadata, transaction: this._transaction, store: this._store }), r4 = c([], a(this.indexes), false), i4 = [], s6 = r4.map(function(e4) {
              return us.createKey(e4);
            }), a5 = n4 ? n4.indexes.map(function(e4) {
              return us.createKey(e4);
            }) : [];
            try {
              for (o3 = o(a5), u4 = o3.next(); !u4.done; u4 = o3.next()) c4 = u4.value, s6.includes(c4) || i4.push(us.parseKey(c4));
            } catch (e4) {
              f4 = { error: e4 };
            } finally {
              try {
                u4 && !u4.done && (y6 = o3.return) && y6.call(o3);
              } finally {
                if (f4) throw f4.error;
              }
            }
            return (l3 = []).push.apply(l3, c([], a(r4.map(function(e4) {
              var t8 = new us({ dbname: _2.dbname, collectionName: _2.name, keyName: _2.keyName, fields: e4, transaction: _2._transaction, store: _2._store });
              return _2._indexers.push(t8), t8.ensure();
            })), false)), l3.push.apply(l3, c([], a(i4.map(function(e4) {
              return new us({ dbname: _2.dbname, collectionName: _2.name, keyName: _2.keyName, fields: e4, transaction: _2._transaction, store: _2._store }).drop();
            })), false)), [4, Promise.all(l3)];
          case 5:
            return g4.sent(), [4, this._transaction.commit()];
          case 6:
            return g4.sent(), s6.sort().join(",") === a5.sort().join(",") ? [3, 8] : (d5 = Yi(this.dbname, this.name), this._metadata.indexes = r4, [4, this._store.set({ key: d5, value: this._metadata })]);
          case 7:
            g4.sent(), g4.label = 8;
          case 8:
            return this._state = Ni.READY, this._mutex.unlock(), [3, 10];
          case 9:
            throw h4 = g4.sent(), this._mutex.unlock(), h4;
          case 10:
            return [2];
        }
      });
    });
  }, e3.prototype.close = function() {
    this._state = Ni.CLOSED;
  }, e3.prototype._hasPropertyOfKeyName = function(e4) {
    var t7 = e4[this.keyName];
    return "string" == typeof t7 && !!t7;
  }, e3.prototype._getIndexerBy = function(e4) {
    var t7, n4;
    void 0 === e4 && (e4 = null), e4 || (e4 = [this.keyName]);
    var r4 = us.createKey(e4);
    try {
      for (var i4 = o(this._indexers), s6 = i4.next(); !s6.done; s6 = i4.next()) {
        var a5 = s6.value;
        if (r4 === us.createKey(a5.fields)) return a5;
      }
    } catch (e5) {
      t7 = { error: e5 };
    } finally {
      try {
        s6 && !s6.done && (n4 = i4.return) && n4.call(i4);
      } finally {
        if (t7) throw t7.error;
      }
    }
    throw Ci.indexTableIsRequired;
  }, e3.prototype._upgradeBlockLevel = function() {
    return r(this, void 0, void 0, function() {
      var e4;
      return s(this, function(t7) {
        switch (t7.label) {
          case 0:
            return e4 = Yi(this.dbname, this.name), this._metadata.blockLevel++, [4, this._store.set({ key: e4, value: this._metadata })];
          case 1:
            return t7.sent(), [2];
        }
      });
    });
  }, e3.prototype._requestInsert = function(e4) {
    return r(this, void 0, void 0, function() {
      var t7, n4, r4, i4, s6, a5;
      return s(this, function(o3) {
        switch (o3.label) {
          case 0:
            return t7 = e4[this.keyName], [4, this._blockManager.getFromBlock(t7)];
          case 1:
            return o3.sent() ? [3, 13] : [4, this._blockManager.putToBlock(t7, e4)];
          case 2:
            return o3.sent() ? [3, 5] : [4, this._upgradeBlockLevel()];
          case 3:
            return o3.sent(), [4, this._blockManager.putToBlock(t7, e4)];
          case 4:
            o3.sent(), o3.label = 5;
          case 5:
            o3.trys.push([5, 10, 11, 12]), n4 = o(this._indexers), r4 = n4.next(), o3.label = 6;
          case 6:
            return r4.done ? [3, 9] : [4, r4.value.addItem(e4)];
          case 7:
            o3.sent(), o3.label = 8;
          case 8:
            return r4 = n4.next(), [3, 6];
          case 9:
            return [3, 12];
          case 10:
            return i4 = o3.sent(), s6 = { error: i4 }, [3, 12];
          case 11:
            try {
              r4 && !r4.done && (a5 = n4.return) && a5.call(n4);
            } finally {
              if (s6) throw s6.error;
            }
            return [7];
          case 12:
            return [3, 14];
          case 13:
            throw Ci.collectionInsertDuplicate;
          case 14:
            return [2];
        }
      });
    });
  }, e3.prototype._requestUpsert = function(e4) {
    return r(this, void 0, void 0, function() {
      var t7, n4, r4, i4, s6, a5, o3, u4, c4, l3, d5, h4, f4;
      return s(this, function(p4) {
        switch (p4.label) {
          case 0:
            return t7 = e4[this.keyName], [4, this._blockManager.getFromBlock(t7)];
          case 1:
            return (n4 = p4.sent()) ? [3, 13] : [4, this._blockManager.putToBlock(t7, e4)];
          case 2:
            return p4.sent() ? [3, 5] : [4, this._upgradeBlockLevel()];
          case 3:
            return p4.sent(), [4, this._blockManager.putToBlock(t7, e4)];
          case 4:
            p4.sent(), p4.label = 5;
          case 5:
            p4.trys.push([5, 10, 11, 12]), r4 = o(this._indexers), i4 = r4.next(), p4.label = 6;
          case 6:
            return i4.done ? [3, 9] : [4, (u4 = i4.value).addItem(e4)];
          case 7:
            p4.sent(), p4.label = 8;
          case 8:
            return i4 = r4.next(), [3, 6];
          case 9:
            return [3, 12];
          case 10:
            return s6 = p4.sent(), l3 = { error: s6 }, [3, 12];
          case 11:
            try {
              i4 && !i4.done && (d5 = r4.return) && d5.call(r4);
            } finally {
              if (l3) throw l3.error;
            }
            return [7];
          case 12:
            return [3, 23];
          case 13:
            return [4, this._blockManager.putToBlock(t7, e4)];
          case 14:
            p4.sent(), p4.label = 15;
          case 15:
            p4.trys.push([15, 21, 22, 23]), a5 = o(this._indexers), o3 = a5.next(), p4.label = 16;
          case 16:
            return o3.done ? [3, 20] : 0 === (u4 = o3.value).diff(u4.getColumnValues(n4), u4.getColumnValues(e4)) ? [3, 19] : [4, u4.removeItem(n4)];
          case 17:
            return p4.sent(), [4, u4.addItem(e4)];
          case 18:
            p4.sent(), p4.label = 19;
          case 19:
            return o3 = a5.next(), [3, 16];
          case 20:
            return [3, 23];
          case 21:
            return c4 = p4.sent(), h4 = { error: c4 }, [3, 23];
          case 22:
            try {
              o3 && !o3.done && (f4 = a5.return) && f4.call(a5);
            } finally {
              if (h4) throw h4.error;
            }
            return [7];
          case 23:
            return [2];
        }
      });
    });
  }, e3.prototype._requestUpdate = function(e4) {
    return r(this, void 0, void 0, function() {
      var t7, n4, r4, i4, s6, a5, o3, u4;
      return s(this, function(c4) {
        switch (c4.label) {
          case 0:
            return t7 = e4[this.keyName], [4, this._blockManager.getFromBlock(t7)];
          case 1:
            return (n4 = c4.sent()) ? [4, this._blockManager.putToBlock(t7, e4)] : [3, 11];
          case 2:
            c4.sent(), c4.label = 3;
          case 3:
            c4.trys.push([3, 9, 10, 11]), r4 = o(this._indexers), i4 = r4.next(), c4.label = 4;
          case 4:
            return i4.done ? [3, 8] : 0 === (s6 = i4.value).diff(s6.getColumnValues(n4), s6.getColumnValues(e4)) ? [3, 7] : [4, s6.removeItem(n4)];
          case 5:
            return c4.sent(), [4, s6.addItem(e4)];
          case 6:
            c4.sent(), c4.label = 7;
          case 7:
            return i4 = r4.next(), [3, 4];
          case 8:
            return [3, 11];
          case 9:
            return a5 = c4.sent(), o3 = { error: a5 }, [3, 11];
          case 10:
            try {
              i4 && !i4.done && (u4 = r4.return) && u4.call(r4);
            } finally {
              if (o3) throw o3.error;
            }
            return [7];
          case 11:
            return [2];
        }
      });
    });
  }, e3.prototype._requestRemove = function(e4) {
    return r(this, void 0, void 0, function() {
      var t7, n4, r4, i4, s6, a5;
      return s(this, function(o3) {
        switch (o3.label) {
          case 0:
            return [4, this._blockManager.getFromBlock(e4)];
          case 1:
            return (t7 = o3.sent()) ? [4, this._blockManager.removeFromBlock(e4)] : [3, 10];
          case 2:
            o3.sent(), o3.label = 3;
          case 3:
            o3.trys.push([3, 8, 9, 10]), n4 = o(this._indexers), r4 = n4.next(), o3.label = 4;
          case 4:
            return r4.done ? [3, 7] : [4, r4.value.removeItem(t7)];
          case 5:
            o3.sent(), o3.label = 6;
          case 6:
            return r4 = n4.next(), [3, 4];
          case 7:
            return [3, 10];
          case 8:
            return i4 = o3.sent(), s6 = { error: i4 }, [3, 10];
          case 9:
            try {
              r4 && !r4.done && (a5 = n4.return) && a5.call(n4);
            } finally {
              if (s6) throw s6.error;
            }
            return [7];
          case 10:
            return [2];
        }
      });
    });
  }, e3.prototype._requestClear = function() {
    return r(this, void 0, void 0, function() {
      var e4, t7, n4, r4, i4;
      return s(this, function(s6) {
        switch (s6.label) {
          case 0:
            return [4, this._blockManager.clearAllBlocks()];
          case 1:
            s6.sent(), s6.label = 2;
          case 2:
            s6.trys.push([2, 7, 8, 9]), e4 = o(this._indexers), t7 = e4.next(), s6.label = 3;
          case 3:
            return t7.done ? [3, 6] : [4, t7.value.clear()];
          case 4:
            s6.sent(), s6.label = 5;
          case 5:
            return t7 = e4.next(), [3, 3];
          case 6:
            return [3, 9];
          case 7:
            return n4 = s6.sent(), r4 = { error: n4 }, [3, 9];
          case 8:
            try {
              t7 && !t7.done && (i4 = e4.return) && i4.call(e4);
            } finally {
              if (r4) throw r4.error;
            }
            return [7];
          case 9:
            return [2];
        }
      });
    });
  }, e3.prototype.getByKey = function(e4) {
    return r(this, void 0, void 0, function() {
      var t7, n4;
      return s(this, function(r4) {
        switch (r4.label) {
          case 0:
            return this.isReady ? [4, this._mutex.lock()] : [3, 6];
          case 1:
            r4.sent(), r4.label = 2;
          case 2:
            return r4.trys.push([2, 4, , 5]), [4, this._blockManager.getFromBlock(e4)];
          case 3:
            return t7 = r4.sent(), this._mutex.unlock(), [2, Pi(t7)];
          case 4:
            throw n4 = r4.sent(), this._mutex.unlock(), n4;
          case 5:
            return [3, 7];
          case 6:
            throw Ci.collectionNotReady;
          case 7:
            return [2];
        }
      });
    });
  }, e3.prototype.query = function(e4) {
    if (void 0 === e4 && (e4 = {}), this.isReady) return new Vi({ condition: e4.where, mutex: this._mutex, blockManager: this._blockManager, indexer: this._getIndexerBy(e4.index), backward: !!e4.backward });
    throw Ci.collectionNotReady;
  }, e3.prototype.insertOne = function(e4) {
    return r(this, void 0, void 0, function() {
      var t7;
      return s(this, function(n4) {
        switch (n4.label) {
          case 0:
            return this.isReady ? [4, this._mutex.lock()] : [3, 8];
          case 1:
            n4.sent(), n4.label = 2;
          case 2:
            if (n4.trys.push([2, 5, , 7]), !this._hasPropertyOfKeyName(e4)) throw Ci.collectionKeyNotGiven;
            return [4, this._requestInsert(Pi(e4))];
          case 3:
            return n4.sent(), [4, this._transaction.commit()];
          case 4:
            return n4.sent(), this._mutex.unlock(), [2, e4];
          case 5:
            return t7 = n4.sent(), [4, this._transaction.clear()];
          case 6:
            throw n4.sent(), this._mutex.unlock(), t7;
          case 7:
            return [3, 9];
          case 8:
            throw Ci.collectionNotReady;
          case 9:
            return [2];
        }
      });
    });
  }, e3.prototype.insertMany = function(e4) {
    return r(this, void 0, void 0, function() {
      var t7, n4, r4, i4, s6, a5, o3, u4 = this;
      return s(this, function(c4) {
        switch (c4.label) {
          case 0:
            return this.isReady ? [4, this._mutex.lock()] : [3, 15];
          case 1:
            c4.sent(), c4.label = 2;
          case 2:
            if (c4.trys.push([2, 12, , 14]), e4.some(function(e5) {
              return !u4._hasPropertyOfKeyName(e5);
            })) throw Ci.collectionKeyNotGiven;
            c4.label = 3;
          case 3:
            c4.trys.push([3, 8, 9, 10]), t7 = o(e4), n4 = t7.next(), c4.label = 4;
          case 4:
            return n4.done ? [3, 7] : (r4 = n4.value, [4, this._requestInsert(Pi(r4))]);
          case 5:
            c4.sent(), c4.label = 6;
          case 6:
            return n4 = t7.next(), [3, 4];
          case 7:
            return [3, 10];
          case 8:
            return i4 = c4.sent(), a5 = { error: i4 }, [3, 10];
          case 9:
            try {
              n4 && !n4.done && (o3 = t7.return) && o3.call(t7);
            } finally {
              if (a5) throw a5.error;
            }
            return [7];
          case 10:
            return [4, this._transaction.commit()];
          case 11:
            return c4.sent(), this._mutex.unlock(), [2, e4];
          case 12:
            return s6 = c4.sent(), [4, this._transaction.clear()];
          case 13:
            throw c4.sent(), this._mutex.unlock(), s6;
          case 14:
            return [3, 16];
          case 15:
            throw Ci.collectionNotReady;
          case 16:
            return [2];
        }
      });
    });
  }, e3.prototype.upsertOne = function(e4) {
    return r(this, void 0, void 0, function() {
      var t7;
      return s(this, function(n4) {
        switch (n4.label) {
          case 0:
            return this.isReady ? [4, this._mutex.lock()] : [3, 8];
          case 1:
            n4.sent(), n4.label = 2;
          case 2:
            if (n4.trys.push([2, 5, , 7]), !this._hasPropertyOfKeyName(e4)) throw Ci.collectionKeyNotGiven;
            return [4, this._requestUpsert(Pi(e4))];
          case 3:
            return n4.sent(), [4, this._transaction.commit()];
          case 4:
            return n4.sent(), this._mutex.unlock(), [2, e4];
          case 5:
            return t7 = n4.sent(), [4, this._transaction.clear()];
          case 6:
            throw n4.sent(), this._mutex.unlock(), t7;
          case 7:
            return [3, 9];
          case 8:
            throw Ci.collectionNotReady;
          case 9:
            return [2];
        }
      });
    });
  }, e3.prototype.upsertMany = function(e4) {
    return r(this, void 0, void 0, function() {
      var t7, n4, r4, i4, s6, a5, o3, u4 = this;
      return s(this, function(c4) {
        switch (c4.label) {
          case 0:
            return this.isReady ? [4, this._mutex.lock()] : [3, 15];
          case 1:
            c4.sent(), c4.label = 2;
          case 2:
            if (c4.trys.push([2, 12, , 14]), e4.some(function(e5) {
              return !u4._hasPropertyOfKeyName(e5);
            })) throw Ci.collectionKeyNotGiven;
            c4.label = 3;
          case 3:
            c4.trys.push([3, 8, 9, 10]), t7 = o(e4), n4 = t7.next(), c4.label = 4;
          case 4:
            return n4.done ? [3, 7] : (r4 = n4.value, [4, this._requestUpsert(Pi(r4))]);
          case 5:
            c4.sent(), c4.label = 6;
          case 6:
            return n4 = t7.next(), [3, 4];
          case 7:
            return [3, 10];
          case 8:
            return i4 = c4.sent(), a5 = { error: i4 }, [3, 10];
          case 9:
            try {
              n4 && !n4.done && (o3 = t7.return) && o3.call(t7);
            } finally {
              if (a5) throw a5.error;
            }
            return [7];
          case 10:
            return [4, this._transaction.commit()];
          case 11:
            return c4.sent(), this._mutex.unlock(), [2, e4];
          case 12:
            return s6 = c4.sent(), [4, this._transaction.clear()];
          case 13:
            throw c4.sent(), this._mutex.unlock(), s6;
          case 14:
            return [3, 16];
          case 15:
            throw Ci.collectionNotReady;
          case 16:
            return [2];
        }
      });
    });
  }, e3.prototype.update = function(e4) {
    return r(this, void 0, void 0, function() {
      var t7;
      return s(this, function(n4) {
        switch (n4.label) {
          case 0:
            return this.isReady ? [4, this._mutex.lock()] : [3, 8];
          case 1:
            n4.sent(), n4.label = 2;
          case 2:
            if (n4.trys.push([2, 5, , 7]), !this._hasPropertyOfKeyName(e4)) throw Ci.collectionKeyNotGiven;
            return [4, this._requestUpdate(Pi(e4))];
          case 3:
            return n4.sent(), [4, this._transaction.commit()];
          case 4:
            return n4.sent(), this._mutex.unlock(), [2, e4];
          case 5:
            return t7 = n4.sent(), [4, this._transaction.clear()];
          case 6:
            throw n4.sent(), this._mutex.unlock(), t7;
          case 7:
            return [3, 9];
          case 8:
            throw Ci.collectionNotReady;
          case 9:
            return [2];
        }
      });
    });
  }, e3.prototype.updateIf = function(e4, t7) {
    return r(this, void 0, void 0, function() {
      var n4, r4, i4, s6, a5, o3, u4, c4, l3, d5, h4, f4, p4, m5, y6 = this;
      return s(this, function(_2) {
        switch (_2.label) {
          case 0:
            return this.isReady ? [4, this._mutex.lock()] : [3, 16];
          case 1:
            _2.sent(), _2.label = 2;
          case 2:
            return _2.trys.push([2, 13, , 15]), n4 = e4.where, r4 = void 0 === n4 ? {} : n4, i4 = e4.index, s6 = void 0 === i4 ? null : i4, a5 = e4.backward, o3 = void 0 !== a5 && a5, u4 = [], [4, new Gi({ condition: r4, blockManager: this._blockManager, backward: o3, indexer: this._getIndexerBy(s6) }).each(function(e5) {
              return r(y6, void 0, void 0, function() {
                var n5, i5;
                return s(this, function(s7) {
                  if (e5.error) throw e5.stop(), e5.error;
                  if (e5.hasNext) {
                    if (n5 = e5.nextValue, Di(r4, n5) && t7.set) {
                      if ("function" != typeof t7.set) for (i5 in t7.set) n5[i5] = t7.set[i5];
                      else t7.set(n5);
                      u4.push(n5);
                    }
                    e5.next();
                  } else e5.stop();
                  return [2];
                });
              });
            })];
          case 3:
            _2.sent(), _2.label = 4;
          case 4:
            _2.trys.push([4, 9, 10, 11]), c4 = o(u4), l3 = c4.next(), _2.label = 5;
          case 5:
            return l3.done ? [3, 8] : (d5 = l3.value, [4, this._requestUpdate(Pi(d5))]);
          case 6:
            _2.sent(), _2.label = 7;
          case 7:
            return l3 = c4.next(), [3, 5];
          case 8:
            return [3, 11];
          case 9:
            return h4 = _2.sent(), p4 = { error: h4 }, [3, 11];
          case 10:
            try {
              l3 && !l3.done && (m5 = c4.return) && m5.call(c4);
            } finally {
              if (p4) throw p4.error;
            }
            return [7];
          case 11:
            return [4, this._transaction.commit()];
          case 12:
            return _2.sent(), this._mutex.unlock(), [2, u4];
          case 13:
            return f4 = _2.sent(), [4, this._transaction.clear()];
          case 14:
            throw _2.sent(), this._mutex.unlock(), f4;
          case 15:
            return [3, 17];
          case 16:
            throw this._transaction.clear(), Ci.collectionNotReady;
          case 17:
            return [2];
        }
      });
    });
  }, e3.prototype.remove = function(e4) {
    return r(this, void 0, void 0, function() {
      var t7;
      return s(this, function(n4) {
        switch (n4.label) {
          case 0:
            return this.isReady ? [4, this._mutex.lock()] : [3, 8];
          case 1:
            n4.sent(), n4.label = 2;
          case 2:
            return n4.trys.push([2, 5, , 7]), [4, this._requestRemove(e4)];
          case 3:
            return n4.sent(), [4, this._transaction.commit()];
          case 4:
            return n4.sent(), this._mutex.unlock(), [3, 7];
          case 5:
            return t7 = n4.sent(), [4, this._transaction.clear()];
          case 6:
            throw n4.sent(), this._mutex.unlock(), t7;
          case 7:
            return [3, 9];
          case 8:
            throw Ci.collectionNotReady;
          case 9:
            return [2];
        }
      });
    });
  }, e3.prototype.removeIf = function(e4) {
    return r(this, void 0, void 0, function() {
      var t7, n4, r4, i4, s6, a5, o3, u4, c4, l3, d5, h4, f4, p4, m5 = this;
      return s(this, function(y6) {
        switch (y6.label) {
          case 0:
            return this.isReady ? [4, this._mutex.lock()] : [3, 15];
          case 1:
            y6.sent(), y6.label = 2;
          case 2:
            return y6.trys.push([2, 13, , 14]), t7 = e4.where, n4 = void 0 === t7 ? {} : t7, r4 = e4.index, i4 = void 0 === r4 ? null : r4, s6 = e4.backward, a5 = void 0 !== s6 && s6, o3 = [], [4, new Gi({ condition: n4, blockManager: this._blockManager, backward: a5, indexer: this._getIndexerBy(i4) }).each(function(e5) {
              return r(m5, void 0, void 0, function() {
                var t8, r5;
                return s(this, function(i5) {
                  if (e5.error) throw e5.stop(), e5.error;
                  return e5.hasNext ? (t8 = e5.nextValue, Di(n4, t8) && (r5 = t8[this.keyName], o3.push(r5)), e5.next()) : e5.stop(), [2];
                });
              });
            })];
          case 3:
            y6.sent(), y6.label = 4;
          case 4:
            y6.trys.push([4, 9, 10, 11]), u4 = o(o3), c4 = u4.next(), y6.label = 5;
          case 5:
            return c4.done ? [3, 8] : (l3 = c4.value, [4, this._requestRemove(l3)]);
          case 6:
            y6.sent(), y6.label = 7;
          case 7:
            return c4 = u4.next(), [3, 5];
          case 8:
            return [3, 11];
          case 9:
            return d5 = y6.sent(), f4 = { error: d5 }, [3, 11];
          case 10:
            try {
              c4 && !c4.done && (p4 = u4.return) && p4.call(u4);
            } finally {
              if (f4) throw f4.error;
            }
            return [7];
          case 11:
            return [4, this._transaction.commit()];
          case 12:
            return y6.sent(), this._mutex.unlock(), [2, o3];
          case 13:
            throw h4 = y6.sent(), this._mutex.unlock(), h4;
          case 14:
            return [3, 16];
          case 15:
            throw this._transaction.clear(), Ci.collectionNotReady;
          case 16:
            return [2];
        }
      });
    });
  }, e3.prototype.clear = function() {
    return r(this, void 0, void 0, function() {
      var e4;
      return s(this, function(t7) {
        switch (t7.label) {
          case 0:
            return this.isReady ? [4, this._mutex.lock()] : [3, 8];
          case 1:
            t7.sent(), t7.label = 2;
          case 2:
            return t7.trys.push([2, 5, , 7]), [4, this._requestClear()];
          case 3:
            return t7.sent(), [4, this._transaction.commit()];
          case 4:
            return t7.sent(), this._mutex.unlock(), [3, 7];
          case 5:
            return e4 = t7.sent(), [4, this._transaction.clear()];
          case 6:
            throw t7.sent(), this._mutex.unlock(), e4;
          case 7:
            return [3, 9];
          case 8:
            throw Ci.collectionNotReady;
          case 9:
            return [2];
        }
      });
    });
  }, e3.prototype.getBlob = function(e4) {
    return r(this, void 0, void 0, function() {
      return s(this, function(t7) {
        switch (t7.label) {
          case 0:
            return [4, this._blobContainer.get(e4)];
          case 1:
            return [2, t7.sent()];
        }
      });
    });
  }, e3.prototype.saveBlob = function(e4, t7) {
    return r(this, void 0, void 0, function() {
      return s(this, function(n4) {
        switch (n4.label) {
          case 0:
            return [4, this._blobContainer.save(e4, t7)];
          case 1:
            return [2, n4.sent()];
        }
      });
    });
  }, e3.prototype.removeBlob = function(e4) {
    return r(this, void 0, void 0, function() {
      return s(this, function(t7) {
        switch (t7.label) {
          case 0:
            return [4, this._blobContainer.remove(e4)];
          case 1:
            return t7.sent(), [2];
        }
      });
    });
  }, e3.prototype.removeAllBlobs = function() {
    return r(this, void 0, void 0, function() {
      return s(this, function(e4) {
        switch (e4.label) {
          case 0:
            return [4, this._blobContainer.clear()];
          case 1:
            return e4.sent(), [2];
        }
      });
    });
  }, e3;
}();
var ms = "[NESTDB]";
var vs = true;
var ys = function() {
  function e3() {
  }
  return e3.off = function() {
    vs = false;
  }, e3.log = function() {
    for (var e4 = [], t7 = 0; t7 < arguments.length; t7++) e4[t7] = arguments[t7];
    vs && console.log.apply(console, c(["".concat(ms, "[LOG]")], a(e4), false));
  }, e3.warning = function() {
    for (var e4 = [], t7 = 0; t7 < arguments.length; t7++) e4[t7] = arguments[t7];
    vs && console.warn.apply(console, c(["".concat(ms, "[WARNING]")], a(e4), false));
  }, e3.error = function() {
    for (var e4 = [], t7 = 0; t7 < arguments.length; t7++) e4[t7] = arguments[t7];
    vs && console.error.apply(console, c(["".concat(ms, "[ERROR]")], a(e4), false));
  }, e3;
}();
var _s2 = [{}, { a: 700400, n: "error" }];
var gs = function() {
  function e3(e4) {
    var t7, n4, r4;
    this.encryption = null !== (t7 = e4.encryption) && void 0 !== t7 ? t7 : L, this.itemSizeLimit = null !== (n4 = e4.itemSizeLimit) && void 0 !== n4 ? n4 : 4194304, this.metadataBuffer = null !== (r4 = e4.metadataBuffer) && void 0 !== r4 ? r4 : 256;
  }
  return Object.defineProperty(e3.prototype, "_encryptionCheckKey", { get: function() {
    return "".concat(this.dbname, ".encrypt");
  }, enumerable: false, configurable: true }), Object.defineProperty(e3.prototype, "_reservedKeys", { get: function() {
    return [this._encryptionCheckKey];
  }, enumerable: false, configurable: true }), e3.prototype._getRawKey = function(e4, t7) {
    return void 0 === t7 && (t7 = ""), "".concat(e4).concat(t7);
  }, e3.prototype._generateShardPostfixArray = function(e4) {
    return void 0 === e4 && (e4 = 1), c([], a(Array(e4).keys()), false);
  }, e3.prototype._shardify = function(e4) {
    var t7 = this, n4 = e4.key, r4 = e4.value, i4 = JSON.stringify(this.encryption.encrypt(r4)), s6 = Math.ceil(i4.length / this.adjustedItemSizeLimit);
    return this._generateShardPostfixArray(s6).map(function(e5) {
      var r5 = { key: t7._getRawKey(n4, ".".concat(e5)), data: i4.substring(e5 * t7.adjustedItemSizeLimit, (e5 + 1) * t7.adjustedItemSizeLimit) };
      return 0 === e5 && (r5.metadata = { shards: s6 }), r5;
    });
  }, e3.prototype._resetIfEncryptionChanged = function() {
    return r(this, void 0, void 0, function() {
      var e4, t7, n4, r4, i4, s6, a5, o3, u4, c4 = this;
      return s(this, function(l3) {
        switch (l3.label) {
          case 0:
            return [4, this.get(this._encryptionCheckKey)];
          case 1:
            if (e4 = l3.sent(), t7 = { encrypted: _s2.map(function(e5) {
              var t8;
              return null === (t8 = c4.encryption) || void 0 === t8 ? void 0 : t8.encrypt(e5);
            }) }, !e4) return [3, 8];
            if (!e4.encrypted || !Array.isArray(e4.encrypted)) return [3, 6];
            for (i4 in n4 = e4.encrypted, r4 = [], n4) r4.push(i4);
            s6 = 0, l3.label = 2;
          case 2:
            return s6 < r4.length ? (i4 = r4[s6]) in n4 ? (a5 = i4, o3 = JSON.stringify(e4.encrypted[a5]), u4 = JSON.stringify(t7.encrypted[a5]), o3 === u4 ? [3, 4] : (ys.warning("Encryption algorithm has changed. Stored data would be cleared."), [4, this.clear()])) : [3, 4] : [3, 5];
          case 3:
            return l3.sent(), [3, 5];
          case 4:
            return s6++, [3, 2];
          case 5:
            return [3, 8];
          case 6:
            return [4, this.clear()];
          case 7:
            l3.sent(), l3.label = 8;
          case 8:
            return [4, this.set({ key: this._encryptionCheckKey, value: t7 })];
          case 9:
            return l3.sent(), [2];
        }
      });
    });
  }, Object.defineProperty(e3.prototype, "adjustedItemSizeLimit", { get: function() {
    return Math.max(this.itemSizeLimit - this.metadataBuffer, 4);
  }, enumerable: false, configurable: true }), e3.prototype.usage = function() {
    return r(this, void 0, void 0, function() {
      var e4, t7, n4, r4, i4, s6, a5, o3, u4;
      return s(this, function(c4) {
        switch (c4.label) {
          case 0:
            return e4 = 0, [4, this._getAllRawKeys()];
          case 1:
            t7 = c4.sent(), c4.label = 2;
          case 2:
            c4.trys.push([2, 7, 8, 9]), n4 = o(t7), r4 = n4.next(), c4.label = 3;
          case 3:
            return r4.done ? [3, 6] : (i4 = r4.value, [4, this._getRaw(i4)]);
          case 4:
            (s6 = c4.sent()) && (e4 += JSON.stringify(s6).length), c4.label = 5;
          case 5:
            return r4 = n4.next(), [3, 3];
          case 6:
            return [3, 9];
          case 7:
            return a5 = c4.sent(), o3 = { error: a5 }, [3, 9];
          case 8:
            try {
              r4 && !r4.done && (u4 = n4.return) && u4.call(n4);
            } finally {
              if (o3) throw o3.error;
            }
            return [7];
          case 9:
            return [2, e4];
        }
      });
    });
  }, e3.prototype.getAllKeys = function() {
    return r(this, void 0, void 0, function() {
      var e4 = this;
      return s(this, function(t7) {
        switch (t7.label) {
          case 0:
            return [4, this._getAllRawKeys()];
          case 1:
            return [2, t7.sent().filter(function(e5) {
              return e5.endsWith(".0");
            }).map(function(e5) {
              return e5.replace(/\.0$/, "");
            }).filter(function(t8) {
              return !e4._reservedKeys.includes(t8);
            })];
        }
      });
    });
  }, e3.prototype.get = function(e4) {
    return r(this, void 0, void 0, function() {
      var t7, n4, r4, i4, s6, a5, o3 = this;
      return s(this, function(u4) {
        switch (u4.label) {
          case 0:
            return t7 = this._getRawKey(e4, ".0"), [4, this._getRaw(t7)];
          case 1:
            if (!(n4 = u4.sent())) return [3, 7];
            u4.label = 2;
          case 2:
            return u4.trys.push([2, 6, , 7]), r4 = n4.data, (null == (i4 = n4.metadata) ? void 0 : i4.shards) && i4.shards > 1 ? [4, Promise.all(this._generateShardPostfixArray(null == i4 ? void 0 : i4.shards).map(function(t8) {
              return r(o3, void 0, void 0, function() {
                var n5, i5;
                return s(this, function(s7) {
                  switch (s7.label) {
                    case 0:
                      return t8 > 0 ? (n5 = this._getRawKey(e4, ".".concat(t8)), [4, this._getRaw(n5)]) : [3, 2];
                    case 1:
                      if (!(i5 = s7.sent())) throw Ci.storeBrokenIntegrity;
                      return [2, i5.data];
                    case 2:
                      return [2, r4];
                  }
                });
              });
            }))] : [3, 4];
          case 3:
            return a5 = u4.sent(), [3, 5];
          case 4:
            a5 = [r4], u4.label = 5;
          case 5:
            return s6 = a5, [2, this.encryption.decrypt(JSON.parse(s6.join("")))];
          case 6:
            return u4.sent(), [2, null];
          case 7:
            return [2, null];
        }
      });
    });
  }, e3.prototype.set = function(e4) {
    return r(this, void 0, void 0, function() {
      var t7;
      return s(this, function(n4) {
        switch (n4.label) {
          case 0:
            return t7 = this._shardify(e4), [4, this._setRaw(t7)];
          case 1:
            return n4.sent(), [2, n({}, e4.value)];
        }
      });
    });
  }, e3.prototype.setMany = function(e4) {
    return r(this, void 0, void 0, function() {
      var t7, n4 = this;
      return s(this, function(r4) {
        switch (r4.label) {
          case 0:
            return t7 = [], [4, this._setRaw(t7.concat.apply(t7, c([], a(e4.map(function(e5) {
              return n4._shardify(e5);
            })), false)))];
          case 1:
            return r4.sent(), [2, e4.map(function(e5) {
              return e5.value;
            })];
        }
      });
    });
  }, e3.prototype.remove = function(e4) {
    return r(this, void 0, void 0, function() {
      var t7, n4, r4, i4 = this;
      return s(this, function(s6) {
        switch (s6.label) {
          case 0:
            return t7 = this._getRawKey(e4, ".0"), [4, this._getRaw(t7)];
          case 1:
            return (n4 = s6.sent()) ? (r4 = n4.metadata, [4, this._removeRaw(this._generateShardPostfixArray(null == r4 ? void 0 : r4.shards).map(function(t8) {
              return i4._getRawKey(e4, ".".concat(t8));
            }))]) : [3, 3];
          case 2:
            return s6.sent(), [2, true];
          case 3:
            return [2, false];
        }
      });
    });
  }, e3.prototype.removeMany = function(e4) {
    return r(this, void 0, void 0, function() {
      var t7, n4, r4, i4, s6, a5, o3, u4, c4, l3 = this;
      return s(this, function(d5) {
        switch (d5.label) {
          case 0:
            t7 = [], n4 = function(e5) {
              var n5, i5, s7;
              return s(this, function(a6) {
                switch (a6.label) {
                  case 0:
                    return n5 = r4._getRawKey(e5, ".0"), [4, r4._getRaw(n5)];
                  case 1:
                    return (i5 = a6.sent()) && (s7 = i5.metadata, t7.push.apply(t7, c([], a(r4._generateShardPostfixArray(null == s7 ? void 0 : s7.shards).map(function(t8) {
                      return l3._getRawKey(e5, ".".concat(t8));
                    })), false))), [2];
                }
              });
            }, r4 = this, d5.label = 1;
          case 1:
            d5.trys.push([1, 6, 7, 8]), i4 = o(e4), s6 = i4.next(), d5.label = 2;
          case 2:
            return s6.done ? [3, 5] : (a5 = s6.value, [5, n4(a5)]);
          case 3:
            d5.sent(), d5.label = 4;
          case 4:
            return s6 = i4.next(), [3, 2];
          case 5:
            return [3, 8];
          case 6:
            return o3 = d5.sent(), u4 = { error: o3 }, [3, 8];
          case 7:
            try {
              s6 && !s6.done && (c4 = i4.return) && c4.call(i4);
            } finally {
              if (u4) throw u4.error;
            }
            return [7];
          case 8:
            return t7.length > 0 ? [4, this._removeRaw(t7)] : [3, 10];
          case 9:
            d5.sent(), d5.label = 10;
          case 10:
            return [2, e4];
        }
      });
    });
  }, e3;
}();
var bs = {};
var Is = function(e3) {
  function t7(t8) {
    void 0 === t8 && (t8 = {});
    var n4, r4 = this;
    r4 = e3.call(this, n(n({}, t8), { itemSizeLimit: null !== (n4 = t8.itemSizeLimit) && void 0 !== n4 ? n4 : 4194304 })) || this;
    var i4 = t8.delay, s6 = void 0 === i4 ? 1 : i4;
    return r4.delay = s6, r4.observer = {}, r4;
  }
  return t(t7, e3), Object.defineProperty(t7.prototype, "rawData", { get: function() {
    return bs[this.dbname];
  }, set: function(e4) {
    bs[this.dbname] = e4;
  }, enumerable: false, configurable: true }), t7.prototype._getAllRawKeys = function() {
    return r(this, void 0, void 0, function() {
      return s(this, function(e4) {
        if (bs[this.dbname]) return [2, Object.keys(bs[this.dbname])];
        throw Ci.storeNotAvailable;
      });
    });
  }, t7.prototype._getRaw = function(e4) {
    return r(this, void 0, void 0, function() {
      return s(this, function(t8) {
        switch (t8.label) {
          case 0:
            return bs[this.dbname] ? [4, xi(this.delay)] : [3, 2];
          case 1:
            return t8.sent(), [2, bs[this.dbname][e4] ? n({ key: e4 }, bs[this.dbname][e4]) : null];
          case 2:
            throw Ci.storeNotAvailable;
        }
      });
    });
  }, t7.prototype._setRaw = function(e4) {
    return r(this, void 0, void 0, function() {
      var t8, n4, r4, i4, s6, a5, o3, u4;
      return s(this, function(c4) {
        switch (c4.label) {
          case 0:
            return bs[this.dbname] ? [4, xi(this.delay)] : [3, 2];
          case 1:
            c4.sent();
            try {
              for (t8 = o(e4), n4 = t8.next(); !n4.done; n4 = t8.next()) r4 = n4.value, i4 = r4.key, s6 = r4.data, a5 = r4.metadata, bs[this.dbname][i4] = Object.freeze({ data: s6, metadata: a5 });
            } catch (e5) {
              o3 = { error: e5 };
            } finally {
              try {
                n4 && !n4.done && (u4 = t8.return) && u4.call(t8);
              } finally {
                if (o3) throw o3.error;
              }
            }
            return [3, 3];
          case 2:
            throw Ci.storeNotAvailable;
          case 3:
            return [2];
        }
      });
    });
  }, t7.prototype._removeRaw = function(e4) {
    return r(this, void 0, void 0, function() {
      var t8, n4, r4, i4, s6;
      return s(this, function(a5) {
        switch (a5.label) {
          case 0:
            return bs[this.dbname] ? [4, xi(this.delay)] : [3, 2];
          case 1:
            a5.sent();
            try {
              for (t8 = o(e4), n4 = t8.next(); !n4.done; n4 = t8.next()) r4 = n4.value, bs[this.dbname][r4] && delete bs[this.dbname][r4];
            } catch (e5) {
              i4 = { error: e5 };
            } finally {
              try {
                n4 && !n4.done && (s6 = t8.return) && s6.call(t8);
              } finally {
                if (i4) throw i4.error;
              }
            }
            return [3, 3];
          case 2:
            throw Ci.storeNotAvailable;
          case 3:
            return [2];
        }
      });
    });
  }, t7.prototype.observe = function(e4, t8, n4) {
    var r4 = this;
    this.observer[e4] || (this.observer[e4] = {}), t8.forEach(function(t9) {
      return r4.observer[e4][t9] = n4;
    });
  }, t7.prototype.checkAvailability = function() {
    return r(this, void 0, void 0, function() {
      return s(this, function(e4) {
        return [2];
      });
    });
  }, t7.prototype.init = function(e4) {
    return r(this, void 0, void 0, function() {
      return s(this, function(t8) {
        switch (t8.label) {
          case 0:
            return this.dbname = e4, bs[this.dbname] || (bs[this.dbname] = {}), [4, this._resetIfEncryptionChanged()];
          case 1:
            return t8.sent(), [2];
        }
      });
    });
  }, t7.prototype.set = function(t8) {
    return r(this, void 0, void 0, function() {
      var n4, r4;
      return s(this, function(i4) {
        if ((n4 = this.observer[t8.key]) && "function" == typeof n4.set && (r4 = n4.set())) throw r4;
        return [2, e3.prototype.set.call(this, t8)];
      });
    });
  }, t7.prototype.setMany = function(t8) {
    return r(this, void 0, void 0, function() {
      var n4, r4, i4, s6, a5, o3, u4;
      return s(this, function(c4) {
        try {
          for (n4 = o(t8), r4 = n4.next(); !r4.done; r4 = n4.next()) if (i4 = r4.value, (s6 = this.observer[i4.key]) && "function" == typeof s6.set && (a5 = s6.set())) throw a5;
        } catch (e4) {
          o3 = { error: e4 };
        } finally {
          try {
            r4 && !r4.done && (u4 = n4.return) && u4.call(n4);
          } finally {
            if (o3) throw o3.error;
          }
        }
        return [2, e3.prototype.setMany.call(this, t8)];
      });
    });
  }, t7.prototype.clear = function() {
    return r(this, void 0, void 0, function() {
      return s(this, function(e4) {
        switch (e4.label) {
          case 0:
            return [4, xi(this.delay)];
          case 1:
            return e4.sent(), bs[this.dbname] = {}, [2];
        }
      });
    });
  }, t7;
}(gs);
var Es = "NestDBStore";
!function(e3) {
  e3[e3.UNINITIALIZED = 0] = "UNINITIALIZED", e3[e3.OPENING = 1] = "OPENING", e3[e3.OPEN = 2] = "OPEN", e3[e3.CLOSED = 3] = "CLOSED";
}(ds || (ds = {}));
var Ts;
var ws = function(e3) {
  function t7(t8) {
    void 0 === t8 && (t8 = {});
    var n4, r4 = this;
    return (r4 = e3.call(this, n(n({}, t8), { itemSizeLimit: null !== (n4 = t8.itemSizeLimit) && void 0 !== n4 ? n4 : 104857600 })) || this)._storeName = Es, r4._state = ds.UNINITIALIZED, r4._openJobQueue = [], r4._window = "undefined" != typeof window ? window : void 0, r4._indexedDb = r4._window ? r4._window.indexedDB || r4._window.mozIndexedDB || r4._window.webkitIndexedDB || r4._window.msIndexedDB : void 0, r4;
  }
  return t(t7, e3), Object.defineProperty(t7.prototype, "state", { get: function() {
    return this._state;
  }, enumerable: false, configurable: true }), t7.prototype.isTransactionInactiveError = function(e4) {
    return e4 instanceof Error && e4.message.includes("The transaction is inactive");
  }, t7.prototype._putToObjectStore = function(e4, t8) {
    return r(this, void 0, void 0, function() {
      return s(this, function(n4) {
        return [2, new Promise(function(n5, r4) {
          var i4 = e4.put(t8);
          i4.addEventListener("success", function(e5) {
            n5(e5.target.result);
          }), i4.addEventListener("error", function() {
            r4("Failed to write.");
          });
        })];
      });
    });
  }, t7.prototype._deleteFromObjectStore = function(e4, t8) {
    return r(this, void 0, void 0, function() {
      return s(this, function(n4) {
        return [2, new Promise(function(n5, r4) {
          var i4 = e4.delete(t8);
          i4.addEventListener("success", function() {
            return n5(t8);
          }), i4.addEventListener("error", function(e5) {
            return r4(e5.target.error);
          });
        })];
      });
    });
  }, t7.prototype._openDatabase = function(e4) {
    var t8 = this;
    return new Promise(function(n4, r4) {
      if (t8._indexedDb) {
        t8._state = ds.OPENING;
        var i4 = t8._indexedDb.open(e4);
        i4.addEventListener("upgradeneeded", function(e5) {
          e5.target.result.createObjectStore(Es, { keyPath: "key" });
        }), i4.addEventListener("success", function(r5) {
          t8._state = ds.OPEN, t8._database = r5.target.result, t8._openJobQueue.forEach(function(e5) {
            return e5();
          }), t8._openJobQueue = [], t8._database.onclose = function() {
            t8._database = void 0, t8._state = ds.OPENING, setTimeout(function() {
              t8._openDatabase(e4);
            }, 5);
          }, n4(t8._database);
        }), i4.addEventListener("error", function(e5) {
          t8._state = ds.UNINITIALIZED, r4(e5.target.error);
        });
      } else r4(Ci.storeNotAvailable);
    });
  }, t7.prototype._getObjectStore = function(e4) {
    return r(this, void 0, void 0, function() {
      var t8 = this;
      return s(this, function(n4) {
        switch (n4.label) {
          case 0:
            return this._database ? [2, this._database.transaction(this._storeName, e4).objectStore(this._storeName)] : [3, 1];
          case 1:
            switch (this._state) {
              case ds.UNINITIALIZED:
              case ds.OPEN:
                return [3, 2];
              case ds.OPENING:
              case ds.CLOSED:
                return [3, 3];
            }
            return [3, 4];
          case 2:
            throw Ci.storeNotInitialized;
          case 3:
            return [2, new Promise(function(n5) {
              t8._openJobQueue.push(function() {
                return n5(t8._getObjectStore(e4));
              });
            })];
          case 4:
            return [4, this._getObjectStore(e4)];
          case 5:
            return [2, n4.sent()];
        }
      });
    });
  }, t7.prototype._getAllRawKeys = function() {
    return r(this, void 0, void 0, function() {
      var e4;
      return s(this, function(t8) {
        switch (t8.label) {
          case 0:
            return [4, this._getObjectStore("readonly")];
          case 1:
            return e4 = t8.sent(), [4, new Promise(function(t9, n4) {
              var r4 = e4.getAllKeys();
              r4.addEventListener("success", function(e5) {
                t9(e5.target.result);
              }), r4.addEventListener("error", function(e5) {
                return n4(e5.target.error);
              });
            })];
          case 2:
            return [2, t8.sent()];
        }
      });
    });
  }, t7.prototype._getRaw = function(e4) {
    return r(this, void 0, void 0, function() {
      var t8;
      return s(this, function(n4) {
        switch (n4.label) {
          case 0:
            return [4, this._getObjectStore("readonly")];
          case 1:
            return t8 = n4.sent(), [4, new Promise(function(n5, r4) {
              var i4 = t8.get(e4);
              i4.addEventListener("success", function(e5) {
                var t9;
                n5(null === (t9 = null == e5 ? void 0 : e5.target) || void 0 === t9 ? void 0 : t9.result);
              }), i4.addEventListener("error", function(e5) {
                return r4(e5.target.error);
              });
            })];
          case 2:
            return [2, n4.sent()];
        }
      });
    });
  }, t7.prototype._setRaw = function(e4) {
    return r(this, void 0, void 0, function() {
      var t8, n4, r4, i4, s6, a5, o3, u4, c4 = this;
      return s(this, function(l3) {
        switch (l3.label) {
          case 0:
            return [4, this._getObjectStore("readwrite")];
          case 1:
            t8 = l3.sent(), l3.label = 2;
          case 2:
            return l3.trys.push([2, 4, , 15]), [4, Promise.all(e4.map(function(e5) {
              return c4._putToObjectStore(t8, e5);
            }))];
          case 3:
            return l3.sent(), [3, 15];
          case 4:
            if (n4 = l3.sent(), !this.isTransactionInactiveError(n4)) return [3, 13];
            l3.label = 5;
          case 5:
            l3.trys.push([5, 10, 11, 12]), r4 = o(e4), i4 = r4.next(), l3.label = 6;
          case 6:
            return i4.done ? [3, 9] : (s6 = i4.value, [4, this._putToObjectStore(t8, s6)]);
          case 7:
            l3.sent(), l3.label = 8;
          case 8:
            return i4 = r4.next(), [3, 6];
          case 9:
            return [3, 12];
          case 10:
            return a5 = l3.sent(), o3 = { error: a5 }, [3, 12];
          case 11:
            try {
              i4 && !i4.done && (u4 = r4.return) && u4.call(r4);
            } finally {
              if (o3) throw o3.error;
            }
            return [7];
          case 12:
            return [3, 14];
          case 13:
            throw n4;
          case 14:
            return [3, 15];
          case 15:
            return [2];
        }
      });
    });
  }, t7.prototype._removeRaw = function(e4) {
    return r(this, void 0, void 0, function() {
      var t8, n4, r4, i4, s6, a5, o3, u4, c4 = this;
      return s(this, function(l3) {
        switch (l3.label) {
          case 0:
            return [4, this._getObjectStore("readwrite")];
          case 1:
            t8 = l3.sent(), l3.label = 2;
          case 2:
            return l3.trys.push([2, 4, , 15]), [4, Promise.all(e4.map(function(e5) {
              return c4._deleteFromObjectStore(t8, e5);
            }))];
          case 3:
            return l3.sent(), [3, 15];
          case 4:
            if (n4 = l3.sent(), !this.isTransactionInactiveError(n4)) return [3, 13];
            l3.label = 5;
          case 5:
            l3.trys.push([5, 10, 11, 12]), r4 = o(e4), i4 = r4.next(), l3.label = 6;
          case 6:
            return i4.done ? [3, 9] : (s6 = i4.value, [4, this._deleteFromObjectStore(t8, s6)]);
          case 7:
            l3.sent(), l3.label = 8;
          case 8:
            return i4 = r4.next(), [3, 6];
          case 9:
            return [3, 12];
          case 10:
            return a5 = l3.sent(), o3 = { error: a5 }, [3, 12];
          case 11:
            try {
              i4 && !i4.done && (u4 = r4.return) && u4.call(r4);
            } finally {
              if (o3) throw o3.error;
            }
            return [7];
          case 12:
            return [3, 14];
          case 13:
            throw n4;
          case 14:
            return [3, 15];
          case 15:
            return [2];
        }
      });
    });
  }, t7.prototype._triggerDatabaseClose = function() {
    this._database && this._database.onclose && this._database.onclose(new Event("dummy"));
  }, t7.prototype.checkAvailability = function() {
    return r(this, void 0, void 0, function() {
      var e4, t8 = this;
      return s(this, function(n4) {
        switch (n4.label) {
          case 0:
            if (!((null == (e4 = "undefined" != typeof window ? window : null) ? void 0 : e4.indexedDB) || (null == e4 ? void 0 : e4.mozIndexedDB) || (null == e4 ? void 0 : e4.webkitIndexedDB) || (null == e4 ? void 0 : e4.msIndexedDB))) return [3, 6];
            if (this._indexedDb = e4.indexedDB || e4.mozIndexedDB || e4.webkitIndexedDB || e4.msIndexedDB, !this._window || !cs()) return [3, 4];
            if (!(cs() && navigator.userAgent && navigator.userAgent.includes("Edge/"))) return [3, 1];
            if (!this._window.indexedDB && (e4.PointerEvent || e4.MSPointerEvent)) throw Ci.storeNotAvailableInPrivateBrowsing;
            return [3, 3];
          case 1:
            return [4, new Promise(function(e5, n5) {
              if (t8._indexedDb) try {
                var r4 = t8._indexedDb.open("_testMozilla");
                r4.onerror = function() {
                  return n5(Ci.storeNotAvailableInPrivateBrowsing);
                }, r4.onsuccess = function(r5) {
                  if (r5.target.result.close(), t8._indexedDb) {
                    var i4 = t8._indexedDb.deleteDatabase("_testMozilla");
                    i4.onerror = function() {
                      return e5();
                    }, i4.onsuccess = function() {
                      return e5();
                    };
                  } else n5(Ci.storeNotAvailable);
                };
              } catch (e6) {
                n5(Ci.storeNotAvailableInPrivateBrowsing);
              }
              else n5(Ci.storeNotAvailable);
            })];
          case 2:
            n4.sent(), n4.label = 3;
          case 3:
            return [3, 5];
          case 4:
            throw Ci.storeNotAvailable;
          case 5:
            return [3, 7];
          case 6:
            throw Ci.storeNotAvailable;
          case 7:
            return [2];
        }
      });
    });
  }, t7.prototype.init = function(e4) {
    return r(this, void 0, void 0, function() {
      return s(this, function(t8) {
        switch (t8.label) {
          case 0:
            return this.dbname = e4, [4, this.checkAvailability()];
          case 1:
            return t8.sent(), [4, this._openDatabase(e4)];
          case 2:
            return t8.sent(), [4, this._resetIfEncryptionChanged()];
          case 3:
            return t8.sent(), [2];
        }
      });
    });
  }, t7.prototype.clear = function() {
    return r(this, void 0, void 0, function() {
      var e4;
      return s(this, function(t8) {
        switch (t8.label) {
          case 0:
            return [4, this._getObjectStore("readwrite")];
          case 1:
            return e4 = t8.sent(), [4, new Promise(function(t9, n4) {
              var r4 = e4.clear();
              r4.addEventListener("success", function() {
                return t9();
              }), r4.addEventListener("error", function(e5) {
                return n4(e5.target.error);
              });
            })];
          case 2:
            return [2, t8.sent()];
        }
      });
    });
  }, t7;
}(gs);
var Ms = function(e3) {
  function t7(t8) {
    var n4 = this, r4 = t8.AsyncStorage, i4 = t8.itemSizeLimit, s6 = void 0 === i4 ? 2097152 : i4, a5 = i(t8, ["AsyncStorage", "itemSizeLimit"]);
    return (n4 = e3.call(this, n(n({}, a5), { itemSizeLimit: s6 })) || this)._asyncStorage = r4, n4;
  }
  return t(t7, e3), t7.prototype._isBelonging = function(e4) {
    return e4.startsWith("".concat(this.dbname, "/"));
  }, t7.prototype._getActualKey = function(e4) {
    return "".concat(this.dbname, "/").concat(e4);
  }, t7.prototype._getAllRawKeys = function() {
    return r(this, void 0, void 0, function() {
      var e4, t8 = this;
      return s(this, function(n4) {
        switch (n4.label) {
          case 0:
            return [4, this._asyncStorage.getAllKeys()];
          case 1:
            return e4 = n4.sent(), [2, e4.filter(function(e5) {
              return t8._isBelonging(e5);
            }).map(function(e5) {
              return e5.substring("".concat(t8.dbname, "/").length);
            })];
        }
      });
    });
  }, t7.prototype._getRaw = function(e4) {
    return r(this, void 0, void 0, function() {
      var t8;
      return s(this, function(n4) {
        switch (n4.label) {
          case 0:
            return [4, this._asyncStorage.getItem(this._getActualKey(e4))];
          case 1:
            return [2, (t8 = n4.sent()) ? JSON.parse(t8) : null];
        }
      });
    });
  }, t7.prototype._setRaw = function(e4) {
    return r(this, void 0, void 0, function() {
      var t8, n4, r4, i4, s6, a5, o3;
      return s(this, function(u4) {
        switch (u4.label) {
          case 0:
            t8 = [];
            try {
              for (n4 = o(e4), r4 = n4.next(); !r4.done; r4 = n4.next()) i4 = r4.value, s6 = i4.key, i4.data.length <= this.adjustedItemSizeLimit && t8.push([this._getActualKey(s6), JSON.stringify(i4)]);
            } catch (e5) {
              a5 = { error: e5 };
            } finally {
              try {
                r4 && !r4.done && (o3 = n4.return) && o3.call(n4);
              } finally {
                if (a5) throw a5.error;
              }
            }
            return [4, this._asyncStorage.multiSet(t8)];
          case 1:
            return u4.sent(), [2];
        }
      });
    });
  }, t7.prototype._removeRaw = function(e4) {
    return r(this, void 0, void 0, function() {
      var t8 = this;
      return s(this, function(n4) {
        switch (n4.label) {
          case 0:
            return [4, this._asyncStorage.multiRemove(e4.map(function(e5) {
              return t8._getActualKey(e5);
            }))];
          case 1:
            return n4.sent(), [2];
        }
      });
    });
  }, t7.prototype.checkAvailability = function() {
    return r(this, void 0, void 0, function() {
      return s(this, function(e4) {
        if (!this._asyncStorage) throw Ci.storeNotAvailable;
        return [2];
      });
    });
  }, t7.prototype.init = function(e4) {
    return r(this, void 0, void 0, function() {
      return s(this, function(t8) {
        switch (t8.label) {
          case 0:
            return this.dbname = e4, [4, this._resetIfEncryptionChanged()];
          case 1:
            return t8.sent(), [2];
        }
      });
    });
  }, t7.prototype.clear = function() {
    return r(this, void 0, void 0, function() {
      var e4;
      return s(this, function(t8) {
        switch (t8.label) {
          case 0:
            return [4, this.getAllKeys()];
          case 1:
            return e4 = t8.sent(), [4, this.removeMany(e4)];
          case 2:
            return t8.sent(), [2];
        }
      });
    });
  }, t7;
}(gs);
var Ss = function(e3) {
  function t7(t8) {
    var n4, r4 = this;
    return (r4 = e3.call(this, n(n({}, t8), { itemSizeLimit: null !== (n4 = t8.itemSizeLimit) && void 0 !== n4 ? n4 : 6291456 })) || this)._mmkv = t8.MMKV, r4;
  }
  return t(t7, e3), t7.prototype._isBelonging = function(e4) {
    return e4.startsWith("".concat(this.dbname, "/"));
  }, t7.prototype._getActualKey = function(e4) {
    return "".concat(this.dbname, "/").concat(e4);
  }, t7.prototype._getAllRawKeys = function() {
    return r(this, void 0, void 0, function() {
      var e4, t8 = this;
      return s(this, function(n4) {
        switch (n4.label) {
          case 0:
            return [4, this._mmkv.getAllKeys()];
          case 1:
            return e4 = n4.sent(), [2, e4.filter(function(e5) {
              return t8._isBelonging(e5);
            }).map(function(e5) {
              return e5.substring("".concat(t8.dbname, "/").length);
            })];
        }
      });
    });
  }, t7.prototype._getRaw = function(e4) {
    return r(this, void 0, void 0, function() {
      var t8;
      return s(this, function(n4) {
        switch (n4.label) {
          case 0:
            return [4, this._mmkv.getString(this._getActualKey(e4))];
          case 1:
            return [2, (t8 = n4.sent()) ? JSON.parse(t8) : null];
        }
      });
    });
  }, t7.prototype._setRaw = function(e4) {
    return r(this, void 0, void 0, function() {
      var t8, n4, r4, i4, s6, a5;
      return s(this, function(o3) {
        try {
          for (t8 = o(e4), n4 = t8.next(); !n4.done; n4 = t8.next()) r4 = n4.value, i4 = r4.key, r4.data.length <= this.adjustedItemSizeLimit && this._mmkv.set(this._getActualKey(i4), JSON.stringify(r4));
        } catch (e5) {
          s6 = { error: e5 };
        } finally {
          try {
            n4 && !n4.done && (a5 = t8.return) && a5.call(t8);
          } finally {
            if (s6) throw s6.error;
          }
        }
        return [2];
      });
    });
  }, t7.prototype._removeRaw = function(e4) {
    return r(this, void 0, void 0, function() {
      var t8, n4, r4, i4, s6;
      return s(this, function(a5) {
        try {
          for (t8 = o(e4), n4 = t8.next(); !n4.done; n4 = t8.next()) r4 = n4.value, this._mmkv.delete(this._getActualKey(r4));
        } catch (e5) {
          i4 = { error: e5 };
        } finally {
          try {
            n4 && !n4.done && (s6 = t8.return) && s6.call(t8);
          } finally {
            if (i4) throw i4.error;
          }
        }
        return [2];
      });
    });
  }, t7.prototype.checkAvailability = function() {
    return r(this, void 0, void 0, function() {
      return s(this, function(e4) {
        if (!this._mmkv) throw Ci.storeNotAvailable;
        return [2];
      });
    });
  }, t7.prototype.init = function(e4) {
    return r(this, void 0, void 0, function() {
      return s(this, function(t8) {
        switch (t8.label) {
          case 0:
            return this.dbname = e4, [4, this._resetIfEncryptionChanged()];
          case 1:
            return t8.sent(), [2];
        }
      });
    });
  }, t7.prototype.clear = function() {
    return r(this, void 0, void 0, function() {
      var e4;
      return s(this, function(t8) {
        switch (t8.label) {
          case 0:
            return [4, this.getAllKeys()];
          case 1:
            return e4 = t8.sent(), [4, this.removeMany(e4)];
          case 2:
            return t8.sent(), [2];
        }
      });
    });
  }, t7;
}(gs);
!function(e3) {
  e3.INIT = "INIT", e3.OPENING = "OPENING", e3.OPENED = "OPENED", e3.CLOSED = "CLOSED";
}(Ts || (Ts = {}));
var As;
var Us = function() {
  function e3(e4) {
    var t7 = e4.name, n4 = e4.version, r4 = e4.store, i4 = e4.config;
    this.name = t7, this._version = n4, this._state = Ts.INIT, this._config = i4 || new Ui({ dbname: t7 }), this._store = r4, this._event = { success: Li, error: Li, storeReplaced: Li, upgrade: zi }, this._collections = /* @__PURE__ */ new Map(), this._globalMutex = new fs("".concat(this.name, ".lock")), this._config.disableLogger && ys.off(), new rs({ dbname: t7, limit: this._config.cacheLimit });
  }
  return Object.defineProperty(e3.prototype, "version", { get: function() {
    return this._version;
  }, enumerable: false, configurable: true }), Object.defineProperty(e3.prototype, "state", { get: function() {
    return this._state;
  }, enumerable: false, configurable: true }), Object.defineProperty(e3.prototype, "store", { get: function() {
    return this._store;
  }, enumerable: false, configurable: true }), e3.prototype.estimateUsage = function() {
    return r(this, void 0, void 0, function() {
      return s(this, function(e4) {
        switch (e4.label) {
          case 0:
            return [4, (t7 = this._store, r(void 0, void 0, void 0, function() {
              return s(this, function(e5) {
                switch (e5.label) {
                  case 0:
                    return [4, t7.usage()];
                  case 1:
                    return [2, e5.sent()];
                }
              });
            }))];
          case 1:
            return [2, e4.sent()];
        }
        var t7;
      });
    });
  }, e3.prototype.commitSchema = function(e4) {
    return r(this, void 0, void 0, function() {
      var t7 = this;
      return s(this, function(n4) {
        switch (n4.label) {
          case 0:
            return this._state !== Ts.OPENING ? [3, 2] : [4, Promise.all(e4.map(function(e5) {
              return r(t7, void 0, void 0, function() {
                var t8, n5, r4, i4, s6;
                return s(this, function(a5) {
                  switch (a5.label) {
                    case 0:
                      return t8 = e5.collectionName, n5 = e5.keyName, r4 = e5.index, i4 = void 0 === r4 ? [] : r4, this._collections.has(t8) || this._collections.set(t8, new ps({ dbname: this.name, collectionName: t8, keyName: n5, indexes: i4, store: this._store })), (s6 = this._collections.get(t8)) ? [4, s6.init()] : [3, 2];
                    case 1:
                      a5.sent(), a5.label = 2;
                    case 2:
                      return [2];
                  }
                });
              });
            }))];
          case 1:
            return n4.sent(), [3, 3];
          case 2:
            throw Ci.databaseSchemaNotOnUpgrade;
          case 3:
            return [2];
        }
      });
    });
  }, e3.prototype.open = function() {
    var e4;
    return r(this, void 0, void 0, function() {
      var t7, n4, r4, i4, s6 = this;
      return s(this, function(a5) {
        switch (a5.label) {
          case 0:
            return [4, this._globalMutex.lock()];
          case 1:
            if (a5.sent(), this._state === Ts.OPENED) return [3, 12];
            this._state = Ts.OPENING, a5.label = 2;
          case 2:
            return a5.trys.push([2, 5, , 12]), [4, this._store.init(this.name)];
          case 3:
            return a5.sent(), o3 = this.name, t7 = "".concat(Hi(o3), ".metadata"), n4 = { version: 0, collectionNames: [] }, [4, this._store.get(t7)];
          case 4:
            return r4 = null !== (e4 = a5.sent()) && void 0 !== e4 ? e4 : n4, [2, new Promise(function(e5, n5) {
              var i5 = function(e6) {
                r4.version < s6._version ? s6._event.upgrade(r4.version, function(n6) {
                  return r(s6, void 0, void 0, function() {
                    var i6;
                    return s(this, function(s7) {
                      switch (s7.label) {
                        case 0:
                          if (n6) return [3, 5];
                          r4.version++, r4.collectionNames = Array.from(this._collections.keys()), s7.label = 1;
                        case 1:
                          return s7.trys.push([1, 3, , 4]), [4, this._store.set({ key: t7, value: r4 })];
                        case 2:
                          return s7.sent(), e6({ continued: true }), [3, 4];
                        case 3:
                          return i6 = s7.sent(), e6({ continued: false, err: i6 }), [3, 4];
                        case 4:
                          return [3, 6];
                        case 5:
                          e6({ continued: false, err: n6 }), s7.label = 6;
                        case 6:
                          return [2];
                      }
                    });
                  });
                }) : e6({ continued: false });
              }, a6 = function(t8) {
                var o4 = t8.continued, u4 = void 0 !== o4 && o4, c4 = t8.err, l3 = void 0 === c4 ? null : c4;
                if (u4) setTimeout(function() {
                  return i5(a6);
                }, 10);
                else if (l3) ys.error(l3.message), s6._globalMutex.unlock(), s6._event.error(l3), n5(l3);
                else {
                  var d5 = [];
                  r4.collectionNames.forEach(function(e6) {
                    var t9 = s6._collections.get(e6);
                    t9 && t9.state === Ni.READY || d5.push(r(s6, void 0, void 0, function() {
                      var t10, n6;
                      return s(this, function(r5) {
                        switch (r5.label) {
                          case 0:
                            return [4, ps.metadataOf(this.name, e6, this._store)];
                          case 1:
                            return (t10 = r5.sent()) ? (n6 = new ps({ dbname: this.name, collectionName: e6, keyName: t10.keyName, indexes: t10.indexes, store: this._store }), this._collections.set(e6, n6), [4, n6.init()]) : [3, 3];
                          case 2:
                            r5.sent(), r5.label = 3;
                          case 3:
                            return [2];
                        }
                      });
                    }));
                  }), Promise.all(d5).then(function() {
                    s6._state = Ts.OPENED, s6._globalMutex.unlock(), s6._event.success(), e5();
                  }).catch(function(e6) {
                    ys.error(e6.message), s6._globalMutex.unlock(), s6._event.error(e6), n5(e6);
                  });
                }
              };
              i5(a6);
            })];
          case 5:
            switch (i4 = a5.sent(), i4.code) {
              case fi.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING:
                return [3, 6];
              case fi.STORE_NOT_AVAILABLE:
                return [3, 8];
            }
            return [3, 10];
          case 6:
            return ys.warning("Access to the local storage is not allowed. Switched to MemoryStore automatically."), this._store = new Is({}), this._globalMutex.unlock(), this._event.error(i4), this._event.storeReplaced(this._store), [4, this.open()];
          case 7:
            return a5.sent(), [3, 11];
          case 8:
            return ys.warning("IndexedDB is not available in this environment. Switched to MemoryStore automatically. Consider using other store to save data persistently (e.g. AsyncStorage)."), this._store = new Is({}), this._globalMutex.unlock(), this._event.error(i4), this._event.storeReplaced(this._store), [4, this.open()];
          case 9:
            return a5.sent(), [3, 11];
          case 10:
            throw ys.error(i4.message), this._globalMutex.unlock(), this._event.error(i4), i4;
          case 11:
            return [3, 12];
          case 12:
            return [2];
        }
        var o3;
      });
    });
  }, e3.prototype.close = function() {
    this._collections.forEach(function(e4) {
      return e4.close();
    }), this._state = Ts.CLOSED;
  }, e3.prototype.clear = function() {
    return r(this, void 0, void 0, function() {
      return s(this, function(e4) {
        switch (e4.label) {
          case 0:
            return [4, Promise.all(Array.from(this._collections.values()).map(function(e5) {
              return e5.clear();
            }))];
          case 1:
            return e4.sent(), [2];
        }
      });
    });
  }, e3.prototype.reset = function() {
    return r(this, void 0, void 0, function() {
      var e4, t7 = this;
      return s(this, function(n4) {
        switch (n4.label) {
          case 0:
            return this.close(), (e4 = rs.get(this.name)) && e4.clearByCondition(function(e5) {
              return e5.key.startsWith(Hi(t7.name));
            }), [4, this._store.clear()];
          case 1:
            return n4.sent(), [2];
        }
      });
    });
  }, e3.prototype.on = function(e4, t7) {
    this._event[e4] = t7;
  }, e3.prototype.off = function(e4) {
    if ("function" == typeof this._event[e4]) if ("upgrade" === e4) this._event[e4] = zi;
    else this._event[e4] = Li;
  }, e3.prototype.collection = function(e4) {
    var t7 = this._collections.get(e4);
    if (t7) return t7;
    throw Ci.collectionNotReady;
  }, e3;
}();
!function(e3) {
  e3[e3.VERBOSE = 0] = "VERBOSE", e3[e3.DEBUG = 1] = "DEBUG", e3[e3.INFO = 2] = "INFO", e3[e3.WARN = 3] = "WARN", e3[e3.ERROR = 4] = "ERROR", e3[e3.NONE = 5] = "NONE";
}(As || (As = {}));
var Ns;
var Cs = function() {
  function e3() {
    this.level = As.WARN;
  }
  return e3.prototype.verbose = function() {
    for (var e4 = [], t7 = 0; t7 < arguments.length; t7++) e4[t7] = arguments[t7];
    this.level <= As.VERBOSE && console.log.apply(console, c(["[verbose]"], a(e4), false));
  }, e3.prototype.debug = function() {
    for (var e4 = [], t7 = 0; t7 < arguments.length; t7++) e4[t7] = arguments[t7];
    this.level <= As.DEBUG && console.log.apply(console, c(["[debug]"], a(e4), false));
  }, e3.prototype.info = function() {
    for (var e4 = [], t7 = 0; t7 < arguments.length; t7++) e4[t7] = arguments[t7];
    this.level <= As.INFO && console.log.apply(console, c(["[info]"], a(e4), false));
  }, e3.prototype.warn = function() {
    for (var e4 = [], t7 = 0; t7 < arguments.length; t7++) e4[t7] = arguments[t7];
    this.level <= As.WARN && console.warn.apply(console, c(["[warn]"], a(e4), false));
  }, e3.prototype.error = function() {
    for (var e4 = [], t7 = 0; t7 < arguments.length; t7++) e4[t7] = arguments[t7];
    this.level <= As.ERROR && console.error.apply(console, c(["[error]"], a(e4), false));
  }, e3;
}();
var Os = function() {
  function e3(e4) {
    var t7, n4, r4, i4;
    this.messageTypeFilter = null !== (t7 = null == e4 ? void 0 : e4.messageTypeFilter) && void 0 !== t7 ? t7 : G.ALL, this.customTypesFilter = null !== (n4 = null == e4 ? void 0 : e4.customTypesFilter) && void 0 !== n4 ? n4 : null, this.senderUserIdsFilter = null !== (r4 = null == e4 ? void 0 : e4.senderUserIdsFilter) && void 0 !== r4 ? r4 : null, this.replyType = null !== (i4 = null == e4 ? void 0 : e4.replyType) && void 0 !== i4 ? i4 : B.NONE;
  }
  return e3.prototype.clone = function() {
    var t7 = new e3(), n4 = JSON.parse(JSON.stringify(this));
    return Object.keys(n4).forEach(function(e4) {
      t7[e4] = n4[e4];
    }), t7;
  }, e3.prototype.match = function(e4) {
    switch (this.messageTypeFilter) {
      case G.USER:
        if (e4.messageType !== z.USER) return false;
        break;
      case G.FILE:
        if (e4.messageType !== z.FILE) return false;
        break;
      case G.ADMIN:
        if (e4.messageType !== z.ADMIN) return false;
    }
    if (this.customTypesFilter && this.customTypesFilter.length > 0 && !this.customTypesFilter.includes("*") && !this.customTypesFilter.includes(e4.customType)) return false;
    if (this.senderUserIdsFilter && this.senderUserIdsFilter.length > 0) {
      if (!(e4 instanceof mt)) return false;
      if (!this.senderUserIdsFilter.includes(e4.sender.userId)) return false;
    }
    if (e4 instanceof pt) switch (this.replyType) {
      case B.NONE:
        if (e4.parentMessageId > 0) return false;
        break;
      case B.ONLY_REPLY_TO_CHANNEL:
        if (e4 instanceof mt && e4.parentMessageId > 0 && !e4.replyToChannel) return false;
    }
    return true;
  }, e3;
}();
!function(e3) {
  e3.CHANNEL_LATEST = "channel_latest", e3.NEWEST_CHILD_MESSAGE = "newest_child_message";
}(Ns || (Ns = {}));
var Ps2;
var ks = function(e3) {
  switch (e3) {
    case Ns.CHANNEL_LATEST:
      return ["channelUrl", "-createdAt", "-messageId"];
    case Ns.NEWEST_CHILD_MESSAGE:
      return ["channelUrl", "-parentMessageId", "-createdAt", "-messageId"];
  }
};
var Rs = function() {
  return ["channelUrl", "-createdAt", "-notificationId"];
};
var xs = n(n({}, tn), { scheduledAt: void 0 });
var Ds = function(e3) {
  return an(e3) && w("number", e3.scheduledAt, true);
};
var Ls = n(n({}, Zt), { scheduledAt: 0, file: void 0, fileUrl: void 0, fileName: void 0, mimeType: void 0, fileSize: void 0, thumbnailSizes: void 0, requireAuth: false });
var Fs = function(e3) {
  return $t(e3) && w("number", e3.scheduledAt) && (k(e3.file) || w("string", e3.fileUrl)) && w("string", e3.fileName, true) && w("string", e3.mimeType, true) && w("number", e3.fileSize, true) && (null === e3.thumbnailSizes || void 0 === e3.thumbnailSizes || e3.thumbnailSizes.every(function(e4) {
    return w("object", e4) && e4.maxWidth > 0 && e4.maxHeight > 0;
  }));
};
var qs2 = "UnsentMessage";
var zs = "reqId";
var Bs = {};
var Ks2 = function(t7) {
  function i4(e3) {
    var n4 = t7.call(this, e3) || this;
    return n4._mutex = new fs("unsendmessagecache.lock"), Bs[e3] = n4, n4;
  }
  return t(i4, t7), Object.defineProperty(i4.prototype, "_cacheContext", { get: function() {
    return Ws.of(this._iid).cacheContext;
  }, enumerable: false, configurable: true }), i4.of = function(e3, t8) {
    return void 0 === t8 && (t8 = false), Bs[e3] && !t8 || (Bs[e3] = new i4(e3)), Bs[e3];
  }, Object.defineProperty(i4.prototype, "collection", { get: function() {
    var e3 = this._cacheContext.nestdb, t8 = null == e3 ? void 0 : e3.collection(qs2);
    if (!t8) throw v.databaseError;
    return t8;
  }, enumerable: false, configurable: true }), Object.defineProperty(i4.prototype, "localCacheEnabled", { get: function() {
    return this._cacheContext.localCacheEnabled && !!this.collection;
  }, enumerable: false, configurable: true }), i4.prototype._serialize = function(t8) {
    if (t8.messageId > 0) throw v.invalidParameters;
    var n4, r4 = n({}, t8.serialize());
    return t8 instanceof It ? (t8.messageParams && (r4.messageParams = en(t8.messageParams)), t8.scheduledInfo && t8.scheduledInfo.scheduledMessageParams && (r4.scheduledInfo.scheduledMessageParams = (n4 = t8.scheduledInfo.scheduledMessageParams, n(n({}, en(n4)), { scheduledAt: n4.scheduledAt })))) : t8 instanceof St ? (t8.messageParams && (r4.messageParams = cn(t8.messageParams)), t8.scheduledInfo && t8.scheduledInfo.scheduledMessageParams && (r4.scheduledInfo.scheduledMessageParams = function(e3) {
      return n(n({}, cn(e3)), { scheduledAt: e3.scheduledAt });
    }(t8.scheduledInfo.scheduledMessageParams))) : t8 instanceof Et && t8.messageParams && (r4.messageParams = function(t9) {
      return re({ fileInfoList: t9.fileInfoList, isReplyToChannel: t9.isReplyToChannel, pushNotificationDeliveryOption: t9.pushNotificationDeliveryOption });
    }(t8.messageParams)), r4;
  }, i4.prototype._deserialize = function(e3) {
    return e3 = n(n({}, e3), { messageId: parseInt(e3.messageId) }), ea.of(this._iid).buildMessageFromSerializedData(e3);
  }, i4.prototype._deserializeWithMessageCreateParams = function(e3) {
    var t8, n4, r4;
    return r(this, void 0, void 0, function() {
      var i5, s6, a5, o3, u4, c4, l3 = this;
      return s(this, function(d5) {
        switch (d5.label) {
          case 0:
            return i5 = ea.of(this._iid), s6 = this._deserialize(e3), e3.messageParams ? s6 instanceof It ? (o3 = e3.messageParams, s6.messageParams = i5.buildUserMessageCreateParamsFromSerializedData(o3, s6), [3, 6]) : [3, 1] : [3, 6];
          case 1:
            return s6 instanceof St ? (o3 = e3.messageParams).fileKey && "string" == typeof o3.fileKey && un(null !== (t8 = o3.fileType) && void 0 !== t8 ? t8 : "") ? (a5 = o3, [4, this.collection.getBlob(o3.fileKey)]) : [3, 3] : [3, 4];
          case 2:
            a5.file = null !== (n4 = d5.sent()) && void 0 !== n4 ? n4 : void 0, d5.label = 3;
          case 3:
            return s6.messageParams = i5.buildFileMessageCreateParamsFromSerializedData(o3, s6), [3, 6];
          case 4:
            return s6 instanceof Et && ((o3 = e3.messageParams) && o3.fileInfoList) ? (s6.messageParams = i5.buildMultipleFilesMessageCreateParamsFromSerializedData(o3, s6), [4, Promise.all(s6.messageParams.fileInfoList.map(function(e4) {
              return r(l3, void 0, void 0, function() {
                var t9, n5, r5, i6, s7;
                return s(this, function(a6) {
                  switch (a6.label) {
                    case 0:
                      return "string" == typeof (null === (n5 = e4._uploadedMetaData) || void 0 === n5 ? void 0 : n5.fileKey) && un(null !== (i6 = null === (r5 = e4._uploadedMetaData) || void 0 === r5 ? void 0 : r5.fileType) && void 0 !== i6 ? i6 : "") ? (t9 = e4, [4, this.collection.getBlob(e4._uploadedMetaData.fileKey)]) : [3, 2];
                    case 1:
                      t9.file = null !== (s7 = a6.sent()) && void 0 !== s7 ? s7 : void 0, a6.label = 2;
                    case 2:
                      return [2];
                  }
                });
              });
            }))]) : [3, 6];
          case 5:
            d5.sent(), d5.label = 6;
          case 6:
            return s6.scheduledInfo && e3.scheduledInfo && e3.scheduledInfo.scheduledMessageParams ? s6 instanceof It ? (u4 = e3.scheduledInfo.scheduledMessageParams, s6.scheduledInfo.scheduledMessageParams = i5.buildScheduledUserMessageCreateParamsFromSerializedData(u4, s6), [3, 10]) : [3, 7] : [3, 10];
          case 7:
            return s6 instanceof St ? (u4 = e3.scheduledInfo.scheduledMessageParams).fileKey && "string" == typeof u4.fileKey && "string" == typeof u4.fileType && un(u4.fileType) ? (c4 = u4, [4, this.collection.getBlob(u4.fileKey)]) : [3, 9] : [3, 10];
          case 8:
            c4.file = null !== (r4 = d5.sent()) && void 0 !== r4 ? r4 : void 0, d5.label = 9;
          case 9:
            s6.scheduledInfo.scheduledMessageParams = i5.buildScheduledFileMessageCreateParamsFromSerializedData(u4, s6), d5.label = 10;
          case 10:
            return [2, s6];
        }
      });
    });
  }, i4.prototype._getFileInfoBlobKey = function(e3, t8) {
    return "".concat(e3, ".").concat(t8);
  }, i4.prototype.get = function(e3) {
    return r(this, void 0, void 0, function() {
      var t8;
      return s(this, function(n4) {
        switch (n4.label) {
          case 0:
            return this.localCacheEnabled ? [4, this.collection.getByKey("".concat(e3))] : [3, 2];
          case 1:
            if (t8 = n4.sent()) return [2, this._deserializeWithMessageCreateParams(t8)];
            n4.label = 2;
          case 2:
            return [2, void 0];
        }
      });
    });
  }, i4.prototype.fetch = function(e3) {
    var t8 = e3.channelUrl, n4 = e3.filter, r4 = void 0 === n4 ? new Os() : n4, i5 = e3.order, s6 = void 0 === i5 ? Ns.CHANNEL_LATEST : i5, a5 = e3.sendingStatus, o3 = e3.backward, u4 = void 0 !== o3 && o3, c4 = e3.parentMessageId;
    return r(this, void 0, void 0, function() {
      var e4, n5, i6, o4, l3 = this;
      return s(this, function(d5) {
        switch (d5.label) {
          case 0:
            return this.localCacheEnabled ? (e4 = ks(s6), n5 = { "/where": function(e5) {
              return !!(s6 !== Ns.NEWEST_CHILD_MESSAGE || c4 && 0 !== e5.parentMessageId && e5.parentMessageId === c4) && r4.match(l3._deserialize(e5));
            } }, t8 && (n5.channelUrl = t8), a5 && (n5.sendingStatus = a5), i6 = { where: n5, index: e4, backward: u4 }, [4, this.collection.query(i6)]) : [3, 3];
          case 1:
            return [4, d5.sent().fetch({})];
          case 2:
            return o4 = d5.sent(), [2, Promise.all(o4.map(function(e5) {
              return r(l3, void 0, void 0, function() {
                return s(this, function(t9) {
                  switch (t9.label) {
                    case 0:
                      return [4, this._deserializeWithMessageCreateParams(e5)];
                    case 1:
                      return [2, t9.sent()];
                  }
                });
              });
            }))];
          case 3:
            return [2, []];
        }
      });
    });
  }, i4.prototype.getAllChildMessages = function(e3, t8) {
    return void 0 === t8 && (t8 = new Os()), r(this, void 0, void 0, function() {
      return s(this, function(n4) {
        switch (n4.label) {
          case 0:
            return [4, this.fetch({ filter: t8, order: Ns.NEWEST_CHILD_MESSAGE, channelUrl: e3.channelUrl, backward: false, parentMessageId: e3.messageId })];
          case 1:
            return [2, n4.sent()];
        }
      });
    });
  }, i4.prototype.upsert = function(e3) {
    return r(this, void 0, void 0, function() {
      var t8 = this;
      return s(this, function(n4) {
        switch (n4.label) {
          case 0:
            return this.localCacheEnabled ? [4, Promise.all(e3.map(function(e4) {
              return r(t8, void 0, void 0, function() {
                var t9;
                return s(this, function(n5) {
                  switch (n5.label) {
                    case 0:
                      return e4 instanceof St || e4 instanceof Et ? [4, this._mutex.lock()] : [3, 4];
                    case 1:
                      return n5.sent(), [4, this.saveBlob(e4)];
                    case 2:
                      return n5.sent(), [4, this._mutex.unlock()];
                    case 3:
                      n5.sent(), n5.label = 4;
                    case 4:
                      return t9 = this._serialize(e4), [4, this.collection.upsertOne(t9)];
                    case 5:
                      return n5.sent(), [2];
                  }
                });
              });
            }))] : [3, 2];
          case 1:
            n4.sent(), n4.label = 2;
          case 2:
            return [2];
        }
      });
    });
  }, i4.prototype.upsertChildMessages = function(e3) {
    return r(this, void 0, void 0, function() {
      var t8 = this;
      return s(this, function(n4) {
        switch (n4.label) {
          case 0:
            return this.localCacheEnabled ? [4, Promise.all(e3.map(function(e4) {
              return r(t8, void 0, void 0, function() {
                var t9;
                return s(this, function(n5) {
                  switch (n5.label) {
                    case 0:
                      return t9 = [], e4.threadInfo && e4.threadInfo.replyCount > 0 ? [4, this.getAllChildMessages(e4)] : [3, 2];
                    case 1:
                      t9 = n5.sent(), n5.label = 2;
                    case 2:
                      return t9.length > 0 ? (t9.forEach(function(t10) {
                        return t10.applyParentMessage(e4);
                      }), [4, this.upsert(t9)]) : [3, 4];
                    case 3:
                      n5.sent(), n5.label = 4;
                    case 4:
                      return [2];
                  }
                });
              });
            }))] : [3, 2];
          case 1:
            n4.sent(), n4.label = 2;
          case 2:
            return [2];
        }
      });
    });
  }, i4.prototype.remove = function(e3) {
    return r(this, void 0, void 0, function() {
      var t8, n4, r4, i5, s6, a5;
      return s(this, function(o3) {
        switch (o3.label) {
          case 0:
            if (!this.localCacheEnabled) return [3, 8];
            o3.label = 1;
          case 1:
            o3.trys.push([1, 6, 7, 8]), t8 = o(e3), n4 = t8.next(), o3.label = 2;
          case 2:
            return n4.done ? [3, 5] : (r4 = n4.value, [4, this.collection.remove(r4)]);
          case 3:
            o3.sent(), o3.label = 4;
          case 4:
            return n4 = t8.next(), [3, 2];
          case 5:
            return [3, 8];
          case 6:
            return i5 = o3.sent(), s6 = { error: i5 }, [3, 8];
          case 7:
            try {
              n4 && !n4.done && (a5 = t8.return) && a5.call(t8);
            } finally {
              if (s6) throw s6.error;
            }
            return [7];
          case 8:
            return [2];
        }
      });
    });
  }, i4.prototype.removeMessagesOfChannel = function(e3) {
    return r(this, void 0, void 0, function() {
      return s(this, function(t8) {
        switch (t8.label) {
          case 0:
            return this.localCacheEnabled ? [4, this.collection.removeIf({ where: { channelUrl: e3 } })] : [3, 2];
          case 1:
            t8.sent(), t8.label = 2;
          case 2:
            return [2];
        }
      });
    });
  }, i4.prototype.clear = function() {
    return r(this, void 0, void 0, function() {
      return s(this, function(e3) {
        switch (e3.label) {
          case 0:
            return this.localCacheEnabled ? [4, this.collection.clear()] : [3, 2];
          case 1:
            e3.sent(), e3.label = 2;
          case 2:
            return [2];
        }
      });
    });
  }, i4.prototype.saveBlob = function(e3) {
    return r(this, void 0, void 0, function() {
      var t8, n4, r4, i5 = this;
      return s(this, function(s6) {
        switch (s6.label) {
          case 0:
            return e3 instanceof St ? e3.messageParams && (r4 = e3.messageParams).file && on(r4.file) ? [4, this.collection.saveBlob(r4.file, e3.reqId)] : [3, 2] : [3, 5];
          case 1:
            n4 = s6.sent(), r4.fileKey = n4, r4.fileType = rn.BLOB, s6.label = 2;
          case 2:
            return e3.scheduledInfo && e3.scheduledInfo.scheduledMessageParams && ((t8 = e3.scheduledInfo.scheduledMessageParams).file && on(t8.file)) ? [4, this.collection.saveBlob(t8.file, e3.reqId)] : [3, 4];
          case 3:
            n4 = s6.sent(), t8.fileKey = n4, t8.fileType = rn.BLOB, s6.label = 4;
          case 4:
            return [3, 7];
          case 5:
            return e3 instanceof Et && ((r4 = e3.messageParams) && r4.fileInfoList && Array.isArray(r4.fileInfoList)) ? [4, Promise.all(r4.fileInfoList.map(function(t9, n5) {
              return r(i5, void 0, void 0, function() {
                var r5;
                return s(this, function(i6) {
                  switch (i6.label) {
                    case 0:
                      return t9.file && on(t9.file) ? [4, this.collection.saveBlob(t9.file, this._getFileInfoBlobKey(e3.reqId, n5))] : [3, 2];
                    case 1:
                      r5 = i6.sent(), t9._uploadedMetaData || (t9._uploadedMetaData = {}), t9._uploadedMetaData.fileKey = r5, t9._uploadedMetaData.fileType = rn.BLOB, i6.label = 2;
                    case 2:
                      return [2];
                  }
                });
              });
            }))] : [3, 7];
          case 6:
            s6.sent(), s6.label = 7;
          case 7:
            return [2];
        }
      });
    });
  }, i4;
}(zr);
var js = {};
var Qs = function(e3) {
  function t7(t8) {
    var n4 = e3.call(this, t8) || this;
    return js[t8] = n4, n4;
  }
  return t(t7, e3), Object.defineProperty(t7.prototype, "_sdkState", { get: function() {
    return Ws.of(this._iid).sdkState;
  }, enumerable: false, configurable: true }), Object.defineProperty(t7.prototype, "_cacheContext", { get: function() {
    return Ws.of(this._iid).cacheContext;
  }, enumerable: false, configurable: true }), Object.defineProperty(t7.prototype, "_unsentMessageCache", { get: function() {
    return Ks2.of(this._iid);
  }, enumerable: false, configurable: true }), t7.of = function(e4, n4) {
    return void 0 === n4 && (n4 = false), js[e4] && !n4 || (js[e4] = new t7(e4)), js[e4];
  }, Object.defineProperty(t7.prototype, "collection", { get: function() {
    var e4 = this._cacheContext.nestdb;
    return Jr(!!e4).throw(v.databaseError), e4.collection(Gr);
  }, enumerable: false, configurable: true }), Object.defineProperty(t7.prototype, "localCacheEnabled", { get: function() {
    return this._cacheContext.localCacheEnabled && !!this.collection;
  }, enumerable: false, configurable: true }), t7.prototype._serialize = function(e4) {
    return n(n({}, e4.serialize()), { messageId: "".concat(e4.messageId) });
  }, t7.prototype._deserialize = function(e4) {
    return e4 = n(n({}, e4), { messageId: parseInt(e4.messageId) }), ea.of(this._iid).buildMessageFromSerializedData(e4);
  }, t7.prototype.get = function(e4) {
    return r(this, void 0, void 0, function() {
      var t8;
      return s(this, function(n4) {
        switch (n4.label) {
          case 0:
            return this.localCacheEnabled ? [4, this.collection.getByKey("".concat(e4))] : [3, 2];
          case 1:
            if (t8 = n4.sent()) return [2, this._deserialize(t8)];
            n4.label = 2;
          case 2:
            return [2, void 0];
        }
      });
    });
  }, t7.prototype.fetch = function(e4) {
    var t8 = e4.channelUrl, n4 = e4.token, r4 = e4.limit, i4 = void 0 === r4 ? 100 : r4, s6 = e4.filter, a5 = void 0 === s6 ? new Os() : s6, o3 = e4.order, u4 = void 0 === o3 ? Ns.CHANNEL_LATEST : o3, c4 = e4.backward, l3 = void 0 !== c4 && c4, d5 = e4.parentMessageId, h4 = e4.isPollOnly, f4 = void 0 !== h4 && h4, p4 = e4.exactMatch, m5 = void 0 !== p4 && p4, v5 = e4.inclusive, y6 = void 0 === v5 || v5;
    return r(this, void 0, void 0, function() {
      var e5, r5, s7, o4 = this;
      return s(this, function(c5) {
        switch (c5.label) {
          case 0:
            return this.localCacheEnabled ? (e5 = ks(u4), r5 = { where: { channelUrl: t8, "/where": function(e6) {
              if (null != n4 && "" !== n4) switch (u4) {
                case Ns.CHANNEL_LATEST:
                  if (m5 && e6.createdAt !== n4) return false;
                  if (l3) {
                    if (y6 && e6.createdAt < n4 || !y6 && e6.createdAt <= n4) return false;
                  } else if (y6 && e6.createdAt > n4 || !y6 && e6.createdAt >= n4) return false;
                  break;
                case Ns.NEWEST_CHILD_MESSAGE:
                  if (!d5 || 0 === e6.parentMessageId || e6.parentMessageId !== d5) return false;
              }
              return !(f4 && !e6._poll) && a5.match(o4._deserialize(e6));
            } }, index: e5, backward: l3 }, [4, this.collection.query(r5)]) : [3, 3];
          case 1:
            return [4, c5.sent().fetch({ limit: null != i4 ? i4 : void 0 })];
          case 2:
            return s7 = c5.sent(), [2, Promise.all(s7.map(function(e6) {
              return r(o4, void 0, void 0, function() {
                return s(this, function(t9) {
                  return [2, this._deserialize(e6)];
                });
              });
            }))];
          case 3:
            return [2, []];
        }
      });
    });
  }, t7.prototype.getAllChildMessages = function(e4, t8) {
    return void 0 === t8 && (t8 = new Os()), r(this, void 0, void 0, function() {
      return s(this, function(n4) {
        switch (n4.label) {
          case 0:
            return [4, this.fetch({ channelUrl: e4.channelUrl, token: Date.now(), limit: null, backward: false, filter: t8, order: Ns.NEWEST_CHILD_MESSAGE, parentMessageId: e4.messageId })];
          case 1:
            return [2, n4.sent()];
        }
      });
    });
  }, t7.prototype.upsert = function(e4) {
    var t8;
    return r(this, void 0, void 0, function() {
      var n4, r4, i4, s6, a5, o3, u4, c4, l3 = this;
      return s(this, function(d5) {
        switch (d5.label) {
          case 0:
            return this.localCacheEnabled ? [4, this.saveBlobs(e4)] : [3, 13];
          case 1:
            d5.sent(), d5.label = 2;
          case 2:
            d5.trys.push([2, 7, 8, 9]), n4 = o(e4), r4 = n4.next(), d5.label = 3;
          case 3:
            return r4.done ? [3, 6] : (i4 = r4.value, (null === (t8 = i4.threadInfo) || void 0 === t8 ? void 0 : t8._isUpdateRequired) ? [4, this.get(i4.messageId)] : [3, 5]);
          case 4:
            (null == (s6 = d5.sent()) ? void 0 : s6.threadInfo) && i4.threadInfo._updateFrom(s6.threadInfo), d5.label = 5;
          case 5:
            return r4 = n4.next(), [3, 3];
          case 6:
            return [3, 9];
          case 7:
            return a5 = d5.sent(), u4 = { error: a5 }, [3, 9];
          case 8:
            try {
              r4 && !r4.done && (c4 = n4.return) && c4.call(n4);
            } finally {
              if (u4) throw u4.error;
            }
            return [7];
          case 9:
            return o3 = e4.map(function(e5) {
              return l3._serialize(e5);
            }), [4, this.collection.upsertMany(o3)];
          case 10:
            return d5.sent(), [4, this.upsertChildMessages(e4)];
          case 11:
            return d5.sent(), [4, this._unsentMessageCache.upsertChildMessages(e4)];
          case 12:
            d5.sent(), d5.label = 13;
          case 13:
            return [2];
        }
      });
    });
  }, t7.prototype.upsertChildMessages = function(e4) {
    return r(this, void 0, void 0, function() {
      var t8 = this;
      return s(this, function(n4) {
        switch (n4.label) {
          case 0:
            return this.localCacheEnabled ? [4, Promise.all(e4.map(function(e5) {
              return r(t8, void 0, void 0, function() {
                var t9, n5;
                return s(this, function(r4) {
                  switch (r4.label) {
                    case 0:
                      return t9 = [], (null === (n5 = e5.threadInfo) || void 0 === n5 ? void 0 : n5.replyCount) && e5.threadInfo.replyCount > 0 ? [4, this.getAllChildMessages(e5)] : [3, 2];
                    case 1:
                      t9 = r4.sent(), r4.label = 2;
                    case 2:
                      return t9.length > 0 ? (t9.forEach(function(t10) {
                        return t10.applyParentMessage(e5);
                      }), [4, this.upsert(t9)]) : [3, 4];
                    case 3:
                      r4.sent(), r4.label = 4;
                    case 4:
                      return [2];
                  }
                });
              });
            }))] : [3, 2];
          case 1:
            n4.sent(), n4.label = 2;
          case 2:
            return [2];
        }
      });
    });
  }, t7.prototype.remove = function(e4) {
    return r(this, void 0, void 0, function() {
      var t8, n4, r4, i4, s6, a5;
      return s(this, function(o3) {
        switch (o3.label) {
          case 0:
            if (!this.localCacheEnabled) return [3, 8];
            o3.label = 1;
          case 1:
            o3.trys.push([1, 6, 7, 8]), t8 = o(e4), n4 = t8.next(), o3.label = 2;
          case 2:
            return n4.done ? [3, 5] : (r4 = n4.value, [4, this.collection.remove("".concat(r4))]);
          case 3:
            o3.sent(), o3.label = 4;
          case 4:
            return n4 = t8.next(), [3, 2];
          case 5:
            return [3, 8];
          case 6:
            return i4 = o3.sent(), s6 = { error: i4 }, [3, 8];
          case 7:
            try {
              n4 && !n4.done && (a5 = t8.return) && a5.call(t8);
            } finally {
              if (s6) throw s6.error;
            }
            return [7];
          case 8:
            return [2];
        }
      });
    });
  }, t7.prototype.removeMessagesOfChannel = function(e4) {
    return r(this, void 0, void 0, function() {
      var t8;
      return s(this, function(n4) {
        switch (n4.label) {
          case 0:
            return this.localCacheEnabled ? [4, this.collection.removeIf({ where: { channelUrl: e4 }, index: ks(Ns.CHANNEL_LATEST) })] : [3, 6];
          case 1:
            return n4.sent(), [4, (t8 = this._cacheContext.preference).remove("sendbird:".concat(this._sdkState.userId, "@groupchannel/").concat(e4, "/message/sync"))];
          case 2:
            return n4.sent(), [4, t8.remove("sendbird:".concat(this._sdkState.userId, "@groupchannel/").concat(e4, "/message/sync.meta"))];
          case 3:
            return n4.sent(), [4, t8.remove("sendbird:".concat(this._sdkState.userId, "@groupchannel/").concat(e4, "/message/changelogs"))];
          case 4:
            return n4.sent(), [4, t8.remove("sendbird:".concat(this._sdkState.userId, "@groupchannel/").concat(e4, "/message/changelogs.meta"))];
          case 5:
            n4.sent(), n4.label = 6;
          case 6:
            return [2];
        }
      });
    });
  }, t7.prototype.removeUnderOffset = function(e4, t8) {
    return r(this, void 0, void 0, function() {
      return s(this, function(n4) {
        switch (n4.label) {
          case 0:
            return this.localCacheEnabled ? [4, this.collection.removeIf({ where: { channelUrl: e4, createdAt: { "<": t8 } }, index: ks(Ns.CHANNEL_LATEST) })] : [3, 2];
          case 1:
            n4.sent(), n4.label = 2;
          case 2:
            return [2];
        }
      });
    });
  }, t7.prototype.clear = function() {
    return r(this, void 0, void 0, function() {
      return s(this, function(e4) {
        switch (e4.label) {
          case 0:
            return this.localCacheEnabled ? [4, this.collection.clear()] : [3, 2];
          case 1:
            e4.sent(), e4.label = 2;
          case 2:
            return [2];
        }
      });
    });
  }, t7.prototype.countBetween = function(e4, t8, n4) {
    return r(this, void 0, void 0, function() {
      var r4, i4 = this;
      return s(this, function(s6) {
        switch (s6.label) {
          case 0:
            return this.localCacheEnabled ? (r4 = ks(Ns.CHANNEL_LATEST), [4, this.collection.query({ where: { channelUrl: e4, "/where": function(e5) {
              var r5 = i4._deserialize(e5);
              return n4.includes(r5.createdAt) && t8.match(r5);
            } }, index: r4 }).count()]) : [3, 2];
          case 1:
            return [2, s6.sent()];
          case 2:
            return [2, 0];
        }
      });
    });
  }, t7.prototype.saveBlobs = function(e4) {
    return r(this, void 0, void 0, function() {
      var t8 = this;
      return s(this, function(n4) {
        switch (n4.label) {
          case 0:
            return [4, Promise.all(e4.map(function(e5) {
              return r(t8, void 0, void 0, function() {
                var t9, n5;
                return s(this, function(r4) {
                  switch (r4.label) {
                    case 0:
                      return e5 instanceof St && e5.messageParams && ((t9 = e5.messageParams).file && on(t9.file)) ? [4, this.collection.saveBlob(t9.file, e5.reqId)] : [3, 2];
                    case 1:
                      n5 = r4.sent(), t9.fileKey = n5, r4.label = 2;
                    case 2:
                      return [2];
                  }
                });
              });
            }))];
          case 1:
            return n4.sent(), [2];
        }
      });
    });
  }, t7.prototype._getGroupChannelPreferenceSize = function(e4) {
    return r(this, void 0, void 0, function() {
      var t8, n4, r4, i4, s6, a5;
      return s(this, function(o3) {
        switch (o3.label) {
          case 0:
            return t8 = 0, [4, (n4 = this._cacheContext.preference).get("sendbird:".concat(this._sdkState.userId, "@groupchannel/").concat(e4, "/message/sync"))];
          case 1:
            return r4 = o3.sent(), [4, n4.get("sendbird:".concat(this._sdkState.userId, "@groupchannel/").concat(e4, "/message/sync.meta"))];
          case 2:
            return i4 = o3.sent(), [4, n4.get("sendbird:".concat(this._sdkState.userId, "@groupchannel/").concat(e4, "/message/changelogs"))];
          case 3:
            return s6 = o3.sent(), [4, n4.get("sendbird:".concat(this._sdkState.userId, "@groupchannel/").concat(e4, "/message/changelogs.meta"))];
          case 4:
            return a5 = o3.sent(), r4 && (t8 += JSON.stringify(r4).length), i4 && (t8 += JSON.stringify(i4).length), s6 && (t8 += JSON.stringify(s6).length), a5 && (t8 += JSON.stringify(a5).length), [2, t8];
        }
      });
    });
  }, t7;
}(zr);
var Gs = {};
var Vs = function(e3) {
  function t7(t8) {
    var n4 = e3.call(this, t8) || this;
    return Gs[t8] = n4, n4;
  }
  return t(t7, e3), Object.defineProperty(t7.prototype, "_sdkState", { get: function() {
    return Ws.of(this._iid).sdkState;
  }, enumerable: false, configurable: true }), Object.defineProperty(t7.prototype, "_cacheContext", { get: function() {
    return Ws.of(this._iid).cacheContext;
  }, enumerable: false, configurable: true }), t7.of = function(e4, n4) {
    return void 0 === n4 && (n4 = false), Gs[e4] && !n4 || (Gs[e4] = new t7(e4)), Gs[e4];
  }, Object.defineProperty(t7.prototype, "collection", { get: function() {
    var e4 = this._cacheContext.nestdb;
    return Jr(!!e4).throw(v.databaseError), e4.collection(Wr);
  }, enumerable: false, configurable: true }), Object.defineProperty(t7.prototype, "localCacheEnabled", { get: function() {
    return this._cacheContext.localCacheEnabled && !!this.collection;
  }, enumerable: false, configurable: true }), t7.prototype._serialize = function(e4) {
    return n({}, e4.serialize());
  }, t7.prototype._deserialize = function(e4) {
    return ea.of(this._iid).buildMessageFromSerializedData(e4);
  }, t7.prototype.get = function(e4) {
    return r(this, void 0, void 0, function() {
      var t8;
      return s(this, function(n4) {
        switch (n4.label) {
          case 0:
            return this.localCacheEnabled ? [4, this.collection.getByKey(e4)] : [3, 2];
          case 1:
            if (t8 = n4.sent()) return [2, this._deserialize(t8)];
            n4.label = 2;
          case 2:
            return [2, void 0];
        }
      });
    });
  }, t7.prototype.fetch = function(e4) {
    var t8 = e4.channelUrl, n4 = e4.token, r4 = e4.limit, i4 = void 0 === r4 ? 100 : r4, s6 = e4.filter, a5 = void 0 === s6 ? new Os() : s6, o3 = e4.backward, u4 = void 0 !== o3 && o3, c4 = e4.exactMatch, l3 = void 0 !== c4 && c4, d5 = e4.inclusive, h4 = void 0 === d5 || d5;
    return r(this, void 0, void 0, function() {
      var e5, r5 = this;
      return s(this, function(s7) {
        switch (s7.label) {
          case 0:
            return this.localCacheEnabled ? (e5 = { where: { channelUrl: t8, "/where": function(e6) {
              if (n4) {
                if (l3 && e6.createdAt !== n4) return false;
                if (u4) {
                  if (h4 && e6.createdAt < n4 || !h4 && e6.createdAt <= n4) return false;
                } else if (h4 && e6.createdAt > n4 || !h4 && e6.createdAt >= n4) return false;
              }
              return a5.match(r5._deserialize(e6));
            } }, index: ["channelUrl", "-createdAt", "-notificationId"], backward: u4 }, [4, this.collection.query(e5)]) : [3, 3];
          case 1:
            return [4, s7.sent().fetch({ limit: null != i4 ? i4 : void 0 })];
          case 2:
            return [2, s7.sent().map(function(e6) {
              return r5._deserialize(e6);
            })];
          case 3:
            return [2, []];
        }
      });
    });
  }, t7.prototype.upsert = function(e4) {
    return r(this, void 0, void 0, function() {
      var t8, n4 = this;
      return s(this, function(r4) {
        switch (r4.label) {
          case 0:
            return this.localCacheEnabled ? (t8 = e4.map(function(e5) {
              return n4._serialize(e5);
            }), [4, this.collection.upsertMany(t8)]) : [3, 2];
          case 1:
            r4.sent(), r4.label = 2;
          case 2:
            return [2];
        }
      });
    });
  }, t7.prototype.remove = function(e4) {
    return r(this, void 0, void 0, function() {
      var t8, n4, r4, i4, s6, a5;
      return s(this, function(o3) {
        switch (o3.label) {
          case 0:
            if (!this.localCacheEnabled) return [3, 8];
            o3.label = 1;
          case 1:
            o3.trys.push([1, 6, 7, 8]), t8 = o(e4), n4 = t8.next(), o3.label = 2;
          case 2:
            return n4.done ? [3, 5] : (r4 = n4.value, [4, this.collection.remove(r4)]);
          case 3:
            o3.sent(), o3.label = 4;
          case 4:
            return n4 = t8.next(), [3, 2];
          case 5:
            return [3, 8];
          case 6:
            return i4 = o3.sent(), s6 = { error: i4 }, [3, 8];
          case 7:
            try {
              n4 && !n4.done && (a5 = t8.return) && a5.call(t8);
            } finally {
              if (s6) throw s6.error;
            }
            return [7];
          case 8:
            return [2];
        }
      });
    });
  }, t7.prototype.markAsReadByTimestamp = function(e4, t8) {
    return r(this, void 0, void 0, function() {
      return s(this, function(n4) {
        switch (n4.label) {
          case 0:
            return this.localCacheEnabled ? [4, this.collection.updateIf({ where: { channelUrl: e4, messageStatus: ft.SENT, createdAt: { "<": t8 } } }, { set: { messageStatus: ft.READ } })] : [3, 2];
          case 1:
            n4.sent(), n4.label = 2;
          case 2:
            return [2];
        }
      });
    });
  }, t7.prototype.markAsReadByMessageIds = function(e4, t8) {
    return r(this, void 0, void 0, function() {
      return s(this, function(n4) {
        switch (n4.label) {
          case 0:
            return this.localCacheEnabled ? [4, this.collection.updateIf({ where: { channelUrl: e4, notificationId: { "/in": t8 }, messageStatus: ft.SENT } }, { set: { messageStatus: ft.READ } })] : [3, 2];
          case 1:
            return [2, n4.sent().length];
          case 2:
            return [2, 0];
        }
      });
    });
  }, t7.prototype.removeMessagesOfChannel = function(e4) {
    return r(this, void 0, void 0, function() {
      var t8;
      return s(this, function(n4) {
        switch (n4.label) {
          case 0:
            return this.localCacheEnabled ? [4, this.collection.removeIf({ where: { channelUrl: e4 }, index: ["channelUrl", "-createdAt", "-notificationId"] })] : [3, 6];
          case 1:
            return n4.sent(), [4, (t8 = this._cacheContext.preference).remove("sendbird:".concat(this._sdkState.userId, "@groupchannel/").concat(e4, "/message/sync"))];
          case 2:
            return n4.sent(), [4, t8.remove("sendbird:".concat(this._sdkState.userId, "@groupchannel/").concat(e4, "/message/sync.meta"))];
          case 3:
            return n4.sent(), [4, t8.remove("sendbird:".concat(this._sdkState.userId, "@groupchannel/").concat(e4, "/message/changelogs"))];
          case 4:
            return n4.sent(), [4, t8.remove("sendbird:".concat(this._sdkState.userId, "@groupchannel/").concat(e4, "/message/changelogs.meta"))];
          case 5:
            n4.sent(), n4.label = 6;
          case 6:
            return [2];
        }
      });
    });
  }, t7.prototype.removeUnderOffset = function(e4, t8) {
    return r(this, void 0, void 0, function() {
      return s(this, function(n4) {
        switch (n4.label) {
          case 0:
            return this.localCacheEnabled ? [4, this.collection.removeIf({ where: { channelUrl: e4, createdAt: { "<": t8 } }, index: ks(Ns.CHANNEL_LATEST) })] : [3, 2];
          case 1:
            n4.sent(), n4.label = 2;
          case 2:
            return [2];
        }
      });
    });
  }, t7.prototype.clear = function() {
    return r(this, void 0, void 0, function() {
      return s(this, function(e4) {
        switch (e4.label) {
          case 0:
            return this.localCacheEnabled ? [4, this.collection.clear()] : [3, 2];
          case 1:
            e4.sent(), e4.label = 2;
          case 2:
            return [2];
        }
      });
    });
  }, t7.prototype.countBetween = function(e4, t8, n4) {
    return r(this, void 0, void 0, function() {
      var r4, i4 = this;
      return s(this, function(s6) {
        switch (s6.label) {
          case 0:
            return this.localCacheEnabled ? (r4 = ["channelUrl", "-createdAt", "-notificationId"], [4, this.collection.query({ where: { channelUrl: e4, "/where": function(e5) {
              var r5 = i4._deserialize(e5);
              return n4.includes(r5.createdAt) && t8.match(r5);
            } }, index: r4 }).count()]) : [3, 2];
          case 1:
            return [2, s6.sent()];
          case 2:
            return [2, 0];
        }
      });
    });
  }, t7;
}(zr);
var Hs = {};
var Ws2 = function(e3) {
  function t7(t8) {
    var n4 = e3.call(this, t8) || this;
    return n4._observers = /* @__PURE__ */ new Map(), n4._dispatcherContext = n4._dispatcher.on(function(e4) {
      return r(n4, void 0, void 0, function() {
        var t9, n5, r4, i4, s6, a5, o3, u4, c4, l3, d5, h4, f4, p4, m5, v5, y6, _2, g4, b6 = this;
        return s(this, function(E4) {
          switch (E4.label) {
            case 0:
              return e4 instanceof $s ? (t9 = e4.messages, g4 = e4.source, a5 = e4.isWebSocketEventComing, n5 = t9.filter(function(e5) {
                return e5 instanceof pt && e5.channelType !== q.OPEN && e5.messageId > 0;
              }), r4 = t9.filter(function(e5) {
                return e5 instanceof pt && e5.channelType !== q.OPEN && 0 === e5.messageId;
              }), i4 = t9.filter(function(e5) {
                return e5 instanceof Tt;
              }), n5.length > 0 ? [4, as(function() {
                return r(b6, void 0, void 0, function() {
                  return s(this, function(e5) {
                    switch (e5.label) {
                      case 0:
                        return [4, this._messageCache.upsert(n5)];
                      case 1:
                        return e5.sent(), [4, this._unsentMessageCache.remove(n5.map(function(e6) {
                          return e6 instanceof mt ? e6.reqId : null;
                        }).filter(function(e6) {
                          return null !== e6;
                        }))];
                      case 2:
                        return e5.sent(), [2];
                    }
                  });
                });
              })] : [3, 2]) : [3, 7];
            case 1:
              E4.sent(), a5 || this._broadcastUpdateEvent(n5, g4), E4.label = 2;
            case 2:
              return r4.length > 0 ? [4, as(function() {
                return r(b6, void 0, void 0, function() {
                  return s(this, function(e5) {
                    switch (e5.label) {
                      case 0:
                        return [4, this._unsentMessageCache.upsert(r4)];
                      case 1:
                        return e5.sent(), [2];
                    }
                  });
                });
              })] : [3, 4];
            case 3:
              E4.sent(), a5 || this._broadcastUpdateEvent(r4, g4), E4.label = 4;
            case 4:
              return i4.length > 0 ? [4, as(function() {
                return r(b6, void 0, void 0, function() {
                  return s(this, function(e5) {
                    switch (e5.label) {
                      case 0:
                        return [4, this._notificationCache.upsert(i4)];
                      case 1:
                        return e5.sent(), [2];
                    }
                  });
                });
              })] : [3, 6];
            case 5:
              E4.sent(), a5 || this._broadcastUpdateEvent(i4, g4), E4.label = 6;
            case 6:
              return [3, 24];
            case 7:
              return e4 instanceof eo ? (s6 = e4.messageIds, g4 = e4.source, a5 = e4.isWebSocketEventComing, o3 = s6.filter(function(e5) {
                return "number" == typeof e5;
              }), u4 = s6.filter(function(e5) {
                return "string" == typeof e5;
              }), [4, as(function() {
                return r(b6, void 0, void 0, function() {
                  return s(this, function(e5) {
                    switch (e5.label) {
                      case 0:
                        return o3.length > 0 ? [4, this._messageCache.remove(o3)] : [3, 2];
                      case 1:
                        e5.sent(), e5.label = 2;
                      case 2:
                        return u4.length > 0 ? [4, this._notificationCache.remove(u4)] : [3, 4];
                      case 3:
                        e5.sent(), e5.label = 4;
                      case 4:
                        return [2];
                    }
                  });
                });
              })]) : [3, 9];
            case 8:
              return E4.sent(), a5 || this._broadcastRemoveEvent(s6, g4), [3, 24];
            case 9:
              return e4 instanceof io ? (c4 = e4.reqId, g4 = e4.source, [4, as(function() {
                return r(b6, void 0, void 0, function() {
                  return s(this, function(e5) {
                    switch (e5.label) {
                      case 0:
                        return [4, this._unsentMessageCache.remove([c4])];
                      case 1:
                        return e5.sent(), [2];
                    }
                  });
                });
              })]) : [3, 11];
            case 10:
              return E4.sent(), this._broadcastRemoveUnsentEvent(c4, g4), [3, 24];
            case 11:
              return e4 instanceof ro ? (l3 = e4.polls, g4 = e4.source, this._cacheContext.localCacheEnabled ? (d5 = l3.map(function(e5) {
                return e5.messageId;
              }), [4, Promise.all(d5.map(function(e5) {
                return b6._messageCache.get(e5);
              }))]) : [3, 14]) : [3, 15];
            case 12:
              return (h4 = E4.sent().filter(function(e5) {
                return e5;
              })).length > 0 && l3.forEach(function(e5) {
                var t10 = h4.find(function(t11) {
                  return t11.messageId === e5.messageId;
                });
                t10 && t10.applyPoll(e5);
              }), [4, as(function() {
                return r(b6, void 0, void 0, function() {
                  return s(this, function(e5) {
                    switch (e5.label) {
                      case 0:
                        return [4, this._messageCache.upsert(h4)];
                      case 1:
                        return [2, e5.sent()];
                    }
                  });
                });
              })];
            case 13:
              E4.sent(), E4.label = 14;
            case 14:
              return this._broadcastPollChangeLogEvent(l3, g4), [3, 24];
            case 15:
              return e4 instanceof so ? (f4 = e4.event, g4 = e4.source, [4, this._messageCache.get(f4.messageId)]) : [3, 19];
            case 16:
              return (p4 = E4.sent()) && p4.isUserMessage() && p4.poll && p4.poll.applyPollUpdateEvent(f4) ? [4, as(function() {
                return r(b6, void 0, void 0, function() {
                  return s(this, function(e5) {
                    switch (e5.label) {
                      case 0:
                        return [4, this._messageCache.upsert([p4])];
                      case 1:
                        return [2, e5.sent()];
                    }
                  });
                });
              })] : [3, 18];
            case 17:
              E4.sent(), E4.label = 18;
            case 18:
              return this._broadcastPollUpdateEvent(f4, g4), [3, 24];
            case 19:
              return e4 instanceof oo ? (m5 = e4.event, g4 = e4.source, [4, this._messageCache.get(m5.messageId)]) : [3, 23];
            case 20:
              return (v5 = E4.sent()) && v5.isUserMessage() && v5.poll && v5.poll.applyPollVoteEvent(m5) ? [4, as(function() {
                return r(b6, void 0, void 0, function() {
                  return s(this, function(e5) {
                    switch (e5.label) {
                      case 0:
                        return [4, this._messageCache.upsert([v5])];
                      case 1:
                        return [2, e5.sent()];
                    }
                  });
                });
              })] : [3, 22];
            case 21:
              E4.sent(), E4.label = 22;
            case 22:
              return this._broadcastPollVoteEvent(m5, g4), [3, 24];
            case 23:
              e4 instanceof to ? (y6 = e4.event, g4 = e4.source, y6.messageId > 0 && this._broadcastReactionUpdateEvent(y6, g4)) : e4 instanceof no && (_2 = e4.event, g4 = e4.source, this._broadcastThreadUpdateEvent(_2, g4)), E4.label = 24;
            case 24:
              return [2];
          }
        });
      });
    }), n4;
  }
  return t(t7, e3), Object.defineProperty(t7.prototype, "_cacheContext", { get: function() {
    return Ws.of(this._iid).cacheContext;
  }, enumerable: false, configurable: true }), Object.defineProperty(t7.prototype, "_dispatcher", { get: function() {
    return Ws.of(this._iid).dispatcher;
  }, enumerable: false, configurable: true }), Object.defineProperty(t7.prototype, "_messageCache", { get: function() {
    return Qs.of(this._iid);
  }, enumerable: false, configurable: true }), Object.defineProperty(t7.prototype, "_unsentMessageCache", { get: function() {
    return Ks2.of(this._iid);
  }, enumerable: false, configurable: true }), Object.defineProperty(t7.prototype, "_notificationCache", { get: function() {
    return Vs.of(this._iid);
  }, enumerable: false, configurable: true }), t7.of = function(e4, n4) {
    var r4;
    return void 0 === n4 && (n4 = false), Hs[e4] && !n4 || (Hs[e4] && (null === (r4 = Hs[e4]._dispatcherContext) || void 0 === r4 || r4.close()), Hs[e4] = new t7(e4)), Hs[e4];
  }, t7.prototype._broadcastUpdateEvent = function(e4, t8) {
    var n4, r4;
    try {
      for (var i4 = o(this._observers.values()), s6 = i4.next(); !s6.done; s6 = i4.next()) {
        var a5 = s6.value;
        a5.onUpdate && a5.onUpdate(e4, t8);
      }
    } catch (e5) {
      n4 = { error: e5 };
    } finally {
      try {
        s6 && !s6.done && (r4 = i4.return) && r4.call(i4);
      } finally {
        if (n4) throw n4.error;
      }
    }
  }, t7.prototype._broadcastPollChangeLogEvent = function(e4, t8) {
    var n4, r4;
    try {
      for (var i4 = o(this._observers.values()), s6 = i4.next(); !s6.done; s6 = i4.next()) {
        var a5 = s6.value;
        a5.onPollChangeLogUpdate && a5.onPollChangeLogUpdate(e4, t8);
      }
    } catch (e5) {
      n4 = { error: e5 };
    } finally {
      try {
        s6 && !s6.done && (r4 = i4.return) && r4.call(i4);
      } finally {
        if (n4) throw n4.error;
      }
    }
  }, t7.prototype._broadcastPollUpdateEvent = function(e4, t8) {
    var n4, r4;
    try {
      for (var i4 = o(this._observers.values()), s6 = i4.next(); !s6.done; s6 = i4.next()) {
        var a5 = s6.value;
        a5.onPollUpdate && a5.onPollUpdate(e4, t8);
      }
    } catch (e5) {
      n4 = { error: e5 };
    } finally {
      try {
        s6 && !s6.done && (r4 = i4.return) && r4.call(i4);
      } finally {
        if (n4) throw n4.error;
      }
    }
  }, t7.prototype._broadcastPollVoteEvent = function(e4, t8) {
    var n4, r4;
    try {
      for (var i4 = o(this._observers.values()), s6 = i4.next(); !s6.done; s6 = i4.next()) {
        var a5 = s6.value;
        a5.onPollVote && a5.onPollVote(e4, t8);
      }
    } catch (e5) {
      n4 = { error: e5 };
    } finally {
      try {
        s6 && !s6.done && (r4 = i4.return) && r4.call(i4);
      } finally {
        if (n4) throw n4.error;
      }
    }
  }, t7.prototype._broadcastRemoveEvent = function(e4, t8) {
    var n4, r4;
    try {
      for (var i4 = o(this._observers.values()), s6 = i4.next(); !s6.done; s6 = i4.next()) {
        var a5 = s6.value;
        a5.onRemove && a5.onRemove(e4, t8);
      }
    } catch (e5) {
      n4 = { error: e5 };
    } finally {
      try {
        s6 && !s6.done && (r4 = i4.return) && r4.call(i4);
      } finally {
        if (n4) throw n4.error;
      }
    }
  }, t7.prototype._broadcastRemoveUnsentEvent = function(e4, t8) {
    var n4, r4;
    try {
      for (var i4 = o(this._observers.values()), s6 = i4.next(); !s6.done; s6 = i4.next()) {
        var a5 = s6.value;
        a5.onRemoveUnsent && a5.onRemoveUnsent(e4, t8);
      }
    } catch (e5) {
      n4 = { error: e5 };
    } finally {
      try {
        s6 && !s6.done && (r4 = i4.return) && r4.call(i4);
      } finally {
        if (n4) throw n4.error;
      }
    }
  }, t7.prototype._broadcastReactionUpdateEvent = function(e4, t8) {
    var n4, r4;
    try {
      for (var i4 = o(this._observers.values()), s6 = i4.next(); !s6.done; s6 = i4.next()) {
        var a5 = s6.value;
        a5.onReactionUpdate && a5.onReactionUpdate(e4, t8);
      }
    } catch (e5) {
      n4 = { error: e5 };
    } finally {
      try {
        s6 && !s6.done && (r4 = i4.return) && r4.call(i4);
      } finally {
        if (n4) throw n4.error;
      }
    }
  }, t7.prototype._broadcastThreadUpdateEvent = function(e4, t8) {
    var n4, r4;
    try {
      for (var i4 = o(this._observers.values()), s6 = i4.next(); !s6.done; s6 = i4.next()) {
        var a5 = s6.value;
        a5.onThreadInfoUpdate && a5.onThreadInfoUpdate(e4, t8);
      }
    } catch (e5) {
      n4 = { error: e5 };
    } finally {
      try {
        s6 && !s6.done && (r4 = i4.return) && r4.call(i4);
      } finally {
        if (n4) throw n4.error;
      }
    }
  }, t7.prototype.subscribe = function(e4, t8) {
    this._observers.set(e4, t8);
  }, t7.prototype.unsubscribe = function(e4) {
    this._observers.delete(e4);
  }, t7.prototype.unsubscribeAll = function() {
    this._observers.clear();
  }, t7;
}(zr);
var Ys = function(t7) {
  function n4(n5) {
    var r4 = this, s6 = n5.reverse, a5 = void 0 !== s6 && s6, o3 = n5.limit, u4 = void 0 === o3 ? 20 : o3, c4 = n5.keys, l3 = n5.token;
    return (r4 = t7.call(this) || this).method = oe.GET, r4.path = "".concat(Ne), r4.params = re({ token: l3, limit: u4, reverse: a5, order: X.UPDATED_AT, show_ui_template: true, show_color_variables: true, keys: c4 }), r4;
  }
  return t(n4, t7), n4;
}(xe);
var Js2 = function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this, i4 = n4.next, s6 = n4.has_more, a5 = void 0 !== s6 && s6, o3 = n4.templates;
    return r4.nextToken = i4, r4.hasMore = a5, r4.templates = o3.map(function(e4) {
      return { template: JSON.stringify(e4) };
    }), r4;
  }
  return t(t7, e3), t7;
}(Ue);
var Xs = function(e3) {
  function t7(t8) {
    var n4 = this, r4 = t8.key;
    return (n4 = e3.call(this) || this).method = oe.GET, n4.path = "".concat(Ne, "/").concat(r4), n4;
  }
  return t(t7, e3), t7;
}(xe);
var Zs2 = function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this;
    return r4.template = JSON.stringify(n4), r4;
  }
  return t(t7, e3), t7;
}(Ue);
var $s2 = {};
var ea = function() {
  function n4(e3, t7) {
    var n5 = t7.sdkState, r4 = t7.dispatcher, i4 = t7.requestQueue, s6 = t7.onlineDetector, a5 = t7.cacheContext;
    this._iid = e3, this._sdkState = n5, this._requestQueue = i4, this._dispatcher = r4, this._cacheContext = a5, Qs.of(e3), Ks2.of(e3), Ws2.of(e3), this.fileMessageQueue = new Rt(e3, { sdkState: n5, dispatcher: r4, requestQueue: i4, onlineDetector: s6, cacheContext: a5 }), $s2[e3] = this;
  }
  return n4.of = function(e3) {
    return $s2[e3];
  }, n4.prototype.buildMessageFromSerializedData = function(e3) {
    var t7 = Xr(e3);
    if (t7.notificationId) return new Tt(this._iid, Tt.payloadify(t7));
    switch (t7.messageType) {
      case z.USER:
        return new It(this._iid, It.payloadify(t7));
      case z.FILE:
        return Et._isMultipleFilesMessageSerializedData(t7) ? new Et(this._iid, Et.payloadify(t7)) : new St(this._iid, St.payloadify(t7));
      case z.ADMIN:
        return new _t(this._iid, _t.payloadify(t7));
    }
    throw v.invalidParameters;
  }, n4.prototype.buildUserMessageCreateParamsFromSerializedData = function(n5, r4) {
    return re(se({ data: r4.data, customType: r4.customType, mentionType: r4.mentionType, mentionedUserIds: r4.mentionedUserIds, mentionedUsers: r4.mentionedUsers, mentionedMessageTemplate: r4.mentionedMessageTemplate, metaArrays: r4.metaArrays, parentMessageId: r4.parentMessageId, isReplyToChannel: n5.isReplyToChannel, pushNotificationDeliveryOption: n5.pushNotificationDeliveryOption, appleCriticalAlertOptions: r4.appleCriticalAlertOptions, reqId: r4.reqId, message: r4.message, translationTargetLanguages: Object.keys(r4.translations), pollId: n5.pollId }));
  }, n4.prototype.buildFileMessageCreateParamsFromSerializedData = function(n5, r4) {
    var i4;
    return re(se({ data: r4.data, customType: r4.customType, mentionType: r4.mentionType, mentionedUserIds: r4.mentionedUserIds, mentionedUsers: r4.mentionedUsers, mentionedMessageTemplate: r4.mentionedMessageTemplate, metaArrays: r4.metaArrays, parentMessageId: r4.parentMessageId, isReplyToChannel: n5.isReplyToChannel, pushNotificationDeliveryOption: n5.pushNotificationDeliveryOption, appleCriticalAlertOptions: r4.appleCriticalAlertOptions, reqId: r4.reqId, file: n5.file, fileKey: n5.fileKey, fileUrl: r4.plainUrl, fileName: r4.name, fileSize: r4.size, mimeType: r4.type, thumbnailSizes: null === (i4 = r4.thumbnails) || void 0 === i4 ? void 0 : i4.map(function(e3) {
      return { maxWidth: e3.width, maxHeight: e3.height };
    }), fileType: n5.fileType, requireAuth: r4.requireAuth }));
  }, n4.prototype.buildMultipleFilesMessageCreateParamsFromSerializedData = function(t7, n5) {
    var r4 = this;
    return re({ data: n5.data, customType: n5.customType, mentionType: n5.mentionType, mentionedUserIds: n5.mentionedUserIds, mentionedUsers: n5.mentionedUsers, mentionedMessageTemplate: n5.mentionedMessageTemplate, metaArrays: n5.metaArrays, parentMessageId: n5.parentMessageId, isReplyToChannel: t7.isReplyToChannel, pushNotificationDeliveryOption: t7.pushNotificationDeliveryOption, appleCriticalAlertOptions: n5.appleCriticalAlertOptions, reqId: n5.reqId, fileInfoList: t7.fileInfoList.map(function(e3) {
      return new At(r4._iid, e3);
    }) });
  }, n4.prototype.buildScheduledUserMessageCreateParamsFromSerializedData = function(e3, t7) {
    return n(n({}, this.buildUserMessageCreateParamsFromSerializedData(e3, t7)), { scheduledAt: e3.scheduledAt });
  }, n4.prototype.buildScheduledFileMessageCreateParamsFromSerializedData = function(e3, t7) {
    return n(n({}, this.buildFileMessageCreateParamsFromSerializedData(e3, t7)), { scheduledAt: e3.scheduledAt });
  }, n4.prototype.buildSenderFromSerializedData = function(e3) {
    var t7 = Xr(e3);
    return new Ke(this._iid, Ke.payloadify(t7));
  }, n4.prototype.getMessage = function(e3) {
    return r(this, void 0, void 0, function() {
      var t7, n5;
      return s(this, function(r4) {
        switch (r4.label) {
          case 0:
            return t7 = new zt(e3), [4, this._requestQueue.send(t7)];
          case 1:
            return n5 = r4.sent(), [2, n5.as(Bt).message];
        }
      });
    });
  }, n4.prototype.getScheduledMessage = function(e3) {
    return r(this, void 0, void 0, function() {
      var t7, n5;
      return s(this, function(r4) {
        switch (r4.label) {
          case 0:
            return t7 = new Vt(e3), [4, this._requestQueue.send(t7)];
          case 1:
            return n5 = r4.sent(), [2, n5.as(Ht).message];
        }
      });
    });
  }, n4.prototype.getMessagesByMessageId = function(e3, t7, n5, r4, i4) {
    return void 0 === i4 && (i4 = Ks.REQUEST_MESSAGE), r(this, void 0, void 0, function() {
      var s6, a5, o3;
      return s(this, function(c4) {
        switch (c4.label) {
          case 0:
            return s6 = new Kt(n(n({ channelType: t7, channelUrl: e3, token: String(n5) }, Dt), r4)), [4, this._requestQueue.send(s6)];
          case 1:
            return a5 = c4.sent(), o3 = a5.as(jt).messages, this._dispatcher.dispatch(new $s({ messages: o3, source: i4 })), [2, o3];
        }
      });
    });
  }, n4.prototype.getMessagesByTimestamp = function(e3, t7, n5, r4, i4) {
    return void 0 === i4 && (i4 = Ks.REQUEST_MESSAGE), r(this, void 0, void 0, function() {
      var s6, a5, o3;
      return s(this, function(c4) {
        switch (c4.label) {
          case 0:
            return s6 = new Kt(n(n({ channelType: t7, channelUrl: e3, timestamp: n5 }, Dt), r4)), [4, this._requestQueue.send(s6)];
          case 1:
            return a5 = c4.sent(), o3 = a5.as(jt).messages, this._dispatcher.dispatch(new $s({ messages: o3, source: i4 })), [2, o3];
        }
      });
    });
  }, n4.prototype._getMessagesByTimestampForCollection = function(e3, t7, n5, r4, i4, s6, a5) {
    return void 0 === i4 && (i4 = Ks.REQUEST_MESSAGE), r(this, void 0, void 0, function() {
      var o3, c4, l3, d5, h4, f4;
      return s(this, function(p4) {
        switch (p4.label) {
          case 0:
            return o3 = new Kt(n(n(n({ channelType: t7, channelUrl: e3, timestamp: n5 }, Dt), r4), { checkingHasNext: s6, checkingContinuousMessages: a5 })), [4, this._requestQueue.send(o3)];
          case 1:
            return c4 = p4.sent(), l3 = c4.as(jt), d5 = l3.messages, h4 = l3.isContinuousMessages, f4 = l3.hasNext, this._dispatcher.dispatch(new $s({ messages: d5, source: i4 })), [2, { messages: d5, isContinuousMessages: h4, hasNext: f4 }];
        }
      });
    });
  }, n4.prototype.getThreadedMessagesByTimestamp = function(e3, t7, n5, r4) {
    return void 0 === r4 && (r4 = Ks.REQUEST_THREADED_MESSAGE), r(this, void 0, void 0, function() {
      var i4, s6, a5, o3;
      return s(this, function(c4) {
        switch (c4.label) {
          case 0:
            return i4 = new Kt(n(n(n({ channelUrl: e3.channelUrl, channelType: e3.channelType, timestamp: t7 }, vt), n5), { replyType: B.ALL, parentMessageId: e3.messageId, includeThreadInfo: true })), [4, this._requestQueue.send(i4)];
          case 1:
            return s6 = c4.sent(), a5 = s6.as(jt).messages, (o3 = a5.slice(1)).forEach(function(t8) {
              t8.parentMessage = e3;
            }), this._dispatcher.dispatch(new $s({ messages: o3, source: r4 })), [2, { parentMessage: a5[0], threadedMessages: o3 }];
        }
      });
    });
  }, n4.prototype.getMessageTemplatesByToken = function(e3, t7) {
    return void 0 === t7 && (t7 = {}), r(this, void 0, void 0, function() {
      var n5, r4, i4, s6, a5, o3;
      return s(this, function(c4) {
        switch (c4.label) {
          case 0:
            return n5 = new Ys(n({ token: e3 }, t7)), [4, this._requestQueue.send(n5)];
          case 1:
            return r4 = c4.sent(), i4 = r4.as(Js2), s6 = i4.hasMore, a5 = i4.nextToken, o3 = i4.templates, [2, { hasMore: s6, token: a5, templates: o3 }];
        }
      });
    });
  }, n4.prototype.getMessageTemplate = function(e3) {
    return r(this, void 0, void 0, function() {
      var t7, n5;
      return s(this, function(r4) {
        switch (r4.label) {
          case 0:
            return t7 = new Xs({ key: e3 }), [4, this._requestQueue.send(t7)];
          case 1:
            return n5 = r4.sent(), [2, { template: n5.as(Zs2).template }];
        }
      });
    });
  }, n4.prototype.getMessageChangelogs = function(n5, r4, i4, s6, a5) {
    return void 0 === a5 && (a5 = Ks.REQUEST_MESSAGE_CHANGELOGS), r(this, void 0, void 0, function() {
      var o3, c4, l3, d5, h4, f4, p4, m5;
      return s(this, function(v5) {
        switch (v5.label) {
          case 0:
            return o3 = new Qt(re(se(n(n({ channelType: r4, channelUrl: n5, timestamp: "number" == typeof i4 ? i4 : null, token: "string" == typeof i4 ? i4 : null }, Ft), s6)))), [4, this._requestQueue.send(o3)];
          case 1:
            return c4 = v5.sent(), l3 = c4.as(Gt), d5 = l3.updatedMessages, h4 = l3.deletedMessagesInfo, f4 = l3.hasMore, p4 = l3.nextToken, m5 = h4.map(function(e3) {
              return e3.messageId;
            }), d5.length > 0 && this._dispatcher.dispatch(new $s({ messages: d5, source: a5 })), m5.length > 0 && this._dispatcher.dispatch(new eo({ messageIds: m5, source: a5 })), [2, { updatedMessages: d5, deletedMessageIds: m5, hasMore: f4, token: p4 }];
        }
      });
    });
  }, n4;
}();
var ta = function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8) || this;
    r4.targetMessageId = 0;
    var i4 = n4.thread_info, s6 = n4.parent_message_id, a5 = n4.channel_url, o3 = n4.channel_type;
    return i4 && w("object", i4) && w("number", s6) && w("string", a5) && w("string", o3) && (r4.threadInfo = new Re(t8, i4), r4.targetMessageId = s6, r4.channelUrl = a5, r4.channelType = o3), r4;
  }
  return t(t7, e3), t7;
}(zr);
var na = { channelUrl: "", channelType: q.BASE, messageId: 0, includeReactions: false, includeMetaArray: false, includeParentMessageInfo: false, includeThreadInfo: false };
var ra = function(e3) {
  function t7(t8) {
    var n4 = t8.channelCustomType, r4 = t8.keyword, s6 = t8.limit, a5 = t8.reverse, o3 = t8.exactMatch, u4 = t8.channelUrl, c4 = t8.order, l3 = t8.messageTimestampFrom, d5 = t8.messageTimestampTo, h4 = t8.advancedQuery, f4 = t8.targetFields, p4 = t8.nextToken, m5 = e3.call(this) || this;
    return m5.method = oe.GET, m5.path = "".concat(pe, "/messages"), m5.params = { custom_type: n4, query: r4, limit: s6, reverse: a5, exact_match: o3, channel_url: u4, message_ts_from: l3, message_ts_to: d5, sort_field: c4, advanced_query: h4, target_fields: f4, after: p4 }, m5;
  }
  return t(t7, e3), t7;
}(xe);
var ia = function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this;
    return r4.messages = n4.results.map(function(e4) {
      return Mt(t8, e4);
    }), r4.hasNext = n4.has_next, r4.nextToken = n4.end_cursor, r4.totalCount = n4.total_count, r4;
  }
  return t(t7, e3), t7;
}(Ue);
!function(e3) {
  e3.SCORE = "score", e3.TIMESTAMP = "ts";
}(Ps2 || (Ps2 = {}));
var sa = function(e3) {
  function i4(t7, n4) {
    var r4, i5, s6, a5, o3, u4, c4, l3, d5, h4 = this;
    return (h4 = e3.call(this, t7, n4) || this).keyword = "", h4.reverse = false, h4.exactMatch = false, h4.channelUrl = "", h4.channelCustomType = "", h4.messageTimestampFrom = null, h4.messageTimestampTo = null, h4.order = Ps2.SCORE, h4.advancedQuery = false, h4.targetFields = null, h4._nextToken = "", h4.totalCount = -1, h4.keyword = n4.keyword, h4.reverse = null !== (r4 = n4.reverse) && void 0 !== r4 && r4, h4.exactMatch = null !== (i5 = n4.exactMatch) && void 0 !== i5 && i5, h4.channelUrl = null !== (s6 = n4.channelUrl) && void 0 !== s6 ? s6 : "", h4.channelCustomType = null !== (a5 = n4.channelCustomType) && void 0 !== a5 ? a5 : "", h4.messageTimestampFrom = null !== (o3 = n4.messageTimestampFrom) && void 0 !== o3 ? o3 : null, h4.messageTimestampTo = null !== (u4 = n4.messageTimestampTo) && void 0 !== u4 ? u4 : null, h4.order = null !== (c4 = n4.order) && void 0 !== c4 ? c4 : Ps2.SCORE, h4.advancedQuery = null !== (l3 = n4.advancedQuery) && void 0 !== l3 && l3, h4.targetFields = null !== (d5 = n4.targetFields) && void 0 !== d5 ? d5 : null, h4;
  }
  return t(i4, e3), i4.prototype._validate = function() {
    return e3.prototype._validate.call(this) && w("string", this.keyword) && this.keyword.length > 0 && w("boolean", this.reverse) && w("boolean", this.exactMatch) && w("string", this.channelUrl) && w("string", this.channelCustomType) && (w("number", this.messageTimestampFrom) || null === this.messageTimestampFrom) && (w("number", this.messageTimestampTo) || null === this.messageTimestampTo) && S(Ps2, this.order) && w("boolean", this.advancedQuery) && N("string", this.targetFields, true);
  }, i4.prototype.next = function() {
    return r(this, void 0, void 0, function() {
      var e4, r4, i5, s6, a5, o3, c4, l3;
      return s(this, function(d5) {
        switch (d5.label) {
          case 0:
            return this._validate() ? this._isLoading ? [3, 3] : this._hasNext ? (this._isLoading = true, e4 = Ws.of(this._iid).requestQueue, r4 = new ra(se(n(n({}, this), { nextToken: this._nextToken ? this._nextToken : null }))), [4, e4.send(r4)]) : [3, 2] : [3, 5];
          case 1:
            return i5 = d5.sent(), s6 = i5.as(ia), a5 = s6.messages, o3 = s6.hasNext, c4 = s6.nextToken, l3 = s6.totalCount, this._nextToken = c4, this._hasNext = o3, this._isLoading = false, this.totalCount = l3, [2, a5];
          case 2:
            return [2, []];
          case 3:
            throw v.queryInProgress;
          case 4:
            return [3, 6];
          case 5:
            throw v.invalidParameters;
          case 6:
            return [2];
        }
      });
    });
  }, i4;
}(_o);
var aa = function(n4) {
  function s6(r4) {
    var s7 = r4.channelType, a5 = r4.channelUrl, o3 = r4.limit, u4 = r4.token, c4 = n4.call(this) || this;
    return c4.method = oe.GET, c4.path = "".concat(Ie(s7), "/").concat(encodeURIComponent(a5), "/messages/parent_thread_message"), c4.params = re(se({ limit: o3, token: u4 })), c4;
  }
  return t(s6, n4), s6;
}(xe);
var oa = function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this;
    return r4.token = n4.next, r4.messages = n4.messages.map(function(e4) {
      return Mt(t8, e4);
    }), r4;
  }
  return t(t7, e3), t7;
}(Ue);
var ua = function(e3) {
  function t7(t8, n4, r4, i4) {
    var s6 = e3.call(this, t8, n4, r4, i4) || this;
    return s6._edge = "", s6;
  }
  return t(t7, e3), t7.prototype._validate = function() {
    return e3.prototype._validate.call(this);
  }, t7.prototype.load = function() {
    return r(this, void 0, void 0, function() {
      var e4, t8, r4, i4, s6, a5;
      return s(this, function(o3) {
        switch (o3.label) {
          case 0:
            return this._validate() ? this._isLoading ? [3, 3] : this._hasNext ? (this._isLoading = true, e4 = Ws.of(this._iid).requestQueue, t8 = new aa({ channelType: this.channelType, channelUrl: this.channelUrl, token: this._edge, limit: this.limit }), [4, e4.send(t8)]) : [3, 2] : [3, 5];
          case 1:
            return r4 = o3.sent(), i4 = r4.as(oa), s6 = i4.messages, a5 = i4.token, this._edge = a5, this._hasNext = !!a5, this._isLoading = false, [2, s6];
          case 2:
            return [2, []];
          case 3:
            throw v.queryInProgress;
          case 4:
            return [3, 6];
          case 5:
            throw v.invalidParameters;
          case 6:
            return [2];
        }
      });
    });
  }, t7;
}(fo);
var ca = { channelUrl: "", scheduledMessageId: 0 };
var la = { reverse: false, limit: 20 };
var da = function(e3) {
  function t7() {
    var t8 = null !== e3 && e3.apply(this, arguments) || this;
    return t8.name = "message", t8;
  }
  return t(t7, e3), t7.prototype.init = function(t8, n4) {
    var r4 = n4.sdkState, i4 = n4.dispatcher, s6 = n4.sessionManager, a5 = n4.requestQueue, o3 = n4.logger, u4 = n4.onlineDetector, c4 = n4.cacheContext;
    e3.prototype.init.call(this, t8, { sdkState: r4, dispatcher: i4, sessionManager: s6, requestQueue: a5, logger: o3, onlineDetector: u4, cacheContext: c4 }), this._manager = new ea(t8, { sdkState: r4, dispatcher: i4, requestQueue: a5, onlineDetector: u4, cacheContext: c4 });
  }, t7.prototype.buildMessageFromSerializedData = function(e4) {
    return this._manager.buildMessageFromSerializedData(e4);
  }, t7.prototype.buildSenderFromSerializedData = function(e4) {
    return this._manager.buildSenderFromSerializedData(e4);
  }, t7.prototype.getMessage = function(e4) {
    return r(this, void 0, void 0, function() {
      var t8, n4;
      return s(this, function(r4) {
        switch (r4.label) {
          case 0:
            return t8 = n(n({}, na), e4), Jr(function(e5) {
              return w("string", e5.channelUrl) && S(q, e5.channelType) && w("number", e5.messageId) && w("boolean", e5.includeReactions, true) && w("boolean", e5.includeMetaArray, true) && w("boolean", e5.includeParentMessageInfo, true) && w("boolean", e5.includeThreadInfo, true);
            }(t8)).throw(v.invalidParameters), [4, this._manager.getMessage(t8)];
          case 1:
            if ((n4 = r4.sent()) instanceof pt || n4 instanceof Tt || null === n4) return [2, n4];
            throw "Unknown message type is given.";
        }
      });
    });
  }, t7.prototype.getScheduledMessage = function(e4) {
    return r(this, void 0, void 0, function() {
      var t8;
      return s(this, function(n4) {
        return t8 = n(n({}, ca), e4), Jr(function(e5) {
          return w("string", e5.channelUrl) && "" !== e5.channelUrl && w("number", e5.scheduledMessageId) && e5.scheduledMessageId > 0;
        }(t8)).throw(v.invalidParameters), [2, this._manager.getScheduledMessage(t8)];
      });
    });
  }, t7.prototype.getMessageTemplatesByToken = function(e4, t8) {
    return void 0 === t8 && (t8 = {}), r(this, void 0, void 0, function() {
      var n4;
      return s(this, function(r4) {
        return n4 = n(n({}, la), t8), Jr(w("string", e4, true) && function(e5) {
          return w("boolean", e5.reverse, true) && w("number", e5.limit, true) && N("string", e5.keys, true);
        }(n4)).throw(v.invalidParameters), [2, this._manager.getMessageTemplatesByToken(e4, n4)];
      });
    });
  }, t7.prototype.getMessageTemplate = function(e4) {
    return r(this, void 0, void 0, function() {
      return s(this, function(t8) {
        return Jr(w("string", e4)).throw(v.invalidParameters), [2, this._manager.getMessageTemplate(e4)];
      });
    });
  }, t7;
}(Zs);

// node_modules/@sendbird/chat/lib/__bundle-8a588800.js
var E;
var p2;
var R2;
!function(e3) {
  e3.LATEST_LAST_MESSAGE = "latest_last_message", e3.CHRONOLOGICAL = "chronological", e3.CHANNEL_NAME_ALPHABETICAL = "channel_name_alphabetical", e3.METADATA_VALUE_ALPHABETICAL = "metadata_value_alphabetical";
}(E || (E = {})), function(e3) {
  e3.CHRONOLOGICAL = "chronological", e3.CHANNEL_NAME_ALPHABETICAL = "channel_name_alphabetical", e3.METADATA_VALUE_ALPHABETICAL = "metadata_value_alphabetical";
}(p2 || (p2 = {})), function(e3) {
  e3.CREATED_AT = "created_at", e3.SCHEDULED_AT = "scheduled_at";
}(R2 || (R2 = {}));
var C2;
var L2 = function(e3) {
  switch (e3) {
    case E.LATEST_LAST_MESSAGE:
      return ["-lastMessageUpdatedAt", "-createdAt", "syncIndex"];
    case E.CHRONOLOGICAL:
      return ["-createdAt", "syncIndex"];
    case E.CHANNEL_NAME_ALPHABETICAL:
      return ["name"];
    default:
      return ["-lastMessageUpdatedAt", "-createdAt", "syncIndex"];
  }
};
var b = function(t7) {
  function s6(e3) {
    var s7 = e3.message, n4 = t7.call(this) || this;
    return n4.message = s7, n4;
  }
  return t(s6, t7), s6;
}(ie);
var I2 = {};
var S2 = function() {
  function e3(e4, t7) {
    var s6 = t7.localCacheEnabled, n4 = t7.enableAutoResend, r4 = t7.dispatcher, a5 = t7.sdkState, u4 = t7.logger, d5 = this;
    this._iid = e4, I2[e4] = this, this._localCacheEnabled = s6, this._enableAutoResend = n4, this._isProcessingAutoResend = false, this._autoResendQueue = [], this._dispatcher = r4, this._logger = u4, this._sdkState = a5, this._localCacheEnabled && r4.on(function(e5) {
      if (e5 instanceof kr) switch (e5.stateType) {
        case Sr.CONNECTED:
          d5._isProcessingAutoResend || d5.processAutoResendRegisteredPendingMessages().then(function() {
            return d5._processNextAutoResend();
          });
          break;
        case Sr.INTERNAL_DISCONNECTED:
        case Sr.EXTERNAL_DISCONNECTED:
          d5._isProcessingAutoResend = false;
      }
    });
  }
  return e3.of = function(e4) {
    return I2[e4];
  }, e3.prototype.processNonAutoResendRegisteredPendingMessages = function() {
    return r(this, void 0, void 0, function() {
      var e4, t7, s6, a5, i4, o3;
      return s(this, function(n4) {
        switch (n4.label) {
          case 0:
            return this._enableAutoResend ? [4, this._fetchAllCachedPendingMessages()] : [2];
          case 1:
            e4 = n4.sent();
            try {
              for (t7 = o(e4), s6 = t7.next(); !s6.done; s6 = t7.next()) 0 === (a5 = s6.value).errorCode && (this._logger.debug("cached pending message is not auto-resend registered. changing its sending status to failed: ", a5.reqId), a5.sendingStatus = W.FAILED, a5.errorCode = u.ACK_TIMEOUT, this._dispatcher.dispatch(new $s({ messages: [a5], source: Ks.LOCAL_MESSAGE_FAILED })));
            } catch (e5) {
              i4 = { error: e5 };
            } finally {
              try {
                s6 && !s6.done && (o3 = t7.return) && o3.call(t7);
              } finally {
                if (i4) throw i4.error;
              }
            }
            return [2];
        }
      });
    });
  }, e3.prototype.processAutoResendRegisteredPendingMessages = function() {
    return r(this, void 0, void 0, function() {
      var e4, t7, s6, i4, o3, d5, l3, _2;
      return s(this, function(n4) {
        switch (n4.label) {
          case 0:
            return [4, this._fetchAllCachedPendingMessages()];
          case 1:
            e4 = n4.sent();
            try {
              for (t7 = o(e4), s6 = t7.next(); !s6.done; s6 = t7.next()) i4 = s6.value, this._enableAutoResend && i4.errorCode && I(i4.errorCode) && (o3 = (/* @__PURE__ */ new Date()).getTime(), d5 = i4.createdAt + 2592e5, this._enableAutoResend && o3 <= d5 ? this._autoResendQueue.map(function(e5) {
                return e5.reqId;
              }).indexOf(i4.reqId) < 0 && this._autoResendQueue.push(i4) : (this._logger.debug("auto-resend registered pending messaged expired. expiration date: ", new Date(d5).toLocaleString()), i4.sendingStatus = W.FAILED, this._dispatcher.dispatch(new $s({ messages: [i4], source: Ks.LOCAL_MESSAGE_FAILED }))));
            } catch (e5) {
              l3 = { error: e5 };
            } finally {
              try {
                s6 && !s6.done && (_2 = t7.return) && _2.call(t7);
              } finally {
                if (l3) throw l3.error;
              }
            }
            return [2];
        }
      });
    });
  }, e3.prototype.completeCurrentAndProcessNextAutoResend = function(e4) {
    if (this._localCacheEnabled && this._enableAutoResend && (e4.sendingStatus === W.SUCCEEDED || e4.sendingStatus === W.FAILED && !I(e4.errorCode))) {
      var t7 = this.indexOf(e4);
      t7 >= 0 && this._autoResendQueue.splice(t7, 1), 0 === t7 && this._processNextAutoResend();
    }
  }, e3.prototype._fetchAllCachedPendingMessages = function() {
    return r(this, void 0, void 0, function() {
      var e4, t7;
      return s(this, function(s6) {
        switch (s6.label) {
          case 0:
            return e4 = Ks2.of(this._iid), (t7 = new Os()).replyType = B.ALL, [4, e4.fetch({ sendingStatus: W.PENDING, backward: true, filter: t7 })];
          case 1:
            return [2, s6.sent()];
        }
      });
    });
  }, e3.prototype.indexOf = function(e4) {
    return this._autoResendQueue.length > 0 ? this._autoResendQueue.map(function(e5) {
      return e5.reqId;
    }).indexOf(e4.reqId) : -1;
  }, e3.prototype._isNotInQueue = function(e4) {
    return -1 === this._autoResendQueue.map(function(e5) {
      return e5.reqId;
    }).indexOf(e4.reqId);
  }, e3.prototype._processNextAutoResend = function() {
    return r(this, void 0, void 0, function() {
      var e4;
      return s(this, function(t7) {
        if (this._localCacheEnabled && this._enableAutoResend && "foreground" === this._sdkState.appState) try {
          this._autoResendQueue.length > 0 ? (this._isProcessingAutoResend || (this._logger.debug("auto-resend queue started."), this._isProcessingAutoResend = true), e4 = this._autoResendQueue[0], this._dispatcher.dispatch(new b({ message: e4 })), this._logger.debug("processing auto-resend for message request id: ", e4.reqId)) : (this._logger.debug("auto-resend queue finished."), this._isProcessingAutoResend = false);
        } catch (e5) {
          this._logger.warn("process auto-resend error: ", e5), this._isProcessingAutoResend = false;
        }
        return [2];
      });
    });
  }, e3;
}();
!function(e3) {
  e3[e3.USER_BLOCK = 20001] = "USER_BLOCK", e3[e3.USER_UNBLOCK = 2e4] = "USER_UNBLOCK", e3[e3.FRIEND_DISCOVERED = 20900] = "FRIEND_DISCOVERED";
}(C2 || (C2 = {}));
var N2 = function() {
  function e3(e4) {
    this.category = e4.cat, this.data = e4.data;
  }
  return e3.getDataAsUserBlockEvent = function(e4, t7) {
    var s6 = t7.data, n4 = s6.blocker, r4 = s6.blockee;
    return { blocker: new es(e4, n4), blockee: new es(e4, r4) };
  }, e3.getDataAsFriendDiscoveredEvent = function(e4, t7) {
    var s6 = t7.data.friend_discoveries;
    return { friendDiscoveries: Array.isArray(s6) ? s6.map(function(t8) {
      return new es(e4, t8);
    }) : [] };
  }, e3;
}();
var v2 = function(t7) {
  function s6(e3, s7) {
    var n4 = s7.userId, r4 = t7.call(this) || this;
    return r4._iid = e3, r4.userId = n4, r4;
  }
  return t(s6, t7), s6;
}(ie);
var D = function(t7) {
  function s6() {
    return t7.call(this) || this;
  }
  return t(s6, t7), s6;
}(ie);
var T = function(t7) {
  function s6(e3, s7, n4) {
    var r4 = t7.call(this, e3, "USEV", n4) || this;
    return r4.event = new N2(n4), r4;
  }
  return t(s6, t7), s6;
}(Fe);

// node_modules/@sendbird/chat/lib/__bundle-acd77193.js
var s2 = function(s6, i4) {
  this.pollId = 0, this.messageId = 0, this.pollId = i4.poll.id, this.messageId = i4.poll.message_id, this._iid = s6, this._payload = i4;
};

// node_modules/@sendbird/chat/lib/__bundle-2d8298d5.js
var f2;
!function(e3) {
  e3[e3.NONE = 0] = "NONE", e3[e3.CHANNEL_ENTER = 10102] = "CHANNEL_ENTER", e3[e3.CHANNEL_EXIT = 10103] = "CHANNEL_EXIT", e3[e3.USER_CHANNEL_MUTE = 10201] = "USER_CHANNEL_MUTE", e3[e3.USER_CHANNEL_UNMUTE = 10200] = "USER_CHANNEL_UNMUTE", e3[e3.USER_CHANNEL_BAN = 10601] = "USER_CHANNEL_BAN", e3[e3.USER_CHANNEL_UNBAN = 10600] = "USER_CHANNEL_UNBAN", e3[e3.CHANNEL_FREEZE = 10701] = "CHANNEL_FREEZE", e3[e3.CHANNEL_UNFREEZE = 10700] = "CHANNEL_UNFREEZE", e3[e3.TYPING_START = 10900] = "TYPING_START", e3[e3.TYPING_END = 10901] = "TYPING_END", e3[e3.CHANNEL_JOIN = 1e4] = "CHANNEL_JOIN", e3[e3.CHANNEL_LEAVE = 10001] = "CHANNEL_LEAVE", e3[e3.CHANNEL_OPERATOR_UPDATE = 10002] = "CHANNEL_OPERATOR_UPDATE", e3[e3.CHANNEL_INVITE = 10020] = "CHANNEL_INVITE", e3[e3.CHANNEL_ACCEPT_INVITE = 10021] = "CHANNEL_ACCEPT_INVITE", e3[e3.CHANNEL_DECLINE_INVITE = 10022] = "CHANNEL_DECLINE_INVITE", e3[e3.CHANNEL_PROP_CHANGED = 11e3] = "CHANNEL_PROP_CHANGED", e3[e3.CHANNEL_DELETED = 12e3] = "CHANNEL_DELETED", e3[e3.CHANNEL_META_DATA_CHANGED = 11100] = "CHANNEL_META_DATA_CHANGED", e3[e3.CHANNEL_META_COUNTERS_CHANGED = 11200] = "CHANNEL_META_COUNTERS_CHANGED", e3[e3.CHANNEL_HIDE = 13e3] = "CHANNEL_HIDE", e3[e3.CHANNEL_UNHIDE = 13001] = "CHANNEL_UNHIDE", e3[e3.PINNED_MESSAGE_CHANGED = 11300] = "PINNED_MESSAGE_CHANGED";
}(f2 || (f2 = {}));
var m = function() {
  function n4(e3) {
    var n5;
    this.channelUrl = e3.channel_url, this.channelType = e3.channel_type, this.category = e3.cat, this.data = null !== (n5 = e3.data) && void 0 !== n5 ? n5 : {}, this.ts = e3.ts;
  }
  return Object.defineProperty(n4.prototype, "isGroupChannelEvent", { get: function() {
    return this.channelType === q.GROUP;
  }, enumerable: false, configurable: true }), Object.defineProperty(n4.prototype, "isOpenChannelEvent", { get: function() {
    return this.channelType === q.OPEN;
  }, enumerable: false, configurable: true }), n4;
}();
var v3 = function(e3) {
  function t7(n4, t8, s6) {
    var r4 = e3.call(this, n4, "SYEV", s6) || this;
    return r4.event = new m(s6), r4;
  }
  return t(t7, e3), t7;
}(Fe);
var T2 = function(e3) {
  function t7(n4, t8, r4) {
    var a5 = e3.call(this, n4, t8, r4) || this, i4 = r4.data.operators, o3 = void 0 === i4 ? [] : i4;
    return a5.operators = o3.map(function(e4) {
      return new es(a5._iid, e4);
    }), a5;
  }
  return t(t7, e3), t7;
}(v3);
var g2 = function(e3) {
  function t7(n4, t8, s6) {
    var a5, i4 = this;
    return (i4 = e3.call(this, n4, "SYEV", s6) || this).pinnedMessageIds = [], i4.latestPinnedMessage = null, i4.ts = 0, s6.data && (i4.pinnedMessageIds = null !== (a5 = s6.data.pinned_message_ids) && void 0 !== a5 ? a5 : [], i4.latestPinnedMessage = s6.data.latest_pinned_message ? Mt(n4, n({}, s6.data.latest_pinned_message)) : null), i4.ts = s6.ts, i4;
  }
  return t(t7, e3), t7;
}(Fe);
var H2 = function(e3) {
  function t7(n4, t8) {
    var s6 = e3.call(this, n4) || this;
    return s6._logger = t8.logger, s6._sdkState = t8.sdkState, s6._sessionManager = t8.sessionManager, s6._requestQueue = t8.requestQueue, s6._dispatcher = t8.dispatcher, s6._cacheContext = t8.cacheContext, s6._channelType = t8.channelType, s6;
  }
  return t(t7, e3), Object.defineProperty(t7.prototype, "_messageBroadcast", { get: function() {
    return Ws2.of(this._iid);
  }, enumerable: false, configurable: true }), t7.prototype.subscribeMessageEvent = function(e4, n4) {
    this._messageBroadcast.subscribe(e4, n4);
  }, t7.prototype.unsubscribeMessageEvent = function(e4) {
    this._messageBroadcast.unsubscribe(e4);
  }, t7.prototype.getMessageFromCache = function(e4) {
    return r(this, void 0, void 0, function() {
      return s(this, function(e5) {
        return [2, null];
      });
    });
  }, t7.prototype.getExactlyMatchingMessagesForTokenFromCache = function(e4, n4, t8) {
    return r(this, void 0, void 0, function() {
      return s(this, function(e5) {
        return [2, []];
      });
    });
  }, t7.prototype.getMessagesFromCache = function(e4, n4, t8, s6, r4, o3) {
    return r(this, void 0, void 0, function() {
      return s(this, function(e5) {
        return [2, []];
      });
    });
  }, t7.prototype.getPollMessagesFromCache = function(e4, n4, t8, s6) {
    return r(this, void 0, void 0, function() {
      return s(this, function(e5) {
        return [2, []];
      });
    });
  }, t7.prototype.getCachedMessageCountBetween = function(e4, n4, t8, s6) {
    return r(this, void 0, void 0, function() {
      return s(this, function(e5) {
        return [2, 0];
      });
    });
  }, t7.prototype.getUnsentMessagesFromCache = function(e4, n4) {
    return r(this, void 0, void 0, function() {
      return s(this, function(e5) {
        return [2, []];
      });
    });
  }, t7.prototype.removeFailedMessageFromCache = function(e4) {
    return r(this, void 0, void 0, function() {
      return s(this, function(e5) {
        return [2];
      });
    });
  }, t7;
}(zr);
var L3 = function(e3) {
  function t7(n4, t8, s6) {
    var r4, a5, i4, o3, N3 = this;
    (N3 = e3.call(this, n4, "ADMM", s6) || this).message = new _t(n4, s6);
    var c4 = Ws.of(n4).sdkState;
    return N3.isMentioned = Oe(N3.message.mentionType, null !== (i4 = null !== (r4 = N3.message.mentionedUserIds) && void 0 !== r4 ? r4 : null === (a5 = N3.message.mentionedUsers) || void 0 === a5 ? void 0 : a5.map(function(e4) {
      return e4.userId;
    })) && void 0 !== i4 ? i4 : [], c4.userId), N3.forceUpdateLastMessage = null !== (o3 = s6.force_update_last_message) && void 0 !== o3 && o3, N3;
  }
  return t(t7, e3), t7;
}(Fe);
var I3 = function(e3) {
  function t7(n4, t8, s6) {
    var r4, a5, i4, o3, E4, _2 = this;
    (_2 = e3.call(this, n4, "AEDI", s6) || this).message = new _t(n4, s6);
    var l3 = Ws.of(n4).sdkState;
    return _2.mentionCountChange = De({ mentionType: null === (r4 = s6.old_values) || void 0 === r4 ? void 0 : r4.mention_type, mentionedUserIds: null !== (i4 = null === (a5 = s6.old_values) || void 0 === a5 ? void 0 : a5.mentioned_user_ids) && void 0 !== i4 ? i4 : [] }, se({ mentionType: _2.message.mentionType, mentionedUserIds: null !== (o3 = _2.message.mentionedUserIds) && void 0 !== o3 ? o3 : null === (E4 = _2.message.mentionedUsers) || void 0 === E4 ? void 0 : E4.map(function(e4) {
      return e4.userId;
    }) }), l3.userId), _2;
  }
  return t(t7, e3), t7;
}(Fe);
var U = function(e3) {
  function t7(n4, t8, s6) {
    var r4 = e3.call(this, n4, "MRCT", s6) || this;
    return r4.channelUrl = s6.channel_url, r4.channelType = s6.channel_type, r4.event = new De2(s6), r4;
  }
  return t(t7, e3), t7;
}(Fe);
var M2 = function(e3) {
  function t7(n4, t8, s6) {
    var r4 = e3.call(this, n4, "MTHD", s6) || this;
    return r4.event = new ta(n4, s6), r4;
  }
  return t(t7, e3), t7;
}(Fe);
var y2 = function(e3) {
  function t7(n4, t8, s6) {
    var r4 = e3.call(this, n4, "MCNT", s6) || this;
    return r4.groupChannelMemberCounts = s6.group_channels.map(function(e4) {
      return { channelUrl: e4.channel_url, memberCount: e4.member_count, joinedMemberCount: e4.joined_member_count, updatedAt: e4.ts };
    }), r4.openChannelMemberCounts = s6.open_channels.map(function(e4) {
      return { channelUrl: e4.channel_url, participantCount: e4.participant_count, updatedAt: e4.ts };
    }), r4;
  }
  return t(t7, e3), t7;
}(Fe);
var b2 = function(e3) {
  function t7(n4, t8, s6) {
    var r4 = e3.call(this, n4, "PEDI", s6) || this;
    return r4.event = new s2(n4, s6), r4.status = co(s6.poll.status) || s6.poll.status, r4.channelUrl = s6.channel_url, r4.channelType = s6.channel_type, r4;
  }
  return t(t7, e3), t7;
}(Fe);

// node_modules/@sendbird/chat/lib/__bundle-be3fc53d.js
var Wt2;
!function(e3) {
  e3.NONE = "none", e3.JOINED = "joined", e3.INVITED = "invited", e3.LEFT = "left";
}(Wt2 || (Wt2 = {}));
var Qt2;
var Yt2;
var Kt2;
var Jt2;
var Xt2;
var Zt2;
var $t2;
var en2;
var tn2 = function(i4) {
  function o3(e3, t7) {
    var n4 = i4.call(this, e3, t7) || this;
    return n4.state = null, n4.role = null, n4.isMuted = false, n4.isBlockedByMe = false, n4.isBlockingMe = false, n4.state = S(Wt2, t7.state) ? t7.state : null, n4.role = S(V, t7.role) ? t7.role : null, "boolean" == typeof t7.is_muted && (n4.isMuted = t7.is_muted), "boolean" == typeof t7.is_blocked_by_me && (n4.isBlockedByMe = t7.is_blocked_by_me), "boolean" == typeof t7.is_blocking_me && (n4.isBlockingMe = t7.is_blocking_me), n4;
  }
  return t(o3, i4), o3.payloadify = function(e3) {
    return re(se(n(n({}, i4.payloadify.call(this, e3)), { state: e3.state, role: e3.role, is_muted: e3.isMuted, is_blocked_by_me: e3.isBlockedByMe, is_blocking_me: e3.isBlockingMe })));
  }, o3;
}(Yt);
var nn2 = function(t7) {
  function n4(e3, n5) {
    var s6, r4, a5 = this;
    return (a5 = t7.call(this, e3) || this).channelUrl = null !== (s6 = n5.channel_url) && void 0 !== s6 ? s6 : "", a5.channelType = null !== (r4 = n5.channel_type) && void 0 !== r4 ? r4 : q.GROUP, a5.member = new es(a5._iid, n5.user), a5.deliveryAt = n5.ts, a5;
  }
  return t(n4, t7), n4;
}(zr);
!function(e3) {
  e3.ALL = "all", e3.PUBLIC = "public", e3.PRIVATE = "private";
}(Qt2 || (Qt2 = {})), function(e3) {
  e3.ALL = "all", e3.JOINED = "joined_only", e3.INVITED = "invited_only", e3.INVITED_BY_FRIEND = "invited_by_friend", e3.INVITED_BY_NON_FRIEND = "invited_by_non_friend";
}(Yt2 || (Yt2 = {})), function(e3) {
  e3.ALL = "all", e3.SUPER = "super", e3.NON_SUPER = "nonsuper", e3.BROADCAST_ONLY = "broadcast_only", e3.EXCLUSIVE_ONLY = "exclusive_only";
}(Kt2 || (Kt2 = {})), function(e3) {
  e3.ALL = "all", e3.UNREAD_MESSAGE = "unread_message";
}(Jt2 || (Jt2 = {})), function(e3) {
  e3.ALL = "all", e3.UNHIDDEN = "unhidden_only", e3.HIDDEN = "hidden_only", e3.HIDDEN_ALLOW_AUTO_UNHIDE = "hidden_allow_auto_unhide", e3.HIDDEN_PREVENT_AUTO_UNHIDE = "hidden_prevent_auto_unhide";
}(Xt2 || (Xt2 = {})), function(e3) {
  e3.ALL = "all", e3.OPERATOR = "operator", e3.NONOPERATOR = "nonoperator";
}(Zt2 || (Zt2 = {})), function(e3) {
  e3.AND = "AND", e3.OR = "OR";
}($t2 || ($t2 = {})), function(e3) {
  e3.MEMBER_NICKNAME = "member_nickname", e3.CHANNEL_NAME = "channel_name";
}(en2 || (en2 = {}));
var sn2;
var rn2 = function() {
  function e3(e4) {
    var t7, n4, s6, r4, a5, i4, o3, u4, c4, l3, h4, d5, _2, p4, f4;
    this._searchFilter = null, this._userIdsFilter = null, this.includeEmpty = null !== (t7 = null == e4 ? void 0 : e4.includeEmpty) && void 0 !== t7 && t7, this.nicknameContainsFilter = null !== (n4 = null == e4 ? void 0 : e4.nicknameContainsFilter) && void 0 !== n4 ? n4 : null, this.nicknameStartsWithFilter = null !== (s6 = null == e4 ? void 0 : e4.nicknameStartsWithFilter) && void 0 !== s6 ? s6 : null, this.nicknameExactMatchFilter = null !== (r4 = null == e4 ? void 0 : e4.nicknameExactMatchFilter) && void 0 !== r4 ? r4 : null, this.channelNameContainsFilter = null !== (a5 = null == e4 ? void 0 : e4.channelNameContainsFilter) && void 0 !== a5 ? a5 : "", this.myMemberStateFilter = null !== (i4 = null == e4 ? void 0 : e4.myMemberStateFilter) && void 0 !== i4 ? i4 : Yt2.ALL, this.customTypesFilter = null !== (o3 = null == e4 ? void 0 : e4.customTypesFilter) && void 0 !== o3 ? o3 : null, this.channelUrlsFilter = null !== (u4 = null == e4 ? void 0 : e4.channelUrlsFilter) && void 0 !== u4 ? u4 : null, this.superChannelFilter = null !== (c4 = null == e4 ? void 0 : e4.superChannelFilter) && void 0 !== c4 ? c4 : Kt2.ALL, this.publicChannelFilter = null !== (l3 = null == e4 ? void 0 : e4.publicChannelFilter) && void 0 !== l3 ? l3 : Qt2.ALL, this.customTypeStartsWithFilter = null !== (h4 = null == e4 ? void 0 : e4.customTypeStartsWithFilter) && void 0 !== h4 ? h4 : null, this.unreadChannelFilter = null !== (d5 = null == e4 ? void 0 : e4.unreadChannelFilter) && void 0 !== d5 ? d5 : Jt2.ALL, this.hiddenChannelFilter = null !== (_2 = null == e4 ? void 0 : e4.hiddenChannelFilter) && void 0 !== _2 ? _2 : Xt2.UNHIDDEN, this.includeFrozen = null === (p4 = null == e4 ? void 0 : e4.includeFrozen) || void 0 === p4 || p4, (null == e4 ? void 0 : e4.createdAfter) && (this.createdAfter = e4.createdAfter), (null == e4 ? void 0 : e4.createdBefore) && (this.createdBefore = e4.createdBefore), this.includeMetaData = null === (f4 = null == e4 ? void 0 : e4.includeMetaData) || void 0 === f4 || f4;
  }
  return e3.prototype._isFriend = function(e4) {
    return !(!e4 || !e4.friendDiscoveryKey && !e4.friendName);
  }, Object.defineProperty(e3.prototype, "searchFilter", { get: function() {
    return this._searchFilter;
  }, enumerable: false, configurable: true }), e3.prototype.setSearchFilter = function(e4, t7) {
    Array.isArray(e4) && 0 !== e4.length && "string" == typeof t7 && t7 && (this._searchFilter = { query: t7, fields: e4 });
  }, Object.defineProperty(e3.prototype, "userIdsFilter", { get: function() {
    return this._userIdsFilter;
  }, enumerable: false, configurable: true }), e3.prototype.setUserIdsFilter = function(e4, t7, n4) {
    void 0 === n4 && (n4 = $t2.AND), this._userIdsFilter = { userIds: e4, includeMode: t7, queryType: n4 };
  }, e3.prototype.clone = function() {
    var t7, n4 = new e3();
    this.searchFilter && n4.setSearchFilter(this.searchFilter.fields, null !== (t7 = this.searchFilter.query) && void 0 !== t7 ? t7 : void 0), this.userIdsFilter && n4.setUserIdsFilter(this.userIdsFilter.userIds, this.userIdsFilter.includeMode, this.userIdsFilter.queryType);
    var s6 = JSON.parse(JSON.stringify(this));
    return Object.keys(s6).forEach(function(e4) {
      n4[e4] = s6[e4];
    }), n4;
  }, e3.prototype.match = function(e4, t7) {
    if (this._searchFilter) {
      var n4 = this._searchFilter, s6 = n4.query, r4 = n4.fields;
      if (s6 && r4 && r4.length > 0 && !r4.some(function(t8) {
        switch (t8) {
          case en2.CHANNEL_NAME:
            return e4.name.toLowerCase().includes(s6.toLowerCase());
          case en2.MEMBER_NICKNAME:
            return e4.members.some(function(e5) {
              return e5.nickname.toLowerCase().includes(s6.toLowerCase());
            });
          default:
            return true;
        }
      })) return false;
    }
    if (this._userIdsFilter) {
      var a5 = this._userIdsFilter, i4 = a5.userIds, o3 = a5.includeMode, u4 = a5.queryType, l3 = e4.members.map(function(e5) {
        return e5.userId;
      });
      if (o3) {
        if (i4.length > 0) switch (u4) {
          case $t2.AND:
            if (i4.some(function(e5) {
              return !l3.includes(e5);
            })) return false;
            break;
          case $t2.OR:
            if (i4.every(function(e5) {
              return !l3.includes(e5);
            })) return false;
        }
      } else {
        if (i4.includes(t7) || i4.push(t7), e4.members.length > i4.length) return false;
        if (!O(i4, l3)) return false;
      }
    }
    if (!this.includeEmpty && !e4.lastMessage) return false;
    if (!this.includeFrozen && e4.isFrozen) return false;
    if (this.customTypesFilter && this.customTypesFilter.length > 0 && !this.customTypesFilter.includes("*") && !this.customTypesFilter.includes(e4.customType)) return false;
    if (this.customTypeStartsWithFilter && !new RegExp("^".concat(this.customTypeStartsWithFilter)).test(e4.customType)) return false;
    if (this.channelNameContainsFilter && !e4.name.toLowerCase().includes(this.channelNameContainsFilter.toLowerCase())) return false;
    if (this.nicknameContainsFilter) {
      var h4 = this.nicknameContainsFilter.toLowerCase();
      if (!e4.members.some(function(e5) {
        return e5.userId !== t7 && e5.nickname.toLowerCase().includes(h4);
      })) return false;
    }
    if (this.nicknameStartsWithFilter) {
      var d5 = this.nicknameStartsWithFilter.toLowerCase();
      if (!e4.members.some(function(e5) {
        return e5.userId !== t7 && e5.nickname.toLowerCase().startsWith(d5);
      })) return false;
    }
    if (this.nicknameExactMatchFilter) {
      var _2 = this.nicknameExactMatchFilter.toLowerCase();
      if (!e4.members.some(function(e5) {
        return e5.userId !== t7 && e5.nickname.toLowerCase() != _2;
      })) return false;
    }
    if (this.channelUrlsFilter && this.channelUrlsFilter.length > 0 && !this.channelUrlsFilter.includes(e4.url)) return false;
    if (this.myMemberStateFilter) switch (this.myMemberStateFilter) {
      case Yt2.ALL:
        if ("none" === e4.myMemberState) return false;
        break;
      case Yt2.JOINED:
        if ("joined" !== e4.myMemberState) return false;
        break;
      case Yt2.INVITED:
        if ("invited" !== e4.myMemberState) return false;
        break;
      case Yt2.INVITED_BY_FRIEND:
        if ("invited" !== e4.myMemberState || !this._isFriend(e4.inviter)) return false;
        break;
      case Yt2.INVITED_BY_NON_FRIEND:
        if ("invited" !== e4.myMemberState || this._isFriend(e4.inviter)) return false;
    }
    if (this.hiddenChannelFilter) switch (this.hiddenChannelFilter) {
      case Xt2.UNHIDDEN:
        if (e4.isHidden || "unhidden" !== e4.hiddenState) return false;
        break;
      case Xt2.HIDDEN:
        if (!e4.isHidden) return false;
        break;
      case Xt2.HIDDEN_ALLOW_AUTO_UNHIDE:
        if (!e4.isHidden || "hidden_allow_auto_unhide" !== e4.hiddenState) return false;
        break;
      case Xt2.HIDDEN_PREVENT_AUTO_UNHIDE:
        if (!e4.isHidden || "hidden_prevent_auto_unhide" !== e4.hiddenState) return false;
    }
    if (this.unreadChannelFilter && this.unreadChannelFilter === Jt2.UNREAD_MESSAGE) {
      if (0 === e4.unreadMessageCount) return false;
    }
    if (this.publicChannelFilter) switch (this.publicChannelFilter) {
      case Qt2.PUBLIC:
        if (!e4.isPublic) return false;
        break;
      case Qt2.PRIVATE:
        if (e4.isPublic) return false;
    }
    if (this.superChannelFilter) switch (this.superChannelFilter) {
      case Kt2.SUPER:
        if (!e4.isSuper) return false;
        break;
      case Kt2.NON_SUPER:
        if (e4.isSuper) return false;
    }
    return !(this.createdAfter && e4.createdAt < this.createdAfter) && !(this.createdBefore && e4.createdAt > this.createdBefore);
  }, e3;
}();
var an2 = function(t7) {
  function n4(e3, n5) {
    var s6 = n5.sdkState, r4 = n5.cacheContext, a5 = t7.call(this, e3) || this;
    return a5._channels = /* @__PURE__ */ new Map(), a5._sdkState = s6, a5._cacheContext = r4, a5;
  }
  return t(n4, t7), Object.defineProperty(n4.prototype, "collection", { get: function() {
    var e3 = this._cacheContext.nestdb;
    return Jr(!!e3).throw(v.databaseError), e3.collection(Kr);
  }, enumerable: false, configurable: true }), Object.defineProperty(n4.prototype, "localCacheEnabled", { get: function() {
    return this._cacheContext.localCacheEnabled && !!this.collection;
  }, enumerable: false, configurable: true }), n4.prototype._serialize = function(e3, t8) {
    return void 0 === t8 && (t8 = 0), n(n({}, e3.serialize()), { lastMessageUpdatedAt: e3.lastMessage ? e3.lastMessage.createdAt : 0, syncIndex: t8 });
  }, n4.prototype._deserialize = function(e3) {
    return ps2.of(this._iid).buildGroupChannelFromSerializedData(e3);
  }, Object.defineProperty(n4.prototype, "channels", { get: function() {
    return c([], a(this._channels.values()), false);
  }, enumerable: false, configurable: true }), n4.prototype.isCachedInMemory = function(e3) {
    return this._channels.has(e3);
  }, n4.prototype.filterOffsetChanged = function(e3) {
    var t8 = this;
    return e3.filter(function(e4) {
      if (t8._channels.has(e4.url)) return t8._channels.get(e4.url).messageOffsetTimestamp < e4.messageOffsetTimestamp;
    });
  }, n4.prototype.get = function(e3) {
    return r(this, void 0, void 0, function() {
      var t8, n5;
      return s(this, function(s6) {
        switch (s6.label) {
          case 0:
            return this._channels.has(e3) ? [3, 3] : this.localCacheEnabled ? [4, this.collection.getByKey(e3)] : [3, 2];
          case 1:
            if (t8 = s6.sent()) return n5 = this._deserialize(t8), this._channels.set(e3, n5), [2, n5];
            s6.label = 2;
          case 2:
            return [2, void 0];
          case 3:
            return [2, this._channels.get(e3)];
        }
      });
    });
  }, n4.prototype.fetch = function(e3) {
    var t8 = e3.token, n5 = e3.limit, s6 = void 0 === n5 ? Br : n5, r4 = e3.backward, a5 = void 0 !== r4 && r4, i4 = e3.filter, o3 = void 0 === i4 ? new rn2() : i4, u4 = e3.order, c4 = void 0 === u4 ? E.LATEST_LAST_MESSAGE : u4, l3 = e3.borderlineChannelUrl;
    return r(this, void 0, void 0, function() {
      var e4, n6, r5, i5, u5, h4 = this;
      return s(this, function(d5) {
        switch (d5.label) {
          case 0:
            return this.localCacheEnabled ? (e4 = !!l3, n6 = L2(c4), r5 = { where: function(n7) {
              if (t8) switch (c4) {
                case E.CHANNEL_NAME_ALPHABETICAL:
                  if (!a5 && n7.name.localeCompare(t8) < 0 || a5 && n7.name.localeCompare(t8) > 0) return false;
                  break;
                case E.CHRONOLOGICAL:
                  if (!a5 && n7.createdAt > t8 || a5 && n7.createdAt < t8) return false;
                  break;
                case E.LATEST_LAST_MESSAGE:
                  if (!a5 && n7.lastMessageUpdatedAt > t8 || a5 && n7.lastMessageUpdatedAt < t8) return false;
              }
              return e4 && l3 && l3 === n7.url ? (e4 = false, false) : !e4 && o3.match(h4._deserialize(n7), h4._sdkState.userId);
            }, index: n6, backward: a5 }, [4, this.collection.query(r5)]) : [3, 3];
          case 1:
            return [4, d5.sent().fetch({ limit: s6 })];
          case 2:
            return i5 = d5.sent(), (u5 = i5.map(function(e5) {
              return h4._deserialize(e5);
            })).forEach(function(e5) {
              !o3.includeMetaData && e5.cachedMetaData && e5._clearCachedMetaData(), h4._channels.has(e5.url) || h4._channels.set(e5.url, e5);
            }), [2, u5];
          case 3:
            return [2, []];
        }
      });
    });
  }, n4.prototype.upsert = function(e3, t8) {
    return r(this, void 0, void 0, function() {
      var n5, s6, r4, a5 = this;
      return s(this, function(i4) {
        switch (i4.label) {
          case 0:
            if (n5 = [], e3.forEach(function(e4) {
              if (a5._channels.has(e4.url)) {
                var s7 = a5._channels.get(e4.url);
                if (s7._pinnedMessagesUpdatedAt < e4._pinnedMessagesUpdatedAt && (s7._pinnedMessagesUpdatedAt = e4._pinnedMessagesUpdatedAt), s7._messageCollectionLastAccessedAt > e4._messageCollectionLastAccessedAt && Object.assign(e4, { _messageCollectionLastAccessedAt: void 0 }), e4.cachedMetaData && t8) s7._updateCachedMetaData(e4.cachedMetaData, t8).isUpdated || Object.assign(e4, { _cachedMetaData: void 0 });
                s7._update(e4), n5.push(s7);
              } else a5._channels.set(e4.url, e4), n5.push(e4);
            }), !this.localCacheEnabled) return [3, 2];
            for (s6 = [], r4 = 0; r4 < n5.length; r4++) s6.push(this._serialize(n5[r4], r4));
            return [4, this.collection.upsertMany(s6)];
          case 1:
            i4.sent(), i4.label = 2;
          case 2:
            return [2, n5];
        }
      });
    });
  }, n4.prototype.remove = function(e3) {
    return r(this, void 0, void 0, function() {
      var t8, n5, s6, r4, a5, i4;
      return s(this, function(o3) {
        switch (o3.label) {
          case 0:
            o3.trys.push([0, 5, 6, 7]), t8 = o(e3), n5 = t8.next(), o3.label = 1;
          case 1:
            return n5.done ? [3, 4] : (s6 = n5.value, this._channels.delete(s6), this.localCacheEnabled ? [4, this.collection.remove(s6)] : [3, 3]);
          case 2:
            o3.sent(), o3.label = 3;
          case 3:
            return n5 = t8.next(), [3, 1];
          case 4:
            return [3, 7];
          case 5:
            return r4 = o3.sent(), a5 = { error: r4 }, [3, 7];
          case 6:
            try {
              n5 && !n5.done && (i4 = t8.return) && i4.call(t8);
            } finally {
              if (a5) throw a5.error;
            }
            return [7];
          case 7:
            return [2];
        }
      });
    });
  }, n4.prototype.clear = function() {
    return r(this, void 0, void 0, function() {
      return s(this, function(e3) {
        switch (e3.label) {
          case 0:
            return this.clearMemoryCache(), this.localCacheEnabled ? [4, this.collection.clear()] : [3, 2];
          case 1:
            e3.sent(), e3.label = 2;
          case 2:
            return [2];
        }
      });
    });
  }, n4.prototype.clearMemoryCache = function() {
    this._channels.clear();
  }, n4.prototype._setBlockStateOfAllChannels = function(e3, t8, n5) {
    return r(this, void 0, void 0, function() {
      var s6, r4, a5, i4, o3, u4, c4, l3, h4, d5, _2, p4, m5, g4, E4, C3, y6, M5, b6;
      return s(this, function(f4) {
        switch (f4.label) {
          case 0:
            if (s6 = [], e3 === this._sdkState.userId) try {
              for (r4 = o(this._channels.values()), a5 = r4.next(); !a5.done; a5 = r4.next()) {
                l3 = a5.value;
                try {
                  for (g4 = void 0, i4 = o(l3.members), o3 = i4.next(); !o3.done; o3 = i4.next()) if ((_2 = o3.value).userId === t8) {
                    _2.isBlockedByMe = n5, s6.push(l3);
                    break;
                  }
                } catch (e4) {
                  g4 = { error: e4 };
                } finally {
                  try {
                    o3 && !o3.done && (E4 = i4.return) && E4.call(i4);
                  } finally {
                    if (g4) throw g4.error;
                  }
                }
              }
            } catch (e4) {
              p4 = { error: e4 };
            } finally {
              try {
                a5 && !a5.done && (m5 = r4.return) && m5.call(r4);
              } finally {
                if (p4) throw p4.error;
              }
            }
            else if (t8 === this._sdkState.userId) try {
              for (u4 = o(this._channels.values()), c4 = u4.next(); !c4.done; c4 = u4.next()) {
                l3 = c4.value;
                try {
                  for (M5 = void 0, h4 = o(l3.members), d5 = h4.next(); !d5.done; d5 = h4.next()) if ((_2 = d5.value).userId === e3) {
                    _2.isBlockingMe = n5, s6.push(l3);
                    break;
                  }
                } catch (e4) {
                  M5 = { error: e4 };
                } finally {
                  try {
                    d5 && !d5.done && (b6 = h4.return) && b6.call(h4);
                  } finally {
                    if (M5) throw M5.error;
                  }
                }
              }
            } catch (e4) {
              C3 = { error: e4 };
            } finally {
              try {
                c4 && !c4.done && (y6 = u4.return) && y6.call(u4);
              } finally {
                if (C3) throw C3.error;
              }
            }
            return s6.length > 0 ? [4, this.upsert(s6)] : [3, 2];
          case 1:
            f4.sent(), f4.label = 2;
          case 2:
            return [2];
        }
      });
    });
  }, n4.prototype.block = function(e3, t8) {
    return r(this, void 0, void 0, function() {
      return s(this, function(n5) {
        switch (n5.label) {
          case 0:
            return [4, this._setBlockStateOfAllChannels(e3, t8, true)];
          case 1:
            return n5.sent(), [2];
        }
      });
    });
  }, n4.prototype.unblock = function(e3, t8) {
    return r(this, void 0, void 0, function() {
      return s(this, function(n5) {
        switch (n5.label) {
          case 0:
            return [4, this._setBlockStateOfAllChannels(e3, t8, false)];
          case 1:
            return n5.sent(), [2];
        }
      });
    });
  }, n4.prototype.markAsRead = function(e3, t8) {
    return void 0 === t8 && (t8 = c([], a(this._channels.keys()), false)), r(this, void 0, void 0, function() {
      var n5, s6, r4, a5, i4, o3, u4, c4;
      return s(this, function(l3) {
        switch (l3.label) {
          case 0:
            n5 = [], l3.label = 1;
          case 1:
            l3.trys.push([1, 6, 7, 8]), s6 = o(t8), r4 = s6.next(), l3.label = 2;
          case 2:
            return r4.done ? [3, 5] : (a5 = r4.value, [4, this.get(a5)]);
          case 3:
            (null == (i4 = l3.sent()) ? void 0 : i4._updateUnreadMemberState(this._sdkState.userId, e3)) && (i4._updateUnreadCount(0, 0), n5.push(i4)), l3.label = 4;
          case 4:
            return r4 = s6.next(), [3, 2];
          case 5:
            return [3, 8];
          case 6:
            return o3 = l3.sent(), u4 = { error: o3 }, [3, 8];
          case 7:
            try {
              r4 && !r4.done && (c4 = s6.return) && c4.call(s6);
            } finally {
              if (u4) throw u4.error;
            }
            return [7];
          case 8:
            return n5.length > 0 ? [4, this.upsert(n5)] : [3, 10];
          case 9:
            l3.sent(), l3.label = 10;
          case 10:
            return [2];
        }
      });
    });
  }, n4;
}(zr);
var on2 = { invitedUserIds: void 0, channelUrl: void 0, coverUrl: void 0, coverImage: void 0, isDistinct: void 0, isSuper: void 0, isBroadcast: void 0, isExclusive: void 0, isPublic: void 0, isDiscoverable: void 0, isStrict: void 0, isEphemeral: void 0, accessCode: void 0, name: void 0, data: void 0, customType: void 0, operatorUserIds: void 0, messageSurvivalSeconds: void 0 };
var un2 = function(e3) {
  return N("string", e3.invitedUserIds, true) && w("string", e3.channelUrl, true) && w("string", e3.coverUrl, true) && (k(e3.coverImage) || w("string", e3.coverImage, true)) && w("boolean", e3.isDistinct, true) && w("boolean", e3.isSuper, true) && w("boolean", e3.isBroadcast, true) && w("boolean", e3.isExclusive, true) && w("boolean", e3.isPublic, true) && w("boolean", e3.isStrict, true) && w("boolean", e3.isDiscoverable, true) && w("boolean", e3.isEphemeral, true) && w("string", e3.accessCode, true) && w("string", e3.name, true) && w("string", e3.data, true) && w("string", e3.customType, true) && N("string", e3.operatorUserIds, true) && w("number", e3.messageSurvivalSeconds, true);
};
var cn2 = { customTypes: void 0, includeEmpty: false, includeFrozen: true, includeMetaData: true, includeChatNotification: false };
var ln2 = function(e3) {
  return N("string", e3.customTypes, true) && w("boolean", e3.includeEmpty, true) && w("boolean", e3.includeFrozen, true) && w("boolean", e3.includeMetaData, true) && w("boolean", e3.includeChatNotification, true);
};
var hn2 = { myMemberStateFilter: Yt2.ALL };
var dn2 = function(e3) {
  return S(Yt2, e3.myMemberStateFilter);
};
!function(e3) {
  e3.GROUP_CHANNEL_UNREAD_MENTION_COUNT = "group_channel_unread_mention_count", e3.NONSUPER_UNREAD_MENTION_COUNT = "non_super_group_channel_unread_mention_count", e3.SUPER_UNREAD_MENTION_COUNT = "super_group_channel_unread_mention_count", e3.GROUP_CHANNEL_UNREAD_MESSAGE_COUNT = "group_channel_unread_message_count", e3.NONSUPER_UNREAD_MESSAGE_COUNT = "non_super_group_channel_unread_message_count", e3.SUPER_UNREAD_MESSAGE_COUNT = "super_group_channel_unread_message_count", e3.GROUP_CHANNEL_INVITATION_COUNT = "group_channel_invitation_count", e3.NONSUPER_INVITATION_COUNT = "non_super_group_channel_invitation_count", e3.SUPER_INVITATION_COUNT = "super_group_channel_invitation_count";
}(sn2 || (sn2 = {}));
var _n2 = { keys: [sn2.GROUP_CHANNEL_UNREAD_MENTION_COUNT, sn2.NONSUPER_UNREAD_MENTION_COUNT, sn2.SUPER_UNREAD_MENTION_COUNT, sn2.GROUP_CHANNEL_UNREAD_MESSAGE_COUNT, sn2.NONSUPER_UNREAD_MESSAGE_COUNT, sn2.SUPER_UNREAD_MESSAGE_COUNT, sn2.GROUP_CHANNEL_INVITATION_COUNT, sn2.NONSUPER_INVITATION_COUNT, sn2.SUPER_INVITATION_COUNT], customTypeFilters: void 0, customTypesFilter: void 0 };
var pn2 = { channelCustomTypesFilter: void 0, superChannelFilter: Kt2.ALL };
var fn2 = function(e3) {
  return N("string", e3.channelCustomTypesFilter, true) && S(Kt2, e3.superChannelFilter);
};
var vn2 = { channelUrl: void 0, scheduledStatus: void 0, messageTypeFilter: G.ALL };
var mn2 = n({}, Ks);
var gn2 = function(e3) {
  return e3.startsWith("EVENT_") || e3 === Ks.SYNC_CHANNEL_CHANGELOGS || e3 === Ks.REFRESH_CHANNEL;
};
var En2 = function(t7) {
  function n4(e3) {
    var n5 = e3.channels, s6 = e3.context, r4 = e3.isWebSocketEventComing, a5 = void 0 !== r4 && r4, i4 = e3.ts, o3 = t7.call(this) || this;
    return o3.channels = n5, o3.context = s6, o3.isWebSocketEventComing = a5, o3.ts = i4, o3;
  }
  return t(n4, t7), n4;
}(ie);
var Cn2 = function(t7) {
  function n4(e3) {
    var n5 = e3.channelUrls, s6 = e3.context, r4 = e3.isWebSocketEventComing, a5 = void 0 !== r4 && r4, i4 = t7.call(this) || this;
    return i4.channelUrls = n5, i4.context = s6, i4.isWebSocketEventComing = a5, i4;
  }
  return t(n4, t7), n4;
}(ie);
var yn2 = function() {
  function e3(e4) {
    var t7 = e4.groupChannelCache, n4 = e4.messageCache, s6 = e4.unsentMessageCache, r4 = e4.dispatcher, a5 = this;
    this._observers = /* @__PURE__ */ new Map(), r4.on(function(e5) {
      return r(a5, void 0, void 0, function() {
        var r5, a6, i4, o3, u4, c4, l3, h4, d5, _2, m5, g4, E4, C3, M5, N3, U2, S6, A3 = this;
        return s(this, function(T4) {
          switch (T4.label) {
            case 0:
              if (!(e5 instanceof En2)) return [3, 19];
              if (r5 = e5.channels, E4 = e5.context, C3 = e5.isWebSocketEventComing, a6 = r5.filter(function(e6) {
                return e6 instanceof ur2;
              }), E4.source !== Ks.EVENT_CHANNEL_RESET_HISTORY && E4.source !== Ks.EVENT_CHANNEL_HIDDEN) return [3, 9];
              T4.label = 1;
            case 1:
              T4.trys.push([1, 6, 7, 8]), i4 = o(a6), o3 = i4.next(), T4.label = 2;
            case 2:
              return o3.done ? [3, 5] : (d5 = o3.value, [4, n4.removeUnderOffset(d5.url, d5.messageOffsetTimestamp)]);
            case 3:
              T4.sent(), T4.label = 4;
            case 4:
              return o3 = i4.next(), [3, 2];
            case 5:
              return [3, 8];
            case 6:
              return u4 = T4.sent(), M5 = { error: u4 }, [3, 8];
            case 7:
              try {
                o3 && !o3.done && (N3 = i4.return) && N3.call(i4);
              } finally {
                if (M5) throw M5.error;
              }
              return [7];
            case 8:
              return [3, 17];
            case 9:
              c4 = t7.filterOffsetChanged(a6), T4.label = 10;
            case 10:
              T4.trys.push([10, 15, 16, 17]), l3 = o(c4), h4 = l3.next(), T4.label = 11;
            case 11:
              return h4.done ? [3, 14] : (d5 = h4.value, [4, n4.removeUnderOffset(d5.url, d5.messageOffsetTimestamp)]);
            case 12:
              T4.sent(), T4.label = 13;
            case 13:
              return h4 = l3.next(), [3, 11];
            case 14:
              return [3, 17];
            case 15:
              return _2 = T4.sent(), U2 = { error: _2 }, [3, 17];
            case 16:
              try {
                h4 && !h4.done && (S6 = l3.return) && S6.call(l3);
              } finally {
                if (U2) throw U2.error;
              }
              return [7];
            case 17:
              return [4, t7.upsert(a6, e5.ts)];
            case 18:
              return m5 = T4.sent(), C3 || this._broadcastUpdateEvent(m5, E4), [3, 24];
            case 19:
              return e5 instanceof Cn2 ? (g4 = e5.channelUrls, E4 = e5.context, C3 = e5.isWebSocketEventComing, [4, t7.remove(g4)]) : [3, 22];
            case 20:
              return T4.sent(), [4, as(function() {
                return r(A3, void 0, void 0, function() {
                  var e6, t8, r6, a7, i5, o4;
                  return s(this, function(u5) {
                    switch (u5.label) {
                      case 0:
                        u5.trys.push([0, 6, 7, 8]), e6 = o(g4), t8 = e6.next(), u5.label = 1;
                      case 1:
                        return t8.done ? [3, 5] : (r6 = t8.value, [4, n4.removeMessagesOfChannel(r6)]);
                      case 2:
                        return u5.sent(), [4, s6.removeMessagesOfChannel(r6)];
                      case 3:
                        u5.sent(), u5.label = 4;
                      case 4:
                        return t8 = e6.next(), [3, 1];
                      case 5:
                        return [3, 8];
                      case 6:
                        return a7 = u5.sent(), i5 = { error: a7 }, [3, 8];
                      case 7:
                        try {
                          t8 && !t8.done && (o4 = e6.return) && o4.call(e6);
                        } finally {
                          if (i5) throw i5.error;
                        }
                        return [7];
                      case 8:
                        return [2];
                    }
                  });
                });
              })];
            case 21:
              return T4.sent(), C3 || this._broadcastRemoveEvent(g4, E4), [3, 24];
            case 22:
              return e5 instanceof v2 ? [4, t7.fetch({ token: Number.MAX_SAFE_INTEGER, limit: Number.MAX_SAFE_INTEGER })] : [3, 24];
            case 23:
              T4.sent(), T4.label = 24;
            case 24:
              return [2];
          }
        });
      });
    });
  }
  return e3.prototype._broadcastUpdateEvent = function(e4, t7) {
    var n4, s6;
    try {
      for (var r4 = o(this._observers.values()), a5 = r4.next(); !a5.done; a5 = r4.next()) {
        var i4 = a5.value;
        i4.onUpdate && i4.onUpdate(e4, t7);
      }
    } catch (e5) {
      n4 = { error: e5 };
    } finally {
      try {
        a5 && !a5.done && (s6 = r4.return) && s6.call(r4);
      } finally {
        if (n4) throw n4.error;
      }
    }
  }, e3.prototype._broadcastRemoveEvent = function(e4, t7) {
    var n4, s6;
    try {
      for (var r4 = o(this._observers.values()), a5 = r4.next(); !a5.done; a5 = r4.next()) {
        var i4 = a5.value;
        i4.onRemove && i4.onRemove(e4, t7);
      }
    } catch (e5) {
      n4 = { error: e5 };
    } finally {
      try {
        a5 && !a5.done && (s6 = r4.return) && s6.call(r4);
      } finally {
        if (n4) throw n4.error;
      }
    }
  }, e3.prototype.subscribe = function(e4, t7) {
    this._observers.set(e4, t7);
  }, e3.prototype.unsubscribe = function(e4) {
    this._observers.delete(e4);
  }, e3.prototype.unsubscribeAll = function() {
    this._observers.clear();
  }, e3;
}();
var Mn2 = function(r4) {
  function a5(e3) {
    var a6 = e3.userId, i4 = e3.ts, o3 = e3.token, u4 = e3.filter, c4 = e3.includeChatNotification, l3 = void 0 !== c4 && c4, h4 = r4.call(this) || this, d5 = n(n({}, cn2), u4), _2 = d5.customTypes, p4 = d5.includeEmpty, f4 = d5.includeFrozen;
    return h4.method = oe.GET, h4.path = "".concat(ce, "/").concat(encodeURIComponent(a6), "/my_group_channels/changelogs"), h4.params = re(se({ show_delivery_receipt: true, show_member: true, show_read_receipt: true, change_ts: i4 || null, token: o3, custom_types: _2, show_empty: p4, show_frozen: f4, include_chat_notification: l3 })), h4;
  }
  return t(a5, r4), a5;
}(xe);
var bn2 = function(t7) {
  function n4(e3, n5) {
    var s6 = t7.call(this, e3, n5) || this;
    return s6.updatedChannels = n5.updated.map(function(t8) {
      return new ur2(e3, Object.assign(t8, { ts: n5.ts }));
    }), s6.deletedChannelUrls = n5.deleted, s6.hasMore = n5.has_more, s6.token = n5.next, s6.ts = n5.ts, s6;
  }
  return t(n4, t7), n4;
}(Ue);
var Nn2 = function(t7) {
  function n4(e3) {
    var n5 = e3.channelUrl, s6 = e3.isInternalCall, r4 = e3.showLatestMessage, a5 = t7.call(this) || this;
    return a5.method = oe.GET, a5.path = "".concat(s6 ? de : he, "/").concat(encodeURIComponent(n5)), a5.params = { show_member: true, show_read_receipt: true, show_delivery_receipt: true, show_latest_message: null != r4 && r4 }, a5;
  }
  return t(n4, t7), n4;
}(xe);
var Un2 = function(t7) {
  function n4(e3, n5) {
    var s6 = t7.call(this, e3, n5) || this;
    return s6.channel = new ur2(e3, n5), s6;
  }
  return t(n4, t7), n4;
}(Ue);
var Sn2 = { includeEmpty: false, includeFrozen: true, includeMetaData: true, includeChatNotification: false, channelUrlsFilter: void 0, customTypesFilter: void 0, customTypeStartsWithFilter: void 0, nicknameContainsFilter: void 0, nicknameStartsWithFilter: void 0, nicknameExactMatchFilter: void 0, channelNameContainsFilter: void 0, myMemberStateFilter: Yt2.ALL, unreadChannelFilter: Jt2.ALL, superChannelFilter: Kt2.ALL, publicChannelFilter: Qt2.ALL, hiddenChannelFilter: Xt2.ALL, userIdsFilter: { userIds: [], includeMode: true, queryType: $t2.AND }, searchFilter: { query: void 0, fields: [] }, metadataKey: void 0, metadataValues: void 0, metadataOrderKeyFilter: void 0, metadataValueStartsWith: void 0, order: E.LATEST_LAST_MESSAGE, createdAfter: void 0, createdBefore: void 0 };
var An2 = function(n4) {
  function s6(e3) {
    var s7 = this, r4 = e3.userId, a5 = e3.token, i4 = e3.limit, o3 = e3.order, u4 = e3.includeEmpty, c4 = e3.myMemberStateFilter, l3 = e3.superChannelFilter, h4 = e3.publicChannelFilter, d5 = e3.unreadChannelFilter, _2 = e3.nicknameContainsFilter, p4 = e3.nicknameStartsWithFilter, f4 = e3.nicknameExactMatchFilter, v5 = e3.channelNameContainsFilter, m5 = e3.channelUrlsFilter, g4 = e3.customTypesFilter, E4 = e3.customTypeStartsWithFilter, C3 = e3.hiddenChannelFilter, y6 = e3.metadataOrderKeyFilter, M5 = e3.metadataKey, b6 = e3.metadataValues, S6 = e3.metadataValueStartsWith, A3 = e3.includeFrozen, T4 = e3.includeMetaData, I5 = e3.searchFilter, w4 = e3.userIdsFilter, L5 = e3.includeChatNotification, D3 = void 0 !== L5 && L5, x2 = e3.includeLeftChannel, R4 = void 0 !== x2 && x2, F2 = e3.createdAfter, P2 = e3.createdBefore;
    return (s7 = n4.call(this) || this).method = oe.GET, s7.path = "".concat(ce, "/").concat(encodeURIComponent(r4), "/my_group_channels"), s7.params = re({ token: a5, limit: i4, order: null != o3 ? o3 : Sn2.order, show_member: true, show_read_receipt: true, show_delivery_receipt: true, show_empty: null != u4 ? u4 : Sn2.includeEmpty, member_state_filter: null != c4 ? c4 : Sn2.myMemberStateFilter, super_mode: null != l3 ? l3 : Sn2.superChannelFilter, public_mode: null != h4 ? h4 : Sn2.publicChannelFilter, unread_filter: null != d5 ? d5 : Sn2.unreadChannelFilter, members_nickname_contains: _2, members_nickname_startswith: p4, members_nickname: f4, name_contains: v5, channel_urls: m5, custom_types: g4, custom_type_startswith: E4, hidden_mode: C3, metadata_order_key: y6, metadata_key: M5, metadata_values: b6, metadata_value_startswith: S6, show_frozen: A3, show_metadata: T4, include_chat_notification: D3, include_left_channel: R4, created_after: F2, created_before: P2 }), I5 && I5.query && I5.fields && (s7.params.search_query = I5.query, s7.params.search_fields = I5.fields), w4 && w4.userIds && w4.userIds.length > 0 && (w4.includeMode ? (s7.params.members_include_in = w4.userIds, s7.params.query_type = w4.queryType.toUpperCase()) : s7.params.members_exactly_in = w4.userIds), s7;
  }
  return t(s6, n4), s6;
}(xe);
var Tn2 = function(t7) {
  function n4(e3, n5) {
    var s6 = t7.call(this, e3, n5) || this;
    s6.channels = [];
    var r4 = n5.next, a5 = n5.channels, i4 = n5.ts;
    return s6.token = r4, a5 && a5.length > 0 && (s6.channels = a5.map(function(t8) {
      return t8.ts = i4, new ur2(e3, t8);
    })), s6.ts = null != i4 ? i4 : 0, s6;
  }
  return t(n4, t7), n4;
}(Ue);
var In2 = function(t7) {
  function n4(e3) {
    var n5 = e3.userId, s6 = e3.filter, r4 = t7.call(this) || this, a5 = s6.myMemberStateFilter;
    return r4.method = oe.GET, r4.path = "".concat(ce, "/").concat(encodeURIComponent(n5), "/group_channel_count"), r4.params = { state: null != a5 ? a5 : Yt2.ALL }, r4;
  }
  return t(n4, t7), n4;
}(xe);
var wn2 = function(t7) {
  function n4(e3, n5) {
    var s6 = t7.call(this, e3, n5) || this;
    return s6.groupChannelCount = n5.group_channel_count, s6;
  }
  return t(n4, t7), n4;
}(Ue);
var Ln2 = function(n4) {
  function s6(e3) {
    var s7 = e3.userId, r4 = e3.filter, a5 = n4.call(this) || this, i4 = r4.keys, o3 = r4.customTypeFilters, u4 = r4.customTypesFilter;
    return a5.method = oe.GET, a5.path = "".concat(ce, "/").concat(encodeURIComponent(s7), "/unread_item_count"), a5.params = re({ item_keys: i4, custom_types: null != u4 ? u4 : o3 }), a5;
  }
  return t(s6, n4), s6;
}(xe);
var Dn2 = function(t7) {
  function n4(e3, n5) {
    var s6 = t7.call(this, e3, n5) || this;
    return "number" == typeof n5[sn2.GROUP_CHANNEL_UNREAD_MENTION_COUNT] && (s6.groupChannelUnreadMentionCount = n5[sn2.GROUP_CHANNEL_UNREAD_MENTION_COUNT]), "number" == typeof n5[sn2.GROUP_CHANNEL_UNREAD_MESSAGE_COUNT] && (s6.groupChannelUnreadMessageCount = n5[sn2.GROUP_CHANNEL_UNREAD_MESSAGE_COUNT]), "number" == typeof n5[sn2.GROUP_CHANNEL_INVITATION_COUNT] && (s6.groupChannelInvitationCount = n5[sn2.GROUP_CHANNEL_INVITATION_COUNT]), "number" == typeof n5[sn2.SUPER_UNREAD_MENTION_COUNT] && (s6.superGroupChannelUnreadMentionCount = n5[sn2.SUPER_UNREAD_MENTION_COUNT]), "number" == typeof n5[sn2.SUPER_UNREAD_MESSAGE_COUNT] && (s6.superGroupChannelUnreadMessageCount = n5[sn2.SUPER_UNREAD_MESSAGE_COUNT]), "number" == typeof n5[sn2.SUPER_INVITATION_COUNT] && (s6.superGroupChannelInvitationCount = n5[sn2.SUPER_INVITATION_COUNT]), "number" == typeof n5[sn2.NONSUPER_UNREAD_MENTION_COUNT] && (s6.nonSuperGroupChannelUnreadMentionCount = n5[sn2.NONSUPER_UNREAD_MENTION_COUNT]), "number" == typeof n5[sn2.NONSUPER_UNREAD_MESSAGE_COUNT] && (s6.nonSuperGroupChannelUnreadMessageCount = n5[sn2.NONSUPER_UNREAD_MESSAGE_COUNT]), "number" == typeof n5[sn2.NONSUPER_INVITATION_COUNT] && (s6.nonSuperGroupChannelInvitationCount = n5[sn2.NONSUPER_INVITATION_COUNT]), s6;
  }
  return t(n4, t7), n4;
}(Ue);
var xn2 = function(t7) {
  function n4(e3) {
    var n5 = e3.userId, s6 = t7.call(this) || this;
    return s6.method = oe.GET, s6.path = "".concat(ce, "/").concat(encodeURIComponent(n5), "/unread_channel_count"), s6;
  }
  return t(n4, t7), n4;
}(xe);
var Rn2 = function(t7) {
  function n4(e3, n5) {
    var s6 = t7.call(this, e3, n5) || this;
    return s6.unreadCount = n5.unread_count, s6;
  }
  return t(n4, t7), n4;
}(Ue);
var Fn2 = function(t7) {
  function n4(e3) {
    var n5 = e3.userId, s6 = e3.filter, r4 = e3.includeFeedChannel, a5 = void 0 !== r4 && r4, i4 = t7.call(this) || this, o3 = s6.channelCustomTypesFilter, u4 = s6.superChannelFilter;
    return i4.method = oe.GET, i4.path = "".concat(ce, "/").concat(encodeURIComponent(n5), "/unread_message_count"), i4.params = { super_mode: null != u4 ? u4 : Kt2.ALL, custom_types: o3, include_feed_channel: a5 }, i4;
  }
  return t(n4, t7), n4;
}(xe);
var Pn2 = function(t7) {
  function n4(e3, n5) {
    var s6 = t7.call(this, e3, n5) || this;
    return s6.unreadCount = n5.unread_count, s6.unreadFeedCount = n5.unread_feed_count, s6;
  }
  return t(n4, t7), n4;
}(Ue);
var kn2 = function(t7) {
  function n4(e3) {
    var n5 = e3.channelUrl, s6 = e3.scheduledStatus, r4 = e3.messageTypeFilter, a5 = t7.call(this) || this;
    return a5.method = oe.GET, a5.path = "".concat(me, "/count"), a5.params = { channel_url: n5, status: Hn2(s6) }, r4 && (a5.params.message_type = r4), a5;
  }
  return t(n4, t7), n4;
}(xe);
var On2 = function(t7) {
  function n4(e3, n5) {
    var s6 = t7.call(this, e3, n5) || this;
    return s6.count = n5.count, s6;
  }
  return t(n4, t7), n4;
}(Ue);
var Hn2 = function(e3) {
  if (!e3) return [];
  var t7 = [];
  return e3.forEach(function(e4) {
    switch (e4) {
      case ut.PENDING:
        t7.push(ct.PENDING);
        break;
      case ut.SENT:
        t7.push(ct.IN_QUEUE), t7.push(ct.SENT);
        break;
      case ut.CANCELED:
        t7.push(ct.CANCELED);
        break;
      case ut.FAILED:
        t7.push(ct.FAILED);
    }
  }), t7;
};
var Vn2 = function(n4) {
  function s6(e3) {
    var s7 = this, r4 = e3.userId, a5 = e3.channelUrl, i4 = e3.coverUrl, o3 = e3.coverImage, u4 = e3.isDistinct, c4 = e3.isSuper, l3 = e3.isBroadcast, h4 = e3.isPublic, p4 = e3.isExclusive, f4 = e3.isDiscoverable, v5 = e3.isStrict, m5 = e3.isEphemeral, g4 = e3.accessCode, E4 = e3.name, C3 = e3.data, y6 = e3.customType, M5 = e3.messageSurvivalSeconds, b6 = e3.invitedUserIds, U2 = e3.operatorUserIds;
    return (s7 = n4.call(this) || this).method = oe.POST, s7.path = he, s7.params = re({ user_ids: c([r4], a(null != b6 ? b6 : []), false).filter(function(e4, t7, n5) {
      return t7 === n5.indexOf(e4);
    }), channel_url: a5, cover_url: i4, cover_file: o3, is_distinct: u4, is_super: c4, is_broadcast: l3, is_exclusive: p4, is_public: h4, is_discoverable: f4, strict: v5, is_ephemeral: m5, access_code: g4, name: E4, data: C3, custom_type: y6, operator_ids: U2, message_survival_seconds: M5 }), s7;
  }
  return t(s6, n4), s6;
}(xe);
var Gn2 = function(t7) {
  function n4(e3, n5) {
    var s6, r4 = this;
    return (r4 = t7.call(this, e3, n5) || this).channel = new ur2(e3, n5), r4.isCreated = null === (s6 = n5.is_created) || void 0 === s6 || s6, r4;
  }
  return t(n4, t7), n4;
}(Ue);
var Bn2 = function(t7) {
  function n4(e3) {
    var n5 = e3.userId, s6 = e3.channelUrls, r4 = t7.call(this) || this;
    return r4.method = oe.PUT, r4.path = "".concat(ce, "/").concat(encodeURIComponent(n5), "/mark_as_read_all"), r4.params = { channel_urls: s6 }, r4;
  }
  return t(n4, t7), n4;
}(xe);
!function(t7) {
  function n4() {
    return null !== t7 && t7.apply(this, arguments) || this;
  }
  t(n4, t7);
}(Ue);
var qn2 = function(t7) {
  function n4(e3) {
    var n5 = this, s6 = e3.channelUrl, r4 = e3.userId, a5 = e3.accessCode;
    return (n5 = t7.call(this) || this).method = oe.PUT, n5.path = "".concat(he, "/").concat(encodeURIComponent(s6), "/join"), n5.params = { user_id: r4, access_code: a5 }, n5;
  }
  return t(n4, t7), n4;
}(xe);
var zn2 = function(t7) {
  function n4(e3, n5) {
    var s6 = t7.call(this, e3, n5) || this;
    return s6.channel = new ur2(e3, n5), s6;
  }
  return t(n4, t7), n4;
}(Ue);
var jn2 = function(t7) {
  function n4(e3, n5, s6) {
    var r4 = t7.call(this, e3, n5, s6) || this, a5 = s6.data, i4 = a5.member_count, o3 = void 0 === i4 ? 0 : i4, u4 = a5.joined_member_count, c4 = void 0 === u4 ? 0 : u4, l3 = a5.users, h4 = void 0 === l3 ? null : l3;
    return r4.memberCount = o3, r4.joinedMemberCount = c4, r4.members = Array.isArray(h4) ? h4.map(function(t8) {
      return new tn2(e3, t8);
    }) : [new tn2(e3, s6.data)], r4;
  }
  return t(n4, t7), n4;
}(v3);
var Wn2 = function(t7) {
  function n4(e3) {
    var n5 = this, s6 = e3.channelUrl, r4 = e3.userId, a5 = e3.shouldRemoveOperatorStatus;
    return (n5 = t7.call(this) || this).method = oe.PUT, n5.path = "".concat(he, "/").concat(encodeURIComponent(s6), "/leave"), n5.params = { user_id: r4, should_remove_operator_status: a5 }, n5;
  }
  return t(n4, t7), n4;
}(xe);
!function(t7) {
  function n4(e3, n5) {
    return t7.call(this, e3, n5) || this;
  }
  t(n4, t7);
}(Ue);
var Qn2 = function(t7) {
  function n4(e3, n5, s6) {
    var r4 = t7.call(this, e3, n5, s6) || this, a5 = s6.data, i4 = a5.member_count, o3 = void 0 === i4 ? 0 : i4, u4 = a5.joined_member_count, c4 = void 0 === u4 ? 0 : u4;
    return r4.memberCount = o3, r4.joinedMemberCount = c4, r4.member = new tn2(r4._iid, s6.data), r4;
  }
  return t(n4, t7), n4;
}(v3);
var Yn2 = function(t7) {
  function n4(e3) {
    var n5 = this, s6 = e3.channelUrl, r4 = e3.userIds;
    return (n5 = t7.call(this) || this).method = oe.POST, n5.path = "".concat(he, "/").concat(encodeURIComponent(s6), "/invite"), n5.params = { user_ids: r4 }, n5;
  }
  return t(n4, t7), n4;
}(xe);
var Kn2 = function(t7) {
  function n4(e3, n5) {
    var s6 = t7.call(this, e3, n5) || this;
    return s6.channel = new ur2(e3, n5), s6;
  }
  return t(n4, t7), n4;
}(Ue);
var Jn2 = function(t7) {
  function n4(e3, n5, s6) {
    var r4 = t7.call(this, e3, n5, s6) || this;
    r4.inviter = null;
    var a5 = s6.data, i4 = a5.member_count, u4 = void 0 === i4 ? 0 : i4, c4 = a5.joined_member_count, l3 = void 0 === c4 ? 0 : c4, h4 = a5.inviter, d5 = a5.invitees, _2 = void 0 === d5 ? [] : d5;
    return r4.memberCount = u4, r4.joinedMemberCount = l3, h4 && Object.keys(h4).length > 0 && (r4.inviter = new es(e3, h4)), r4.invitees = _2.map(function(t8) {
      return new tn2(e3, t8);
    }), r4;
  }
  return t(n4, t7), n4;
}(v3);
var Xn2 = function(t7) {
  function n4(e3) {
    var n5 = this, s6 = e3.channelUrl, r4 = e3.userId;
    return (n5 = t7.call(this) || this).method = oe.PUT, n5.path = "".concat(he, "/").concat(encodeURIComponent(s6), "/decline"), n5.params = { user_id: r4 }, n5;
  }
  return t(n4, t7), n4;
}(xe);
!function(t7) {
  function n4(e3, n5) {
    var s6 = t7.call(this, e3, n5) || this;
    return s6.channel = new ur2(e3, n5), s6.channel.myMemberState = Wt2.NONE, s6;
  }
  t(n4, t7);
}(Ue);
var Zn2 = function(t7) {
  function n4(e3, n5, s6) {
    var r4 = t7.call(this, e3, n5, s6) || this, a5 = s6.data, i4 = a5.member_count, u4 = a5.joined_member_count, c4 = a5.inviter, l3 = a5.invitee;
    return r4.memberCount = null != i4 ? i4 : 0, r4.joinedMemberCount = null != u4 ? u4 : 0, r4.inviter = new es(e3, c4), r4.invitee = new tn2(e3, l3), r4;
  }
  return t(n4, t7), n4;
}(v3);
var $n2 = { hidePreviousMessages: false, allowAutoUnhide: true };
var es3 = function(t7) {
  function n4(e3) {
    var n5 = this, s6 = e3.channelUrl, r4 = e3.userId, a5 = e3.hidePreviousMessages, i4 = e3.allowAutoUnhide;
    return (n5 = t7.call(this) || this).method = oe.PUT, n5.path = "".concat(he, "/").concat(encodeURIComponent(s6), "/hide"), n5.params = { user_id: r4, hide_previous_messages: null != a5 ? a5 : $n2.hidePreviousMessages, allow_auto_unhide: null != i4 ? i4 : $n2.allowAutoUnhide }, n5;
  }
  return t(n4, t7), n4;
}(xe);
var ts3 = function(t7) {
  function n4(e3, n5) {
    var s6 = t7.call(this, e3, n5) || this, r4 = n5.ts_message_offset;
    return s6.messageOffsetTimestamp = r4, s6;
  }
  return t(n4, t7), n4;
}(Ue);
var ns3 = function(t7) {
  function n4(e3, n5, s6) {
    var r4, a5, i4, o3 = this;
    return (o3 = t7.call(this, e3, "SYEV", s6) || this).allowAutoUnhide = null, o3.hidePreviousMessages = null, o3.messageOffsetTimestamp = null, s6.data && (o3.allowAutoUnhide = null !== (r4 = s6.data.allow_auto_unhide) && void 0 !== r4 ? r4 : null, o3.hidePreviousMessages = null !== (a5 = s6.data.hide_previous_messages) && void 0 !== a5 ? a5 : null), o3.messageOffsetTimestamp = null !== (i4 = s6.ts_message_offset) && void 0 !== i4 ? i4 : null, o3;
  }
  return t(n4, t7), n4;
}(Fe);
var ss2 = function(t7) {
  function n4(e3) {
    var n5 = e3.channelUrl, s6 = e3.time;
    return t7.call(this, { code: "TPST", ackRequired: false, payload: { channel_url: n5, time: s6 } }) || this;
  }
  return t(n4, t7), n4;
}(qe);
var rs2 = function(t7) {
  function n4(e3, n5, s6) {
    var r4 = t7.call(this, e3, "SYEV", s6) || this;
    return r4.user = new es(e3, s6.data), r4;
  }
  return t(n4, t7), n4;
}(Fe);
var as3 = function(t7) {
  function n4(e3) {
    var n5 = e3.channelUrl, s6 = e3.time;
    return t7.call(this, { code: "TPEN", ackRequired: false, payload: { channel_url: n5, time: s6 } }) || this;
  }
  return t(n4, t7), n4;
}(qe);
var is2 = function(t7) {
  function n4(e3, n5, s6) {
    var r4 = t7.call(this, e3, "SYEV", s6) || this;
    return r4.user = new es(e3, s6.data), r4;
  }
  return t(n4, t7), n4;
}(Fe);
var os3 = function(t7) {
  function n4(e3) {
    var n5 = e3.channelUrl, s6 = e3.messageId;
    return t7.call(this, { code: "MACK", ackRequired: false, payload: { channel_url: n5, msg_id: s6 } }) || this;
  }
  return t(n4, t7), n4;
}(qe);
var us2 = function(t7) {
  function a5(e3, n4) {
    var s6, r4, a6, i4, o3, u4, c4, l3, h4, d5, _2, p4, f4, v5, m5, g4, E4, C3, y6, M5, b6, N3, U2, S6 = this;
    return (S6 = t7.call(this, e3, n4) || this).includeEmpty = false, S6.includeFrozen = true, S6.includeMetaData = true, S6.includeChatNotification = false, S6.channelUrlsFilter = null, S6.customTypesFilter = null, S6.customTypeStartsWithFilter = null, S6.nicknameContainsFilter = null, S6.nicknameStartsWithFilter = null, S6.nicknameExactMatchFilter = null, S6.channelNameContainsFilter = "", S6.myMemberStateFilter = Yt2.ALL, S6.unreadChannelFilter = Jt2.ALL, S6.superChannelFilter = Kt2.ALL, S6.publicChannelFilter = Qt2.ALL, S6.hiddenChannelFilter = Xt2.UNHIDDEN, S6.searchFilter = { fields: [], query: null }, S6.userIdsFilter = { userIds: [], includeMode: true, queryType: $t2.AND }, S6.metadataKey = null, S6.metadataValues = null, S6.metadataOrderKeyFilter = null, S6.metadataValueStartsWith = null, S6.order = E.LATEST_LAST_MESSAGE, S6.includeEmpty = null !== (s6 = n4.includeEmpty) && void 0 !== s6 && s6, S6.includeFrozen = null === (r4 = n4.includeFrozen) || void 0 === r4 || r4, S6.includeMetaData = null === (a6 = n4.includeMetaData) || void 0 === a6 || a6, S6.includeChatNotification = null !== (i4 = n4.includeChatNotification) && void 0 !== i4 && i4, S6.channelUrlsFilter = null !== (o3 = n4.channelUrlsFilter) && void 0 !== o3 ? o3 : null, S6.customTypesFilter = null !== (u4 = n4.customTypesFilter) && void 0 !== u4 ? u4 : null, S6.customTypeStartsWithFilter = null !== (c4 = n4.customTypeStartsWithFilter) && void 0 !== c4 ? c4 : "", S6.nicknameContainsFilter = null !== (l3 = n4.nicknameContainsFilter) && void 0 !== l3 ? l3 : null, S6.nicknameStartsWithFilter = null !== (h4 = n4.nicknameStartsWithFilter) && void 0 !== h4 ? h4 : null, S6.nicknameExactMatchFilter = null !== (d5 = n4.nicknameExactMatchFilter) && void 0 !== d5 ? d5 : null, S6.channelNameContainsFilter = null !== (_2 = n4.channelNameContainsFilter) && void 0 !== _2 ? _2 : "", S6.myMemberStateFilter = null !== (p4 = n4.myMemberStateFilter) && void 0 !== p4 ? p4 : Yt2.ALL, S6.unreadChannelFilter = null !== (f4 = n4.unreadChannelFilter) && void 0 !== f4 ? f4 : Jt2.ALL, S6.superChannelFilter = null !== (v5 = n4.superChannelFilter) && void 0 !== v5 ? v5 : Kt2.ALL, S6.publicChannelFilter = null !== (m5 = n4.publicChannelFilter) && void 0 !== m5 ? m5 : Qt2.ALL, S6.hiddenChannelFilter = null !== (g4 = n4.hiddenChannelFilter) && void 0 !== g4 ? g4 : Xt2.UNHIDDEN, S6.searchFilter = null !== (E4 = n4.searchFilter) && void 0 !== E4 ? E4 : { fields: [], query: null }, S6.userIdsFilter = null !== (C3 = n4.userIdsFilter) && void 0 !== C3 ? C3 : { userIds: [], includeMode: true, queryType: $t2.AND }, S6.metadataKey = null !== (y6 = n4.metadataKey) && void 0 !== y6 ? y6 : null, S6.metadataValues = null !== (M5 = n4.metadataValues) && void 0 !== M5 ? M5 : null, S6.metadataOrderKeyFilter = null !== (b6 = n4.metadataOrderKeyFilter) && void 0 !== b6 ? b6 : null, S6.metadataValueStartsWith = null !== (N3 = n4.metadataValueStartsWith) && void 0 !== N3 ? N3 : null, S6.order = null !== (U2 = n4.order) && void 0 !== U2 ? U2 : E.LATEST_LAST_MESSAGE, n4.createdAfter && (S6.createdAfter = n4.createdAfter), n4.createdBefore && (S6.createdBefore = n4.createdBefore), S6;
  }
  return t(a5, t7), a5.prototype._validate = function() {
    return t7.prototype._validate.call(this) && w("boolean", this.includeEmpty) && w("boolean", this.includeFrozen) && w("boolean", this.includeMetaData) && w("string", this.channelNameContainsFilter) && N("string", this.channelUrlsFilter, true) && N("string", this.customTypesFilter, true) && w("string", this.customTypeStartsWithFilter) && w("string", this.nicknameContainsFilter, true) && w("string", this.nicknameStartsWithFilter, true) && w("string", this.nicknameExactMatchFilter, true) && S(Yt2, this.myMemberStateFilter) && S(Kt2, this.superChannelFilter) && S(Qt2, this.publicChannelFilter) && S(Jt2, this.unreadChannelFilter) && S(Xt2, this.hiddenChannelFilter) && N(en2, this.searchFilter.fields) && w("string", this.searchFilter.query, true) && N("string", this.userIdsFilter.userIds) && w("boolean", this.userIdsFilter.includeMode) && S($t2, this.userIdsFilter.queryType) && S(E, this.order) && w("string", this.metadataOrderKeyFilter, true) && w("string", this.metadataKey, true) && N("string", this.metadataValues, true) && w("string", this.metadataValueStartsWith, true) && C(this.createdAfter, true) && C(this.createdBefore, true);
  }, a5.prototype.serialize = function() {
    return Yr(this);
  }, a5.prototype.next = function() {
    return r(this, void 0, void 0, function() {
      var e3, t8, r4;
      return s(this, function(a6) {
        switch (a6.label) {
          case 0:
            return this._validate() ? this._isLoading ? [3, 3] : this._hasNext ? (this._isLoading = true, [4, ps2.of(this._iid).getMyGroupChannels(this._token, se(n({}, this)), this.limit, Ks.REQUEST_CHANNEL, true)]) : [3, 2] : [3, 5];
          case 1:
            return e3 = a6.sent(), t8 = e3.channels, r4 = e3.token, this._token = r4, this._hasNext = !!r4, this._isLoading = false, [2, t8];
          case 2:
            return [2, []];
          case 3:
            throw v.queryInProgress;
          case 4:
            return [3, 6];
          case 5:
            throw v.invalidParameters;
          case 6:
            return [2];
        }
      });
    });
  }, a5;
}(_o);
var cs2 = function(n4) {
  function s6(e3) {
    var s7 = e3.channelUrl, r4 = e3.userId, a5 = n4.call(this) || this;
    return a5.method = oe.PUT, a5.path = "".concat(he, "/").concat(encodeURIComponent(s7), "/messages/mark_as_delivered"), a5.params = re({ userId: r4 }), a5;
  }
  return t(s6, n4), s6;
}(xe);
!function(t7) {
  function n4() {
    return null !== t7 && t7.apply(this, arguments) || this;
  }
  t(n4, t7);
}(Ue);
var ls2;
var hs3 = function(t7) {
  function n4(e3, n5, s6) {
    var r4 = t7.call(this, e3, "DLVR", s6) || this;
    return r4.channelUrl = s6.channel_url, r4.deliveredStateUpdate = s6.updated, r4;
  }
  return t(n4, t7), n4;
}(Fe);
var ds2 = function() {
  function e3(e4) {
    var t7 = e4.top, n4 = void 0 === t7 ? Number.MAX_SAFE_INTEGER : t7, s6 = e4.bottom, r4 = void 0 === s6 ? 0 : s6;
    this.top = n4, this.bottom = r4;
  }
  return e3.prototype.includes = function() {
    for (var e4 = this, t7 = [], n4 = 0; n4 < arguments.length; n4++) t7[n4] = arguments[n4];
    return t7.every(function(t8) {
      return e4.top <= t8 && t8 <= e4.bottom;
    });
  }, e3.prototype.overlap = function(e4) {
    return this.includes(e4.top) || this.includes(e4.bottom);
  }, e3.prototype.intersect = function() {
    for (var e4 = this, t7 = [], n4 = 0; n4 < arguments.length; n4++) t7[n4] = arguments[n4];
    return t7.some(function(t8) {
      return e4.top <= t8 && t8 <= e4.bottom;
    });
  }, e3.prototype.extends = function() {
    for (var e4 = [], t7 = 0; t7 < arguments.length; t7++) e4[t7] = arguments[t7];
    this.top = Math.min.apply(Math, c([this.top], a(e4), false)), this.bottom = Math.max.apply(Math, c([this.bottom], a(e4), false));
  }, e3;
}();
var _s3 = {};
var ps2 = function(o3) {
  function u4(e3, t7) {
    var n4, r4 = this;
    return (r4 = o3.call(this, e3, n(n({}, t7), { channelType: q.GROUP })) || this)._leftChannels = /* @__PURE__ */ new Map(), r4._disableMack = false, r4._markAsReadAllLastSentAt = 0, r4._disableMack = null !== (n4 = t7.disableMack) && void 0 !== n4 && n4, r4._groupChannelHandlers = /* @__PURE__ */ new Map(), r4._groupChannelCache = new an2(r4._iid, { sdkState: t7.sdkState, cacheContext: t7.cacheContext }), r4._groupChannelBroadcast = new yn2({ dispatcher: t7.dispatcher, groupChannelCache: r4._groupChannelCache, messageCache: Qs.of(r4._iid), unsentMessageCache: Ks2.of(r4._iid) }), setInterval(function() {
      var e4, t8, n5 = function(e5) {
        e5.invalidateTypingStatus() && (r4._dispatcher.dispatch(new En2({ channels: [e5], context: { source: Ks.EVENT_CHANNEL_TYPING_STATUS_UPDATE } })), r4._groupChannelHandlers.forEach(function(t9) {
          t9.onTypingStatusUpdated && t9.onTypingStatusUpdated(e5);
        }));
      };
      try {
        for (var s6 = o(r4._groupChannelCache.channels), a5 = s6.next(); !a5.done; a5 = s6.next()) {
          n5(a5.value);
        }
      } catch (t9) {
        e4 = { error: t9 };
      } finally {
        try {
          a5 && !a5.done && (t8 = s6.return) && t8.call(s6);
        } finally {
          if (e4) throw e4.error;
        }
      }
    }, 1e3), r4._dispatcher.on(function(e4) {
      e4 instanceof Fe ? r4._handleEvent(e4).catch(function(e5) {
        if (g(e5) && "foreground" === r4._sdkState.appState) throw e5;
      }) : e4 instanceof b ? r(r4, void 0, void 0, function() {
        var t8, n5;
        return s(this, function(s6) {
          switch (s6.label) {
            case 0:
              return t8 = e4.message, [4, this.getChannel(t8.channelUrl, true)];
            case 1:
              return n5 = s6.sent(), t8 instanceof It ? n5._autoResendUserMessage(t8) : t8 instanceof St && n5._autoResendFileMessage(t8), [2];
          }
        });
      }) : e4 instanceof D ? r4.reduceDBSize() : e4 instanceof ot && r(r4, void 0, void 0, function() {
        var t8, n5, s6, r5, a5, o4 = this;
        return s(this, function(u5) {
          switch (u5.label) {
            case 0:
              return t8 = e4.channelUrl, n5 = e4.channelType, s6 = e4.parentMessage, r5 = new ta(this._iid, { channel_type: q.GROUP, channel_url: t8, parent_message_id: s6.messageId, thread_info: Re.payloadify(s6.threadInfo) }), n5 !== q.GROUP ? [3, 2] : [4, this.getChannel(t8, true)];
            case 1:
              a5 = u5.sent(), os(function() {
                return r(o4, void 0, void 0, function() {
                  var e5, t9, n6, s7, i4;
                  return s(this, function(o5) {
                    try {
                      for (e5 = o(this._groupChannelHandlers.values()), t9 = e5.next(); !t9.done; t9 = e5.next()) (n6 = t9.value).onThreadInfoUpdated && n6.onThreadInfoUpdated(a5, r5);
                    } catch (e6) {
                      s7 = { error: e6 };
                    } finally {
                      try {
                        t9 && !t9.done && (i4 = e5.return) && i4.call(e5);
                      } finally {
                        if (s7) throw s7.error;
                      }
                    }
                    return [2];
                  });
                });
              }), u5.label = 2;
            case 2:
              return [2];
          }
        });
      });
    }), _s3[e3] || (_s3[e3] = r4), r4;
  }
  return t(u4, o3), Object.defineProperty(u4.prototype, "_messageCache", { get: function() {
    return Qs.of(this._iid);
  }, enumerable: false, configurable: true }), Object.defineProperty(u4.prototype, "_unsentMessageCache", { get: function() {
    return Ks2.of(this._iid);
  }, enumerable: false, configurable: true }), u4.of = function(e3) {
    return _s3[e3] || (_s3[e3] = new u4(e3, Ws.of(e3))), _s3[e3];
  }, u4.clear = function(e3) {
    _s3[e3] && delete _s3[e3];
  }, Object.defineProperty(u4.prototype, "handlers", { get: function() {
    return c([], a(this._groupChannelHandlers.values()), false);
  }, enumerable: false, configurable: true }), u4.prototype.buildGroupChannelFromSerializedData = function(e3) {
    var t7 = Xr(e3);
    return new ur2(this._iid, ur2.payloadify(t7));
  }, u4.prototype.buildGroupChannelListQueryFromSerializedData = function(e3) {
    var t7 = Xr(e3);
    return new us2(this._iid, t7);
  }, u4.prototype.buildMemberFromSerializedData = function(e3) {
    var t7 = Xr(e3);
    return new tn2(this._iid, tn2.payloadify(t7));
  }, u4.prototype.getChannelFromCache = function(e3) {
    var t7;
    return r(this, void 0, void 0, function() {
      return s(this, function(n4) {
        switch (n4.label) {
          case 0:
            return [4, this._groupChannelCache.get(e3)];
          case 1:
            return [2, null !== (t7 = n4.sent()) && void 0 !== t7 ? t7 : null];
        }
      });
    });
  }, u4.prototype.getChannelsFromCache = function(e3, t7, n4, s6, r4) {
    return r(this, void 0, void 0, function() {
      return s(this, function(a5) {
        switch (a5.label) {
          case 0:
            return [4, this._groupChannelCache.fetch({ token: e3, filter: t7, order: n4, limit: s6, borderlineChannelUrl: r4 })];
          case 1:
            return [2, a5.sent()];
        }
      });
    });
  }, u4.prototype.upsertChannelsToCache = function(e3) {
    return r(this, void 0, void 0, function() {
      return s(this, function(t7) {
        switch (t7.label) {
          case 0:
            return [4, this._groupChannelCache.upsert(e3)];
          case 1:
            return [2, t7.sent()];
        }
      });
    });
  }, u4.prototype.removeChannelsFromCache = function(e3) {
    return r(this, void 0, void 0, function() {
      return s(this, function(t7) {
        switch (t7.label) {
          case 0:
            return [4, this._groupChannelCache.remove(e3)];
          case 1:
            return t7.sent(), [2];
        }
      });
    });
  }, u4.prototype.clearChannelsFromCache = function() {
    return r(this, void 0, void 0, function() {
      return s(this, function(e3) {
        switch (e3.label) {
          case 0:
            return [4, this._groupChannelCache.clear()];
          case 1:
            return e3.sent(), [2];
        }
      });
    });
  }, u4.prototype.reduceDBSize = function() {
    return r(this, void 0, void 0, function() {
      var e3, t7, n4, s6, r4, a5, i4, o4, u5, c4, l3, h4, d5, _2, p4;
      return s(this, function(f4) {
        switch (f4.label) {
          case 0:
            return e3 = Qs.of(this._iid), t7 = Ws.of(this._iid).cacheContext, n4 = t7.localCacheConfig, s6 = t7.nestdb, t7.localCacheEnabled && s6 && s6.state == Ts.OPENED ? (r4 = 1024 * n4.maxSize * 1024, [4, s6.estimateUsage()]) : [2];
          case 1:
            if ((a5 = f4.sent()) < r4) return [2];
            i4 = [], o4 = this._groupChannelCache.channels, u5 = {}, d5 = 0, f4.label = 2;
          case 2:
            return d5 < o4.length ? [4, this.getMessagesFromCache(o4[d5].url, 0, "prev", new Os())] : [3, 5];
          case 3:
            c4 = f4.sent(), u5[o4[d5].url] = JSON.stringify(c4).length, l3 = new M({ channel: o4[d5], cachedMessageCount: c4.length }), i4.push(l3), f4.label = 4;
          case 4:
            return d5++, [3, 2];
          case 5:
            h4 = i4.sort(n4.clearOrderComparator), d5 = 0, f4.label = 6;
          case 6:
            return d5 < h4.length ? [4, e3.removeMessagesOfChannel(h4[d5].channel.url)] : [3, 10];
          case 7:
            return f4.sent(), [4, e3._getGroupChannelPreferenceSize(h4[d5].channel.url)];
          case 8:
            if (_2 = f4.sent(), p4 = u5[h4[d5].channel.url] + _2, (a5 -= p4) < r4) return [3, 10];
            f4.label = 9;
          case 9:
            return d5++, [3, 6];
          case 10:
            return [2];
        }
      });
    });
  }, u4.prototype._handleEvent = function(e3) {
    var t7, n4;
    return r(this, void 0, void 0, function() {
      var s6, r4, o4, u5, c4, l3, h4, d5, _2, m5, g4, E4, C3, M5, N3, U2, S6, A3, T4, I5, w4, L5, D3, x2, R4, F2, k3, V2, K4, X3, Z2, $2, ee, te2, ne, se2, re2, ae, ie2, oe2, ue, ce2, le2, he2, de2, _e3, pe2, fe2, ve3, me3, ge3, Ee3, Ce4, ye3, Me3, be3, Ne3, Ue3, Se, Ae3, Te2, Ie3, we2, Le4, De5, Ye4, Ke3, Je4, Xe3, Ze4, $e3, et3, tt3, nt3, st3, rt2, at2, it3, ot2, ut2, ct2, lt2, ht2, dt2, _t3, pt2, ft2, vt3, mt3, gt3, Et3, Ct3, yt3, Mt3, bt3, Nt3, Ut3, St3, At3, Tt3, It3, wt3, Rt3, Pt3, Qt4, Yt4, Kt4, Jt4, Xt4, Zt4, $t4, en4, tn4, nn4, sn4, rn4, an4, on4, un4, cn4, ln4, hn4, dn4, _n4, pn4, fn4, vn4, mn4, gn4, yn4, Mn3, bn4, Nn3, Un3, Sn4, An3, Tn3, In4, wn4, Ln3, Dn3 = this;
      return s(this, function(xn3) {
        switch (xn3.label) {
          case 0:
            switch (xn3.trys.push([0, 80, , 81]), e3.code) {
              case "MESG":
              case "FILE":
              case "ADMM":
              case "BRDM":
                return [3, 1];
              case "MEDI":
              case "FEDI":
              case "AEDI":
                return [3, 4];
              case "DELM":
                return [3, 7];
              case "READ":
                return [3, 10];
              case "DLVR":
                return [3, 13];
              case "MRCT":
                return [3, 15];
              case "MTHD":
                return [3, 19];
              case "MCNT":
                return [3, 23];
              case "PEDI":
                return [3, 32];
              case "VOTE":
                return [3, 35];
              case "SYEV":
                return [3, 38];
              case "USEV":
                return [3, 78];
            }
            return [3, 79];
          case 1:
            return d5 = null, "MESG" === e3.code ? d5 = e3.as(pr) : "FILE" === e3.code ? d5 = e3.as(Ct) : "ADMM" !== e3.code && "BRDM" != e3.code || (d5 = e3.as(L3)), d5 ? (s6 = d5.message, r4 = d5.isMentioned, o4 = d5.forceUpdateLastMessage, s6.channelType !== q.GROUP ? [3, 3] : (this._disableMack || as(function() {
              return r(Dn3, void 0, void 0, function() {
                var e4;
                return s(this, function(t8) {
                  return e4 = new os3(s6), this._requestQueue.send(e4), [2];
                });
              });
            }), V2 = this._groupChannelCache.isCachedInMemory(s6.channelUrl), L5 = s6 instanceof mt && s6.sender.userId === this._sdkState.userId, [4, this.getChannel(s6.channelUrl, true)])) : [3, 3];
          case 2:
            if ((u5 = xn3.sent()).hiddenState === tr2.HIDDEN_ALLOW_AUTO_UNHIDE && (u5.hiddenState = tr2.UNHIDDEN), c4 = Ws.of(this._iid).useMemberInfoInMessage, s6 instanceof mt) {
              try {
                for (l3 = o(u5.members), h4 = l3.next(); !h4.done; h4 = l3.next()) if ((yt3 = h4.value).userId === s6.sender.userId) {
                  c4 || (s6.sender.nickname = yt3.nickname, s6.sender.plainProfileUrl = yt3.plainProfileUrl, s6.sender.metaData = yt3.metaData, s6.sender.isBlockedByMe = yt3.isBlockedByMe);
                  break;
                }
              } catch (e4) {
                Mn3 = { error: e4 };
              } finally {
                try {
                  h4 && !h4.done && (bn4 = l3.return) && bn4.call(l3);
                } finally {
                  if (Mn3) throw Mn3.error;
                }
              }
              !c4 && r4 && (null === (t7 = s6.mentionedUsers) || void 0 === t7 || t7.forEach(function(e4) {
                var t8, n5;
                try {
                  for (var s7 = o(u5.members), r5 = s7.next(); !r5.done; r5 = s7.next()) {
                    var a5 = r5.value;
                    if (e4.userId === a5.userId) {
                      e4.nickname = a5.nickname, e4.plainProfileUrl = a5.plainProfileUrl, e4.metaData = a5.metaData;
                      break;
                    }
                  }
                } catch (e5) {
                  t8 = { error: e5 };
                } finally {
                  try {
                    r5 && !r5.done && (n5 = s7.return) && n5.call(s7);
                  } finally {
                    if (t8) throw t8.error;
                  }
                }
              })), L5 && (M5 = this._sessionManager.currentUser) && (M5.nickname = s6.sender.nickname, M5.plainProfileUrl = s6.sender.plainProfileUrl, M5.metaData = s6.sender.metaData);
            }
            s6.silent && !L5 || (u5.isEphemeral || V2) && (u5._updateLastMessage(s6), L5 || u5._shouldUpdateUnreadCountWith(s6) && u5._updateUnreadCount(u5.unreadMessageCount + 1, u5.unreadMentionCount + (r4 ? 1 : 0))), o4 && u5._updateLastMessage(s6), this._dispatcher.dispatch(new En2({ channels: [u5], context: { source: Ks.EVENT_MESSAGE_RECEIVED } })), s6.silent && !L5 || os(function() {
              return r(Dn3, void 0, void 0, function() {
                var e4, t8, n5, s7, r5;
                return s(this, function(a5) {
                  try {
                    for (e4 = o(this._groupChannelHandlers.values()), t8 = e4.next(); !t8.done; t8 = e4.next()) (n5 = t8.value).onChannelChanged && n5.onChannelChanged(u5);
                  } catch (e5) {
                    s7 = { error: e5 };
                  } finally {
                    try {
                      t8 && !t8.done && (r5 = e4.return) && r5.call(e4);
                    } finally {
                      if (s7) throw s7.error;
                    }
                  }
                  return [2];
                });
              });
            }), this._dispatcher.dispatch(new $s({ messages: [s6], source: Ks.EVENT_MESSAGE_RECEIVED })), os(function() {
              return r(Dn3, void 0, void 0, function() {
                var e4, t8, n5, a5, i4;
                return s(this, function(o5) {
                  try {
                    for (e4 = o(this._groupChannelHandlers.values()), t8 = e4.next(); !t8.done; t8 = e4.next()) (n5 = t8.value).onMessageReceived && n5.onMessageReceived(u5, s6), r4 && n5.onMentionReceived && n5.onMentionReceived(u5, s6);
                  } catch (e5) {
                    a5 = { error: e5 };
                  } finally {
                    try {
                      t8 && !t8.done && (i4 = e4.return) && i4.call(e4);
                    } finally {
                      if (a5) throw a5.error;
                    }
                  }
                  return [2];
                });
              });
            }), xn3.label = 3;
          case 3:
            return [3, 79];
          case 4:
            return d5 = null, "MEDI" === e3.code ? d5 = e3.as(vr) : "FEDI" === e3.code ? d5 = e3.as(_r) : "AEDI" === e3.code && (d5 = e3.as(I3)), d5 ? (_2 = d5.message, m5 = d5.mentionCountChange, _2.threadInfo && (_2.threadInfo.unreadReplyCount = void 0), _2.channelType !== q.GROUP ? [3, 6] : (V2 = this._groupChannelCache.isCachedInMemory(_2.channelUrl), [4, this.getChannel(_2.channelUrl, true)])) : [3, 6];
          case 5:
            g4 = xn3.sent(), L5 = _2 instanceof mt && _2.sender.userId === this._sdkState.userId, E4 = false, L5 ? (C3 = _2.sender, (M5 = this._sessionManager.currentUser) && (M5.nickname = C3.nickname, M5.plainProfileUrl = C3.plainProfileUrl, M5.metaData = C3.metaData)) : g4.isReadMessage(_2) || 0 !== m5 && !_2.silent && V2 && (g4._updateUnreadCount(g4.unreadMessageCount, g4.unreadMentionCount + m5), E4 = true), g4._updateLastMessage(_2) ? E4 = true : (null === (n4 = g4.lastMessage) || void 0 === n4 ? void 0 : n4.isIdentical(_2)) && (V2 ? g4._updateLastMessage(_2) && (E4 = true) : E4 = true), N3 = false, g4.lastPinnedMessage && g4.lastPinnedMessage.messageId === _2.messageId && (g4.lastPinnedMessage = _2, E4 = true, N3 = true), E4 && (this._dispatcher.dispatch(new En2({ channels: [g4], context: { source: N3 ? Ks.EVENT_PINNED_MESSAGE_UPDATED : Ks.EVENT_MESSAGE_UPDATED } })), _2.silent && !L5 || os(function() {
              return r(Dn3, void 0, void 0, function() {
                var e4, t8, n5, s7, r5;
                return s(this, function(a5) {
                  try {
                    for (e4 = o(this._groupChannelHandlers.values()), t8 = e4.next(); !t8.done; t8 = e4.next()) (n5 = t8.value).onChannelChanged && n5.onChannelChanged(g4);
                  } catch (e5) {
                    s7 = { error: e5 };
                  } finally {
                    try {
                      t8 && !t8.done && (r5 = e4.return) && r5.call(e4);
                    } finally {
                      if (s7) throw s7.error;
                    }
                  }
                  return [2];
                });
              });
            }), N3 && os(function() {
              return r(Dn3, void 0, void 0, function() {
                var e4, t8, n5, s7, r5;
                return s(this, function(a5) {
                  try {
                    for (e4 = o(this._groupChannelHandlers.values()), t8 = e4.next(); !t8.done; t8 = e4.next()) (n5 = t8.value).onPinnedMessageUpdated && n5.onPinnedMessageUpdated(g4);
                  } catch (e5) {
                    s7 = { error: e5 };
                  } finally {
                    try {
                      t8 && !t8.done && (r5 = e4.return) && r5.call(e4);
                    } finally {
                      if (s7) throw s7.error;
                    }
                  }
                  return [2];
                });
              });
            })), this._dispatcher.dispatch(new $s({ messages: [_2], source: Ks.EVENT_MESSAGE_UPDATED })), os(function() {
              return r(Dn3, void 0, void 0, function() {
                var e4, t8, n5, s7, r5;
                return s(this, function(a5) {
                  try {
                    for (e4 = o(this._groupChannelHandlers.values()), t8 = e4.next(); !t8.done; t8 = e4.next()) (n5 = t8.value).onMessageUpdated && n5.onMessageUpdated(g4, _2), m5 > 0 && n5.onMentionReceived && n5.onMentionReceived(g4, _2);
                  } catch (e5) {
                    s7 = { error: e5 };
                  } finally {
                    try {
                      t8 && !t8.done && (r5 = e4.return) && r5.call(e4);
                    } finally {
                      if (s7) throw s7.error;
                    }
                  }
                  return [2];
                });
              });
            }), xn3.label = 6;
          case 6:
            return [3, 79];
          case 7:
            return U2 = e3.as(it), me3 = U2.channelUrl, ge3 = U2.channelType, S6 = U2.messageId, A3 = U2.silent, T4 = U2.messageCreatedAt, I5 = U2.senderId, ge3 !== q.GROUP ? [3, 9] : [4, this.getChannel(me3, true)];
          case 8:
            w4 = xn3.sent(), L5 = I5 === this._sdkState.userId, A3 || L5 || T4 > 0 && w4.myLastRead < T4 && w4.unreadMessageCount > 0 && w4._updateUnreadCount(w4.unreadMessageCount - 1, 0), this._dispatcher.dispatch(new eo({ messageIds: [S6], source: Ks.EVENT_MESSAGE_DELETED })), os(function() {
              return r(Dn3, void 0, void 0, function() {
                var e4, t8, n5, s7, r5;
                return s(this, function(a5) {
                  try {
                    for (e4 = o(this._groupChannelHandlers.values()), t8 = e4.next(); !t8.done; t8 = e4.next()) (n5 = t8.value).onMessageDeleted && n5.onMessageDeleted(w4, S6);
                  } catch (e5) {
                    s7 = { error: e5 };
                  } finally {
                    try {
                      t8 && !t8.done && (r5 = e4.return) && r5.call(e4);
                    } finally {
                      if (s7) throw s7.error;
                    }
                  }
                  return [2];
                });
              });
            }), xn3.label = 9;
          case 9:
            return [3, 79];
          case 10:
            return (D3 = e3.as(Ye2).readStatus).channelType !== q.GROUP ? [3, 12] : (V2 = this._groupChannelCache.isCachedInMemory(D3.channelUrl), [4, this.getChannel(D3.channelUrl, true)]);
          case 11:
            x2 = xn3.sent(), V2 && x2._updateUnreadMemberState(D3.reader.userId, D3.readAt), D3.reader.userId === this._sdkState.userId ? V2 ? (x2.unreadMessageCount > 0 || x2.unreadMentionCount > 0) && (x2._updateUnreadCount(0, 0), this._dispatcher.dispatch(new En2({ channels: [x2], context: { source: Ks.EVENT_CHANNEL_READ } })), os(function() {
              return r(Dn3, void 0, void 0, function() {
                var e4, t8, n5, s7, r5;
                return s(this, function(a5) {
                  try {
                    for (e4 = o(this._groupChannelHandlers.values()), t8 = e4.next(); !t8.done; t8 = e4.next()) (n5 = t8.value).onChannelChanged && n5.onChannelChanged(x2);
                  } catch (e5) {
                    s7 = { error: e5 };
                  } finally {
                    try {
                      t8 && !t8.done && (r5 = e4.return) && r5.call(e4);
                    } finally {
                      if (s7) throw s7.error;
                    }
                  }
                  return [2];
                });
              });
            })) : 0 !== x2.unreadMessageCount && 0 !== x2.unreadMentionCount || (this._dispatcher.dispatch(new En2({ channels: [x2], context: { source: Ks.EVENT_CHANNEL_READ } })), os(function() {
              return r(Dn3, void 0, void 0, function() {
                var e4, t8, n5, s7, r5;
                return s(this, function(a5) {
                  try {
                    for (e4 = o(this._groupChannelHandlers.values()), t8 = e4.next(); !t8.done; t8 = e4.next()) (n5 = t8.value).onChannelChanged && n5.onChannelChanged(x2);
                  } catch (e5) {
                    s7 = { error: e5 };
                  } finally {
                    try {
                      t8 && !t8.done && (r5 = e4.return) && r5.call(e4);
                    } finally {
                      if (s7) throw s7.error;
                    }
                  }
                  return [2];
                });
              });
            })) : (this._dispatcher.dispatch(new En2({ channels: [x2], context: { source: Ks.EVENT_CHANNEL_READ } })), os(function() {
              return r(Dn3, void 0, void 0, function() {
                var e4, t8, n5, s7, r5;
                return s(this, function(a5) {
                  try {
                    for (e4 = o(this._groupChannelHandlers.values()), t8 = e4.next(); !t8.done; t8 = e4.next()) (n5 = t8.value).onUnreadMemberStatusUpdated && n5.onUnreadMemberStatusUpdated(x2);
                  } catch (e5) {
                    s7 = { error: e5 };
                  } finally {
                    try {
                      t8 && !t8.done && (r5 = e4.return) && r5.call(e4);
                    } finally {
                      if (s7) throw s7.error;
                    }
                  }
                  return [2];
                });
              });
            })), xn3.label = 12;
          case 12:
            return [3, 79];
          case 13:
            return R4 = e3.as(hs3), me3 = R4.channelUrl, F2 = R4.deliveredStateUpdate, k3 = void 0 === F2 ? {} : F2, V2 = this._groupChannelCache.isCachedInMemory(me3), [4, this.getChannel(me3, true)];
          case 14:
            return K4 = xn3.sent(), V2 && Object.keys(k3).forEach(function(e4) {
              K4._updateUndeliveredMemberState(e4, k3[e4]);
            }), Object.keys(k3).some(function(e4) {
              return e4 !== Dn3._sdkState.userId;
            }) && (this._dispatcher.dispatch(new En2({ channels: [K4], context: { source: Ks.EVENT_CHANNEL_DELIVERED } })), os(function() {
              return r(Dn3, void 0, void 0, function() {
                var e4, t8, n5, s7, r5;
                return s(this, function(a5) {
                  try {
                    for (e4 = o(this._groupChannelHandlers.values()), t8 = e4.next(); !t8.done; t8 = e4.next()) (n5 = t8.value).onUndeliveredMemberStatusUpdated && n5.onUndeliveredMemberStatusUpdated(K4);
                  } catch (e5) {
                    s7 = { error: e5 };
                  } finally {
                    try {
                      t8 && !t8.done && (r5 = e4.return) && r5.call(e4);
                    } finally {
                      if (s7) throw s7.error;
                    }
                  }
                  return [2];
                });
              });
            })), [3, 79];
          case 15:
            return X3 = e3.as(U), me3 = X3.channelUrl, ge3 = X3.channelType, Z2 = X3.event, ge3 !== q.GROUP ? [3, 18] : [4, this.getChannel(me3, true)];
          case 16:
            return $2 = xn3.sent(), [4, this.getMessageFromCache(Z2.messageId)];
          case 17:
            (ne = xn3.sent()) ? ne instanceof pt && (ne.applyReactionEvent(Z2), this._dispatcher.dispatch(new $s({ messages: [ne], source: Ks.EVENT_MESSAGE_REACTION_UPDATED }))) : this._dispatcher.dispatch(new to({ event: Z2, source: Ks.EVENT_MESSAGE_REACTION_UPDATED })), os(function() {
              return r(Dn3, void 0, void 0, function() {
                var e4, t8, n5, s7, r5;
                return s(this, function(a5) {
                  try {
                    for (e4 = o(this._groupChannelHandlers.values()), t8 = e4.next(); !t8.done; t8 = e4.next()) (n5 = t8.value).onReactionUpdated && n5.onReactionUpdated($2, Z2);
                  } catch (e5) {
                    s7 = { error: e5 };
                  } finally {
                    try {
                      t8 && !t8.done && (r5 = e4.return) && r5.call(e4);
                    } finally {
                      if (s7) throw s7.error;
                    }
                  }
                  return [2];
                });
              });
            }), xn3.label = 18;
          case 18:
            return [3, 79];
          case 19:
            return (ee = e3.as(M2).event).channelType !== q.GROUP ? [3, 22] : [4, this.getChannel(ee.channelUrl, true)];
          case 20:
            return te2 = xn3.sent(), [4, this.getMessageFromCache(ee.targetMessageId)];
          case 21:
            (ne = xn3.sent()) ? ne instanceof pt && (ne.applyThreadInfoUpdateEvent(ee), this._dispatcher.dispatch(new $s({ messages: [ne], source: Ks.EVENT_MESSAGE_THREADINFO_UPDATED }))) : this._dispatcher.dispatch(new no({ event: ee, source: Ks.EVENT_MESSAGE_THREADINFO_UPDATED })), os(function() {
              return r(Dn3, void 0, void 0, function() {
                var e4, t8, n5, s7, r5;
                return s(this, function(a5) {
                  try {
                    for (e4 = o(this._groupChannelHandlers.values()), t8 = e4.next(); !t8.done; t8 = e4.next()) (n5 = t8.value).onThreadInfoUpdated && n5.onThreadInfoUpdated(te2, ee);
                  } catch (e5) {
                    s7 = { error: e5 };
                  } finally {
                    try {
                      t8 && !t8.done && (r5 = e4.return) && r5.call(e4);
                    } finally {
                      if (s7) throw s7.error;
                    }
                  }
                  return [2];
                });
              });
            }), xn3.label = 22;
          case 22:
            return [3, 79];
          case 23:
            se2 = e3.as(y2).groupChannelMemberCounts, re2 = [], xn3.label = 24;
          case 24:
            xn3.trys.push([24, 29, 30, 31]), ae = o(se2), ie2 = ae.next(), xn3.label = 25;
          case 25:
            return ie2.done ? [3, 28] : (oe2 = ie2.value, me3 = oe2.channelUrl, ct2 = oe2.memberCount, lt2 = oe2.joinedMemberCount, ue = oe2.updatedAt, [4, this.getChannelFromCache(me3)]);
          case 26:
            (ce2 = xn3.sent()) && ce2._setLatestMemberCount(ct2, lt2, ue) && re2.push(ce2), xn3.label = 27;
          case 27:
            return ie2 = ae.next(), [3, 25];
          case 28:
            return [3, 31];
          case 29:
            return le2 = xn3.sent(), Nn3 = { error: le2 }, [3, 31];
          case 30:
            try {
              ie2 && !ie2.done && (Un3 = ae.return) && Un3.call(ae);
            } finally {
              if (Nn3) throw Nn3.error;
            }
            return [7];
          case 31:
            return re2.length > 0 && (this._dispatcher.dispatch(new En2({ channels: re2, context: { source: Ks.EVENT_CHANNEL_MEMBER_COUNT_UPDATED } })), os(function() {
              return r(Dn3, void 0, void 0, function() {
                var e4, t8, n5, s7, r5;
                return s(this, function(a5) {
                  try {
                    for (e4 = o(this._groupChannelHandlers.values()), t8 = e4.next(); !t8.done; t8 = e4.next()) (n5 = t8.value).onChannelMemberCountChanged && n5.onChannelMemberCountChanged(re2);
                  } catch (e5) {
                    s7 = { error: e5 };
                  } finally {
                    try {
                      t8 && !t8.done && (r5 = e4.return) && r5.call(e4);
                    } finally {
                      if (s7) throw s7.error;
                    }
                  }
                  return [2];
                });
              });
            })), [3, 79];
          case 32:
            return he2 = e3.as(b2), de2 = he2.event, _e3 = he2.status, me3 = he2.channelUrl, ge3 = he2.channelType, me3 && ge3 === q.GROUP ? [4, this.getChannel(me3, true)] : [3, 34];
          case 33:
            pe2 = xn3.sent(), this._dispatcher.dispatch(new so({ event: de2, source: Ks.EVENT_POLL_UPDATED })), os(_e3 === ao ? function() {
              return r(Dn3, void 0, void 0, function() {
                var e4, t8, n5, s7, r5;
                return s(this, function(a5) {
                  try {
                    for (e4 = o(this._groupChannelHandlers.values()), t8 = e4.next(); !t8.done; t8 = e4.next()) (n5 = t8.value).onPollDeleted && n5.onPollDeleted(pe2, de2.pollId);
                  } catch (e5) {
                    s7 = { error: e5 };
                  } finally {
                    try {
                      t8 && !t8.done && (r5 = e4.return) && r5.call(e4);
                    } finally {
                      if (s7) throw s7.error;
                    }
                  }
                  return [2];
                });
              });
            } : function() {
              return r(Dn3, void 0, void 0, function() {
                var e4, t8, n5, s7, r5;
                return s(this, function(a5) {
                  try {
                    for (e4 = o(this._groupChannelHandlers.values()), t8 = e4.next(); !t8.done; t8 = e4.next()) (n5 = t8.value).onPollUpdated && n5.onPollUpdated(pe2, de2);
                  } catch (e5) {
                    s7 = { error: e5 };
                  } finally {
                    try {
                      t8 && !t8.done && (r5 = e4.return) && r5.call(e4);
                    } finally {
                      if (s7) throw s7.error;
                    }
                  }
                  return [2];
                });
              });
            }), xn3.label = 34;
          case 34:
            return [3, 79];
          case 35:
            return fe2 = e3.as(zr2), ve3 = fe2.event, me3 = fe2.channelUrl, ge3 = fe2.channelType, me3 && ge3 === q.GROUP ? [4, this.getChannel(me3, true)] : [3, 37];
          case 36:
            Ee3 = xn3.sent(), this._dispatcher.dispatch(new oo({ event: ve3, source: Ks.EVENT_POLL_VOTED })), os(function() {
              return r(Dn3, void 0, void 0, function() {
                var e4, t8, n5, s7, r5;
                return s(this, function(a5) {
                  try {
                    for (e4 = o(this._groupChannelHandlers.values()), t8 = e4.next(); !t8.done; t8 = e4.next()) (n5 = t8.value).onPollVoted && n5.onPollVoted(Ee3, ve3);
                  } catch (e5) {
                    s7 = { error: e5 };
                  } finally {
                    try {
                      t8 && !t8.done && (r5 = e4.return) && r5.call(e4);
                    } finally {
                      if (s7) throw s7.error;
                    }
                  }
                  return [2];
                });
              });
            }), xn3.label = 37;
          case 37:
            return [3, 79];
          case 38:
            if (!(Ce4 = e3.as(v3).event).isGroupChannelEvent) return [3, 77];
            switch (Ce4.category) {
              case f2.CHANNEL_JOIN:
                return [3, 39];
              case f2.CHANNEL_LEAVE:
                return [3, 41];
              case f2.CHANNEL_OPERATOR_UPDATE:
                return [3, 45];
              case f2.CHANNEL_INVITE:
                return [3, 47];
              case f2.CHANNEL_DECLINE_INVITE:
                return [3, 49];
              case f2.TYPING_START:
              case f2.TYPING_END:
                return [3, 51];
              case f2.USER_CHANNEL_MUTE:
              case f2.USER_CHANNEL_UNMUTE:
                return [3, 53];
              case f2.USER_CHANNEL_BAN:
                return [3, 55];
              case f2.USER_CHANNEL_UNBAN:
                return [3, 59];
              case f2.CHANNEL_FREEZE:
              case f2.CHANNEL_UNFREEZE:
                return [3, 61];
              case f2.CHANNEL_HIDE:
                return [3, 63];
              case f2.CHANNEL_UNHIDE:
                return [3, 65];
              case f2.CHANNEL_DELETED:
                return [3, 67];
              case f2.CHANNEL_PROP_CHANGED:
                return [3, 69];
              case f2.CHANNEL_META_DATA_CHANGED:
                return [3, 71];
              case f2.CHANNEL_META_COUNTERS_CHANGED:
                return [3, 73];
              case f2.PINNED_MESSAGE_CHANGED:
                return [3, 75];
            }
            return [3, 77];
          case 39:
            return [4, this.getChannel(Ce4.channelUrl, true)];
          case 40:
            return ye3 = xn3.sent(), Me3 = e3.as(jn2), be3 = Me3.memberCount, Ne3 = Me3.joinedMemberCount, Ue3 = Me3.members, Se = false, Ue3.forEach(function(e4) {
              ye3.isExclusive || ye3.isSuper || ye3.isBroadcast ? Se = Se || ye3._setLatestMemberCount(be3, Ne3, Ce4.ts) : (e4.state = Wt2.JOINED, ye3.addMember(e4, Ce4.ts), Dn3._updateJoinedMemberCount(ye3)), e4.userId === Dn3._sdkState.userId && (ye3.myMemberState = Wt2.JOINED);
            }), this._dispatcher.dispatch(new En2({ channels: [ye3], context: { source: Ks.EVENT_CHANNEL_JOINED, users: Ue3 } })), os(function() {
              return r(Dn3, void 0, void 0, function() {
                return s(this, function(e4) {
                  return this._groupChannelHandlers.forEach(function(e5) {
                    var t8, n5;
                    try {
                      for (var s7 = o(Ue3), r5 = s7.next(); !r5.done; r5 = s7.next()) {
                        var a5 = r5.value;
                        e5.onUserJoined && e5.onUserJoined(ye3, a5);
                      }
                    } catch (e6) {
                      t8 = { error: e6 };
                    } finally {
                      try {
                        r5 && !r5.done && (n5 = s7.return) && n5.call(s7);
                      } finally {
                        if (t8) throw t8.error;
                      }
                    }
                    ye3.isBroadcast && Se && e5.onChannelMemberCountChanged && e5.onChannelMemberCountChanged([ye3]);
                  }), [2];
                });
              });
            }), [3, 77];
          case 41:
            return (Mt3 = this._leftChannels.get(Ce4.channelUrl)) ? (Te2 = Mt3.channel, [3, 44]) : [3, 42];
          case 42:
            return [4, this.getChannel(Ce4.channelUrl, true)];
          case 43:
            Te2 = xn3.sent(), xn3.label = 44;
          case 44:
            return Ae3 = Te2, Ie3 = e3.as(Qn2), ct2 = Ie3.memberCount, lt2 = Ie3.joinedMemberCount, we2 = Ie3.member, Le4 = false, De5 = Ws.of(this._iid).appInfo, Ae3.isExclusive || Ae3.isSuper || Ae3.isBroadcast ? Le4 = Ae3._setLatestMemberCount(ct2, lt2, Ce4.ts) : ((null == De5 ? void 0 : De5.enabledChannelMemberShipHistory) ? ((Ye4 = Ae3.members.find(function(e4) {
              return e4.userId === we2.userId;
            })) && (Ye4.state = Wt2.LEFT), Ae3.memberCount = ct2) : Ae3.removeMember(we2), this._updateJoinedMemberCount(Ae3)), we2.userId === this._sdkState.userId ? (Ae3.myMemberState = Wt2.NONE, Ae3.invitedAt = 0, Ae3.joinedAt = 0, Ae3._updateUnreadCount(0, 0), Ae3.isPublic ? this._dispatcher.dispatch(new En2({ channels: [Ae3], context: { source: Ks.EVENT_CHANNEL_LEFT, user: we2 } })) : (this._markAsLeave(Ae3), this._dispatcher.dispatch(new Cn2({ channelUrls: [Ae3.url], context: { source: Ks.EVENT_CHANNEL_LEFT, user: we2 } })))) : this._dispatcher.dispatch(new En2({ channels: [Ae3], context: { source: Ks.EVENT_CHANNEL_LEFT, user: we2 } })), os(function() {
              return r(Dn3, void 0, void 0, function() {
                return s(this, function(e4) {
                  return this._groupChannelHandlers.forEach(function(e5) {
                    e5.onUserLeft && e5.onUserLeft(Ae3, we2), Ae3.isBroadcast && Le4 && e5.onChannelMemberCountChanged && e5.onChannelMemberCountChanged([Ae3]);
                  }), [2];
                });
              });
            }), [3, 77];
          case 45:
            return [4, this.getChannel(Ce4.channelUrl, true)];
          case 46:
            Ke3 = xn3.sent(), Je4 = e3.as(T2).operators, Xe3 = Je4.map(function(e4) {
              return e4.userId;
            });
            try {
              for (Ze4 = o(Ke3.members), $e3 = Ze4.next(); !$e3.done; $e3 = Ze4.next()) (yt3 = $e3.value).role = Xe3.includes(yt3.userId) ? V.OPERATOR : V.NONE;
            } catch (e4) {
              Sn4 = { error: e4 };
            } finally {
              try {
                $e3 && !$e3.done && (An3 = Ze4.return) && An3.call(Ze4);
              } finally {
                if (Sn4) throw Sn4.error;
              }
            }
            return Ke3.myRole = Xe3.includes(this._sdkState.userId) ? V.OPERATOR : V.NONE, this._dispatcher.dispatch(new En2({ channels: [Ke3], context: { source: Ks.EVENT_CHANNEL_OPERATOR_UPDATED, operators: Je4 } })), os(function() {
              return r(Dn3, void 0, void 0, function() {
                return s(this, function(e4) {
                  return this._groupChannelHandlers.forEach(function(e5) {
                    e5.onOperatorUpdated && e5.onOperatorUpdated(Ke3, Je4);
                  }), [2];
                });
              });
            }), [3, 77];
          case 47:
            return [4, this.getChannel(Ce4.channelUrl, true)];
          case 48:
            et3 = xn3.sent(), tt3 = e3.as(Jn2), ct2 = tt3.memberCount, lt2 = tt3.joinedMemberCount, nt3 = tt3.inviter, (st3 = tt3.invitees).forEach(function(e4) {
              return e4.state = Wt2.INVITED;
            });
            try {
              for (rt2 = o(st3), at2 = rt2.next(); !at2.done; at2 = rt2.next()) it3 = at2.value, et3.isExclusive || et3.isSuper || et3.isBroadcast ? et3._setLatestMemberCount(ct2, lt2, Ce4.ts) : et3.addMember(it3, Ce4.ts), this._sdkState.userId === it3.userId && (et3.hiddenState = tr2.UNHIDDEN, et3.myMemberState !== Wt2.JOINED && (et3.myMemberState = Wt2.INVITED), et3.invitedAt = Ce4.ts);
            } catch (e4) {
              Tn3 = { error: e4 };
            } finally {
              try {
                at2 && !at2.done && (In4 = rt2.return) && In4.call(rt2);
              } finally {
                if (Tn3) throw Tn3.error;
              }
            }
            return this._dispatcher.dispatch(new En2({ channels: [et3], context: { source: Ks.EVENT_CHANNEL_INVITED, inviter: nt3, invitees: st3 } })), os(function() {
              return r(Dn3, void 0, void 0, function() {
                return s(this, function(e4) {
                  return this._groupChannelHandlers.forEach(function(e5) {
                    e5.onUserReceivedInvitation && e5.onUserReceivedInvitation(et3, nt3, st3);
                  }), [2];
                });
              });
            }), [3, 77];
          case 49:
            return [4, this.getChannel(Ce4.channelUrl, true)];
          case 50:
            return ot2 = xn3.sent(), ut2 = e3.as(Zn2), ct2 = ut2.memberCount, lt2 = ut2.joinedMemberCount, ht2 = ut2.inviter, dt2 = ut2.invitee, ot2.isExclusive || ot2.isSuper || ot2.isBroadcast ? ot2._setLatestMemberCount(ct2, lt2, Ce4.ts) : ot2.removeMember(dt2), this._sdkState.userId === dt2.userId ? (ot2.invitedAt = 0, ot2.myMemberState = Wt2.NONE, ot2.isPublic ? this._dispatcher.dispatch(new En2({ channels: [ot2], context: { source: Ks.EVENT_CHANNEL_DECLINED_INVITE, inviter: ht2, invitee: dt2 } })) : this._dispatcher.dispatch(new Cn2({ channelUrls: [ot2.url], context: { source: Ks.EVENT_CHANNEL_DECLINED_INVITE, inviter: ht2, invitee: dt2 } }))) : this._dispatcher.dispatch(new En2({ channels: [ot2], context: { source: Ks.EVENT_CHANNEL_DECLINED_INVITE, inviter: ht2, invitee: dt2 } })), os(function() {
              return r(Dn3, void 0, void 0, function() {
                return s(this, function(e4) {
                  return this._groupChannelHandlers.forEach(function(e5) {
                    e5.onUserDeclinedInvitation && e5.onUserDeclinedInvitation(ot2, ht2, dt2);
                  }), [2];
                });
              });
            }), [3, 77];
          case 51:
            return [4, this.getChannel(Ce4.channelUrl, true)];
          case 52:
            return _t3 = xn3.sent(), pt2 = Ce4.category === f2.TYPING_START, ft2 = e3.as(pt2 ? rs2 : is2).user, _t3._updateTypingStatus(ft2, pt2 ? Ce4.ts : 0), this._dispatcher.dispatch(new En2({ channels: [_t3], context: { source: Ks.EVENT_CHANNEL_TYPING_STATUS_UPDATE } })), os(function() {
              return r(Dn3, void 0, void 0, function() {
                return s(this, function(e4) {
                  return this._groupChannelHandlers.forEach(function(e5) {
                    e5.onTypingStatusUpdated && e5.onTypingStatusUpdated(_t3);
                  }), [2];
                });
              });
            }), [3, 77];
          case 53:
            return [4, this.getChannel(Ce4.channelUrl, true)];
          case 54:
            vt3 = xn3.sent(), mt3 = Ce4.category === f2.USER_CHANNEL_MUTE, (gt3 = e3.as(mt3 ? tr : rr).user).userId === this._sdkState.userId && (vt3.myMutedState = mt3 ? H.MUTED : H.UNMUTED, vt3._myMutedRemainingTime = gt3.restrictionInfo.remainingDuration);
            try {
              for (Et3 = o(vt3.members), Ct3 = Et3.next(); !Ct3.done; Ct3 = Et3.next()) if ((yt3 = Ct3.value).userId === gt3.userId) {
                yt3.isMuted = mt3;
                break;
              }
            } catch (e4) {
              wn4 = { error: e4 };
            } finally {
              try {
                Ct3 && !Ct3.done && (Ln3 = Et3.return) && Ln3.call(Et3);
              } finally {
                if (wn4) throw wn4.error;
              }
            }
            return this._dispatcher.dispatch(new En2({ channels: [vt3], context: { source: mt3 ? Ks.EVENT_CHANNEL_MUTED : Ks.EVENT_CHANNEL_UNMUTED, user: gt3 } })), os(function() {
              return r(Dn3, void 0, void 0, function() {
                return s(this, function(e4) {
                  return this._groupChannelHandlers.forEach(function(e5) {
                    mt3 ? e5.onUserMuted && e5.onUserMuted(vt3, gt3) : e5.onUserUnmuted && e5.onUserUnmuted(vt3, gt3);
                  }), [2];
                });
              });
            }), [3, 77];
          case 55:
            return (Mt3 = this._leftChannels.get(Ce4.channelUrl)) ? (Nt3 = Mt3.channel, [3, 58]) : [3, 56];
          case 56:
            return [4, this.getChannel(Ce4.channelUrl, true)];
          case 57:
            Nt3 = xn3.sent(), xn3.label = 58;
          case 58:
            return bt3 = Nt3, this._markAsLeave(bt3), Ut3 = e3.as(sr).user, Ut3.userId === this._sdkState.userId && this._dispatcher.dispatch(new Cn2({ channelUrls: [bt3.url], context: { source: Ks.EVENT_CHANNEL_BANNED, user: Ut3 } })), os(function() {
              return r(Dn3, void 0, void 0, function() {
                return s(this, function(e4) {
                  return this._groupChannelHandlers.forEach(function(e5) {
                    e5.onUserBanned && e5.onUserBanned(bt3, Ut3);
                  }), [2];
                });
              });
            }), [3, 77];
          case 59:
            return [4, this.getChannel(Ce4.channelUrl, true)];
          case 60:
            return St3 = xn3.sent(), At3 = e3.as(or).user, At3.userId === this._sdkState.userId && this._dispatcher.dispatch(new Cn2({ channelUrls: [St3.url], context: { source: Ks.EVENT_CHANNEL_UNBANNED, user: At3 } })), os(function() {
              return r(Dn3, void 0, void 0, function() {
                return s(this, function(e4) {
                  return this._groupChannelHandlers.forEach(function(e5) {
                    e5.onUserUnbanned && e5.onUserUnbanned(St3, At3);
                  }), [2];
                });
              });
            }), [3, 77];
          case 61:
            return [4, this.getChannel(Ce4.channelUrl, true)];
          case 62:
            return Tt3 = xn3.sent(), It3 = e3.as(cr).freeze, Tt3.isFrozen = It3, this._dispatcher.dispatch(new En2({ channels: [Tt3], context: { source: It3 ? Ks.EVENT_CHANNEL_FROZEN : Ks.EVENT_CHANNEL_UNFROZEN } })), os(function() {
              return r(Dn3, void 0, void 0, function() {
                return s(this, function(e4) {
                  return this._groupChannelHandlers.forEach(function(e5) {
                    It3 ? e5.onChannelFrozen && e5.onChannelFrozen(Tt3) : e5.onChannelUnfrozen && e5.onChannelUnfrozen(Tt3);
                  }), [2];
                });
              });
            }), [3, 77];
          case 63:
            return [4, this.getChannel(Ce4.channelUrl, true)];
          case 64:
            return wt3 = xn3.sent(), Rt3 = e3.as(ns3), Pt3 = Rt3.allowAutoUnhide, Qt4 = Rt3.hidePreviousMessages, Yt4 = Rt3.messageOffsetTimestamp, null !== Pt3 && (wt3.hiddenState = Pt3 ? tr2.HIDDEN_ALLOW_AUTO_UNHIDE : tr2.HIDDEN_PREVENT_AUTO_UNHIDE), null !== Qt4 && Qt4 && wt3._updateUnreadCount(0, 0), null !== Yt4 && (wt3.messageOffsetTimestamp = Yt4), this._dispatcher.dispatch(new En2({ channels: [wt3], context: { source: Ks.EVENT_CHANNEL_HIDDEN } })), os(function() {
              return r(Dn3, void 0, void 0, function() {
                return s(this, function(e4) {
                  return this._groupChannelHandlers.forEach(function(e5) {
                    e5.onChannelHidden && e5.onChannelHidden(wt3);
                  }), [2];
                });
              });
            }), [3, 77];
          case 65:
            return [4, this.getChannel(Ce4.channelUrl, true)];
          case 66:
            return (Kt4 = xn3.sent()).hiddenState = tr2.UNHIDDEN, this._dispatcher.dispatch(new En2({ channels: [Kt4], context: { source: Ks.EVENT_CHANNEL_UNHIDDEN } })), os(function() {
              return r(Dn3, void 0, void 0, function() {
                return s(this, function(e4) {
                  return this._groupChannelHandlers.forEach(function(e5) {
                    e5.onChannelChanged && e5.onChannelChanged(Kt4);
                  }), [2];
                });
              });
            }), [3, 77];
          case 67:
            return [4, this.getChannel(Ce4.channelUrl, true)];
          case 68:
            return Jt4 = xn3.sent(), this._dispatcher.dispatch(new Cn2({ channelUrls: [Ce4.channelUrl], context: { source: Ks.EVENT_CHANNEL_DELETED } })), os(function() {
              return r(Dn3, void 0, void 0, function() {
                return s(this, function(e4) {
                  return this._groupChannelHandlers.forEach(function(e5) {
                    e5.onChannelDeleted && e5.onChannelDeleted(Jt4.url, Jt4.channelType);
                  }), [2];
                });
              });
            }), [3, 77];
          case 69:
            return [4, this.getChannelWithoutCache(Ce4.channelUrl, true)];
          case 70:
            return Xt4 = xn3.sent(), this._dispatcher.dispatch(new En2({ channels: [Xt4], context: { source: Ks.EVENT_CHANNEL_UPDATED } })), os(function() {
              return r(Dn3, void 0, void 0, function() {
                return s(this, function(e4) {
                  return this._groupChannelHandlers.forEach(function(e5) {
                    e5.onChannelChanged && e5.onChannelChanged(Xt4);
                  }), [2];
                });
              });
            }), [3, 77];
          case 71:
            return [4, this.getChannel(Ce4.channelUrl, true)];
          case 72:
            return Zt4 = xn3.sent(), $t4 = e3.as(zn), en4 = $t4.created, tn4 = $t4.updated, nn4 = $t4.deleted, en4 && (Zt4._upsertCachedMetaData(en4, Ce4.ts), this._dispatcher.dispatch(new En2({ channels: [Zt4], context: { source: Ks.EVENT_CHANNEL_METADATA_CREATED, metaData: en4 }, ts: Ce4.ts }))), tn4 && (Zt4._upsertCachedMetaData(tn4, Ce4.ts), this._dispatcher.dispatch(new En2({ channels: [Zt4], context: { source: Ks.EVENT_CHANNEL_METADATA_UPDATED, metaData: tn4 }, ts: Ce4.ts }))), nn4 && (Zt4._removeFromCachedMetaData(nn4, Ce4.ts), this._dispatcher.dispatch(new En2({ channels: [Zt4], context: { source: Ks.EVENT_CHANNEL_METADATA_DELETED, metaDataKeys: nn4 }, ts: Ce4.ts }))), os(function() {
              return r(Dn3, void 0, void 0, function() {
                return s(this, function(e4) {
                  return this._groupChannelHandlers.forEach(function(e5) {
                    en4 && e5.onMetaDataCreated && e5.onMetaDataCreated(Zt4, en4), tn4 && e5.onMetaDataUpdated && e5.onMetaDataUpdated(Zt4, tn4), nn4 && e5.onMetaDataDeleted && e5.onMetaDataDeleted(Zt4, nn4);
                  }), [2];
                });
              });
            }), [3, 77];
          case 73:
            return [4, this.getChannel(Ce4.channelUrl, true)];
          case 74:
            return sn4 = xn3.sent(), rn4 = e3.as(Xn), an4 = rn4.created, on4 = rn4.updated, un4 = rn4.deleted, an4 && this._dispatcher.dispatch(new En2({ channels: [sn4], context: { source: Ks.EVENT_CHANNEL_METACOUNTER_CREATED, metaCounters: an4 } })), on4 && this._dispatcher.dispatch(new En2({ channels: [sn4], context: { source: Ks.EVENT_CHANNEL_METACOUNTER_UPDATED, metaCounters: on4 } })), un4 && this._dispatcher.dispatch(new En2({ channels: [sn4], context: { source: Ks.EVENT_CHANNEL_METACOUNTER_DELETED, metaCounterKeys: un4 } })), os(function() {
              return r(Dn3, void 0, void 0, function() {
                return s(this, function(e4) {
                  return this._groupChannelHandlers.forEach(function(e5) {
                    an4 && e5.onMetaCounterCreated && e5.onMetaCounterCreated(sn4, an4), on4 && e5.onMetaCounterUpdated && e5.onMetaCounterUpdated(sn4, on4), un4 && e5.onMetaCounterDeleted && e5.onMetaCounterDeleted(sn4, un4);
                  }), [2];
                });
              });
            }), [3, 77];
          case 75:
            return [4, this.getChannel(Ce4.channelUrl, true)];
          case 76:
            return cn4 = xn3.sent(), ln4 = e3.as(g2), hn4 = ln4.pinnedMessageIds, dn4 = ln4.latestPinnedMessage, (_n4 = ln4.ts) > cn4._pinnedMessagesUpdatedAt && (cn4.pinnedMessageIds = null != hn4 ? hn4 : [], cn4.lastPinnedMessage = dn4, cn4._pinnedMessagesUpdatedAt = _n4, this._dispatcher.dispatch(new En2({ channels: [cn4], context: { source: Ks.EVENT_PINNED_MESSAGE_UPDATED } })), os(function() {
              return r(Dn3, void 0, void 0, function() {
                var e4, t8, n5, s7, r5;
                return s(this, function(a5) {
                  try {
                    for (e4 = o(this._groupChannelHandlers.values()), t8 = e4.next(); !t8.done; t8 = e4.next()) (n5 = t8.value).onChannelChanged && n5.onChannelChanged(cn4);
                  } catch (e5) {
                    s7 = { error: e5 };
                  } finally {
                    try {
                      t8 && !t8.done && (r5 = e4.return) && r5.call(e4);
                    } finally {
                      if (s7) throw s7.error;
                    }
                  }
                  return [2];
                });
              });
            }), os(function() {
              return r(Dn3, void 0, void 0, function() {
                return s(this, function(e4) {
                  return this._groupChannelHandlers.forEach(function(e5) {
                    e5.onPinnedMessageUpdated && e5.onPinnedMessageUpdated(cn4);
                  }), [2];
                });
              });
            })), [3, 77];
          case 77:
            return [3, 79];
          case 78:
            switch ((pn4 = e3.as(T).event).category) {
              case C2.USER_BLOCK:
                fn4 = N2.getDataAsUserBlockEvent(this._iid, pn4), mn4 = fn4.blocker, gn4 = fn4.blockee, this._groupChannelCache.block(mn4.userId, gn4.userId);
                break;
              case C2.USER_UNBLOCK:
                vn4 = N2.getDataAsUserBlockEvent(this._iid, pn4), mn4 = vn4.blocker, gn4 = vn4.blockee, this._groupChannelCache.unblock(mn4.userId, gn4.userId);
            }
            return [3, 79];
          case 79:
            return [3, 81];
          case 80:
            if (yn4 = xn3.sent(), g(yn4)) throw yn4;
            return [3, 81];
          case 81:
            return [2];
        }
      });
    });
  }, u4.prototype._markAsLeave = function(e3) {
    var t7, n4 = this, s6 = null !== (t7 = this._leftChannels.get(e3.url)) && void 0 !== t7 ? t7 : { channel: e3, ref: 0 };
    s6.ref++, this._leftChannels.set(e3.url, s6), setTimeout(function() {
      s6.ref--, 0 === s6.ref && n4._leftChannels.delete(e3.url);
    }, 1e4);
  }, u4.prototype.addHandler = function(e3, t7) {
    this._groupChannelHandlers.set(e3, t7);
  }, u4.prototype.removeHandler = function(e3) {
    this._groupChannelHandlers.delete(e3);
  }, u4.prototype.clearHandler = function() {
    this._groupChannelHandlers.clear();
  }, u4.prototype.subscribeChannelEvent = function(e3, t7) {
    this._groupChannelBroadcast.subscribe(e3, t7);
  }, u4.prototype.unsubscribeChannelEvent = function(e3) {
    this._groupChannelBroadcast.unsubscribe(e3);
  }, u4.prototype._updateJoinedMemberCount = function(e3) {
    e3.joinedMemberCount = e3.members.filter(function(e4) {
      return e4.state === Wt2.JOINED;
    }).length;
  }, u4.prototype.getChannel = function(e3, t7) {
    return void 0 === t7 && (t7 = false), r(this, void 0, void 0, function() {
      var n4;
      return s(this, function(s6) {
        switch (s6.label) {
          case 0:
            Jr(w("string", e3)).throw(v.invalidParameters), s6.label = 1;
          case 1:
            return s6.trys.push([1, 3, , 4]), [4, this.getChannelFromCache(e3)];
          case 2:
            return (n4 = s6.sent()) ? [2, n4] : [3, 4];
          case 3:
            return s6.sent(), [3, 4];
          case 4:
            return [4, this.getChannelWithoutCache(e3, t7)];
          case 5:
            return [2, s6.sent()];
        }
      });
    });
  }, u4.prototype.getChannelWithoutCache = function(e3, t7) {
    return void 0 === t7 && (t7 = false), r(this, void 0, void 0, function() {
      var n4, s6, r4, a5, i4;
      return s(this, function(o4) {
        switch (o4.label) {
          case 0:
            return Jr(w("string", e3)).throw(v.invalidParameters), n4 = new Nn2({ channelUrl: e3, isInternalCall: t7 }), [4, this._requestQueue.send(n4)];
          case 1:
            switch (s6 = o4.sent(), r4 = s6.as(Un2).channel, a5 = r4.unreadMessageCount, i4 = r4.unreadMentionCount, r4.myCountPreference) {
              case er2.UNREAD_MESSAGE_COUNT_ONLY:
                i4 = 0;
                break;
              case er2.UNREAD_MENTION_COUNT_ONLY:
                a5 = 0;
                break;
              case er2.OFF:
                a5 = 0, i4 = 0;
            }
            return r4._updateUnreadCount(a5, i4), [4, this.upsertChannelsToCache([r4])];
          case 2:
            return [2, o4.sent()[0]];
        }
      });
    });
  }, u4.prototype.refreshChannel = function(e3, t7, n4, s6) {
    return void 0 === t7 && (t7 = true), void 0 === n4 && (n4 = Ks.REFRESH_CHANNEL), void 0 === s6 && (s6 = false), r(this, void 0, void 0, function() {
      var r4, a5, i4, o4, u5;
      return s(this, function(c4) {
        switch (c4.label) {
          case 0:
            return c4.trys.push([0, 5, , 6]), r4 = new Nn2({ channelUrl: e3, isInternalCall: t7, showLatestMessage: s6 }), [4, this._requestQueue.send(r4)];
          case 1:
            return a5 = c4.sent(), (i4 = a5.as(Un2).channel).myMemberState !== Wt2.NONE ? [3, 2] : (this._dispatcher.dispatch(new Cn2({ channelUrls: [i4.url], context: { source: n4 } })), [3, 4]);
          case 2:
            return [4, this.upsertChannelsToCache([i4])];
          case 3:
            o4 = c4.sent(), this._dispatcher.dispatch(new En2({ channels: o4, context: { source: n4 } })), c4.label = 4;
          case 4:
            return [3, 6];
          case 5:
            return (u5 = c4.sent()).code !== u.NON_AUTHORIZED && u5.code !== u.NOT_FOUND_IN_DATABASE || this._dispatcher.dispatch(new Cn2({ channelUrls: [e3], context: { source: n4 } })), [3, 6];
          case 6:
            return [2];
        }
      });
    });
  }, u4.prototype.getMyGroupChannels = function(e3, t7, n4, r4, a5) {
    return void 0 === r4 && (r4 = Ks.REQUEST_CHANNEL), void 0 === a5 && (a5 = false), r(this, void 0, void 0, function() {
      var i4, o4, u5, c4, l3, h4, d5, _2, p4;
      return s(this, function(f4) {
        switch (f4.label) {
          case 0:
            return t7.createdAfter && (t7.createdAfter = Math.floor(t7.createdAfter / 1e3)), t7.createdBefore && (t7.createdBefore = Math.floor(t7.createdBefore / 1e3)), i4 = false, a5 && (o4 = Ws.of(this._iid), u5 = o4.appInfo, (c4 = o4.cacheContext) && !c4.localCacheEnabled && (null == u5 ? void 0 : u5.enabledChannelMemberShipHistory) && (null == u5 ? void 0 : u5.applicationAttributes.includes("left_user_view_support")) && (i4 = true)), l3 = new An2(n(n({}, t7), { userId: this._sdkState.userId, token: e3, limit: n4, includeLeftChannel: a5 && i4 })), [4, this._requestQueue.send(l3)];
          case 1:
            return h4 = f4.sent(), d5 = h4.as(Tn2), _2 = d5.channels, p4 = d5.token, this._dispatcher.dispatch(new En2({ channels: _2, context: { source: r4 } })), [2, { channels: _2, token: p4 }];
        }
      });
    });
  }, u4.prototype.getMyGroupChannelChangeLogs = function(e3, t7, r4) {
    return void 0 === r4 && (r4 = Ks.REQUEST_CHANNEL_CHANGELOGS), r(this, void 0, void 0, function() {
      var a5, i4, o4, u5, c4, d5, _2, p4;
      return s(this, function(f4) {
        switch (f4.label) {
          case 0:
            return a5 = n(n({}, cn2), t7), Jr((w("string", e3) || w("number", e3)) && ln2(a5)).throw(v.invalidParameters), i4 = new Mn2(se({ userId: this._sdkState.userId, ts: "number" == typeof e3 ? e3 : null, token: "string" == typeof e3 ? e3 : null, filter: a5 })), [4, this._requestQueue.send(i4)];
          case 1:
            return o4 = f4.sent(), u5 = o4.as(bn2), c4 = u5.updatedChannels, d5 = u5.deletedChannelUrls, _2 = u5.hasMore, p4 = u5.ts, c4.length > 0 && this._dispatcher.dispatch(new En2({ channels: c4, context: { source: r4 }, ts: p4 })), d5.length > 0 && this._dispatcher.dispatch(new Cn2({ channelUrls: d5, context: { source: r4 } })), [2, { updatedChannels: c4, deletedChannelUrls: d5, hasMore: _2, token: u5.token }];
        }
      });
    });
  }, u4.prototype.getGroupChannelCount = function(e3) {
    return r(this, void 0, void 0, function() {
      var t7, n4, r4;
      return s(this, function(a5) {
        switch (a5.label) {
          case 0:
            return t7 = n(n({}, hn2), e3), Jr(dn2(t7)).throw(v.invalidParameters), n4 = new In2({ userId: this._sdkState.userId, filter: t7 }), [4, this._requestQueue.send(n4)];
          case 1:
            return r4 = a5.sent(), [2, r4.as(wn2).groupChannelCount];
        }
      });
    });
  }, u4.prototype.getUnreadItemCount = function(e3) {
    return r(this, void 0, void 0, function() {
      var n4, r4, a5, i4, o4, u5, c4, d5, _2, p4, v5, g4, E4, C3, y6, M5;
      return s(this, function(f4) {
        switch (f4.label) {
          case 0:
            return n4 = n(n({}, _n2), e3), Jr(function(e4) {
              return N(sn2, e4.keys) && N("string", e4.customTypeFilters, true) && N("string", e4.customTypesFilter, true);
            }(n4)).throw(v.invalidParameters), r4 = Ws.of(this._iid), a5 = r4.sdkState, i4 = r4.requestQueue, o4 = new Ln2({ userId: a5.userId, filter: n4 }), [4, i4.send(o4)];
          case 1:
            return u5 = f4.sent(), c4 = u5.as(Dn2), d5 = c4.groupChannelUnreadMentionCount, _2 = c4.groupChannelUnreadMessageCount, p4 = c4.groupChannelInvitationCount, v5 = c4.superGroupChannelUnreadMentionCount, g4 = c4.superGroupChannelUnreadMessageCount, E4 = c4.superGroupChannelInvitationCount, C3 = c4.nonSuperGroupChannelUnreadMentionCount, y6 = c4.nonSuperGroupChannelUnreadMessageCount, M5 = c4.nonSuperGroupChannelInvitationCount, [2, re({ groupChannelUnreadMentionCount: d5, groupChannelUnreadMessageCount: _2, groupChannelInvitationCount: p4, superGroupChannelUnreadMentionCount: v5, superGroupChannelUnreadMessageCount: g4, superGroupChannelInvitationCount: E4, nonSuperGroupChannelUnreadMentionCount: C3, nonSuperGroupChannelUnreadMessageCount: y6, nonSuperGroupChannelInvitationCount: M5 })];
        }
      });
    });
  }, u4.prototype.getTotalUnreadChannelCount = function() {
    return r(this, void 0, void 0, function() {
      var e3, t7, n4, s6, r4;
      return s(this, function(a5) {
        switch (a5.label) {
          case 0:
            return e3 = Ws.of(this._iid), t7 = e3.sdkState, n4 = e3.requestQueue, s6 = new xn2({ userId: t7.userId }), [4, n4.send(s6)];
          case 1:
            return r4 = a5.sent(), [2, r4.as(Rn2).unreadCount];
        }
      });
    });
  }, u4.prototype.getTotalUnreadMessageCount = function(e3) {
    return r(this, void 0, void 0, function() {
      var t7, n4, r4, a5, i4, o4;
      return s(this, function(u5) {
        switch (u5.label) {
          case 0:
            return t7 = n(n({}, pn2), e3), Jr(fn2(t7)).throw(v.invalidParameters), n4 = Ws.of(this._iid), r4 = n4.sdkState, a5 = n4.requestQueue, i4 = new Fn2({ userId: r4.userId, filter: t7 }), [4, a5.send(i4)];
          case 1:
            return o4 = u5.sent(), [2, o4.as(Pn2).unreadCount];
        }
      });
    });
  }, u4.prototype.getTotalScheduledMessageCount = function(e3) {
    return void 0 === e3 && (e3 = {}), r(this, void 0, void 0, function() {
      var t7, n4, a5, i4;
      return s(this, function(o4) {
        switch (o4.label) {
          case 0:
            return t7 = n(n({}, vn2), e3), Jr(function(e4) {
              return w("string", e4.channelUrl, true) && N(ut, e4.scheduledStatus, true) && S(G, e4.messageTypeFilter);
            }(t7)).throw(v.invalidParameters), n4 = Ws.of(this._iid).requestQueue, a5 = new kn2(t7), [4, n4.send(a5)];
          case 1:
            return i4 = o4.sent(), [2, i4.as(On2).count];
        }
      });
    });
  }, u4.prototype.getSubscribedTotalUnreadMessageCount = function() {
    var e3 = Ws.of(this._iid).subscribedUnreadMessageCount;
    return e3.all >= 0 ? e3.all : 0;
  }, u4.prototype.getSubscribedCustomTypeTotalUnreadMessageCount = function() {
    var e3 = 0, t7 = Ws.of(this._iid).subscribedUnreadMessageCount;
    return Object.keys(t7.customTypes).forEach(function(n4) {
      e3 += t7.customTypes[n4];
    }), e3;
  }, u4.prototype.getSubscribedCustomTypeUnreadMessageCount = function(e3) {
    var t7;
    return null !== (t7 = Ws.of(this._iid).subscribedUnreadMessageCount.customTypes[e3]) && void 0 !== t7 ? t7 : 0;
  }, u4.prototype.createChannel = function(e3) {
    return r(this, void 0, void 0, function() {
      var t7, n4, r4, a5;
      return s(this, function(i4) {
        switch (i4.label) {
          case 0:
            return t7 = n(n({}, on2), e3), Jr(un2(t7)).throw(v.invalidParameters), t7.isPublic || (t7.accessCode = void 0), n4 = new Vn2(n({ userId: this._sdkState.userId }, t7)), [4, this._requestQueue.send(n4)];
          case 1:
            return r4 = i4.sent(), a5 = r4.as(Gn2).channel, [4, this.upsertChannelsToCache([a5])];
          case 2:
            return i4.sent(), [2, a5];
        }
      });
    });
  }, u4.prototype.markAsReadAll = function() {
    return r(this, void 0, void 0, function() {
      var e3, t7, n4, s6, r4, a5, i4, o4;
      return s(this, function(u5) {
        switch (u5.label) {
          case 0:
            return e3 = Date.now(), Jr(e3 - this._markAsReadAllLastSentAt >= 1e3).throw(v.markAsReadAllRateLimitExceeded), this._markAsReadAllLastSentAt = e3, t7 = new Bn2({ userId: this._sdkState.userId }), [4, this._requestQueue.send(t7)];
          case 1:
            u5.sent(), n4 = this._groupChannelCache.channels;
            try {
              for (s6 = o(n4), r4 = s6.next(); !r4.done; r4 = s6.next()) (a5 = r4.value)._updateUnreadMemberState(this._sdkState.userId, e3), a5._updateUnreadCount(0, 0);
            } catch (e4) {
              i4 = { error: e4 };
            } finally {
              try {
                r4 && !r4.done && (o4 = s6.return) && o4.call(s6);
              } finally {
                if (i4) throw i4.error;
              }
            }
            return n4.length > 0 ? [4, this.upsertChannelsToCache(n4)] : [3, 3];
          case 2:
            u5.sent(), u5.label = 3;
          case 3:
            return [2];
        }
      });
    });
  }, u4.prototype.markAsReadWithChannelUrls = function(e3) {
    return r(this, void 0, void 0, function() {
      var t7, n4, s6, r4, a5, i4, o4, u5, c4;
      return s(this, function(d5) {
        switch (d5.label) {
          case 0:
            return t7 = Date.now(), Jr(N("string", e3) && t7 - this._markAsReadAllLastSentAt >= 1e3).throw(v.markAsReadAllRateLimitExceeded), this._markAsReadAllLastSentAt = t7, n4 = new Bn2({ userId: this._sdkState.userId, channelUrls: e3 }), [4, this._requestQueue.send(n4)];
          case 1:
            d5.sent(), s6 = this._groupChannelCache.channels, r4 = [];
            try {
              for (a5 = o(s6), i4 = a5.next(); !i4.done; i4 = a5.next()) o4 = i4.value, e3.includes(o4.url) && (o4._updateUnreadMemberState(this._sdkState.userId, t7), o4._updateUnreadCount(0, 0), r4.push(o4));
            } catch (e4) {
              u5 = { error: e4 };
            } finally {
              try {
                i4 && !i4.done && (c4 = a5.return) && c4.call(a5);
              } finally {
                if (u5) throw u5.error;
              }
            }
            return r4.length > 0 ? [4, this.upsertChannelsToCache(r4)] : [3, 3];
          case 2:
            d5.sent(), d5.label = 3;
          case 3:
            return [2];
        }
      });
    });
  }, u4.prototype.markAsDelivered = function(e3) {
    return r(this, void 0, void 0, function() {
      return s(this, function(t7) {
        switch (t7.label) {
          case 0:
            return [4, this.getChannel(e3)];
          case 1:
            return [4, t7.sent().markAsDelivered()];
          case 2:
            return t7.sent(), [2];
        }
      });
    });
  }, u4.prototype.getMessageFromCache = function(e3) {
    var t7;
    return r(this, void 0, void 0, function() {
      return s(this, function(n4) {
        switch (n4.label) {
          case 0:
            return [4, this._messageCache.get(e3)];
          case 1:
            return [2, null !== (t7 = n4.sent()) && void 0 !== t7 ? t7 : null];
        }
      });
    });
  }, u4.prototype.getExactlyMatchingMessagesForTokenFromCache = function(e3, t7, n4) {
    return r(this, void 0, void 0, function() {
      return s(this, function(s6) {
        switch (s6.label) {
          case 0:
            return [4, this._messageCache.fetch({ channelUrl: e3, token: t7, filter: n4, exactMatch: true })];
          case 1:
            return [2, s6.sent()];
        }
      });
    });
  }, u4.prototype.getMessagesFromCache = function(e3, t7, n4, s6, r4, a5) {
    return void 0 === r4 && (r4 = Qr), void 0 === a5 && (a5 = true), r(this, void 0, void 0, function() {
      return s(this, function(i4) {
        switch (i4.label) {
          case 0:
            return [4, this._messageCache.fetch({ channelUrl: e3, token: t7, limit: r4, filter: s6, backward: "next" === n4, inclusive: a5 })];
          case 1:
            return [2, i4.sent()];
        }
      });
    });
  }, u4.prototype.getPollMessagesFromCache = function(e3, t7, n4, s6) {
    return r(this, void 0, void 0, function() {
      return s(this, function(r4) {
        switch (r4.label) {
          case 0:
            return [4, this._messageCache.fetch({ channelUrl: e3, token: t7, limit: s6, filter: n4, backward: false, isPollOnly: true })];
          case 1:
            return [2, r4.sent()];
        }
      });
    });
  }, u4.prototype.getCachedMessageCountBetween = function(e3, t7, n4, s6) {
    return r(this, void 0, void 0, function() {
      return s(this, function(r4) {
        switch (r4.label) {
          case 0:
            return [4, this._messageCache.countBetween(e3, t7, new ds2({ top: n4, bottom: s6 }))];
          case 1:
            return [2, r4.sent()];
        }
      });
    });
  }, u4.prototype.getUnsentMessagesFromCache = function(e3, t7) {
    return r(this, void 0, void 0, function() {
      return s(this, function(n4) {
        switch (n4.label) {
          case 0:
            return [4, this._unsentMessageCache.fetch({ channelUrl: e3, filter: t7 })];
          case 1:
            return [2, n4.sent()];
        }
      });
    });
  }, u4.prototype.removeFailedMessageFromCache = function(e3) {
    return r(this, void 0, void 0, function() {
      return s(this, function(t7) {
        switch (t7.label) {
          case 0:
            return [4, this._unsentMessageCache.remove([e3])];
          case 1:
            return t7.sent(), [2];
        }
      });
    });
  }, u4;
}(H2);
var fs2 = function(e3, t7) {
  return t7 instanceof mt ? e3.findIndex(function(e4) {
    return e4 instanceof mt && t7.isIdentical(e4);
  }) : e3.findIndex(function(e4) {
    return e4.isIdentical(t7);
  });
};
var vs2 = function(e3, t7) {
  return e3.findIndex(function(e4) {
    return e4 instanceof pt ? e4.messageId === t7 : e4 instanceof Tt ? e4.notificationId === t7 : void 0;
  });
};
var ms2 = function(e3, t7) {
  if (e3.length > 0) {
    for (var n4 = 0, s6 = e3.length - 1, r4 = Math.floor((n4 + s6) / 2); n4 < s6; ) {
      var a5 = e3[r4].createdAt - t7.createdAt;
      if (a5 > 0) s6 = r4, r4 = Math.floor((n4 + s6) / 2);
      else {
        if (!(a5 < 0)) return r4;
        n4 = r4 + 1, r4 = Math.floor((n4 + s6) / 2);
      }
    }
    return e3[r4].createdAt > t7.createdAt ? r4 : r4 + 1;
  }
  return e3.length;
};
!function(e3) {
  e3[e3.IDLE = 0] = "IDLE", e3[e3.RUNNING = 1] = "RUNNING", e3[e3.END = 2] = "END";
}(ls2 || (ls2 = {}));
var gs2;
var Es2 = function(t7) {
  function n4(e3, n5, s6, r4) {
    var a5 = t7.call(this) || this;
    return a5._state = ls2.IDLE, a5._retryCount = 0, a5._retryLimit = 3, a5.priority = 0, a5._worker = n5, a5;
  }
  return t(n4, t7), Object.defineProperty(n4.prototype, "isIdle", { get: function() {
    return this._state === ls2.IDLE;
  }, enumerable: false, configurable: true }), Object.defineProperty(n4.prototype, "isRunning", { get: function() {
    return this._state === ls2.RUNNING;
  }, enumerable: false, configurable: true }), Object.defineProperty(n4.prototype, "isDone", { get: function() {
    return this._state === ls2.END;
  }, enumerable: false, configurable: true }), Object.defineProperty(n4.prototype, "retryCount", { get: function() {
    return this._retryCount;
  }, enumerable: false, configurable: true }), Object.defineProperty(n4.prototype, "retryLimit", { get: function() {
    return this._retryLimit;
  }, enumerable: false, configurable: true }), n4.prototype._run = function(e3) {
    return r(this, void 0, void 0, function() {
      var t8, n5;
      return s(this, function(s6) {
        switch (s6.label) {
          case 0:
            if (!this.isRunning) return [3, 4];
            s6.label = 1;
          case 1:
            return s6.trys.push([1, 3, , 4]), [4, this._worker(e3)];
          case 2:
            return t8 = s6.sent(), this._retryCount = 0, this.dispatch("progress", t8), t8.hasNext ? this._run(t8.nextToken) : this.end(), [3, 4];
          case 3:
            return n5 = s6.sent(), this.dispatch("error", n5), this._retryCount < this._retryLimit ? (this._retryCount++, this._run(e3)) : this.stop(), [3, 4];
          case 4:
            return [2];
        }
      });
    });
  }, n4.prototype.start = function(e3) {
    this.isIdle && (this._state = ls2.RUNNING, this._run(e3));
  }, n4.prototype.stop = function() {
    this._state = ls2.IDLE, this.dispatch("stop");
  }, n4.prototype.end = function() {
    this._state = ls2.END, this.dispatch("end");
  }, n4;
}(te);
var Cs2 = {};
var ys2 = function() {
  function e3(e4) {
    var t7 = e4._iid, n4 = e4.channel, s6 = e4.limit, r4 = void 0 === s6 ? 100 : s6, a5 = this;
    this.ref = 0, this._iid = t7, this._channel = n4, this._limit = r4, this._prevSyncLoopCount = 0;
    var i4, o3, u4 = Ws.of(this._iid), c4 = u4.sdkState, l3 = u4.cacheContext, v5 = u4.dispatcher, m5 = u4.logger, g4 = u4.statManager, E4 = u4.messageBackgroundSyncThrottleController;
    this._metadataKey = (i4 = c4.userId, o3 = n4.url, "sendbird:".concat(i4, "@groupchannel/").concat(o3, "/message/sync.meta"));
    var C3 = function(e5, t8) {
      return "sendbird:".concat(e5, "@groupchannel/").concat(t8, "/message/sync");
    }(c4.userId, n4.url);
    this._prevSync = new Es2(C3, function(e5) {
      return r(a5, void 0, void 0, function() {
        var t8 = this;
        return s(this, function(s7) {
          switch (s7.label) {
            case 0:
              return [4, E4.run("message-background-sync-".concat(n4.url, "-prev"), function() {
                return r(t8, void 0, void 0, function() {
                  var t9, s8, r5, a6, i5, o4, u5, c5, p4, v6, E5, C4;
                  return s(this, function(f4) {
                    switch (f4.label) {
                      case 0:
                        return t9 = { hasNext: true, nextToken: 0 }, this._prevSyncLoopCount++, [4, this.loadMetadata()];
                      case 1:
                        if (f4.sent(), m5.debug("message background prev sync from", null === (o4 = this._metadata) || void 0 === o4 ? void 0 : o4.range.top), null === (u5 = this._metadata) || void 0 === u5 ? void 0 : u5.previousComplete) return [3, 10];
                        f4.label = 2;
                      case 2:
                        return f4.trys.push([2, 5, 8, 9]), [4, ea.of(this._iid).getMessagesByTimestamp(this._channel.url, this._channel.channelType, (null === (p4 = null === (c5 = this._metadata) || void 0 === c5 ? void 0 : c5.range) || void 0 === p4 ? void 0 : p4.top) ? this._metadata.range.top : e5, { prevResultSize: this._limit, nextResultSize: 0, replyType: B.ALL, includeReactions: true, includeMetaArray: true, includeParentMessageInfo: true, includeThreadInfo: true, isInclusive: true }, Ks.SYNC_MESSAGE_BACKGROUND)];
                      case 3:
                        return (s8 = f4.sent()).length > 0 && (r5 = s8.map(function(e6) {
                          return e6.createdAt;
                        }), (null === (v6 = this._metadata) || void 0 === v6 ? void 0 : (i5 = v6.range).intersect.apply(i5, c([], a(r5), false))) ? this.extendRange(s8) : this._metadata = { range: new ds2({ top: Math.min.apply(Math, c([], a(r5), false)), bottom: Math.max.apply(Math, c([], a(r5), false)) }), previousComplete: false }), t9.hasNext = s8.length >= this._limit && this._prevSyncLoopCount < 1, this._metadata && (t9.nextToken = this._metadata.range.top, this._metadata.previousComplete = s8.length < this._limit), m5.debug("message background prev sync progress", t9), [4, this.saveMetadata()];
                      case 4:
                        return f4.sent(), [3, 9];
                      case 5:
                        return a6 = f4.sent(), m5.debug("message background prev sync error", a6), a6 instanceof v && a6.isInvalidTokenError ? [4, this.clearMetadata()] : [3, 7];
                      case 6:
                        f4.sent(), f4.label = 7;
                      case 7:
                        throw a6;
                      case 8:
                        return g4.put(new Ze({ type: Le.FEATURE_LOCALCACHE_EVENT, ts: Date.now(), data: { channel_url: n4.url, measured_on: "back_sync", event: "cache_fetch", max_db_size: null !== (C4 = null === (E5 = l3.localCacheConfig) || void 0 === E5 ? void 0 : E5.maxSize) && void 0 !== C4 ? C4 : 0, use_local_cache: l3.localCacheEnabled, starting_point: 0, message_init_policy: "" } })), [7];
                      case 9:
                        return [3, 11];
                      case 10:
                        t9.hasNext = false, f4.label = 11;
                      case 11:
                        return [2, t9];
                    }
                  });
                });
              })];
            case 1:
              return [2, s7.sent()];
          }
        });
      });
    }), this._nextSync = new Es2(C3, function(e5) {
      return r(a5, void 0, void 0, function() {
        var t8 = this;
        return s(this, function(s7) {
          switch (s7.label) {
            case 0:
              return [4, E4.run("message-background-sync-".concat(n4.url, "-next"), function() {
                return r(t8, void 0, void 0, function() {
                  var t9, s8, r5, a6, i5, o4, u5, c5, h4, p4, v6;
                  return s(this, function(f4) {
                    switch (f4.label) {
                      case 0:
                        return t9 = { hasNext: true, nextToken: 0 }, [4, this.loadMetadata()];
                      case 1:
                        f4.sent(), m5.debug("message background next sync from", null === (o4 = this._metadata) || void 0 === o4 ? void 0 : o4.range.bottom), f4.label = 2;
                      case 2:
                        return f4.trys.push([2, 5, 6, 7]), [4, ea.of(this._iid).getMessagesByTimestamp(this._channel.url, this._channel.channelType, (null === (c5 = null === (u5 = this._metadata) || void 0 === u5 ? void 0 : u5.range) || void 0 === c5 ? void 0 : c5.bottom) ? this._metadata.range.bottom : e5, { prevResultSize: 0, nextResultSize: this._limit, replyType: B.ALL, includeReactions: true, includeMetaArray: true, includeParentMessageInfo: true, includeThreadInfo: true, isInclusive: true }, Ks.SYNC_MESSAGE_BACKGROUND)];
                      case 3:
                        return (s8 = f4.sent()).length > 0 && (r5 = s8.map(function(e6) {
                          return e6.createdAt;
                        }), (null === (h4 = this._metadata) || void 0 === h4 ? void 0 : (i5 = h4.range).intersect.apply(i5, c([], a(r5), false))) ? this.extendRange(s8) : this._metadata = { range: new ds2({ top: Math.min.apply(Math, c([], a(r5), false)), bottom: Math.max.apply(Math, c([], a(r5), false)) }), previousComplete: false }), t9.hasNext = s8.length >= this._limit, this._metadata && (t9.nextToken = this._metadata.range.bottom), m5.debug("message background next sync progress", t9), [4, this.saveMetadata()];
                      case 4:
                        return f4.sent(), [3, 7];
                      case 5:
                        throw a6 = f4.sent(), m5.debug("message background next sync error", a6), a6;
                      case 6:
                        return g4.put(new Ze({ type: Le.FEATURE_LOCALCACHE_EVENT, ts: Date.now(), data: { channel_url: n4.url, measured_on: "back_sync", event: "cache_fetch", max_db_size: null !== (v6 = null === (p4 = l3.localCacheConfig) || void 0 === p4 ? void 0 : p4.maxSize) && void 0 !== v6 ? v6 : 0, use_local_cache: l3.localCacheEnabled, starting_point: 0, message_init_policy: "" } })), [7];
                      case 7:
                        return [2, t9];
                    }
                  });
                });
              })];
            case 1:
              return [2, s7.sent()];
          }
        });
      });
    }), this._connectionEventContext = v5.on(function(e5) {
      if (e5 instanceof kr) if (e5.stateType === Sr.CONNECTED) a5.resume();
      else a5.pause();
    });
  }
  return e3.of = function(t7, n4) {
    return Cs2[t7] || (Cs2[t7] = {}), Cs2[t7][n4.url] || (Cs2[t7][n4.url] = new e3({ _iid: t7, channel: n4 })), Cs2[t7][n4.url].ref++, Cs2[t7][n4.url];
  }, e3.clear = function(e4, t7) {
    Cs2[e4] && Cs2[e4][t7] && (Cs2[e4][t7].close(), delete Cs2[e4]);
  }, Object.defineProperty(e3.prototype, "range", { get: function() {
    var e4, t7;
    return null !== (t7 = null === (e4 = this._metadata) || void 0 === e4 ? void 0 : e4.range) && void 0 !== t7 ? t7 : new ds2({});
  }, enumerable: false, configurable: true }), Object.defineProperty(e3.prototype, "previousComplete", { get: function() {
    var e4;
    return !!(null === (e4 = this._metadata) || void 0 === e4 ? void 0 : e4.previousComplete);
  }, enumerable: false, configurable: true }), e3.prototype.isWrappingMessages = function(e4) {
    var t7;
    return null === (t7 = this.range) || void 0 === t7 ? void 0 : t7.includes.apply(t7, c([], a(e4.map(function(e5) {
      return e5.createdAt;
    })), false));
  }, e3.prototype.extendRange = function(e4) {
    var t7;
    this._metadata && (t7 = this._metadata.range).extends.apply(t7, c([], a(e4.map(function(e5) {
      return e5.createdAt;
    })), false));
  }, e3.prototype.loadMetadata = function() {
    return r(this, void 0, void 0, function() {
      var e4;
      return s(this, function(t7) {
        switch (t7.label) {
          case 0:
            return this._metadata ? [3, 2] : [4, Ws.of(this._iid).cacheContext.preference.get(this._metadataKey)];
          case 1:
            e4 = t7.sent(), this._metadata = e4 ? { range: new ds2(e4.range), previousComplete: e4.previousComplete } : { range: new ds2({}), previousComplete: false }, t7.label = 2;
          case 2:
            return [2, this._metadata];
        }
      });
    });
  }, e3.prototype.saveMetadata = function() {
    return r(this, void 0, void 0, function() {
      return s(this, function(e4) {
        switch (e4.label) {
          case 0:
            return this._metadata ? [4, Ws.of(this._iid).cacheContext.preference.set(this._metadataKey, this._metadata)] : [3, 2];
          case 1:
            return e4.sent(), [2, true];
          case 2:
            return [2, false];
        }
      });
    });
  }, e3.prototype.clearMetadata = function() {
    return r(this, void 0, void 0, function() {
      return s(this, function(e4) {
        switch (e4.label) {
          case 0:
            return [4, Ws.of(this._iid).cacheContext.preference.remove(this._metadataKey)];
          case 1:
            return e4.sent(), this._metadata = void 0, [2];
        }
      });
    });
  }, e3.prototype.resume = function(e4) {
    var t7, n4, s6, r4;
    void 0 === e4 && (e4 = Date.now());
    var a5 = Ws.of(this._iid), i4 = a5.logger;
    a5.sessionManager.session.hasSession && (i4.debug("message background sync resume()"), this._prevSyncLoopCount = 0, this._metadata && this._metadata.previousComplete || this._prevSync.start(null !== (n4 = null === (t7 = this._metadata) || void 0 === t7 ? void 0 : t7.range.top) && void 0 !== n4 ? n4 : e4), this._nextSync.start(null !== (r4 = null === (s6 = this._metadata) || void 0 === s6 ? void 0 : s6.range.bottom) && void 0 !== r4 ? r4 : e4));
  }, e3.prototype.pause = function() {
    Ws.of(this._iid).logger.debug("message background sync stop()"), this._prevSync.stop(), this._nextSync.stop();
  }, e3.prototype.close = function() {
    this.ref--, this.ref <= 0 && (this.ref = 0, this.pause(), this._connectionEventContext.close(), delete Cs2[this._iid][this._channel.url]);
  }, e3;
}();
var Ms2 = {};
var bs2 = function() {
  function e3(e4) {
    var t7 = e4._iid, n4 = e4.channel, r4 = e4.includeParams, a5 = this;
    this.ref = 0, this._iid = t7, this._channel = n4, this._includeParams = r4;
    var i4, o3, u4 = Ws.of(this._iid), c4 = u4.logger, l3 = u4.sdkState, d5 = u4.dispatcher;
    this._metadataKey = (i4 = l3.userId, o3 = n4.url, "sendbird:".concat(i4, "@groupchannel/").concat(o3, "/message/changelogs.meta"));
    var _2 = function(e5, t8) {
      return "sendbird:".concat(e5, "@groupchannel/").concat(t8, "/message/changelogs");
    }(l3.userId, this._channel.url);
    this._sync = new Es2(_2, function() {
      return r(a5, void 0, void 0, function() {
        var e5, t8, n5, r5, a6, i5, o4, u5;
        return s(this, function(l4) {
          switch (l4.label) {
            case 0:
              return e5 = { hasNext: true, nextToken: 0 }, [4, this.loadMetadata()];
            case 1:
              l4.sent(), c4.debug("message changelog sync from", null === (u5 = this._metadata) || void 0 === u5 ? void 0 : u5.token), l4.label = 2;
            case 2:
              return l4.trys.push([2, 5, , 8]), [4, ea.of(this._iid).getMessageChangelogs(this._channel.url, this._channel.channelType, this._metadata.token, n({ replyType: B.ALL }, this._includeParams), Ks.SYNC_MESSAGE_CHANGELOGS)];
            case 3:
              return t8 = l4.sent(), n5 = t8.updatedMessages, r5 = t8.deletedMessageIds, a6 = t8.hasMore, i5 = t8.token, e5.hasNext = a6, e5.nextToken = i5, (n5.length > 0 || r5.length > 0) && this._metadata && (this._metadata.token = i5), c4.debug("message changelog sync progress", e5), [4, this.saveMetadata()];
            case 4:
              return l4.sent(), [3, 8];
            case 5:
              return o4 = l4.sent(), c4.debug("message changelog sync error", o4), o4 instanceof v && o4.isInvalidTokenError ? [4, this.clearMetadata()] : [3, 7];
            case 6:
              l4.sent(), l4.label = 7;
            case 7:
              throw o4;
            case 8:
              return [2, e5];
          }
        });
      });
    }), this._connectionEventContext = d5.on(function(e5) {
      if (e5 instanceof kr) if (e5.stateType === Sr.CONNECTED) a5.resume();
      else a5.pause();
    });
  }
  return e3.of = function(t7, n4, s6) {
    return Ms2[t7] || (Ms2[t7] = {}), Ms2[t7][n4.url] || (Ms2[t7][n4.url] = new e3({ _iid: t7, channel: n4, includeParams: s6 })), Ms2[t7][n4.url].ref++, Ms2[t7][n4.url];
  }, e3.clear = function(e4, t7) {
    Ms2[e4] && Ms2[e4][t7] && (Ms2[e4][t7].close(), delete Ms2[e4]);
  }, e3.prototype.loadMetadata = function() {
    return r(this, void 0, void 0, function() {
      var e4, t7, n4, s6;
      return s(this, function(r4) {
        switch (r4.label) {
          case 0:
            return this._metadata ? [3, 2] : (e4 = Ws.of(this._iid), t7 = e4.cacheContext, n4 = e4.firstConnectedAt, [4, t7.preference.get(this._metadataKey)]);
          case 1:
            s6 = r4.sent(), this._metadata = { token: s6 ? s6.token : n4 }, r4.label = 2;
          case 2:
            return [2, this._metadata];
        }
      });
    });
  }, e3.prototype.saveMetadata = function() {
    return r(this, void 0, void 0, function() {
      return s(this, function(e4) {
        switch (e4.label) {
          case 0:
            return this._metadata ? [4, Ws.of(this._iid).cacheContext.preference.set(this._metadataKey, this._metadata)] : [3, 2];
          case 1:
            return e4.sent(), [2, true];
          case 2:
            return [2, false];
        }
      });
    });
  }, e3.prototype.clearMetadata = function() {
    return r(this, void 0, void 0, function() {
      return s(this, function(e4) {
        switch (e4.label) {
          case 0:
            return [4, Ws.of(this._iid).cacheContext.preference.remove(this._metadataKey)];
          case 1:
            return e4.sent(), this._metadata = void 0, [2];
        }
      });
    });
  }, e3.prototype.resume = function() {
    var e4 = Ws.of(this._iid), t7 = e4.logger;
    e4.sessionManager.session.hasSession && (t7.debug("message changelog sync resume()"), this._sync.start(0));
  }, e3.prototype.pause = function() {
    Ws.of(this._iid).logger.debug("message changelog sync pause()"), this._sync.stop();
  }, e3.prototype.close = function() {
    this.ref--, this.ref <= 0 && (this.ref = 0, this.pause(), this._connectionEventContext.close(), delete Ms2[this._iid][this._channel.url]);
  }, e3;
}();
var Ns2 = {};
var Us2 = function() {
  function e3(e4) {
    var t7 = e4._iid, n4 = e4.channel, s6 = e4.hasPollMessage, r4 = this;
    this.ref = 0, this._iid = t7, this._channel = n4;
    var a5, i4, o3 = Ws.of(this._iid), u4 = o3.logger, c4 = o3.sdkState, l3 = o3.dispatcher;
    this._metadataKey = (a5 = c4.userId, i4 = n4.url, "sendbird:".concat(a5, "@groupchannel/").concat(i4, "/poll/changelogs.meta"));
    var d5 = function(e5, t8) {
      return "sendbird:".concat(e5, "@groupchannel/").concat(t8, "/poll/changelogs");
    }(c4.userId, this._channel.url);
    this._sync = new Es2(d5, function() {
      return r(r4, void 0, void 0, function() {
        var e5, t8, n5, r5, a6, i5, o4, c5;
        return s(this, function(l4) {
          switch (l4.label) {
            case 0:
              return e5 = { hasNext: true, nextToken: 0 }, [4, this.loadMetadata()];
            case 1:
              return l4.sent(), u4.debug("poll changelog sync from", null === (c5 = this._metadata) || void 0 === c5 ? void 0 : c5.token), (t8 = !this._metadata || !this._metadata.token) ? [4, s6()] : [3, 3];
            case 2:
              t8 = !l4.sent(), l4.label = 3;
            case 3:
              if (t8) return [2, { hasNext: false, nextToken: 0 }];
              this._metadata || (n5 = Ws.of(this._iid).firstConnectedAt, this._metadata = { token: n5 }), l4.label = 4;
            case 4:
              return l4.trys.push([4, 7, , 10]), [4, Do.of(this._iid).getPollChangeLogs(this._channel.url, this._channel.channelType, this._metadata.token)];
            case 5:
              return r5 = l4.sent(), a6 = r5.hasMore, i5 = r5.token, e5.hasNext = a6, e5.nextToken = i5, this._metadata.token = i5, u4.debug("poll changelog sync progress", e5), [4, this.saveMetadata()];
            case 6:
              return l4.sent(), [3, 10];
            case 7:
              return o4 = l4.sent(), u4.debug("poll changelog sync error", o4), o4 instanceof v && o4.isInvalidTokenError ? [4, this.clearMetadata()] : [3, 9];
            case 8:
              l4.sent(), l4.label = 9;
            case 9:
              throw o4;
            case 10:
              return [2, e5];
          }
        });
      });
    }), this._connectionEventContext = l3.on(function(e5) {
      if (e5 instanceof kr) if (e5.stateType === Sr.CONNECTED) r4.resume();
      else r4.pause();
    });
  }
  return e3.of = function(t7, n4, s6) {
    return Ns2[t7] || (Ns2[t7] = {}), Ns2[t7][n4.url] || (Ns2[t7][n4.url] = new e3({ _iid: t7, channel: n4, hasPollMessage: s6 })), Ns2[t7][n4.url].ref++, Ns2[t7][n4.url];
  }, e3.prototype.loadMetadata = function() {
    return r(this, void 0, void 0, function() {
      var e4;
      return s(this, function(t7) {
        switch (t7.label) {
          case 0:
            return this._metadata ? [3, 2] : [4, Ws.of(this._iid).cacheContext.preference.get(this._metadataKey)];
          case 1:
            e4 = t7.sent(), this._metadata = e4 ? { token: e4.token } : void 0, t7.label = 2;
          case 2:
            return [2];
        }
      });
    });
  }, e3.prototype.saveMetadata = function() {
    return r(this, void 0, void 0, function() {
      return s(this, function(e4) {
        switch (e4.label) {
          case 0:
            return this._metadata ? [4, Ws.of(this._iid).cacheContext.preference.set(this._metadataKey, this._metadata)] : [3, 2];
          case 1:
            e4.sent(), e4.label = 2;
          case 2:
            return [2];
        }
      });
    });
  }, e3.prototype.clearMetadata = function() {
    return r(this, void 0, void 0, function() {
      return s(this, function(e4) {
        switch (e4.label) {
          case 0:
            return [4, Ws.of(this._iid).cacheContext.preference.remove(this._metadataKey)];
          case 1:
            return e4.sent(), this._metadata = void 0, [2];
        }
      });
    });
  }, e3.prototype.resume = function() {
    Ws.of(this._iid).logger.debug("poll changelog sync resume()"), this._sync.start(0);
  }, e3.prototype.pause = function() {
    Ws.of(this._iid).logger.debug("poll changelog sync pause()"), this._sync.stop();
  }, e3.prototype.close = function() {
    this.ref--, this.ref <= 0 && (this.ref = 0, this.pause(), this._connectionEventContext.close(), delete Ns2[this._iid][this._channel.url]);
  }, e3;
}();
var Ss2 = function(n4) {
  function s6(e3) {
    var s7, r4, a5, i4, o3, u4, c4, l3, h4, d5, _2 = this;
    return (_2 = n4.call(this) || this).method = oe.GET, _2.path = "".concat(Ie(e3.channelType), "/").concat(e3.channelUrl, "/messages_gap"), _2.params = re({ prev_start_ts: e3.prevStart, prev_end_ts: e3.prevEnd, prev_cache_count: e3.prevCount, next_start_ts: e3.nextStart, next_end_ts: e3.nextEnd, next_cache_count: e3.nextCount, huge_gap_threshold: null !== (s7 = e3.threshold) && void 0 !== s7 ? s7 : null, reverse: true, custom_types: null !== (r4 = e3.customTypes) && void 0 !== r4 ? r4 : ["*"], message_type: null !== (a5 = e3.messageType) && void 0 !== a5 ? a5 : null, include_reply_type: null !== (i4 = e3.replyType) && void 0 !== i4 ? i4 : B.NONE, include_reactions: null === (o3 = e3.includeReactions) || void 0 === o3 || o3, include_meta_array: null === (u4 = e3.includeMetaArray) || void 0 === u4 || u4, include_thread_info: null === (c4 = e3.includeThreadInfo) || void 0 === c4 || c4, include_parent_message_info: null === (l3 = e3.includeParentMessageInfo) || void 0 === l3 || l3, with_sorted_meta_array: null === (h4 = e3.includeMetaArray) || void 0 === h4 || h4, show_subchannel_messages_only: null !== (d5 = e3.showSubchannelMessagesOnly) && void 0 !== d5 && d5, include_poll_details: true, checking_continuous_messages: e3.checkingContinuousMessages }), _2;
  }
  return t(s6, n4), s6;
}(xe);
var As2 = function(t7) {
  function n4(e3, n5) {
    var s6, r4, a5, i4, o3, u4, c4 = this;
    return (c4 = t7.call(this, e3, n5) || this).isHugeGap = n5.is_huge_gap, c4.prevMessages = (null !== (s6 = n5.prev_messages) && void 0 !== s6 ? s6 : []).map(function(t8) {
      return Mt(e3, t8);
    }), c4.prevHasMore = null !== (r4 = n5.prev_hasmore) && void 0 !== r4 && r4, c4.isContinuousPrevMessages = null !== (a5 = n5.is_continuous_prev_messages) && void 0 !== a5 && a5, c4.nextMessages = (null !== (i4 = n5.next_messages) && void 0 !== i4 ? i4 : []).map(function(t8) {
      return Mt(e3, t8);
    }), c4.nextHasmore = null !== (o3 = n5.next_hasmore) && void 0 !== o3 && o3, c4.isContinuousNextMessages = null !== (u4 = n5.is_continuous_next_messages) && void 0 !== u4 && u4, c4;
  }
  return t(n4, t7), n4;
}(Ue);
var Ts2 = { includeMetaArray: true, includeReactions: true, includeThreadInfo: true, includeParentMessageInfo: true };
!function(e3) {
  e3.CACHE_AND_REPLACE_BY_API = "cache_and_replace_by_api";
}(gs2 || (gs2 = {}));
var Is2;
var ws2;
var Ls2;
var Ds2 = function() {
  function e3() {
    this._onCacheResult = st, this._onApiResult = st;
  }
  return e3.prototype._invokeResponse = function(e4, t7, n4) {
    var s6 = this;
    os(function() {
      return r(s6, void 0, void 0, function() {
        return s(this, function(s7) {
          switch (e4) {
            case "local":
              this._onCacheResult(t7, n4);
              break;
            case "remote":
              this._onApiResult(t7, n4);
          }
          return [2];
        });
      });
    });
  }, e3.prototype.onCacheResult = function(e4) {
    return this._onCacheResult = e4, this;
  }, e3.prototype.onApiResult = function(e4) {
    return this._onApiResult = e4, this;
  }, e3;
}();
var xs2 = function() {
  function e3(e4, t7) {
    var n4 = t7.filter, s6 = t7.startingPoint, r4 = t7.limit, a5 = t7.prevResultLimit, i4 = t7.nextResultLimit, o3 = t7.channel, u4 = t7.channelManager, c4 = t7.disableBackgroundSync, l3 = void 0 !== c4 && c4, h4 = this;
    this._messages = [], this._unsentMessages = [], this._isLoadingPrevious = false, this._isLoadingNext = false, this._iid = e4, this._key = "mc-".concat($()), this._isDisposed = false, this.filter = null != n4 ? n4 : new Os(), this._channel = o3, this._syncRange = new ds2({}), this._hasPrevious = true, this._hasNext = true, this._startingPoint = "number" == typeof s6 && Number.isFinite(s6) ? s6 : Number.MAX_SAFE_INTEGER, this._limit = r4 || Qr, this._prevResultLimit = null != a5 ? a5 : Math.floor(this._limit / 2), this._nextResultLimit = null != i4 ? i4 : Math.floor(this._limit / 2), this._channelManager = u4;
    var m5 = Ws.of(this._iid).statManager;
    this._channelManager.subscribeChannelEvent(this._key, { onUpdate: function(e5, t8) {
      var n5 = t8.source, s7 = e5.findIndex(function(e6) {
        return e6.isIdentical(h4.channel);
      });
      s7 >= 0 && (h4._replaceChannelOfCollection(e5[s7]), h4.channel._runIfHandleableWithGroupChannel(function(e6) {
        switch (n5) {
          case Ks.EVENT_CHANNEL_UPDATED:
            for (var s8 = false, r5 = 0; r5 < h4._messages.length; r5++) {
              if (h4._messages[r5].createdAt >= e6.messageOffsetTimestamp) {
                s8 = true;
                var a6 = r5;
                if (a6 > 0) {
                  var i5 = h4._messages.splice(0, a6);
                  h4._removeMessagesFromView(i5.map(function(e7) {
                    return h4.keyOf(e7);
                  }), Ks.EVENT_MESSAGE_OFFSET_UPDATED);
                }
                break;
              }
            }
            !s8 && h4._messages.length > 0 && h4._removeMessagesFromView(h4._messages.map(function(e7) {
              return h4.keyOf(e7);
            }), Ks.EVENT_MESSAGE_OFFSET_UPDATED);
            break;
          case Ks.EVENT_CHANNEL_UNMUTED:
            var o4 = Ws.of(h4._iid).sdkState, u5 = t8.user;
            o4.userId === u5.userId && h4._clearCheckMyMutedTimer();
            break;
          case Ks.EVENT_CHANNEL_MUTED:
            o4 = Ws.of(h4._iid).sdkState, u5 = t8.user;
            o4.userId === u5.userId && -1 !== e6._myMutedRemainingTime && h4._startCheckMyMutedTimer(e6._myMutedRemainingTime);
            break;
          case Ks.EVENT_CHANNEL_LEFT:
            e6.isPublic && h4._clearCheckMyMutedTimer();
        }
        os(function() {
          return r(h4, void 0, void 0, function() {
            var e7;
            return s(this, function(s9) {
              return gn2(n5) && (null === (e7 = this._handler) || void 0 === e7 ? void 0 : e7.onChannelUpdated) && this._handler.onChannelUpdated(t8, this.channel), [2];
            });
          });
        });
      }), h4._postprocessChannelUpdateEvent(e5[s7], n5));
    }, onRemove: function(e5, t8) {
      var n5 = e5.indexOf(h4.channel.url);
      n5 >= 0 && (h4._clearCheckMyMutedTimer(), os(function() {
        return r(h4, void 0, void 0, function() {
          var e6;
          return s(this, function(n6) {
            return (null === (e6 = this._handler) || void 0 === e6 ? void 0 : e6.onChannelDeleted) && this._handler.onChannelDeleted(t8, this.channel.url), [2];
          });
        });
      }), h4._postprocessChannelRemoveEvent(e5[n5]));
    } }), this._channelManager.subscribeMessageEvent(this._key, { onUpdate: function(e5, t8) {
      var n5, s7, r5 = [], a6 = [];
      try {
        for (var i5 = o(e5), o4 = i5.next(); !o4.done; o4 = i5.next()) {
          var u5 = o4.value;
          u5.channelUrl === h4._channel.url && (h4.filter.match(u5) ? r5.push(u5) : a6.push(h4.keyOf(u5)));
        }
      } catch (e6) {
        n5 = { error: e6 };
      } finally {
        try {
          o4 && !o4.done && (s7 = i5.return) && s7.call(i5);
        } finally {
          if (n5) throw n5.error;
        }
      }
      if (Js(t8)) {
        if (r5.length > 0) switch (t8) {
          case Ks.LOCAL_MESSAGE_CANCELED:
          case Ks.LOCAL_MESSAGE_RESEND_STARTED:
          case Ks.EVENT_MESSAGE_SENT_FAILED:
          case Ks.EVENT_MESSAGE_SENT_SUCCESS:
          case Ks.EVENT_MESSAGE_UPDATED:
          case Ks.EVENT_MESSAGE_THREADINFO_UPDATED:
          case Ks.EVENT_MESSAGE_REACTION_UPDATED:
          case Ks.EVENT_MESSAGE_FEEDBACK_ADDED:
          case Ks.EVENT_MESSAGE_FEEDBACK_UPDATED:
          case Ks.EVENT_MESSAGE_FEEDBACK_DELETED:
          case Ks.SYNC_MESSAGE_CHANGELOGS:
            h4._updateMessagesToView(r5, t8);
            break;
          case Ks.EVENT_MESSAGE_SENT_PENDING:
            h4._addMessagesToView(r5, t8);
            break;
          case Ks.EVENT_MESSAGE_RECEIVED:
            h4.hasNext || h4._addMessagesToView(r5, t8);
            break;
          case Ks.SYNC_MESSAGE_FILL:
            h4._addMessagesToView(r5, t8);
        }
        a6.length > 0 && h4._removeMessagesFromView(a6, t8);
      }
      h4._postprocessMessageUpdateEvent(e5, t8);
    }, onRemove: function(e5, t8) {
      h4._removeMessagesFromView(e5, t8), h4._postprocessMessageRemoveEvent(e5);
    }, onRemoveUnsent: function(e5, t8) {
      h4._removeUnsentMessageFromView(e5, t8);
    }, onPollChangeLogUpdate: function(e5, t8) {
      h4._updatePollsToView(e5, t8);
    }, onPollUpdate: function(e5, t8) {
      h4._applyPollUpdateEventToView(e5, t8);
    }, onPollVote: function(e5, t8) {
      h4._applyPollVoteEventToView(e5, t8);
    }, onReactionUpdate: function(e5, t8) {
      h4._applyReactionEventToView(e5, t8);
    }, onThreadInfoUpdate: function(e5, t8) {
      h4._applyThreadInfoEventToView(e5, t8);
    } });
    var g4 = Ws.of(this._iid), E4 = g4.cacheContext, C3 = g4.dispatcher, M5 = g4.messageBackgroundSyncThrottleController;
    this._channel._updateMessageCollectionLastAccessedAt(), C3.dispatch(new En2({ channels: [this._channel], context: { source: Ks.CHANNEL_LASTACCESSEDAT_UPDATED } })), this._backgroundSync = ys2.of(this._iid, this._channel), !l3 && this._shouldStartBackgroundSync() && this._backgroundSync.resume(this._startingPoint), this._changelogSync = bs2.of(this._iid, this._channel, this.changelogIncludeParams), this._changelogSync.resume(), this._pollChangelogSync = Us2.of(this._iid, this._channel, this._hasPollMessage.bind(this)), this._pollChangelogSync.resume(), this._prevFill = new Es2(this._key, function(e5) {
      return r(h4, void 0, void 0, function() {
        var t8 = this;
        return s(this, function(n5) {
          switch (n5.label) {
            case 0:
              return [4, M5.run("message-fill-sync-".concat(o3.url, "-prev"), function() {
                return r(t8, void 0, void 0, function() {
                  var t9, n6, s7, r5, a6, i5, o4;
                  return s(this, function(u5) {
                    switch (u5.label) {
                      case 0:
                        return [4, this._getRemoteMessages(e5, { prevLimit: this._prevResultLimit, source: Ks.SYNC_MESSAGE_FILL, checkingContinuousMessages: E4.localCacheEnabled })];
                      case 1:
                        return t9 = u5.sent(), n6 = t9.messages, s7 = t9.isContinuousMessages, n6.length > 0 ? (r5 = Math.min.apply(Math, c([], a(n6.map(function(e6) {
                          return e6.createdAt;
                        })), false)), this._syncRange.extends(r5), s7 && (null === (a6 = this._backgroundSync) || void 0 === a6 || a6.range.extends(r5)), [2, { hasNext: n6.length >= this._prevResultLimit && this.viewTop < r5, nextToken: this._syncRange.top }]) : (m5.put(new Ze({ type: Le.FEATURE_LOCALCACHE_EVENT, ts: Date.now(), data: { channel_url: this.channel.url, measured_on: "gap_check", event: "cache_fetch", max_db_size: null !== (o4 = null === (i5 = E4.localCacheConfig) || void 0 === i5 ? void 0 : i5.maxSize) && void 0 !== o4 ? o4 : 0, use_local_cache: E4.localCacheEnabled, starting_point: 0, message_init_policy: "" } })), [2, { hasNext: false, nextToken: 0 }]);
                    }
                  });
                });
              })];
            case 1:
              return [2, n5.sent()];
          }
        });
      });
    }), this._nextFill = new Es2(this._key, function(e5) {
      return r(h4, void 0, void 0, function() {
        var t8 = this;
        return s(this, function(n5) {
          switch (n5.label) {
            case 0:
              return [4, M5.run("message-fill-sync-".concat(o3.url, "-next"), function() {
                return r(t8, void 0, void 0, function() {
                  var t9, n6, s7, r5, a6, i5, o4;
                  return s(this, function(u5) {
                    switch (u5.label) {
                      case 0:
                        return [4, this._getRemoteMessages(e5, { nextLimit: this._nextResultLimit, source: Ks.SYNC_MESSAGE_FILL, checkingContinuousMessages: E4.localCacheEnabled })];
                      case 1:
                        return t9 = u5.sent(), n6 = t9.messages, s7 = t9.isContinuousMessages, n6.length > 0 ? (r5 = Math.max.apply(Math, c([], a(n6.map(function(e6) {
                          return e6.createdAt;
                        })), false)), this._syncRange.extends(r5), s7 && (null === (a6 = this._backgroundSync) || void 0 === a6 || a6.range.extends(r5)), [2, { hasNext: !(n6.length >= this._nextResultLimit && this._hasNext) || this.viewBottom > r5, nextToken: this._syncRange.bottom }]) : (m5.put(new Ze({ type: Le.FEATURE_LOCALCACHE_EVENT, ts: Date.now(), data: { channel_url: this.channel.url, measured_on: "gap_check", event: "cache_fetch", max_db_size: null !== (o4 = null === (i5 = E4.localCacheConfig) || void 0 === i5 ? void 0 : i5.maxSize) && void 0 !== o4 ? o4 : 0, use_local_cache: E4.localCacheEnabled, starting_point: 0, message_init_policy: "" } })), [2, { hasNext: false, nextToken: 0 }]);
                    }
                  });
                });
              })];
            case 1:
              return [2, n5.sent()];
          }
        });
      });
    }), this._connectionEventContext = C3.on(function(e5) {
      if (e5 instanceof kr) switch (e5.stateType) {
        case Sr.CONNECTED:
          as(function() {
            return r(h4, void 0, void 0, function() {
              return s(this, function(e6) {
                return this._activate(), [2];
              });
            });
          });
          break;
        case Sr.LOGOUT:
          h4.dispose();
          break;
        default:
          h4._clearCheckMyMutedTimer(), h4._prevFill.stop(), h4._nextFill.stop();
      }
    });
  }
  return e3.prototype.keyOf = function(e4) {
    return 0;
  }, Object.defineProperty(e3.prototype, "changelogIncludeParams", { get: function() {
    return { includeReactions: true, includeThreadInfo: true, includeMetaArray: true, includeParentMessageInfo: true };
  }, enumerable: false, configurable: true }), e3.prototype._postprocessChannelUpdateEvent = function(e4, t7) {
  }, e3.prototype._postprocessChannelRemoveEvent = function(e4) {
  }, e3.prototype._postprocessMessageUpdateEvent = function(e4, t7) {
  }, e3.prototype._postprocessMessageRemoveEvent = function(e4) {
  }, Object.defineProperty(e3.prototype, "channel", { get: function() {
    return this._channel;
  }, enumerable: false, configurable: true }), Object.defineProperty(e3.prototype, "succeededMessages", { get: function() {
    return c([], a(this._messages), false);
  }, enumerable: false, configurable: true }), Object.defineProperty(e3.prototype, "failedMessages", { get: function() {
    return this._unsentMessages.filter(function(e4) {
      return e4.sendingStatus === W.FAILED;
    });
  }, enumerable: false, configurable: true }), Object.defineProperty(e3.prototype, "pendingMessages", { get: function() {
    return this._unsentMessages.filter(function(e4) {
      return e4.sendingStatus === W.PENDING;
    });
  }, enumerable: false, configurable: true }), Object.defineProperty(e3.prototype, "hasPrevious", { get: function() {
    return this._hasPrevious;
  }, enumerable: false, configurable: true }), Object.defineProperty(e3.prototype, "hasNext", { get: function() {
    return this._hasNext;
  }, enumerable: false, configurable: true }), Object.defineProperty(e3.prototype, "viewTop", { get: function() {
    return Math.min.apply(Math, c(c([], a(this._messages.map(function(e4) {
      return e4.createdAt;
    })), false), [Number.MAX_SAFE_INTEGER], false));
  }, enumerable: false, configurable: true }), Object.defineProperty(e3.prototype, "viewBottom", { get: function() {
    return Math.max.apply(Math, c(c([], a(this._messages.map(function(e4) {
      return e4.createdAt;
    })), false), [0], false));
  }, enumerable: false, configurable: true }), e3.prototype._activate = function() {
    return r(this, void 0, void 0, function() {
      return s(this, function(e4) {
        switch (e4.label) {
          case 0:
            return Ws.of(this._iid).logger.debug("check huge gap"), this._checkHugeGap(), [4, this._refreshChannel(Ks.SYNC_CHANNEL_CHANGELOGS)];
          case 1:
            return e4.sent(), [2];
        }
      });
    });
  }, e3.prototype._replaceChannelOfCollection = function(e4) {
    this._channel.isGroupChannel() ? this._channel = e4 : this._channel.isFeedChannel() && (this._channel._groupChannel = e4._groupChannel);
  }, e3.prototype._shouldStartBackgroundSync = function() {
    var e4 = Ws.of(this._iid).cacheContext;
    return this.channel.isGroupChannel() ? e4.localCacheEnabled && !this.channel.isSuper : e4.localCacheEnabled;
  }, e3.prototype._setBaseMessageCollectionHandler = function(e4) {
    this._handler = e4;
  }, e3.prototype._filterUnderOffsetMessage = function(e4) {
    return e4;
  }, e3.prototype._updateChildMessagesInView = function(e4) {
    var t7 = [];
    return this._messages.forEach(function(n4) {
      n4 instanceof pt && n4.parentMessageId === e4.messageId && n4.applyParentMessage(e4) && t7.push(n4);
    }), t7;
  }, e3.prototype._updatePollsToView = function(e4, t7) {
    var n4, s6, r4 = this, a5 = [];
    try {
      for (var i4 = o(e4), o3 = i4.next(); !o3.done; o3 = i4.next()) {
        var u4 = o3.value, c4 = vs2(this._messages, u4.messageId);
        if (c4 >= 0) {
          var l3 = this._messages[c4];
          l3.isUserMessage() && l3.applyPoll(u4), a5.push(l3);
        }
      }
    } catch (e5) {
      n4 = { error: e5 };
    } finally {
      try {
        o3 && !o3.done && (s6 = i4.return) && s6.call(i4);
      } finally {
        if (n4) throw n4.error;
      }
    }
    return a5.length > 0 && Js(t7) && os(function() {
      return r(r4, void 0, void 0, function() {
        var e5, n5, s7;
        return s(this, function(r5) {
          return e5 = { source: t7 }, a5.length > 0 && (null === (s7 = (n5 = this._handler).onMessagesUpdated) || void 0 === s7 || s7.call(n5, e5, this.channel, a5)), [2];
        });
      });
    }), a5;
  }, e3.prototype._applyPollUpdateEventToView = function(e4, t7) {
    var n4 = this, s6 = vs2(this._messages, e4.messageId);
    if (s6 >= 0) {
      var r4 = this._messages[s6];
      r4 && r4.isUserMessage() && r4.poll && r4.poll.applyPollUpdateEvent(e4) && Js(t7) && os(function() {
        return r(n4, void 0, void 0, function() {
          var e5, n5, s7;
          return s(this, function(a5) {
            return e5 = { source: t7 }, null === (s7 = null === (n5 = this._handler) || void 0 === n5 ? void 0 : n5.onMessagesUpdated) || void 0 === s7 || s7.call(n5, e5, this.channel, [r4]), [2];
          });
        });
      });
    }
  }, e3.prototype._applyPollVoteEventToView = function(e4, t7) {
    var n4 = this, s6 = vs2(this._messages, e4.messageId);
    if (s6 >= 0) {
      var r4 = this._messages[s6];
      r4 && r4.isUserMessage() && r4.poll && r4.poll.applyPollVoteEvent(e4) && Js(t7) && os(function() {
        return r(n4, void 0, void 0, function() {
          var e5, n5, s7;
          return s(this, function(a5) {
            return e5 = { source: t7 }, null === (s7 = null === (n5 = this._handler) || void 0 === n5 ? void 0 : n5.onMessagesUpdated) || void 0 === s7 || s7.call(n5, e5, this.channel, [r4]), [2];
          });
        });
      });
    }
  }, e3.prototype._applyReactionEventToView = function(e4, t7) {
    var n4 = this, s6 = vs2(this._messages, e4.messageId);
    if (s6 >= 0) {
      var r4 = this._messages[s6];
      r4 && (r4.isUserMessage() || r4.isFileMessage() || r4.isMultipleFilesMessage()) && Js(t7) && (r4.applyReactionEvent(e4), os(function() {
        return r(n4, void 0, void 0, function() {
          var e5, n5, s7;
          return s(this, function(a5) {
            return e5 = { source: t7 }, null === (s7 = null === (n5 = this._handler) || void 0 === n5 ? void 0 : n5.onMessagesUpdated) || void 0 === s7 || s7.call(n5, e5, this.channel, [r4]), [2];
          });
        });
      }));
    }
  }, e3.prototype._applyThreadInfoEventToView = function(e4, t7) {
    var n4 = this, s6 = vs2(this._messages, e4.targetMessageId);
    if (s6 >= 0) {
      var r4 = this._messages[s6];
      r4 && (r4.isUserMessage() || r4.isFileMessage() || r4.isMultipleFilesMessage()) && Js(t7) && (r4.applyThreadInfoUpdateEvent(e4), os(function() {
        return r(n4, void 0, void 0, function() {
          var e5, n5, s7;
          return s(this, function(a5) {
            return e5 = { source: t7 }, null === (s7 = null === (n5 = this._handler) || void 0 === n5 ? void 0 : n5.onMessagesUpdated) || void 0 === s7 || s7.call(n5, e5, this.channel, [r4]), [2];
          });
        });
      }));
    }
  }, e3.prototype._removeMessagesFromView = function(e4, t7) {
    var n4, s6, r4 = this, a5 = [], i4 = [], o3 = function(e5) {
      var t8 = u4._messages.findIndex(function(t9) {
        return r4.keyOf(t9) === e5;
      });
      if (t8 >= 0) {
        var n5 = u4._messages[t8];
        a5.push(u4.keyOf(n5)), i4.push(n5), u4._messages.splice(t8, 1);
      }
    }, u4 = this;
    try {
      for (var c4 = o(e4), l3 = c4.next(); !l3.done; l3 = c4.next()) {
        o3(l3.value);
      }
    } catch (e5) {
      n4 = { error: e5 };
    } finally {
      try {
        l3 && !l3.done && (s6 = c4.return) && s6.call(c4);
      } finally {
        if (n4) throw n4.error;
      }
    }
    return Js(t7) && i4.length > 0 && os(function() {
      return r(r4, void 0, void 0, function() {
        var e5, n5, s7;
        return s(this, function(r5) {
          return e5 = { source: t7 }, null === (s7 = null === (n5 = this._handler) || void 0 === n5 ? void 0 : n5.onMessagesDeleted) || void 0 === s7 || s7.call(n5, e5, this.channel, a5, i4), [2];
        });
      });
    }), a5;
  }, e3.prototype._removeUnsentMessageFromView = function(e4, t7) {
    var n4 = this._unsentMessages.findIndex(function(t8) {
      return t8.reqId === e4;
    });
    n4 >= 0 && this._unsentMessages.splice(n4, 1);
  }, e3.prototype._getLocalMessages = function(e4, t7) {
    var n4 = t7.prevLimit, s6 = void 0 === n4 ? 0 : n4, r4 = t7.nextLimit, a5 = void 0 === r4 ? 0 : r4, i4 = t7.inclusive, o3 = void 0 === i4 || i4;
    return r(this, void 0, void 0, function() {
      var t8, n5, r5, i5, u4;
      return s(this, function(c4) {
        switch (c4.label) {
          case 0:
            return t8 = [], o3 ? [4, this._channelManager.getExactlyMatchingMessagesForTokenFromCache(this._channel.url, e4, this.filter)] : [3, 2];
          case 1:
            t8 = c4.sent(), c4.label = 2;
          case 2:
            return s6 > 0 ? [4, this._channelManager.getMessagesFromCache(this._channel.url, e4, "prev", this.filter, s6, false)] : [3, 4];
          case 3:
            return r5 = c4.sent(), [3, 5];
          case 4:
            r5 = [], c4.label = 5;
          case 5:
            return n5 = r5, a5 > 0 ? [4, this._channelManager.getMessagesFromCache(this._channel.url, e4, "next", this.filter, a5, false)] : [3, 7];
          case 6:
            return u4 = c4.sent(), [3, 8];
          case 7:
            u4 = [], c4.label = 8;
          case 8:
            return i5 = u4, [2, c(c(c([], a(t8), false), a(n5), false), a(i5), false).sort(function(e5, t9) {
              return t9.createdAt - e5.createdAt;
            })];
        }
      });
    });
  }, e3.prototype._getRemoteMessages = function(e4, t7) {
    var r4 = t7.prevLimit, a5 = void 0 === r4 ? 0 : r4, i4 = t7.nextLimit, o3 = void 0 === i4 ? 0 : i4, u4 = t7.source, c4 = void 0 === u4 ? Ks.REQUEST_MESSAGE : u4, l3 = t7.reverse, h4 = void 0 !== l3 && l3, d5 = t7.checkingHasNext, _2 = void 0 !== d5 && d5, v5 = t7.checkingContinuousMessages, m5 = void 0 !== v5 && v5;
    return r(this, void 0, void 0, function() {
      var t8, r5;
      return s(this, function(i5) {
        switch (i5.label) {
          case 0:
            return t8 = ea.of(this._iid), a5 > 0 || o3 > 0 ? [4, t8._getMessagesByTimestampForCollection(this._channel.url, this._channel.channelType, e4, se(n(n(n({}, this.filter), Ts2), { isInclusive: true, reverse: h4, prevResultSize: a5, nextResultSize: o3 })), c4, _2, m5)] : [3, 2];
          case 1:
            return r5 = i5.sent(), [3, 3];
          case 2:
            r5 = { messages: [], isContinuousMessages: false }, i5.label = 3;
          case 3:
            return [2, r5];
        }
      });
    });
  }, e3.prototype._checkHugeGap = function() {
    var e4, t7, n4, r4, a5;
    return r(this, void 0, void 0, function() {
      var i4, o3, u4, c4, l3, v5, m5, g4, E4, C3, M5, b6, N3, U2, S6, A3, T4, I5, w4, L5, D3, x2, R4, F2, k3, O4 = this;
      return s(this, function(V2) {
        switch (V2.label) {
          case 0:
            return i4 = Ws.of(this._iid), o3 = i4.dispatcher, u4 = i4.requestQueue, c4 = i4.cacheContext, l3 = i4.statManager, v5 = i4.logger, this._messages.length > 0 ? (m5 = this._syncRange.top, g4 = this.viewTop, E4 = this._syncRange.bottom, C3 = this.hasNext ? this.viewBottom : Number.MAX_SAFE_INTEGER, [4, this._channelManager.getCachedMessageCountBetween(this._channel.url, this.filter, g4, m5)]) : [3, 8];
          case 1:
            return M5 = V2.sent(), [4, this._channelManager.getCachedMessageCountBetween(this._channel.url, this.filter, E4, C3)];
          case 2:
            b6 = V2.sent(), V2.label = 3;
          case 3:
            return V2.trys.push([3, 5, 6, 7]), [4, _s(function() {
              return r(O4, void 0, void 0, function() {
                var e5, t8, n5, r5, a6, i5, l4, h4, v6, N4, U3, S7, A4, T5, I6, w5, L6, D4 = this;
                return s(this, function(x3) {
                  switch (x3.label) {
                    case 0:
                      return e5 = new Ss2(n(n({ channelUrl: this._channel.url, channelType: this._channel.channelType, prevStart: g4, prevEnd: m5, prevCount: M5, nextStart: E4, nextEnd: C3, nextCount: b6, checkingContinuousMessages: c4.localCacheEnabled }, this.filter), Ts2)), [4, u4.send(e5)];
                    case 1:
                      return t8 = x3.sent(), n5 = t8.as(As2), r5 = n5.isHugeGap, a6 = n5.prevMessages, i5 = void 0 === a6 ? [] : a6, l4 = n5.prevHasMore, h4 = n5.isContinuousPrevMessages, v6 = n5.nextMessages, N4 = void 0 === v6 ? [] : v6, U3 = n5.nextHasmore, S7 = n5.isContinuousNextMessages, r5 ? os(function() {
                        return r(D4, void 0, void 0, function() {
                          var e6;
                          return s(this, function(t9) {
                            return (null === (e6 = this._handler) || void 0 === e6 ? void 0 : e6.onHugeGapDetected) && this._handler.onHugeGapDetected(), [2];
                          });
                        });
                      }) : (A4 = this.viewTop, T5 = this.viewBottom, I6 = Math.min.apply(Math, c([Number.MAX_SAFE_INTEGER, A4], a(i5.map(function(e6) {
                        return e6.createdAt;
                      })), false)), w5 = Math.max.apply(Math, c([0, T5], a(N4.map(function(e6) {
                        return e6.createdAt;
                      })), false)), o3.dispatch(new $s({ messages: i5, source: Ks.SYNC_MESSAGE_FILL })), o3.dispatch(new $s({ messages: N4, source: Ks.SYNC_MESSAGE_FILL })), this._syncRange.extends(I6, w5), (h4 || S7) && (null === (L6 = this._backgroundSync) || void 0 === L6 || L6.range.extends(I6, w5)), l4 && this._prevFill.start(I6), U3 && this._nextFill.start(w5)), [2];
                  }
                });
              });
            }, 1)];
          case 4:
            return V2.sent(), [3, 7];
          case 5:
            return N3 = V2.sent(), v5.debug("Failed HugeGap Check ", N3), [3, 7];
          case 6:
            return l3.put(new Ze({ type: Le.FEATURE_LOCALCACHE_EVENT, ts: Date.now(), data: { channel_url: this.channel.url, measured_on: "gap_check", event: "cache_fetch", max_db_size: null !== (t7 = null === (e4 = c4.localCacheConfig) || void 0 === e4 ? void 0 : e4.maxSize) && void 0 !== t7 ? t7 : 0, use_local_cache: c4.localCacheEnabled, starting_point: 0, message_init_policy: "" } })), [7];
          case 7:
            return [3, 13];
          case 8:
            U2 = Date.now(), V2.label = 9;
          case 9:
            return V2.trys.push([9, 11, 12, 13]), [4, this._getRemoteMessages(U2, { prevLimit: this._prevResultLimit, nextLimit: this._nextResultLimit, source: Ks.SYNC_MESSAGE_FILL, checkingHasNext: true, checkingContinuousMessages: c4.localCacheEnabled })];
          case 10:
            if (S6 = V2.sent(), A3 = S6.messages, T4 = S6.isContinuousMessages, I5 = S6.hasNext, A3.length > 0) {
              for (w4 = A3.map(function(e5) {
                return e5.createdAt;
              }), L5 = 0, D3 = 0, x2 = 0; x2 < w4.length; x2++) (R4 = w4[x2]) <= U2 ? L5++ : R4 >= U2 && D3++;
              this._hasPrevious = L5 >= this._prevResultLimit, this._hasNext = null != I5 ? I5 : D3 >= this._nextResultLimit, (k3 = this._syncRange).extends.apply(k3, c([], a(w4), false)), T4 && (null === (n4 = this._backgroundSync) || void 0 === n4 || n4.range.extends(this._syncRange.top, this._syncRange.bottom)), this._addMessagesToView(A3, Ks.SYNC_MESSAGE_FILL);
            } else this._hasPrevious = false, this._hasNext = false;
            return [3, 13];
          case 11:
            return (F2 = V2.sent()) instanceof v && F2.code === u.NOT_FOUND_IN_DATABASE && (this._hasPrevious = false, this._hasNext = false), [3, 13];
          case 12:
            return l3.put(new Ze({ type: Le.FEATURE_LOCALCACHE_EVENT, ts: Date.now(), data: { channel_url: this.channel.url, measured_on: "gap_check", event: "cache_fetch", max_db_size: null !== (a5 = null === (r4 = c4.localCacheConfig) || void 0 === r4 ? void 0 : r4.maxSize) && void 0 !== a5 ? a5 : 0, use_local_cache: c4.localCacheEnabled, starting_point: 0, message_init_policy: "" } })), [7];
          case 13:
            return [2];
        }
      });
    });
  }, e3.prototype._loadUnsentMessages = function() {
    return r(this, void 0, void 0, function() {
      var e4;
      return s(this, function(t7) {
        switch (t7.label) {
          case 0:
            return e4 = this, [4, this._channelManager.getUnsentMessagesFromCache(this._channel.url, this.filter)];
          case 1:
            return e4._unsentMessages = t7.sent(), [2];
        }
      });
    });
  }, e3.prototype._hasPollMessage = function() {
    return r(this, void 0, void 0, function() {
      return s(this, function(e4) {
        switch (e4.label) {
          case 0:
            return [4, this._channelManager.getPollMessagesFromCache(this._channel.url, Date.now() + 6e5, this.filter, 1)];
          case 1:
            return e4.sent().length > 0 ? [2, true] : [2, false];
        }
      });
    });
  }, e3.prototype._refreshChannel = function(e4, t7) {
    return void 0 === t7 && (t7 = false), r(this, void 0, void 0, function() {
      var n4, s6;
      return s(this, function(r4) {
        switch (r4.label) {
          case 0:
            n4 = Ws.of(this._iid).logger, r4.label = 1;
          case 1:
            return r4.trys.push([1, 3, , 4]), [4, this._channelManager.refreshChannel(this.channel.url, true, e4, t7)];
          case 2:
            return r4.sent(), [3, 4];
          case 3:
            return s6 = r4.sent(), n4.warn("Failed to refresh channel", s6), [3, 4];
          case 4:
            return [2];
        }
      });
    });
  }, e3.prototype._startCheckMyMutedTimer = function(e4) {
    var t7 = this;
    this._clearCheckMyMutedTimer(), this._checkMyMutedStateTimer = setTimeout(function() {
      return r(t7, void 0, void 0, function() {
        var e5, t8, n4, s6 = this;
        return s(this, function(r4) {
          switch (r4.label) {
            case 0:
              this._checkMyMutedStateTimer = void 0, e5 = true, r4.label = 1;
            case 1:
              return r4.trys.push([1, 3, 4, 5]), [4, this._channel.getMyMutedInfo()];
            case 2:
              return t8 = r4.sent(), e5 = !t8.isMuted, [3, 5];
            case 3:
              return r4.sent(), e5 = true, [3, 5];
            case 4:
              return e5 && (n4 = Ws.of(this._iid).sessionManager, this.channel._runIfHandleableWithGroupChannel(function(e6) {
                var t9, r5;
                e6.myMutedState = H.UNMUTED;
                var a5 = { source: Ks.EVENT_CHANNEL_UNMUTED, user: n4.currentUser };
                null === (r5 = null === (t9 = s6._handler) || void 0 === t9 ? void 0 : t9.onChannelUpdated) || void 0 === r5 || r5.call(t9, a5, s6.channel);
              })), [7];
            case 5:
              return [2];
          }
        });
      });
    }, e4 + 1e3);
  }, e3.prototype._clearCheckMyMutedTimer = function() {
    this._checkMyMutedStateTimer && (clearTimeout(this._checkMyMutedStateTimer), this._checkMyMutedStateTimer = void 0);
  }, e3.prototype._setHasNextAndHaePrevious = function(e4, t7) {
    for (var n4 = e4.map(function(e5) {
      return e5.createdAt;
    }), s6 = 0, r4 = 0, a5 = 0; a5 < n4.length; a5++) {
      var i4 = n4[a5];
      i4 < this._startingPoint ? s6++ : i4 > this._startingPoint && r4++;
    }
    this._hasPrevious = s6 >= this._prevResultLimit, this._hasNext = null != t7 ? t7 : r4 >= this._nextResultLimit;
  }, e3.prototype.initialize = function(e4) {
    var t7 = this, n4 = new Ds2();
    this._messages = [], this._unsentMessages = [], this._syncRange = new ds2({}), this._hasNext = true, this._hasPrevious = true;
    var s6 = [], r4 = Ws.of(this._iid), a5 = r4.cacheContext, i4 = r4.statManager;
    if (e4 === gs2.CACHE_AND_REPLACE_BY_API) this._getLocalMessages(this._startingPoint, { prevLimit: this._prevResultLimit, nextLimit: this._nextResultLimit }).then(function(e5) {
      return r(t7, void 0, void 0, function() {
        return s(this, function(t8) {
          switch (t8.label) {
            case 0:
              return s6 = this._filterUnderOffsetMessage(e5), this._addMessagesToView(s6, Ks.REQUEST_MESSAGE), [4, this._loadUnsentMessages()];
            case 1:
              return t8.sent(), n4._invokeResponse("local", null, s6), [2];
          }
        });
      });
    }).catch(function(e5) {
      if (g(e5)) throw e5;
      n4._invokeResponse("local", e5, null);
    }).finally(function() {
      return r(t7, void 0, void 0, function() {
        var t8, r5, a6, o3, u4, c4, l3 = this;
        return s(this, function(h4) {
          switch (h4.label) {
            case 0:
              return t8 = Ws.of(this._iid).cacheContext, r5 = true, a6 = true, o3 = false, t8.localCacheEnabled && s6.length > 0 && this._backgroundSync.isWrappingMessages(s6) && (this._startingPoint > this._backgroundSync.range.bottom ? o3 = true : a6 = false), [4, this._refreshChannel(Ks.REFRESH_CHANNEL, o3)];
            case 1:
              return h4.sent(), o3 && this._channel._runIfHandleableWithGroupChannel(function(e5) {
                var t9 = Math.max.apply(Math, c([], a(s6.map(function(e6) {
                  return e6.createdAt;
                })), false));
                e5._latestMessageInfo && t9 >= e5._latestMessageInfo.createdAt && (a6 = false);
              }), a6 ? (r5 = false, this._getRemoteMessages(this._startingPoint, { prevLimit: this._prevResultLimit, nextLimit: this._nextResultLimit, reverse: true, checkingHasNext: true, checkingContinuousMessages: t8.localCacheEnabled }).then(function(s7) {
                var r6, a7, o4, u5, c5, h5 = s7.messages, p4 = s7.isContinuousMessages, f4 = s7.hasNext, v5 = l3._filterUnderOffsetMessage(h5);
                l3._messages = [], v5.length > 0 ? (l3._setHasNextAndHaePrevious(v5, f4), (r6 = l3._syncRange).extends.apply(r6, c([], a(v5.map(function(e5) {
                  return e5.createdAt;
                })), false)), p4 && (null === (a7 = l3._backgroundSync) || void 0 === a7 ? void 0 : a7.range.overlap(l3._syncRange)) && (null === (o4 = l3._backgroundSync) || void 0 === o4 || o4.range.extends(l3._syncRange.top, l3._syncRange.bottom)), l3._addMessagesToView(v5, Ks.REQUEST_MESSAGE)) : (l3._hasPrevious = false, l3._hasNext = false), i4.put(new Ze({ type: Le.FEATURE_LOCALCACHE_EVENT, ts: Date.now(), data: { channel_url: l3.channel.url, starting_point: l3._startingPoint, measured_on: "initial_load", event: "cache_fetch", max_db_size: null !== (c5 = null === (u5 = t8.localCacheConfig) || void 0 === u5 ? void 0 : u5.maxSize) && void 0 !== c5 ? c5 : 0, message_init_policy: e4, use_local_cache: t8.localCacheEnabled, collection_id: l3._key } })), n4._invokeResponse("remote", null, v5);
              }).catch(function(e5) {
                if (g(e5)) throw e5;
                n4._invokeResponse("remote", e5, null);
              })) : (this._setHasNextAndHaePrevious(s6), n4._invokeResponse("remote", null, s6)), i4.put(new Ze({ type: Le.FEATURE_LOCALCACHE_EVENT, ts: Date.now(), data: { channel_url: this.channel.url, starting_point: this._startingPoint, measured_on: "initial_load", event: r5 ? "cache_hit" : "cache_miss", max_db_size: null !== (c4 = null === (u4 = t8.localCacheConfig) || void 0 === u4 ? void 0 : u4.maxSize) && void 0 !== c4 ? c4 : 0, message_init_policy: e4, use_local_cache: t8.localCacheEnabled, collection_id: this._key } })), [2];
          }
        });
      });
    });
    return i4.put(new qs({ type: Le.FEATURE_LOCALCACHE, data: { use_local_cache: a5.localCacheEnabled, collection_interface: { message_init_policy: e4, message: true } } })), n4;
  }, e3.prototype.loadPrevious = function() {
    var e4, t7, n4;
    return r(this, void 0, void 0, function() {
      var s6, r4, a5, i4, o3, u4, c4, l3, v5 = this;
      return s(this, function(m5) {
        switch (m5.label) {
          case 0:
            if (this._isDisposed) throw new v({ code: u.COLLECTION_DISPOSED, message: "Collection has been disposed." });
            return s6 = Ws.of(this._iid), r4 = s6.cacheContext, a5 = s6.statManager, i4 = s6.logger, this._hasPrevious ? this._isLoadingPrevious ? (i4.warn("Messages are already fetching."), [2, []]) : (this._isLoadingPrevious = true, o3 = this.viewTop, u4 = [], [4, as(function() {
              return r(v5, void 0, void 0, function() {
                var e5;
                return s(this, function(t8) {
                  switch (t8.label) {
                    case 0:
                      return e5 = this._filterUnderOffsetMessage, [4, this._getLocalMessages(o3, { prevLimit: this._prevResultLimit, inclusive: false })];
                    case 1:
                      return u4 = e5.apply(this, [t8.sent()]), [2];
                  }
                });
              });
            })]) : [2, []];
          case 1:
            return m5.sent(), c4 = u4.length >= this._prevResultLimit, a5.put(new Ze({ type: Le.FEATURE_LOCALCACHE_EVENT, ts: Date.now(), data: { channel_url: this.channel.url, starting_point: this._startingPoint, measured_on: "load_prev", event: r4.localCacheEnabled && c4 ? "cache_hit" : "cache_miss", max_db_size: null !== (t7 = null === (e4 = r4.localCacheConfig) || void 0 === e4 ? void 0 : e4.maxSize) && void 0 !== t7 ? t7 : 0, use_local_cache: r4.localCacheEnabled, collection_id: this._key, message_init_policy: "" } })), c4 && (null === (n4 = this._backgroundSync) || void 0 === n4 ? void 0 : n4.isWrappingMessages(u4)) ? [3, 3] : (l3 = false, [4, as(function() {
              return r(v5, void 0, void 0, function() {
                var e5, t8, n5, s7, r5, i5, c5, h4 = this;
                return s(this, function(p4) {
                  switch (p4.label) {
                    case 0:
                      return e5 = Ws.of(this._iid).cacheContext, [4, this._getRemoteMessages(o3, { prevLimit: this._prevResultLimit, reverse: true, checkingContinuousMessages: e5.localCacheEnabled })];
                    case 1:
                      return t8 = p4.sent(), (u4 = this._filterUnderOffsetMessage(t8.messages)).length > 0 && ((n5 = this._syncRange).extends.apply(n5, c([], a(u4.map(function(e6) {
                        return e6.createdAt;
                      })), false)), (null === (s7 = this._backgroundSync) || void 0 === s7 ? void 0 : s7.range.overlap(this._syncRange)) && t8.isContinuousMessages && (l3 = true, null === (r5 = this._backgroundSync) || void 0 === r5 || r5.range.extends(this._syncRange.top))), u4 = u4.filter(function(e6) {
                        return fs2(h4._messages, e6) < 0;
                      }), this._hasPrevious = u4.length >= this._prevResultLimit, l3 && a5.put(new Ze({ type: Le.FEATURE_LOCALCACHE_EVENT, ts: Date.now(), data: { channel_url: this.channel.url, starting_point: this._startingPoint, measured_on: "load_prev", event: "cache_fetch", max_db_size: null !== (c5 = null === (i5 = e5.localCacheConfig) || void 0 === i5 ? void 0 : i5.maxSize) && void 0 !== c5 ? c5 : 0, use_local_cache: e5.localCacheEnabled, collection_id: this._key, message_init_policy: "" } })), [2];
                  }
                });
              });
            })]);
          case 2:
            return m5.sent(), this._addMessagesToView(u4, Ks.REQUEST_MESSAGE), [3, 4];
          case 3:
            this._hasPrevious = u4.length >= this._prevResultLimit, u4.length > 0 && this._addMessagesToView(u4, Ks.REQUEST_MESSAGE), m5.label = 4;
          case 4:
            return this._isLoadingPrevious = false, [2, u4];
        }
      });
    });
  }, e3.prototype.loadNext = function() {
    var e4, t7, n4;
    return r(this, void 0, void 0, function() {
      var s6, r4, a5, i4, o3, u4, c4, l3, v5 = this;
      return s(this, function(m5) {
        switch (m5.label) {
          case 0:
            if (this._isDisposed) throw new v({ code: u.COLLECTION_DISPOSED, message: "Collection has been disposed." });
            return s6 = Ws.of(this._iid), r4 = s6.cacheContext, a5 = s6.statManager, i4 = s6.logger, this._hasNext ? this._isLoadingNext ? (i4.warn("Messages are already fetching."), [2, []]) : (this._isLoadingNext = true, o3 = this.viewBottom, u4 = [], [4, as(function() {
              return r(v5, void 0, void 0, function() {
                var e5;
                return s(this, function(t8) {
                  switch (t8.label) {
                    case 0:
                      return e5 = this._filterUnderOffsetMessage, [4, this._getLocalMessages(o3, { nextLimit: this._nextResultLimit, inclusive: false })];
                    case 1:
                      return u4 = e5.apply(this, [t8.sent()]), [2];
                  }
                });
              });
            })]) : [2, []];
          case 1:
            return m5.sent(), c4 = u4.length >= this._nextResultLimit, a5.put(new Ze({ type: Le.FEATURE_LOCALCACHE_EVENT, ts: Date.now(), data: { channel_url: this.channel.url, starting_point: this._startingPoint, measured_on: "load_next", event: r4.localCacheEnabled && c4 ? "cache_hit" : "cache_miss", max_db_size: null !== (t7 = null === (e4 = r4.localCacheConfig) || void 0 === e4 ? void 0 : e4.maxSize) && void 0 !== t7 ? t7 : 0, use_local_cache: r4.localCacheEnabled, collection_id: this._key, message_init_policy: "" } })), c4 && (null === (n4 = this._backgroundSync) || void 0 === n4 ? void 0 : n4.isWrappingMessages(u4)) ? [3, 3] : (l3 = false, [4, as(function() {
              return r(v5, void 0, void 0, function() {
                var e5, t8, n5, s7, r5, i5, c5, h4, p4 = this;
                return s(this, function(f4) {
                  switch (f4.label) {
                    case 0:
                      return e5 = Ws.of(this._iid).cacheContext, [4, this._getRemoteMessages(o3, { nextLimit: this._nextResultLimit, reverse: true, checkingHasNext: true, checkingContinuousMessages: e5.localCacheEnabled })];
                    case 1:
                      return t8 = f4.sent(), (u4 = this._filterUnderOffsetMessage(t8.messages)).length > 0 && ((n5 = this._syncRange).extends.apply(n5, c([], a(u4.map(function(e6) {
                        return e6.createdAt;
                      })), false)), (null === (s7 = this._backgroundSync) || void 0 === s7 ? void 0 : s7.range.overlap(this._syncRange)) && t8.isContinuousMessages && (l3 = true, null === (r5 = this._backgroundSync) || void 0 === r5 || r5.range.extends(this._syncRange.bottom))), u4 = u4.filter(function(e6) {
                        return fs2(p4._messages, e6) < 0;
                      }), this._hasNext = null !== (i5 = t8.hasNext) && void 0 !== i5 ? i5 : u4.length >= this._nextResultLimit, l3 && a5.put(new Ze({ type: Le.FEATURE_LOCALCACHE_EVENT, ts: Date.now(), data: { channel_url: this.channel.url, starting_point: this._startingPoint, measured_on: "load_next", event: "cache_fetch", max_db_size: null !== (h4 = null === (c5 = e5.localCacheConfig) || void 0 === c5 ? void 0 : c5.maxSize) && void 0 !== h4 ? h4 : 0, use_local_cache: e5.localCacheEnabled, collection_id: this._key, message_init_policy: "" } })), [2];
                  }
                });
              });
            })]);
          case 2:
            return m5.sent(), this._addMessagesToView(u4, Ks.REQUEST_MESSAGE), [3, 4];
          case 3:
            this._hasNext = u4.length >= this._nextResultLimit, u4.length > 0 && this._addMessagesToView(u4, Ks.REQUEST_MESSAGE), m5.label = 4;
          case 4:
            return this._isLoadingNext = false, [2, u4];
        }
      });
    });
  }, e3.prototype.removeFailedMessage = function(e4) {
    return r(this, void 0, void 0, function() {
      var t7;
      return s(this, function(n4) {
        switch (n4.label) {
          case 0:
            if (this._isDisposed) throw new v({ code: u.COLLECTION_DISPOSED, message: "Collection has been disposed." });
            return [4, this._channelManager.removeFailedMessageFromCache(e4)];
          case 1:
            return n4.sent(), (t7 = this._unsentMessages.findIndex(function(t8) {
              return t8.reqId === e4;
            })) > -1 && this._unsentMessages.splice(t7, 1), [2];
        }
      });
    });
  }, e3.prototype.dispose = function() {
    var e4, t7, n4, s6 = this;
    if (!this._isDisposed) {
      this._isDisposed = true;
      var r4 = Ws.of(this._iid), a5 = r4.cacheContext, i4 = r4.dispatcher;
      this._messages = [], this._clearCheckMyMutedTimer(), this._channel._runIfHandleableWithGroupChannel(function(e5) {
        e5.myMemberState !== Wt2.NONE && (s6._channel._updateMessageCollectionLastAccessedAt(), i4.dispatch(new En2({ channels: [s6._channel], context: { source: Ks.CHANNEL_LASTACCESSEDAT_UPDATED } })));
      }), a5.localCacheEnabled && (this._prevFill.stop(), this._nextFill.stop()), null === (e4 = this._backgroundSync) || void 0 === e4 || e4.close(), null === (t7 = this._changelogSync) || void 0 === t7 || t7.close(), null === (n4 = this._pollChangelogSync) || void 0 === n4 || n4.close(), this._channelManager.unsubscribeChannelEvent(this._key), this._channelManager.unsubscribeMessageEvent(this._key), this._connectionEventContext && this._connectionEventContext.close();
    }
  }, e3;
}();
var Rs2 = function(t7) {
  function n4(e3, n5) {
    return t7.call(this, e3, n(n({}, n5), { channelManager: ps2.of(e3) })) || this;
  }
  return t(n4, t7), n4.prototype.keyOf = function(e3) {
    return e3.messageId;
  }, n4.prototype.initialize = function(e3) {
    var n5 = this;
    return as(function() {
      return r(n5, void 0, void 0, function() {
        var e4;
        return s(this, function(t8) {
          switch (t8.label) {
            case 0:
              return [4, this.channel.getMyMutedInfo()];
            case 1:
              return (e4 = t8.sent()).isMuted && -1 !== e4.remainingDuration && this._startCheckMyMutedTimer(e4.remainingDuration), [2];
          }
        });
      });
    }), t7.prototype.initialize.call(this, e3);
  }, n4.prototype.setMessageCollectionHandler = function(e3) {
    this._setBaseMessageCollectionHandler(e3);
  }, n4.prototype._activate = function() {
    return r(this, void 0, void 0, function() {
      var e3 = this;
      return s(this, function(n5) {
        switch (n5.label) {
          case 0:
            return [4, t7.prototype._activate.call(this)];
          case 1:
            return n5.sent(), [4, as(function() {
              return r(e3, void 0, void 0, function() {
                var e4;
                return s(this, function(t8) {
                  switch (t8.label) {
                    case 0:
                      return [4, this.channel.getMyMutedInfo()];
                    case 1:
                      return (e4 = t8.sent()).isMuted && -1 !== e4.remainingDuration && this._startCheckMyMutedTimer(e4.remainingDuration), [2];
                  }
                });
              });
            })];
          case 2:
            return n5.sent(), [2];
        }
      });
    });
  }, n4.prototype._addMessagesToView = function(e3, t8) {
    var n5, s6, r4 = this, a5 = this._filterUnderOffsetMessage(e3), i4 = [], o3 = [];
    try {
      for (var u4 = o(a5), c4 = u4.next(); !c4.done; c4 = u4.next()) {
        var l3 = c4.value;
        if (t8 === Ks.SYNC_MESSAGE_FILL) {
          if (l3.messageId > 0) {
            if ((E4 = fs2(this._messages, l3)) < 0) {
              fs2(this._unsentMessages, l3) < 0 && i4.push(l3);
              var h4 = ms2(this._messages, l3);
              this._messages.splice(h4, 0, l3);
            }
          } else if (l3 instanceof mt) {
            (E4 = fs2(this._unsentMessages, l3)) < 0 && fs2(this._messages, l3) < 0 && (this._unsentMessages.push(l3), i4.push(l3));
          }
        } else if (l3.messageId > 0) {
          if ((E4 = fs2(this._messages, l3)) < 0) {
            var m5 = fs2(this._unsentMessages, l3);
            m5 < 0 ? i4.push(l3) : (this._unsentMessages.splice(m5, 1), o3.push(l3));
            h4 = ms2(this._messages, l3);
            this._messages.splice(h4, 0, l3);
          } else o3.push(l3), this._messages[E4] = l3;
          if (l3.updatedAt > 0) {
            var g4 = this._updateChildMessagesInView(l3);
            o3.push.apply(o3, c([], a(g4), false));
          }
        } else if (l3 instanceof mt) {
          var E4;
          (E4 = fs2(this._unsentMessages, l3)) < 0 ? fs2(this._messages, l3) < 0 && (this._unsentMessages.push(l3), i4.push(l3)) : (o3.push(l3), this._unsentMessages[E4] = l3);
        }
      }
    } catch (e4) {
      n5 = { error: e4 };
    } finally {
      try {
        c4 && !c4.done && (s6 = u4.return) && s6.call(u4);
      } finally {
        if (n5) throw n5.error;
      }
    }
    Js(t8) && os(function() {
      return r(r4, void 0, void 0, function() {
        var e4, n6, s7, r5, a6;
        return s(this, function(u5) {
          return e4 = { source: t8 }, i4.length > 0 && (null === (s7 = null === (n6 = this._handler) || void 0 === n6 ? void 0 : n6.onMessagesAdded) || void 0 === s7 || s7.call(n6, e4, this.channel, i4)), o3.length > 0 && (null === (a6 = null === (r5 = this._handler) || void 0 === r5 ? void 0 : r5.onMessagesUpdated) || void 0 === a6 || a6.call(r5, e4, this.channel, o3)), [2];
        });
      });
    });
  }, n4.prototype._updateMessagesToView = function(e3, t8) {
    var n5, s6, r4 = this, a5 = [], i4 = [], o3 = [];
    try {
      for (var u4 = o(e3), c4 = u4.next(); !c4.done; c4 = u4.next()) {
        var l3, h4 = c4.value;
        if (h4.messageId > 0) if ((l3 = fs2(this._messages, h4)) >= 0) i4.push(h4), this._messages[l3] = h4;
        else {
          var m5 = fs2(this._unsentMessages, h4);
          if (m5 >= 0) {
            var g4 = a(this._unsentMessages.splice(m5, 1), 1)[0];
            if (this.hasNext && g4) o3.push(g4);
            else {
              i4.push(h4);
              var E4 = ms2(this._messages, h4);
              this._messages.splice(E4, 0, h4);
            }
          } else {
            var C3 = this._messages.map(function(e4) {
              return e4.createdAt;
            });
            (h4.createdAt < Math.min.apply(Math, c([], a(C3), false)) && !this._hasPrevious || h4.createdAt > Math.max.apply(Math, c([], a(C3), false)) && !this._hasNext) && a5.push(h4);
          }
        }
        else if (h4 instanceof mt) (l3 = fs2(this._unsentMessages, h4)) >= 0 && (i4.push(h4), this._unsentMessages[l3] = h4);
      }
    } catch (e4) {
      n5 = { error: e4 };
    } finally {
      try {
        c4 && !c4.done && (s6 = u4.return) && s6.call(u4);
      } finally {
        if (n5) throw n5.error;
      }
    }
    return Js(t8) && os(function() {
      return r(r4, void 0, void 0, function() {
        var e4, n6, s7, r5, u5;
        return s(this, function(c5) {
          return e4 = { source: t8 }, i4.length > 0 ? null === (s7 = null === (n6 = this._handler) || void 0 === n6 ? void 0 : n6.onMessagesUpdated) || void 0 === s7 || s7.call(n6, e4, this.channel, i4) : o3.length > 0 ? null === (u5 = null === (r5 = this._handler) || void 0 === r5 ? void 0 : r5.onMessagesDeleted) || void 0 === u5 || u5.call(r5, e4, this.channel, [], o3) : a5.length > 0 && this._addMessagesToView(a5, t8), [2];
        });
      });
    }), i4;
  }, n4;
}(xs2);
var Fs2 = { coverUrl: void 0, coverImage: void 0, isDistinct: void 0, isPublic: void 0, isDiscoverable: void 0, accessCode: void 0, name: void 0, data: void 0, customType: void 0, operatorUserIds: void 0, messageSurvivalSeconds: void 0 };
var Ps3 = function(t7) {
  function n4(e3) {
    var n5 = this, s6 = e3.channelUrl, r4 = e3.token, a5 = e3.limit, i4 = e3.order, o3 = e3.mutedMemberFilter, u4 = e3.memberStateFilter, c4 = e3.nicknameStartsWithFilter, l3 = e3.operatorFilter;
    return (n5 = t7.call(this) || this).method = oe.GET, n5.path = "".concat(he, "/").concat(encodeURIComponent(s6), "/members"), n5.params = { token: r4, limit: a5, order: i4, muted_member_filter: o3, member_state_filter: u4, nickname_startswith: c4, operator_filter: l3, show_member_is_muted: true, show_read_receipt: true, show_delivery_receipt: true }, n5;
  }
  return t(n4, t7), n4;
}(xe);
var ks2 = function(t7) {
  function n4(e3, n5) {
    var s6 = t7.call(this, e3, n5) || this;
    s6.members = [];
    var r4 = n5.next, a5 = n5.members;
    return s6.token = r4, a5 && a5.length > 0 && (s6.members = a5.map(function(t8) {
      return new tn2(e3, t8);
    })), s6;
  }
  return t(n4, t7), n4;
}(Ue);
!function(e3) {
  e3.ALL = "all", e3.MUTED = "muted", e3.UNMUTED = "unmuted";
}(Is2 || (Is2 = {})), function(e3) {
  e3.MEMBER_NICKNAME_ALPHABETICAL = "member_nickname_alphabetical", e3.OPERATOR_THEN_MEMBER_ALPHABETICAL = "operator_then_member_alphabetical";
}(ws2 || (ws2 = {})), function(e3) {
  e3.ALL = "all", e3.JOINED = "joined_only", e3.INVITED = "invited_only", e3.INVITED_BY_FRIEND = "invited_by_friend", e3.INVITED_BY_NON_FRIEND = "invited_by_non_friend";
}(Ls2 || (Ls2 = {}));
var Os2 = function(t7) {
  function a5(e3, n4, s6) {
    var r4, a6, o3, u4, c4 = this;
    return (c4 = t7.call(this, e3, n4, q.GROUP, s6) || this).mutedMemberFilter = Is2.ALL, c4.memberStateFilter = Ls2.ALL, c4.nicknameStartsWithFilter = null, c4.operatorFilter = Zt2.ALL, c4.order = ws2.MEMBER_NICKNAME_ALPHABETICAL, c4.mutedMemberFilter = null !== (r4 = s6.mutedMemberFilter) && void 0 !== r4 ? r4 : Is2.ALL, c4.memberStateFilter = null !== (a6 = s6.memberStateFilter) && void 0 !== a6 ? a6 : Ls2.ALL, c4.nicknameStartsWithFilter = null !== (o3 = s6.nicknameStartsWithFilter) && void 0 !== o3 ? o3 : null, c4.order = null !== (u4 = s6.order) && void 0 !== u4 ? u4 : ws2.MEMBER_NICKNAME_ALPHABETICAL, c4;
  }
  return t(a5, t7), a5.prototype._validate = function() {
    return t7.prototype._validate.call(this) && S(Is2, this.mutedMemberFilter) && S(Ls2, this.memberStateFilter) && (w("string", this.nicknameStartsWithFilter) || null === this.nicknameStartsWithFilter) && S(Zt2, this.operatorFilter) && S(ws2, this.order);
  }, a5.prototype.next = function() {
    return r(this, void 0, void 0, function() {
      var e3, t8, r4, a6, i4, o3;
      return s(this, function(u4) {
        switch (u4.label) {
          case 0:
            return this._validate() ? this._isLoading ? [3, 3] : this._hasNext ? (this._isLoading = true, e3 = Ws.of(this._iid).requestQueue, t8 = new Ps3(se(n(n({}, this), { token: this._token }))), [4, e3.send(t8)]) : [3, 2] : [3, 5];
          case 1:
            return r4 = u4.sent(), a6 = r4.as(ks2), i4 = a6.members, o3 = a6.token, this._token = o3, this._hasNext = !!o3, this._isLoading = false, [2, i4];
          case 2:
            return [2, []];
          case 3:
            throw v.queryInProgress;
          case 4:
            return [3, 6];
          case 5:
            throw v.invalidParameters;
          case 6:
            return [2];
        }
      });
    });
  }, a5;
}(fo);
var Hs2 = function(t7) {
  function n4(e3) {
    var n5 = this, s6 = e3.channelUrl, r4 = e3.userId, a5 = e3.accessCode;
    return (n5 = t7.call(this) || this).method = oe.PUT, n5.path = "".concat(he, "/").concat(encodeURIComponent(s6), "/accept"), n5.params = { user_id: r4, access_code: a5 }, n5;
  }
  return t(n4, t7), n4;
}(xe);
var Vs2 = function(t7) {
  function n4(e3, n5) {
    var s6 = t7.call(this, e3, n5) || this;
    return s6.channel = new ur2(e3, n5), s6.channel.myMemberState = Wt2.JOINED, s6;
  }
  return t(n4, t7), n4;
}(Ue);
var Gs2 = function(n4) {
  function s6(e3) {
    var s7 = this, r4 = e3.channelUrl, a5 = e3.isDistinct, i4 = e3.isPublic, o3 = e3.isDiscoverable, u4 = e3.coverUrl, c4 = e3.coverImage, l3 = e3.accessCode, h4 = e3.name, d5 = e3.data, _2 = e3.customType, p4 = e3.operatorUserIds, f4 = e3.messageSurvivalSeconds;
    return (s7 = n4.call(this) || this).method = oe.PUT, s7.path = "".concat(he, "/").concat(encodeURIComponent(r4)), s7.params = re({ is_distinct: a5, is_public: i4, is_discoverable: o3, name: h4, data: d5, custom_type: _2, cover_url: u4, cover_file: c4, access_code: l3, operator_ids: p4, message_survival_seconds: f4 }), s7;
  }
  return t(s6, n4), s6;
}(xe);
var Bs2 = function(t7) {
  function n4(e3, n5) {
    var s6 = t7.call(this, e3, n5) || this;
    return s6.channel = new ur2(e3, n5), s6;
  }
  return t(n4, t7), n4;
}(Ue);
var qs3 = function(t7) {
  function n4(e3) {
    var n5 = this, s6 = e3.channelUrl;
    return (n5 = t7.call(this) || this).method = oe.DELETE, n5.path = "".concat(he, "/").concat(encodeURIComponent(s6)), n5;
  }
  return t(n4, t7), n4;
}(xe);
!function(t7) {
  function n4(e3, n5) {
    return t7.call(this, e3, n5) || this;
  }
  t(n4, t7);
}(Ue);
var zs2 = function(t7) {
  function n4(e3) {
    var n5 = this, s6 = e3.channelUrl;
    return (n5 = t7.call(this) || this).method = oe.DELETE, n5.path = "".concat(he, "/").concat(encodeURIComponent(s6), "/hide"), n5;
  }
  return t(n4, t7), n4;
}(xe);
!function(t7) {
  function n4() {
    return null !== t7 && t7.apply(this, arguments) || this;
  }
  t(n4, t7);
}(Ue);
var js2 = function(t7) {
  function n4(e3) {
    var n5 = e3.userId, s6 = e3.channelUrl, r4 = e3.countPreference, a5 = t7.call(this) || this;
    return a5.method = oe.PUT, a5.path = "".concat(ce, "/").concat(encodeURIComponent(n5), "/count_preference/").concat(encodeURIComponent(s6)), a5.params = { count_preference: r4 }, a5;
  }
  return t(n4, t7), n4;
}(xe);
var Ws3 = function(t7) {
  function n4(e3, n5) {
    var s6 = t7.call(this, e3, n5) || this;
    return s6.countPreference = n5.count_preference, s6;
  }
  return t(n4, t7), n4;
}(Ue);
var Qs2 = function(n4) {
  function s6(e3) {
    var s7 = this, r4 = e3.channelUrl, a5 = e3.locale;
    return (s7 = n4.call(this) || this).method = oe.PUT, s7.path = "".concat(he, "/").concat(encodeURIComponent(r4), "/reset_user_history"), s7.params = re({ locale: a5 }), s7;
  }
  return t(s6, n4), s6;
}(xe);
var Ys2 = function(t7) {
  function n4(e3, n5) {
    var s6 = t7.call(this, e3, n5) || this, r4 = n5.ts_message_offset;
    return s6.messageOffsetTimestamp = r4, s6;
  }
  return t(n4, t7), n4;
}(Ue);
var Ks3 = n(n({}, mn), { scheduledAt: void 0, file: void 0, fileUrl: void 0, fileName: void 0, mimeType: void 0, fileSize: void 0, thumbnailSizes: void 0, requireAuth: false });
var Js3 = n(n({}, yn), { scheduledAt: void 0 });
var Xs2 = function(s6) {
  function r4(e3) {
    var r5, a5, i4 = this;
    i4 = s6.call(this) || this;
    var o3 = [];
    e3.mentionType === K.USERS && (e3.mentionedUserIds ? o3 = e3.mentionedUserIds : e3.mentionedUsers && (o3 = e3.mentionedUsers.map(function(e4) {
      return e4.userId;
    })));
    var u4 = e3.channelType, c4 = e3.channelUrl, l3 = e3.scheduledMessageId;
    return i4.method = oe.PUT, i4.path = "".concat(Ie(u4), "/").concat(encodeURIComponent(c4), "/scheduled_messages/").concat(encodeURIComponent(l3)), i4.params = re(se({ req_id: e3.reqId, scheduled_at: e3.scheduledAt, message_type: j.FILE, url: e3.fileUrl, file_name: e3.fileName, file_size: e3.fileSize, file_type: e3.mimeType, thumbnails: null === (r5 = e3._thumbnails) || void 0 === r5 ? void 0 : r5.map(function(e4) {
      return Oe2.payloadify(e4);
    }), custom_type: e3.customType, data: e3.data, require_auth: e3.requireAuth, mention_type: e3.mentionType, mentioned_user_ids: o3, sorted_metaarray: null === (a5 = e3.metaArrays) || void 0 === a5 ? void 0 : a5.map(function(e4) {
      return je.payloadify(e4);
    }), apple_critical_alert_options: e3.appleCriticalAlertOptions ? ze.payloadify(e3.appleCriticalAlertOptions) : null, push_option: e3.pushNotificationDeliveryOption })), i4;
  }
  return t(r4, s6), r4;
}(xe);
var Zs3 = function(t7) {
  function n4(e3, n5) {
    var s6 = t7.call(this, e3, n5) || this;
    return s6.message = new St(e3, n5), s6;
  }
  return t(n4, t7), n4;
}(Ue);
var $s3 = function(s6) {
  function r4(e3) {
    var r5, a5 = this;
    a5 = s6.call(this) || this;
    var i4 = [];
    e3.mentionType === K.USERS && (e3.mentionedUserIds ? i4 = e3.mentionedUserIds : e3.mentionedUsers && (i4 = e3.mentionedUsers.map(function(e4) {
      return e4.userId;
    })));
    var o3 = e3.channelType, u4 = e3.channelUrl, c4 = e3.scheduledMessageId;
    return a5.method = oe.PUT, a5.path = "".concat(Ie(o3), "/").concat(encodeURIComponent(u4), "/scheduled_messages/").concat(encodeURIComponent(c4)), a5.params = re(se({ req_id: e3.reqId, scheduled_at: e3.scheduledAt, message_type: j.USER, message: e3.message, custom_type: e3.customType, data: e3.data, mention_type: e3.mentionType, mentioned_user_ids: i4, sorted_metaarray: null === (r5 = e3.metaArrays) || void 0 === r5 ? void 0 : r5.map(function(e4) {
      return je.payloadify(e4);
    }), apple_critical_alert_options: e3.appleCriticalAlertOptions ? ze.payloadify(e3.appleCriticalAlertOptions) : null, target_langs: e3.translationTargetLanguages, push_option: e3.pushNotificationDeliveryOption })), a5;
  }
  return t(r4, s6), r4;
}(xe);
!function(t7) {
  function n4(e3, n5) {
    var s6 = t7.call(this, e3, n5) || this;
    return s6.message = new It(e3, n5), s6;
  }
  t(n4, t7);
}(Ue);
var er2;
var tr2;
var nr2 = function(t7) {
  function n4(e3) {
    var n5 = t7.call(this) || this, s6 = e3.channelType, r4 = e3.channelUrl, a5 = e3.scheduledMessageId;
    return n5.method = oe.DELETE, n5.path = "".concat(Ie(s6), "/").concat(encodeURIComponent(r4), "/scheduled_messages/").concat(encodeURIComponent(a5)), n5;
  }
  return t(n4, t7), n4;
}(xe);
var sr2 = function(t7) {
  function n4(e3) {
    var n5 = t7.call(this) || this, s6 = e3.channelType, r4 = e3.channelUrl, a5 = e3.scheduledMessageId;
    return n5.method = oe.POST, n5.path = "".concat(Ie(s6), "/").concat(encodeURIComponent(r4), "/scheduled_messages/").concat(encodeURIComponent(a5), "/send_now"), n5;
  }
  return t(n4, t7), n4;
}(xe);
var rr2 = function(t7) {
  function n4(e3) {
    var n5 = e3.userId, s6 = e3.channelUrl, r4 = e3.pushTriggerOption, a5 = t7.call(this) || this;
    return a5.method = oe.PUT, a5.path = "".concat(ce, "/").concat(encodeURIComponent(n5), "/push_preference/").concat(encodeURIComponent(s6)), a5.params = { push_trigger_option: r4 }, a5;
  }
  return t(n4, t7), n4;
}(xe);
var ar2 = function(t7) {
  function n4(e3, n5) {
    var s6 = t7.call(this, e3, n5) || this;
    return s6.pushTriggerOption = n5.push_trigger_option, s6.enabled = n5.enable, s6;
  }
  return t(n4, t7), n4;
}(Ue);
var ir2 = function(t7) {
  function n4(e3) {
    var n5 = e3.userId, s6 = e3.channelUrl, r4 = t7.call(this) || this;
    return r4.method = oe.GET, r4.path = "".concat(ce, "/").concat(encodeURIComponent(n5), "/push_preference/").concat(encodeURIComponent(s6)), r4;
  }
  return t(n4, t7), n4;
}(xe);
var or2 = function(t7) {
  function n4(e3, n5) {
    var s6 = t7.call(this, e3, n5) || this;
    return s6.pushTriggerOption = n5.push_trigger_option, s6.enabled = n5.enable, s6;
  }
  return t(n4, t7), n4;
}(Ue);
!function(e3) {
  e3.ALL = "all", e3.UNREAD_MESSAGE_COUNT_ONLY = "unread_message_count_only", e3.UNREAD_MENTION_COUNT_ONLY = "unread_mention_count_only", e3.OFF = "off";
}(er2 || (er2 = {})), function(e3) {
  e3.UNHIDDEN = "unhidden", e3.HIDDEN_ALLOW_AUTO_UNHIDE = "hidden_allow_auto_unhide", e3.HIDDEN_PREVENT_AUTO_UNHIDE = "hidden_prevent_auto_unhide";
}(tr2 || (tr2 = {}));
var ur2 = function(u4) {
  function c4(e3, t7) {
    var n4, c5, l3, h4, p4, f4, v5, m5, E4, C3, y6, M5, b6, N3, U2, S6, A3, T4, I5, w4, L5 = this;
    return (L5 = u4.call(this, e3, t7) || this)._unreadMemberStateMap = /* @__PURE__ */ new Map(), L5._undeliveredMemberStateMap = /* @__PURE__ */ new Map(), L5._typingStatus = /* @__PURE__ */ new Map(), L5._lastMemberCountUpdated = 0, L5._typingStarted = 0, L5._typingEnded = 0, L5._hasBotInfo = { general: false, ai: false }, L5.isDistinct = false, L5.isSuper = false, L5.isBroadcast = false, L5.isExclusive = false, L5.isPublic = false, L5.isDiscoverable = true, L5.isChatNotification = false, L5.isAccessCodeRequired = false, L5.isPushEnabled = false, L5.unreadMessageCount = 0, L5.unreadMentionCount = 0, L5.totalUnreadReplyCount = 0, L5.members = [], L5.memberCount = 0, L5.joinedMemberCount = 0, L5.hiddenState = tr2.UNHIDDEN, L5.lastMessage = null, L5.messageOffsetTimestamp = 0, L5.messageSurvivalSeconds = -1, L5.myMemberState = Wt2.NONE, L5.myRole = V.NONE, L5.myMutedState = H.UNMUTED, L5.myLastRead = 0, L5.myCountPreference = er2.ALL, L5.myPushTriggerOption = _.DEFAULT, L5.inviter = null, L5.invitedAt = 0, L5.joinedAt = 0, L5.lastPinnedMessage = null, L5._latestMessageInfo = null, L5._pinnedMessagesUpdatedAt = 0, L5._myMutedRemainingTime = -1, L5.channelType = q.GROUP, L5.isDistinct = null !== (c5 = t7.is_distinct) && void 0 !== c5 && c5, L5.isSuper = null !== (l3 = t7.is_super) && void 0 !== l3 && l3, L5.isBroadcast = null !== (h4 = t7.is_broadcast) && void 0 !== h4 && h4, L5.isExclusive = null !== (p4 = t7.is_exclusive) && void 0 !== p4 && p4, L5.isPublic = null !== (f4 = t7.is_public) && void 0 !== f4 && f4, L5.isDiscoverable = null !== (v5 = t7.is_discoverable) && void 0 !== v5 ? v5 : L5.isPublic, L5.isChatNotification = null !== (m5 = t7.is_chat_notification) && void 0 !== m5 && m5, L5.isAccessCodeRequired = null !== (E4 = t7.is_access_code_required) && void 0 !== E4 && E4, L5.isPushEnabled = null !== (C3 = t7.is_push_enabled) && void 0 !== C3 && C3, Array.isArray(t7.members) && (n4 = L5.members).push.apply(n4, c([], a(t7.members.map(function(e4) {
      return new tn2(L5._iid, e4);
    })), false)), L5.memberCount = null !== (y6 = t7.member_count) && void 0 !== y6 ? y6 : 0, L5.joinedMemberCount = null !== (M5 = t7.joined_member_count) && void 0 !== M5 ? M5 : 0, L5.hiddenState = S(tr2, t7.hidden_state) ? t7.hidden_state : tr2.UNHIDDEN, L5.messageOffsetTimestamp = null !== (b6 = t7.ts_message_offset) && void 0 !== b6 ? b6 : 0, L5.messageSurvivalSeconds = null !== (N3 = t7.message_survival_seconds) && void 0 !== N3 ? N3 : -1, L5.lastMessage = t7.last_message ? Mt(L5._iid, n({ channel_type: L5.channelType }, t7.last_message)) : null, t7.read_receipt && Object.keys(t7.read_receipt).forEach(function(e4) {
      w("number", t7.read_receipt[e4]) && L5._updateUnreadMemberState(e4, t7.read_receipt[e4]);
    }), t7.delivery_receipt && Object.keys(t7.delivery_receipt).forEach(function(e4) {
      w("number", t7.delivery_receipt[e4]) && L5._updateUndeliveredMemberState(e4, t7.delivery_receipt[e4]);
    }), L5.myMemberState = S(Wt2, t7.member_state) ? t7.member_state : Wt2.NONE, L5.myRole = S(V, t7.my_role) ? t7.my_role : V.NONE, S(H, t7.is_muted) ? L5.myMutedState = t7.is_muted : w("boolean", t7.is_muted) ? L5.myMutedState = t7.is_muted ? H.MUTED : H.UNMUTED : L5.myMutedState = H.UNMUTED, L5.myCountPreference = S(er2, t7.count_preference) ? t7.count_preference : er2.ALL, L5.myPushTriggerOption = S(_, t7.push_trigger_option) ? t7.push_trigger_option : _.ALL, L5.myLastRead = null !== (U2 = t7.user_last_read) && void 0 !== U2 ? U2 : 0, L5.inviter = t7.inviter ? new es(L5._iid, t7.inviter) : null, L5.invitedAt = null !== (S6 = t7.invited_at) && void 0 !== S6 ? S6 : 0, L5.joinedAt = null !== (A3 = t7.joined_ts) && void 0 !== A3 ? A3 : 0, L5._updateUnreadCount(null !== (T4 = t7.unread_message_count) && void 0 !== T4 ? T4 : 0, null !== (I5 = t7.unread_mention_count) && void 0 !== I5 ? I5 : 0), L5.totalUnreadReplyCount = null !== (w4 = t7.total_unread_thread_message_count) && void 0 !== w4 ? w4 : 0, L5.lastPinnedMessage = t7.latest_pinned_message ? Mt(L5._iid, n({ channel_type: L5.channelType }, t7.latest_pinned_message)) : null, t7.latest_message && (L5._latestMessageInfo = { messageId: t7.latest_message.message_id, createdAt: t7.latest_message.created_at }), L5._hasBotInfo = { general: !!t7.has_bot, ai: !!t7.has_ai_bot }, L5;
  }
  return t(c4, u4), Object.defineProperty(c4.prototype, "isHidden", { get: function() {
    return this.hiddenState !== tr2.UNHIDDEN;
  }, enumerable: false, configurable: true }), Object.defineProperty(c4.prototype, "isTyping", { get: function() {
    return this._typingStatus.size > 0;
  }, enumerable: false, configurable: true }), Object.defineProperty(c4.prototype, "cachedUnreadMemberState", { get: function() {
    var e3, t7, n4 = {};
    try {
      for (var s6 = o(this._unreadMemberStateMap), r4 = s6.next(); !r4.done; r4 = s6.next()) {
        var a5 = a(r4.value, 2), i4 = a5[0], o3 = a5[1];
        n4[i4] = o3;
      }
    } catch (t8) {
      e3 = { error: t8 };
    } finally {
      try {
        r4 && !r4.done && (t7 = s6.return) && t7.call(s6);
      } finally {
        if (e3) throw e3.error;
      }
    }
    return n4;
  }, enumerable: false, configurable: true }), Object.defineProperty(c4.prototype, "cachedUndeliveredMemberState", { get: function() {
    var e3, t7, n4 = {};
    try {
      for (var s6 = o(this._undeliveredMemberStateMap), r4 = s6.next(); !r4.done; r4 = s6.next()) {
        var a5 = a(r4.value, 2), i4 = a5[0], o3 = a5[1];
        n4[i4] = o3;
      }
    } catch (t8) {
      e3 = { error: t8 };
    } finally {
      try {
        r4 && !r4.done && (t7 = s6.return) && t7.call(s6);
      } finally {
        if (e3) throw e3.error;
      }
    }
    return n4;
  }, enumerable: false, configurable: true }), Object.defineProperty(c4.prototype, "hasBot", { get: function() {
    return this._hasBotInfo.general;
  }, enumerable: false, configurable: true }), Object.defineProperty(c4.prototype, "hasAiBot", { get: function() {
    return this._hasBotInfo.ai;
  }, enumerable: false, configurable: true }), c4.payloadify = function(e3) {
    return re(se(n(n({}, u4.payloadify.call(this, e3)), { is_access_code_required: e3.isAccessCodeRequired, is_distinct: e3.isDistinct, is_super: e3.isSuper, is_broadcast: e3.isBroadcast, is_exclusive: e3.isExclusive, is_public: e3.isPublic, is_discoverable: e3.isDiscoverable, is_muted: e3.myMutedState, is_push_enabled: e3.isPushEnabled, unread_message_count: e3.unreadMessageCount, unread_mention_count: e3.unreadMentionCount, total_unread_thread_message_count: e3.totalUnreadReplyCount, push_trigger_option: e3.myPushTriggerOption, count_preference: e3.myCountPreference, hidden_state: e3.hiddenState, member_count: e3.memberCount, joined_member_count: e3.joinedMemberCount, member_state: e3.myMemberState, my_role: e3.myRole, user_last_read: e3.myLastRead, ts_message_offset: e3.messageOffsetTimestamp, message_survival_seconds: e3.messageSurvivalSeconds, read_receipt: e3.cachedUnreadMemberState, delivery_receipt: e3.cachedUndeliveredMemberState, members: e3.members.map(function(e4) {
      return tn2.payloadify(e4);
    }), last_message: e3.lastMessage ? wt(e3.lastMessage) : null, inviter: e3.inviter ? es.payloadify(e3.inviter) : null, invited_at: e3.invitedAt, joined_ts: e3.joinedAt, latest_pinned_message: e3.lastPinnedMessage ? wt(e3.lastPinnedMessage) : null, latest_message: e3._latestMessageInfo ? { message_id: e3._latestMessageInfo.messageId, created_at: e3._latestMessageInfo.createdAt } : null, has_bot: e3.hasBot, has_ai_bot: e3.hasAiBot })));
  }, c4.prototype._shouldUpdateLastMessageWith = function(e3) {
    if (e3.silent) return false;
    var t7 = Ws.of(this._iid).appInfo;
    switch (null == t7 ? void 0 : t7.lastMessageThreadingPolicy) {
      case Ir.NONE:
      case Ir.INCLUDE_REPLY:
        break;
      case Ir.EXCLUDE_REPLY:
        if (e3.parentMessageId > 0) return false;
        break;
      case Ir.INCLUDE_REPLY_TO_CHANNEL:
        if (e3 instanceof mt && e3.parentMessageId > 0 && !e3.replyToChannel) return false;
    }
    return !this.lastMessage || this.lastMessage.createdAt < e3.createdAt || this.lastMessage.createdAt === e3.createdAt && this.lastMessage.messageId === e3.messageId && this.lastMessage.updatedAt < e3.updatedAt;
  }, c4.prototype._tryUpdateLastMessageAndCallEvents = function(e3, t7) {
    var n4 = Ws.of(this._iid).dispatcher, s6 = ps2.of(this._iid);
    this._updateLastMessage(t7), s6.handlers.map(function(t8) {
      t8.onChannelChanged && t8.onChannelChanged(e3);
    }), n4.dispatch(new En2({ channels: [e3], context: { source: Ks.EVENT_MESSAGE_SENT } }));
  }, c4.prototype._shouldUpdateUnreadCountWith = function(e3) {
    var t7 = Ws.of(this._iid).appInfo;
    switch (null == t7 ? void 0 : t7.unreadCountThreadingPolicy) {
      case Ar.NONE:
      case Ar.INCLUDE_REPLY:
        break;
      case Ar.EXCLUDE_REPLY:
        if (e3.parentMessageId > 0) return false;
        break;
      case Ar.INCLUDE_REPLY_TO_CHANNEL:
        if (e3 instanceof mt && e3.parentMessageId > 0 && !e3.replyToChannel) return false;
    }
    return true;
  }, c4.prototype._updateLastMessage = function(e3) {
    return !!this._shouldUpdateLastMessageWith(e3) && (this.lastMessage = e3, true);
  }, c4.prototype._updateUnreadCount = function(e3, t7) {
    if ("number" == typeof e3 && e3 >= 0) if (this.myCountPreference === er2.ALL || this.myCountPreference === er2.UNREAD_MESSAGE_COUNT_ONLY) if (this.isExclusive || this.isSuper || this.isBroadcast) {
      var n4 = Ws.of(this._iid).maxSuperGroupChannelUnreadCount;
      this.unreadMessageCount = n4 && e3 >= n4 ? n4 : e3;
    } else this.unreadMessageCount = e3;
    else this.unreadMessageCount = 0;
    else this.unreadMessageCount = 0;
    "number" == typeof t7 && t7 >= 0 && (this.myCountPreference === er2.ALL || this.myCountPreference === er2.UNREAD_MENTION_COUNT_ONLY) ? this.unreadMentionCount = t7 : this.unreadMentionCount = 0;
  }, c4.prototype._updateUnreadMemberState = function(e3, t7) {
    var n4 = this._unreadMemberStateMap.get(e3);
    return (!n4 || n4 < t7) && (this._unreadMemberStateMap.set(e3, t7), Ws.of(this._iid).sdkState.userId === e3 && (this.myLastRead = t7), true);
  }, c4.prototype._updateUndeliveredMemberState = function(e3, t7) {
    var n4 = this._undeliveredMemberStateMap.get(e3);
    return (!n4 || n4 < t7) && (this._undeliveredMemberStateMap.set(e3, t7), true);
  }, c4.prototype._updateTypingStatus = function(e3, t7) {
    void 0 === t7 && (t7 = (/* @__PURE__ */ new Date()).getTime()), t7 > 0 ? this._typingStatus.set(e3.userId, { user: e3, ts: t7 }) : this._typingStatus.delete(e3.userId);
  }, c4.prototype._clearTypingStatus = function() {
    this._typingStatus.clear(), this._typingStarted = 0, this._typingEnded = 0;
  }, c4.prototype._setLatestMemberCount = function(e3, t7, n4) {
    var s6 = false;
    return n4 >= this._lastMemberCountUpdated && (this._lastMemberCountUpdated = n4, s6 = e3 !== this.memberCount || t7 !== this.joinedMemberCount, this.memberCount = e3, this.joinedMemberCount = t7), s6;
  }, c4.prototype.isReadMessage = function(e3) {
    var t7 = Ws.of(this._iid).sdkState, n4 = this._unreadMemberStateMap.get(t7.userId);
    return !!n4 && n4 >= e3.createdAt;
  }, c4.prototype.serialize = function() {
    var e3 = this;
    return Yr(this, function(t7) {
      t7.cachedUnreadMemberState = e3.cachedUnreadMemberState, t7.cachedUndeliveredMemberState = e3.cachedUndeliveredMemberState, Object.assign(t7, e3._serializeCachedMetaData());
    });
  }, c4.prototype.createMessageCollection = function(e3) {
    return void 0 === e3 && (e3 = {}), new Rs2(this._iid, n(n({}, e3), { channel: this }));
  }, c4.prototype.createMemberListQuery = function(e3) {
    return void 0 === e3 && (e3 = {}), new Os2(this._iid, this.url, e3);
  }, c4.prototype.createThreadedParentMessageListQuery = function(e3) {
    return void 0 === e3 && (e3 = {}), new ua(this._iid, this.url, this.channelType, e3);
  }, c4.prototype.addMember = function(e3, t7) {
    if (void 0 === t7 && (t7 = 0), !this.isExclusive && !this.isSuper && !this.isBroadcast) {
      var n4 = this.members.findIndex(function(t8) {
        return t8.userId === e3.userId;
      });
      if (n4 > -1) {
        var s6 = this.members[n4];
        s6.state === Wt2.JOINED && (e3.state = s6.state), this.members.splice(n4, 1), this.memberCount--;
      }
      this.members.push(e3), this.memberCount++, this._updateUnreadMemberState(e3.userId, t7), this._updateUndeliveredMemberState(e3.userId, t7);
    }
  }, c4.prototype.removeMember = function(e3) {
    if (!this.isExclusive && !this.isSuper && !this.isBroadcast) {
      var t7 = e3 instanceof tn2 ? e3.userId : e3, n4 = this.members.findIndex(function(e4) {
        return e4.userId === t7;
      });
      if (n4 > -1) return this.members.splice(n4, 1), this.memberCount--, true;
    }
    return false;
  }, c4.prototype.getUnreadMemberCount = function(e3) {
    var t7, n4;
    if (e3 instanceof mt && !this.isExclusive && !this.isSuper && !this.isBroadcast) {
      var s6 = Ws.of(this._iid).sdkState, r4 = e3.createdAt, a5 = 0;
      try {
        for (var i4 = o(this.members), o3 = i4.next(); !o3.done; o3 = i4.next()) {
          var u5 = o3.value;
          if (s6.userId !== u5.userId && u5.state === Wt2.JOINED && e3.sender.userId !== u5.userId) (this.cachedUnreadMemberState[u5.userId] || 0) < r4 && a5++;
        }
      } catch (e4) {
        t7 = { error: e4 };
      } finally {
        try {
          o3 && !o3.done && (n4 = i4.return) && n4.call(i4);
        } finally {
          if (t7) throw t7.error;
        }
      }
      return a5;
    }
    return 0;
  }, c4.prototype.getUndeliveredMemberCount = function(e3) {
    var t7, n4;
    if (e3 instanceof mt && !this.isExclusive && !this.isSuper && !this.isBroadcast) {
      var s6 = Ws.of(this._iid).sdkState, r4 = e3.createdAt, a5 = 0;
      try {
        for (var i4 = o(this.members), o3 = i4.next(); !o3.done; o3 = i4.next()) {
          var u5 = o3.value;
          if (s6.userId !== u5.userId && u5.state === Wt2.JOINED && e3.sender.userId !== u5.userId) (this.cachedUndeliveredMemberState[u5.userId] || 0) < r4 && a5++;
        }
      } catch (e4) {
        t7 = { error: e4 };
      } finally {
        try {
          o3 && !o3.done && (n4 = i4.return) && n4.call(i4);
        } finally {
          if (t7) throw t7.error;
        }
      }
      return a5;
    }
    return 0;
  }, c4.prototype.getReadMembers = function(e3, t7) {
    var n4 = this;
    void 0 === t7 && (t7 = false);
    var s6 = Ws.of(this._iid).sdkState;
    if (!s6.userId || this.isExclusive || this.isSuper || this.isBroadcast) return [];
    var r4 = e3 instanceof mt ? e3.sender : null, a5 = [];
    return this.members.forEach(function(i4) {
      if (t7 || i4.userId !== s6.userId && i4.userId !== (null == r4 ? void 0 : r4.userId)) {
        var o3 = n4._unreadMemberStateMap.get(i4.userId);
        o3 && o3 >= e3.createdAt && a5.push(i4);
      }
    }), a5;
  }, c4.prototype.getUnreadMembers = function(e3, t7) {
    var n4 = this;
    void 0 === t7 && (t7 = false);
    var s6 = Ws.of(this._iid).sdkState;
    if (!s6.userId || this.isExclusive || this.isSuper || this.isBroadcast) return [];
    var r4 = e3 instanceof mt ? e3.sender : null, a5 = [];
    return this.members.forEach(function(i4) {
      if (t7 || i4.userId !== s6.userId && i4.userId !== (null == r4 ? void 0 : r4.userId)) {
        var o3 = n4._unreadMemberStateMap.get(i4.userId);
        o3 && o3 < e3.createdAt && a5.push(i4);
      }
    }), a5;
  }, c4.prototype.getReadStatus = function(e3) {
    var t7 = this;
    void 0 === e3 && (e3 = false);
    var n4 = Ws.of(this._iid).sdkState;
    if (!n4.userId || this.isExclusive || this.isSuper || this.isBroadcast) return null;
    var s6 = {};
    return this.members.forEach(function(r4) {
      if (e3 || r4.userId !== n4.userId) {
        var a5 = t7._unreadMemberStateMap.get(r4.userId);
        s6[r4.userId] = new Ve(t7._iid, { channel_url: t7.url, channel_type: t7.channelType, user: tn2.payloadify(r4), ts: null != a5 ? a5 : 0 });
      }
    }), s6;
  }, c4.prototype.getDeliveryStatus = function(e3) {
    var t7 = this;
    void 0 === e3 && (e3 = true);
    var n4 = Ws.of(this._iid).sdkState;
    if (!n4.userId || this.isExclusive || this.isSuper || this.isBroadcast) return null;
    var s6 = {};
    return this.members.forEach(function(r4) {
      if (e3 || r4.userId !== n4.userId) {
        var a5 = t7._undeliveredMemberStateMap.get(r4.userId);
        s6[r4.userId] = new nn2(t7._iid, { channel_url: t7.url, channel_type: t7.channelType, user: tn2.payloadify(r4), ts: null != a5 ? a5 : 0 });
      }
    }), s6;
  }, c4.prototype.getTypingUsers = function() {
    var e3 = [];
    return this._typingStatus.forEach(function(t7) {
      var n4 = t7.user;
      e3.push(n4);
    }), e3;
  }, c4.prototype.invalidateTypingStatus = function() {
    var e3 = this, t7 = Ws.of(this._iid).typingIndicatorInvalidateTime, n4 = Date.now(), s6 = false;
    return this._typingStatus.forEach(function(r4, a5) {
      var i4 = r4.ts;
      n4 - i4 >= t7 && (e3._typingStatus.delete(a5), s6 = true);
    }), s6;
  }, c4.prototype.refresh = function() {
    return r(this, void 0, void 0, function() {
      return s(this, function(e3) {
        return [2, this._refresh()];
      });
    });
  }, c4.prototype._refresh = function(e3) {
    return void 0 === e3 && (e3 = false), r(this, void 0, void 0, function() {
      var t7, n4, s6, r4, a5, i4;
      return s(this, function(o3) {
        switch (o3.label) {
          case 0:
            return t7 = Ws.of(this._iid), n4 = t7.requestQueue, s6 = t7.dispatcher, r4 = new Nn2({ channelUrl: this.url }), [4, n4.send(r4)];
          case 1:
            return a5 = o3.sent(), i4 = a5.as(Un2).channel, this._update(i4), e3 || s6.dispatch(new En2({ channels: [i4], context: { source: Ks.REFRESH_CHANNEL } })), [2, this];
        }
      });
    });
  }, c4.prototype.freeze = function() {
    return r(this, void 0, void 0, function() {
      return s(this, function(e3) {
        switch (e3.label) {
          case 0:
            return [4, u4.prototype.freeze.call(this)];
          case 1:
            return e3.sent(), Ws.of(this._iid).dispatcher.dispatch(new En2({ channels: [this], context: { source: Ks.EVENT_CHANNEL_FROZEN }, isWebSocketEventComing: true })), [2];
        }
      });
    });
  }, c4.prototype.unfreeze = function() {
    return r(this, void 0, void 0, function() {
      return s(this, function(e3) {
        switch (e3.label) {
          case 0:
            return [4, u4.prototype.unfreeze.call(this)];
          case 1:
            return e3.sent(), Ws.of(this._iid).dispatcher.dispatch(new En2({ channels: [this], context: { source: Ks.EVENT_CHANNEL_UNFROZEN }, isWebSocketEventComing: true })), [2];
        }
      });
    });
  }, c4.prototype.updateChannel = function(e3) {
    return r(this, void 0, void 0, function() {
      var t7, n4, r4, a5, i4, o3, u5;
      return s(this, function(c5) {
        switch (c5.label) {
          case 0:
            return t7 = n(n({}, Fs2), e3), Jr(function(e4) {
              return w("string", e4.coverUrl, true) && (k(e4.coverImage) || w("string", e4.coverImage, true)) && w("boolean", e4.isDistinct, true) && w("boolean", e4.isPublic, true) && w("boolean", e4.isDiscoverable, true) && w("string", e4.accessCode, true) && w("string", e4.name, true) && w("string", e4.data, true) && w("string", e4.customType, true) && N("string", e4.operatorUserIds, true) && w("number", e4.messageSurvivalSeconds, true);
            }(t7)).throw(v.invalidParameters), n4 = Ws.of(this._iid), r4 = n4.dispatcher, a5 = n4.requestQueue, i4 = new Gs2(n({ channelUrl: this.url }, t7)), [4, a5.send(i4)];
          case 1:
            return o3 = c5.sent(), u5 = o3.as(Bs2).channel, this._update(u5), r4.dispatch(new En2({ channels: [u5], context: { source: Ks.EVENT_CHANNEL_UPDATED }, isWebSocketEventComing: true })), [2, this];
        }
      });
    });
  }, c4.prototype.invite = function(e3) {
    return r(this, void 0, void 0, function() {
      return s(this, function(t7) {
        return Jr(e3.every(function(e4) {
          return e4 instanceof es;
        })).throw(v.invalidParameters), [2, this.inviteWithUserIds(e3.map(function(e4) {
          return e4.userId;
        }))];
      });
    });
  }, c4.prototype.inviteWithUserIds = function(e3) {
    return r(this, void 0, void 0, function() {
      var t7, n4, s6, r4, a5, i4, o3;
      return s(this, function(u5) {
        switch (u5.label) {
          case 0:
            return Jr(N("string", e3)).throw(v.invalidParameters), t7 = Ws.of(this._iid), n4 = t7.dispatcher, s6 = t7.requestQueue, r4 = t7.sessionManager, a5 = new Yn2({ channelUrl: this.url, userIds: e3 }), [4, s6.send(a5)];
          case 1:
            return i4 = u5.sent(), o3 = i4.as(Kn2).channel, this._update(o3), n4.dispatch(new En2({ channels: [o3], context: { source: Ks.EVENT_CHANNEL_INVITED, inviter: r4.currentUser, invitees: [] }, isWebSocketEventComing: true })), [2, this];
        }
      });
    });
  }, c4.prototype.join = function(e3) {
    return r(this, void 0, void 0, function() {
      var t7, n4, s6, r4, a5, i4, o3;
      return s(this, function(u5) {
        switch (u5.label) {
          case 0:
            return Jr(w("string", e3, true)).throw(v.invalidParameters), t7 = Ws.of(this._iid), n4 = t7.dispatcher, s6 = t7.sdkState, r4 = t7.requestQueue, a5 = new qn2({ channelUrl: this.url, userId: s6.userId, accessCode: e3 }), [4, r4.send(a5)];
          case 1:
            return i4 = u5.sent(), (o3 = i4.as(zn2).channel).myMemberState = this.myMemberState = Wt2.JOINED, this._update(o3), n4.dispatch(new En2({ channels: [o3], context: { source: Ks.EVENT_CHANNEL_JOINED, users: [] }, isWebSocketEventComing: true })), [2, this];
        }
      });
    });
  }, c4.prototype.leave = function(e3) {
    return void 0 === e3 && (e3 = false), r(this, void 0, void 0, function() {
      var t7, n4, s6, r4;
      return s(this, function(a5) {
        switch (a5.label) {
          case 0:
            return t7 = Ws.of(this._iid), n4 = t7.sdkState, s6 = t7.requestQueue, r4 = new Wn2({ channelUrl: this.url, userId: n4.userId, shouldRemoveOperatorStatus: e3 }), [4, s6.send(r4)];
          case 1:
            return a5.sent(), this.myMemberState = Wt2.NONE, [2];
        }
      });
    });
  }, c4.prototype.acceptInvitation = function(e3) {
    return r(this, void 0, void 0, function() {
      var t7, n4, s6, r4, a5, i4, o3;
      return s(this, function(u5) {
        switch (u5.label) {
          case 0:
            return Jr(w("string", e3, true)).throw(v.invalidParameters), t7 = Ws.of(this._iid), n4 = t7.dispatcher, s6 = t7.sdkState, r4 = t7.requestQueue, a5 = new Hs2({ channelUrl: this.url, userId: s6.userId, accessCode: e3 }), [4, r4.send(a5)];
          case 1:
            return i4 = u5.sent(), (o3 = i4.as(Vs2).channel).myMemberState = this.myMemberState = Wt2.JOINED, this._update(o3), n4.dispatch(new En2({ channels: [o3], context: { source: Ks.EVENT_CHANNEL_ACCEPTED_INVITE }, isWebSocketEventComing: true })), [2, this];
        }
      });
    });
  }, c4.prototype.declineInvitation = function() {
    return r(this, void 0, void 0, function() {
      var e3, t7, n4, s6;
      return s(this, function(r4) {
        switch (r4.label) {
          case 0:
            return e3 = Ws.of(this._iid), t7 = e3.sdkState, n4 = e3.requestQueue, s6 = new Xn2({ channelUrl: this.url, userId: t7.userId }), [4, n4.send(s6)];
          case 1:
            return r4.sent(), this.myMemberState = Wt2.NONE, [2, this];
        }
      });
    });
  }, c4.prototype.sendUserMessage = function(e3) {
    var t7 = this, n4 = new Xt(), s6 = Ws.of(this._iid).dispatcher, r4 = S2.of(this._iid);
    return u4.prototype.sendUserMessage.call(this, e3).onPending(function(e4) {
      r4.completeCurrentAndProcessNextAutoResend(e4), n4._trigger(e4);
    }).onFailed(function(e4, t8) {
      t8 && r4.completeCurrentAndProcessNextAutoResend(t8), n4._triggerFailed(e4, t8);
    }).onSucceeded(function(e4) {
      t7.hiddenState === tr2.HIDDEN_ALLOW_AUTO_UNHIDE && (t7.hiddenState = tr2.UNHIDDEN), r4.completeCurrentAndProcessNextAutoResend(e4), t7._updateLastMessage(e4), ps2.of(t7._iid).handlers.map(function(e5) {
        e5.onChannelChanged && e5.onChannelChanged(t7);
      }), s6.dispatch(new En2({ channels: [t7], context: { source: Ks.EVENT_MESSAGE_SENT } })), n4._trigger(e4);
    }), n4;
  }, c4.prototype.updateUserMessage = function(e3, t7) {
    return r(this, void 0, void 0, function() {
      var n4, s6, r4, a5, i4 = this;
      return s(this, function(o3) {
        switch (o3.label) {
          case 0:
            return n4 = Ws.of(this._iid).dispatcher, [4, u4.prototype.updateUserMessage.call(this, e3, t7)];
          case 1:
            return s6 = o3.sent(), r4 = this._updateLastMessage(s6), a5 = false, this.lastPinnedMessage && this.lastPinnedMessage.messageId === s6.messageId && (this.lastPinnedMessage = s6, r4 = true, a5 = true), r4 && (ps2.of(this._iid).handlers.map(function(e4) {
              e4.onChannelChanged && e4.onChannelChanged(i4);
            }), n4.dispatch(new En2({ channels: [this], context: { source: a5 ? Ks.EVENT_PINNED_MESSAGE_UPDATED : Ks.EVENT_MESSAGE_UPDATED } }))), a5 && ps2.of(this._iid).handlers.map(function(e4) {
              e4.onPinnedMessageUpdated && e4.onPinnedMessageUpdated(i4);
            }), n4.dispatch(new $s({ messages: [s6], source: Ks.EVENT_MESSAGE_UPDATED })), [2, s6];
        }
      });
    });
  }, c4.prototype._autoResendUserMessage = function(e3) {
    var t7 = this, n4 = new Xt(), s6 = Ws.of(this._iid).dispatcher, r4 = S2.of(this._iid);
    return u4.prototype._autoResendUserMessage.call(this, e3).onPending(function(e4) {
      r4.completeCurrentAndProcessNextAutoResend(e4), n4._trigger(e4);
    }).onFailed(function(e4, t8) {
      r4.completeCurrentAndProcessNextAutoResend(t8), n4._triggerFailed(e4, t8);
    }).onSucceeded(function(e4) {
      var a5 = ps2.of(t7._iid);
      r4.completeCurrentAndProcessNextAutoResend(e4), t7._updateLastMessage(e4), a5.handlers.map(function(e5) {
        e5.onChannelChanged && e5.onChannelChanged(t7);
      }), s6.dispatch(new En2({ channels: [t7], context: { source: Ks.EVENT_MESSAGE_SENT } })), n4._trigger(e4);
    }), n4;
  }, c4.prototype.sendFileMessage = function(e3) {
    var t7 = this, n4 = new Xt(), s6 = Ws.of(this._iid).dispatcher, r4 = S2.of(this._iid);
    return u4.prototype.sendFileMessage.call(this, e3).onPending(function(e4) {
      r4.completeCurrentAndProcessNextAutoResend(e4), n4._trigger(e4);
    }).onFailed(function(e4, t8) {
      t8 && r4.completeCurrentAndProcessNextAutoResend(t8), n4._triggerFailed(e4, t8);
    }).onSucceeded(function(e4) {
      var a5 = ps2.of(t7._iid);
      r4.completeCurrentAndProcessNextAutoResend(e4), t7._updateLastMessage(e4), a5.handlers.map(function(e5) {
        e5.onChannelChanged && e5.onChannelChanged(t7);
      }), s6.dispatch(new En2({ channels: [t7], context: { source: Ks.EVENT_MESSAGE_SENT } })), n4._trigger(e4);
    }), n4;
  }, c4.prototype.sendMultipleFilesMessage = function(e3) {
    var t7 = this, n4 = new ii(), s6 = Ws.of(this._iid).dispatcher;
    return u4.prototype.sendMultipleFilesMessage.call(this, e3).onPending(function(e4) {
      n4._trigger(e4);
    }).onFailed(function(e4, t8) {
      n4._triggerFailed(e4, t8);
    }).onSucceeded(function(e4) {
      var r4 = ps2.of(t7._iid);
      t7._updateLastMessage(e4), r4.handlers.map(function(e5) {
        e5.onChannelChanged && e5.onChannelChanged(t7);
      }), s6.dispatch(new En2({ channels: [t7], context: { source: Ks.EVENT_MESSAGE_SENT } })), n4._trigger(e4);
    }).onFileUploaded(function(e4, t8, s7, r4) {
      n4._triggerOnFileUploaded(e4, t8, s7, r4);
    }), n4;
  }, c4.prototype.updateFileMessage = function(e3, t7) {
    return r(this, void 0, void 0, function() {
      var n4, s6, r4, a5, i4 = this;
      return s(this, function(o3) {
        switch (o3.label) {
          case 0:
            return n4 = Ws.of(this._iid).dispatcher, [4, u4.prototype.updateFileMessage.call(this, e3, t7)];
          case 1:
            return s6 = o3.sent(), r4 = this._updateLastMessage(s6), a5 = false, this.lastPinnedMessage && this.lastPinnedMessage.messageId === s6.messageId && (this.lastPinnedMessage = s6, r4 = true, a5 = true), r4 && (ps2.of(this._iid).handlers.map(function(e4) {
              e4.onChannelChanged && e4.onChannelChanged(i4);
            }), n4.dispatch(new En2({ channels: [this], context: { source: a5 ? Ks.EVENT_PINNED_MESSAGE_UPDATED : Ks.EVENT_MESSAGE_UPDATED } }))), a5 && ps2.of(this._iid).handlers.map(function(e4) {
              e4.onPinnedMessageUpdated && e4.onPinnedMessageUpdated(i4);
            }), n4.dispatch(new $s({ messages: [s6], source: Ks.EVENT_MESSAGE_UPDATED })), [2, s6];
        }
      });
    });
  }, c4.prototype._autoResendFileMessage = function(e3) {
    var t7 = this, n4 = new Xt(), s6 = Ws.of(this._iid).dispatcher, r4 = S2.of(this._iid);
    return u4.prototype._autoResendFileMessage.call(this, e3).onPending(function(e4) {
      r4.completeCurrentAndProcessNextAutoResend(e4), n4._trigger(e4);
    }).onFailed(function(e4, t8) {
      r4.completeCurrentAndProcessNextAutoResend(t8), n4._triggerFailed(e4, t8);
    }).onSucceeded(function(e4) {
      var a5 = ps2.of(t7._iid);
      r4.completeCurrentAndProcessNextAutoResend(e4), t7._updateLastMessage(e4), a5.handlers.map(function(e5) {
        e5.onChannelChanged && e5.onChannelChanged(t7);
      }), s6.dispatch(new En2({ channels: [t7], context: { source: Ks.EVENT_MESSAGE_SENT } })), n4._trigger(e4);
    }), n4;
  }, c4.prototype.deleteMessage = function(e3) {
    return r(this, void 0, void 0, function() {
      return s(this, function(t7) {
        switch (t7.label) {
          case 0:
            return [4, u4.prototype.deleteMessage.call(this, e3)];
          case 1:
            return t7.sent(), 0 === e3.messageId && e3 instanceof mt && Ws.of(this._iid).dispatcher.dispatch(new io({ reqId: e3.reqId, source: Ks.EVENT_MESSAGE_DELETED })), [2];
        }
      });
    });
  }, c4.prototype.hide = function(e3) {
    return r(this, void 0, void 0, function() {
      var t7, n4, r4, a5, i4, o3, u5, c5;
      return s(this, function(d5) {
        switch (d5.label) {
          case 0:
            return t7 = n(n({}, $n2), e3), Jr(function(e4) {
              return w("boolean", e4.hidePreviousMessages, true) && w("boolean", e4.allowAutoUnhide, true);
            }(t7)).throw(v.invalidParameters), n4 = Ws.of(this._iid), r4 = n4.dispatcher, a5 = n4.sdkState, i4 = n4.requestQueue, o3 = new es3(n({ channelUrl: this.url, userId: a5.userId }, t7)), [4, i4.send(o3)];
          case 1:
            return u5 = d5.sent(), c5 = u5.as(ts3).messageOffsetTimestamp, this.hiddenState = t7.allowAutoUnhide ? tr2.HIDDEN_ALLOW_AUTO_UNHIDE : tr2.HIDDEN_PREVENT_AUTO_UNHIDE, t7.hidePreviousMessages && this._updateUnreadCount(0, 0), c5 && (this.messageOffsetTimestamp = c5), r4.dispatch(new En2({ channels: [this], context: { source: Ks.EVENT_CHANNEL_HIDDEN }, isWebSocketEventComing: true })), [2, this];
        }
      });
    });
  }, c4.prototype.unhide = function() {
    return r(this, void 0, void 0, function() {
      var e3, t7, n4, s6;
      return s(this, function(r4) {
        switch (r4.label) {
          case 0:
            return e3 = Ws.of(this._iid), t7 = e3.dispatcher, n4 = e3.requestQueue, s6 = new zs2({ channelUrl: this.url }), [4, n4.send(s6)];
          case 1:
            return r4.sent(), this.hiddenState = tr2.UNHIDDEN, t7.dispatch(new En2({ channels: [this], context: { source: Ks.EVENT_CHANNEL_UNHIDDEN }, isWebSocketEventComing: true })), [2, this];
        }
      });
    });
  }, c4.prototype.delete = function() {
    return r(this, void 0, void 0, function() {
      var e3, t7;
      return s(this, function(n4) {
        switch (n4.label) {
          case 0:
            return e3 = Ws.of(this._iid).requestQueue, t7 = new qs3({ channelUrl: this.url }), [4, e3.send(t7)];
          case 1:
            return n4.sent(), [2];
        }
      });
    });
  }, c4.prototype.markAsRead = function() {
    return r(this, void 0, void 0, function() {
      var e3, t7, n4, s6, r4, a5, i4, o3 = this;
      return s(this, function(u5) {
        switch (u5.label) {
          case 0:
            return e3 = Ws.of(this._iid), t7 = e3.sdkState, n4 = e3.dispatcher, s6 = e3.requestQueue, r4 = new He({ channelUrl: this.url }), [4, s6.send(r4)];
          case 1:
            return a5 = u5.sent(), i4 = a5.as(Ye2).readStatus, this._updateUnreadMemberState(t7.userId, i4.readAt), (this.unreadMessageCount > 0 || this.unreadMentionCount > 0) && (this._updateUnreadCount(0, 0), ps2.of(this._iid).handlers.map(function(e4) {
              e4.onChannelChanged && e4.onChannelChanged(o3);
            })), n4.dispatch(new En2({ channels: [this], context: { source: Ks.EVENT_CHANNEL_READ } })), [2];
        }
      });
    });
  }, c4.prototype.markAsDelivered = function() {
    return r(this, void 0, void 0, function() {
      var e3, t7, n4, s6;
      return s(this, function(r4) {
        switch (r4.label) {
          case 0:
            return e3 = Ws.of(this._iid), t7 = e3.sdkState, n4 = e3.requestQueue, s6 = new cs2({ channelUrl: this.url, userId: t7.userId }), [4, n4.send(s6)];
          case 1:
            return r4.sent(), [2];
        }
      });
    });
  }, c4.prototype.startTyping = function() {
    return r(this, void 0, void 0, function() {
      var e3, t7, n4, s6, r4;
      return s(this, function(a5) {
        switch (a5.label) {
          case 0:
            return e3 = Ws.of(this._iid), t7 = e3.requestQueue, n4 = e3.typingIndicatorThrottle, (s6 = (/* @__PURE__ */ new Date()).getTime()) - this._typingStarted >= n4 ? (this._typingStarted = s6, this._typingEnded = 0, r4 = new ss2({ channelUrl: this.url, time: this._typingStarted }), [4, t7.send(r4)]) : [3, 2];
          case 1:
            a5.sent(), a5.label = 2;
          case 2:
            return [2];
        }
      });
    });
  }, c4.prototype.endTyping = function() {
    return r(this, void 0, void 0, function() {
      var e3, t7, n4, s6, r4;
      return s(this, function(a5) {
        switch (a5.label) {
          case 0:
            return e3 = Ws.of(this._iid), t7 = e3.requestQueue, n4 = e3.typingIndicatorThrottle, (s6 = (/* @__PURE__ */ new Date()).getTime()) - this._typingEnded >= n4 ? (this._typingStarted = 0, this._typingEnded = s6, r4 = new as3({ channelUrl: this.url, time: this._typingStarted }), [4, t7.send(r4)]) : [3, 2];
          case 1:
            a5.sent(), a5.label = 2;
          case 2:
            return [2];
        }
      });
    });
  }, c4.prototype.createScheduledUserMessage = function(e3) {
    e3 = n(n({}, xs), e3), Jr(Ds(e3)).throw(v.invalidParameters);
    var t7 = new Xt();
    return this._createScheduledUserMessage(e3, t7), t7;
  }, c4.prototype.updateScheduledUserMessage = function(e3, t7) {
    return r(this, void 0, void 0, function() {
      var n4, r4, a5, i4;
      return s(this, function(o3) {
        switch (o3.label) {
          case 0:
            return n4 = n(n({}, Js3), t7), Jr(function(e4) {
              return _n(e4) && w("number", e4.scheduledAt, true);
            }(n4)).throw(v.invalidParameters), r4 = Ws.of(this._iid).requestQueue, a5 = new $s3(n({ reqId: this._generateRequestId(), scheduledMessageId: e3, channelType: this.channelType, channelUrl: this.url }, n4)), [4, r4.send(a5)];
          case 1:
            return i4 = o3.sent(), [2, i4.as(Sr2).message];
        }
      });
    });
  }, c4.prototype.createScheduledFileMessage = function(e3) {
    var t7 = this;
    e3 = n(n({}, Ls), e3), Jr(Fs(e3)).throw(v.invalidParameters);
    var n4 = Date.now(), r4 = this._generateRequestId(), a5 = new Xt();
    return hs(hi).then(function() {
      var s6 = t7._createPendingScheduledFileMessage(e3, r4, n4);
      os(function() {
        return r(t7, void 0, void 0, function() {
          return s(this, function(e4) {
            return [2, a5._trigger(s6)];
          });
        });
      });
    }), k(e3.file) ? this._uploadFileAndUpdateParams(e3).then(function() {
      return t7._createScheduledFileMessage(e3, a5, r4, n4);
    }) : this._createScheduledFileMessage(e3, a5, r4, n4), a5;
  }, c4.prototype.updateScheduledFileMessage = function(e3, t7) {
    return r(this, void 0, void 0, function() {
      var n4, r4, a5;
      return s(this, function(i4) {
        switch (i4.label) {
          case 0:
            return n4 = n(n({}, Ks3), t7), Jr(function(e4) {
              return vn(e4) && w("number", e4.scheduledAt, true) && (k(e4.file) || w("string", e4.fileUrl)) && w("string", e4.fileName, true) && w("string", e4.mimeType, true) && w("number", e4.fileSize, true) && (null === e4.thumbnailSizes || void 0 === e4.thumbnailSizes || e4.thumbnailSizes.every(function(e5) {
                return w("object", e5) && e5.maxWidth > 0 && e5.maxHeight > 0;
              }));
            }(n4)).throw(v.invalidParameters), k(n4.file) ? [4, this._uploadFileAndUpdateParams(n4)] : [3, 2];
          case 1:
            i4.sent(), i4.label = 2;
          case 2:
            return r4 = new Xs2(n({ reqId: this._generateRequestId(), scheduledMessageId: e3, channelType: this.channelType, channelUrl: this.url }, n4)), [4, Ws.of(this._iid).requestQueue.send(r4)];
          case 3:
            return a5 = i4.sent(), [2, a5.as(Zs3).message];
        }
      });
    });
  }, c4.prototype.cancelScheduledMessage = function(e3) {
    return r(this, void 0, void 0, function() {
      var t7;
      return s(this, function(n4) {
        switch (n4.label) {
          case 0:
            return t7 = new nr2({ scheduledMessageId: e3, channelType: this.channelType, channelUrl: this.url }), [4, Ws.of(this._iid).requestQueue.send(t7)];
          case 1:
            return n4.sent(), [2];
        }
      });
    });
  }, c4.prototype.sendScheduledMessageNow = function(e3) {
    return r(this, void 0, void 0, function() {
      var t7;
      return s(this, function(n4) {
        switch (n4.label) {
          case 0:
            return t7 = new sr2({ scheduledMessageId: e3, channelType: this.channelType, channelUrl: this.url }), [4, Ws.of(this._iid).requestQueue.send(t7)];
          case 1:
            return n4.sent(), [2];
        }
      });
    });
  }, c4.prototype.getMyPushTriggerOption = function() {
    return r(this, void 0, void 0, function() {
      var e3, t7, n4, s6, r4, a5;
      return s(this, function(i4) {
        switch (i4.label) {
          case 0:
            return e3 = Ws.of(this._iid), t7 = e3.sdkState, n4 = e3.requestQueue, s6 = new ir2({ userId: t7.userId, channelUrl: this.url }), [4, n4.send(s6)];
          case 1:
            return r4 = i4.sent(), a5 = r4.as(or2).pushTriggerOption, this.myPushTriggerOption = a5, [2, a5];
        }
      });
    });
  }, c4.prototype.setMyPushTriggerOption = function(e3) {
    return r(this, void 0, void 0, function() {
      var t7, n4, s6, a5, i4, o3, u5;
      return s(this, function(c5) {
        switch (c5.label) {
          case 0:
            return Jr(S(_, e3)).throw(v.invalidParameters), t7 = Ws.of(this._iid), n4 = t7.dispatcher, s6 = t7.sdkState, a5 = t7.requestQueue, i4 = new rr2({ userId: s6.userId, channelUrl: this.url, pushTriggerOption: e3 }), [4, a5.send(i4)];
          case 1:
            return o3 = c5.sent(), u5 = o3.as(ar2).pushTriggerOption, this.myPushTriggerOption = u5, n4.dispatch(new En2({ channels: [this], context: { source: Ks.EVENT_CHANNEL_UPDATED }, isWebSocketEventComing: true })), [2, u5];
        }
      });
    });
  }, c4.prototype.setMyCountPreference = function(e3) {
    return r(this, void 0, void 0, function() {
      var t7, n4, s6, a5, i4, o3, u5;
      return s(this, function(c5) {
        switch (c5.label) {
          case 0:
            return Jr(S(er2, e3)).throw(v.invalidParameters), t7 = Ws.of(this._iid), n4 = t7.dispatcher, s6 = t7.sdkState, a5 = t7.requestQueue, i4 = new js2({ channelUrl: this.url, userId: s6.userId, countPreference: e3 }), [4, a5.send(i4)];
          case 1:
            return o3 = c5.sent(), u5 = o3.as(Ws3).countPreference, this.myCountPreference = u5, this._updateUnreadCount(this.unreadMessageCount, this.unreadMentionCount), n4.dispatch(new En2({ channels: [this], context: { source: Ks.EVENT_CHANNEL_UPDATED }, isWebSocketEventComing: true })), [2, u5];
        }
      });
    });
  }, c4.prototype.resetMyHistory = function() {
    return r(this, void 0, void 0, function() {
      var e3, t7, n4, s6, r4, a5, i4;
      return s(this, function(o3) {
        switch (o3.label) {
          case 0:
            return e3 = Ws.of(this._iid), t7 = e3.dispatcher, n4 = e3.requestQueue, s6 = e3.sdkState, r4 = new Qs2({ channelUrl: this.url, locale: s6.localeForChatbot }), [4, n4.send(r4)];
          case 1:
            return a5 = o3.sent(), i4 = a5.as(Ys2).messageOffsetTimestamp, this.messageOffsetTimestamp = i4, this.lastMessage && this.lastMessage.createdAt < i4 && (this.lastMessage = null), this._updateUnreadCount(0, 0), this.totalUnreadReplyCount = 0, t7.dispatch(new En2({ channels: [this], context: { source: Ks.EVENT_CHANNEL_RESET_HISTORY }, isWebSocketEventComing: true })), [2, this];
        }
      });
    });
  }, c4.prototype._uploadFileAndUpdateParams = function(e3) {
    return r(this, void 0, void 0, function() {
      var t7, n4, s6, r4, a5, i4, o3, u5, c5, l3;
      return s(this, function(h4) {
        switch (h4.label) {
          case 0:
            return k(e3.file) ? (t7 = Ws.of(this._iid).requestQueue, n4 = new Pe({ file: e3.file, channelUrl: this.url, thumbnailSizes: e3.thumbnailSizes, requestId: this._generateRequestId() }), [4, t7.send(n4)]) : [3, 2];
          case 1:
            s6 = h4.sent(), r4 = s6.as(ke2), a5 = r4.url, i4 = r4.fileSize, o3 = void 0 === i4 ? e3.fileSize : i4, u5 = r4.thumbnails, c5 = r4.requireAuth, l3 = void 0 !== c5 && c5, e3.fileUrl = a5, e3.fileSize = o3, e3.requireAuth = l3, e3._thumbnails = u5, h4.label = 2;
          case 2:
            return [2];
        }
      });
    });
  }, c4.prototype.resendMessage = function(e3, t7) {
    var n4, s6 = this;
    if (Jr(e3 instanceof mt && !e3.scheduledInfo && e3.isResendable).throw(v.invalidParameters), e3.isUserMessage()) {
      var r4 = null !== (n4 = e3.messageParams) && void 0 !== n4 ? n4 : sn(e3), a5 = new Xt();
      return this._sendUserMessage(r4, di.RESEND, e3.reqId).onPending(function(e4) {
        a5._trigger(e4);
      }).onFailed(function(e4, t8) {
        a5._triggerFailed(e4, t8);
      }).onSucceeded(function(e4) {
        s6._tryUpdateLastMessageAndCallEvents(s6, e4), a5._trigger(e4);
      }), a5;
    }
    if (e3.isFileMessage()) {
      var i4 = this._validateFailedFileMessageHasFile(e3, t7);
      Jr(i4).throw(v.invalidParameters);
      r4 = fn(e3, t7);
      var o3 = new Xt();
      return this._sendFileMessage(r4, di.RESEND, e3.reqId).onPending(function(e4) {
        o3._trigger(e4);
      }).onFailed(function(e4, t8) {
        o3._triggerFailed(e4, t8);
      }).onSucceeded(function(e4) {
        s6._tryUpdateLastMessageAndCallEvents(s6, e4), o3._trigger(e4);
      }), o3;
    }
    if (e3.isMultipleFilesMessage()) {
      r4 = e3.messageParams;
      var u5 = new ii();
      return this._sendMultipleFilesMessage(r4, di.RESEND, e3.reqId).onPending(function(e4) {
        u5._trigger(e4);
      }).onFailed(function(e4, t8) {
        u5._triggerFailed(e4, t8);
      }).onSucceeded(function(e4) {
        s6._tryUpdateLastMessageAndCallEvents(s6, e4), u5._trigger(e4);
      }).onFileUploaded(function(e4, t8, n5, s7) {
        u5._triggerOnFileUploaded(e4, t8, n5, s7);
      }), u5;
    }
  }, c4.prototype.copyMessage = function(e3, t7) {
    var n4 = this;
    if (Jr(e3 instanceof pi && t7 instanceof mt && t7.sendingStatus === W.SUCCEEDED && this.url === t7.channelUrl && !t7.scheduledInfo).throw(v.invalidParameters), t7.isUserMessage()) {
      Jr(!t7.poll).throw(v.notSupportedError);
      var s6 = nn(t7), r4 = new Xt();
      return e3._sendUserMessage(s6).onPending(function(e4) {
        r4._trigger(e4);
      }).onFailed(function(e4, t8) {
        r4._triggerFailed(e4, t8);
      }).onSucceeded(function(t8) {
        e3.isGroupChannel() && n4._tryUpdateLastMessageAndCallEvents(e3, t8), r4._trigger(t8);
      }), r4;
    }
    if (t7.isFileMessage()) {
      s6 = dn(t7);
      var a5 = new Xt();
      return e3._sendFileMessage(s6).onPending(function(e4) {
        a5._trigger(e4);
      }).onFailed(function(e4, t8) {
        a5._triggerFailed(e4, t8);
      }).onSucceeded(function(t8) {
        e3.isGroupChannel() && n4._tryUpdateLastMessageAndCallEvents(e3, t8), a5._trigger(t8);
      }), a5;
    }
    if (t7.isMultipleFilesMessage()) {
      if (e3.isGroupChannel()) {
        s6 = ti(t7);
        var i4 = new ii();
        return e3._sendMultipleFilesMessage(s6, di.COPY).onPending(function(e4) {
          i4._trigger(e4);
        }).onFailed(function(e4, t8) {
          i4._triggerFailed(e4, t8);
        }).onSucceeded(function(t8) {
          n4._tryUpdateLastMessageAndCallEvents(e3, t8), i4._trigger(t8);
        }).onFileUploaded(function(e4, t8, n5, s7) {
          i4._triggerOnFileUploaded(e4, t8, n5, s7);
        }), i4;
      }
      throw v.channelTypeNotSupportedError;
    }
  }, c4;
}(pi);

// node_modules/@sendbird/chat/lib/__bundle-90841c22.js
var t2 = function() {
  this.onUserMuted = st, this.onUserUnmuted = st, this.onUserBanned = st, this.onUserUnbanned = st, this.onChannelChanged = st, this.onChannelDeleted = st, this.onChannelFrozen = st, this.onChannelUnfrozen = st, this.onOperatorUpdated = st, this.onChannelMemberCountChanged = st, this.onMetaDataCreated = st, this.onMetaDataUpdated = st, this.onMetaDataDeleted = st, this.onMetaCounterCreated = st, this.onMetaCounterUpdated = st, this.onMetaCounterDeleted = st, this.onMessageReceived = st, this.onMessageUpdated = st, this.onMessageDeleted = st, this.onMentionReceived = st, this.onReactionUpdated = st, this.onThreadInfoUpdated = st;
};

// node_modules/@sendbird/chat/groupChannel.js
var De3;
var Pe2 = {};
var He2 = function() {
  function t7(t8) {
    var n4 = t8._iid, a5 = t8.limit, r4 = void 0 === a5 ? 100 : a5, o3 = this;
    this.ref = 0, this._iid = n4, this._limit = r4;
    var l3, u4 = Ws.of(this._iid), c4 = u4.sdkState, d5 = u4.dispatcher, p4 = u4.logger, m5 = u4.cacheContext, C3 = u4.statManager;
    this._metadataKey = (l3 = c4.userId, "sendbird:".concat(l3, "@groupchannel/sync.meta"));
    var b6 = function(e3) {
      return "sendbird:".concat(e3, "@groupchannel/sync");
    }(c4.userId);
    this._sync = new Es2(b6, function() {
      return r(o3, void 0, void 0, function() {
        var e3, t9, n5, a6, r5, i4, o4, l4, u5, h4, d6, f4, b7, S6;
        return s(this, function(s6) {
          switch (s6.label) {
            case 0:
              return e3 = { hasNext: true, nextToken: "" }, [4, this.loadMetadata()];
            case 1:
              if (s6.sent(), p4.debug("channel background sync from", null === (u5 = this._metadata) || void 0 === u5 ? void 0 : u5.token), null === (h4 = this._metadata) || void 0 === h4 ? void 0 : h4.completed) return [3, 14];
              s6.label = 2;
            case 2:
              if (s6.trys.push([2, 9, 12, 13]), (t9 = { includeEmpty: true, includeMetaData: true, order: E.CHRONOLOGICAL }).order !== E.LATEST_LAST_MESSAGE) return [3, 6];
              s6.label = 3;
            case 3:
              return s6.trys.push([3, 5, , 6]), [4, m5.preference.get(xr(c4.appId))];
            case 4:
              return n5 = s6.sent(), t9.includeChatNotification = Boolean(n5), [3, 6];
            case 5:
              return s6.sent(), t9.includeChatNotification = false, [3, 6];
            case 6:
              return [4, ps2.of(this._iid).getMyGroupChannels(null !== (f4 = null === (d6 = this._metadata) || void 0 === d6 ? void 0 : d6.token) && void 0 !== f4 ? f4 : "", t9, this._limit, Ks.SYNC_CHANNEL_BACKGROUND)];
            case 7:
              return a6 = s6.sent(), r5 = a6.channels, i4 = a6.token, e3.hasNext = r5.length >= this._limit && !!i4, e3.nextToken = i4, this._metadata && (this._metadata.token = i4, (l4 = this._metadata.range).extends.apply(l4, c([], a(r5.map(function(e4) {
                return e4.createdAt;
              })), false)), this._metadata.completed = !e3.hasNext), p4.debug("channel background sync progress", e3), [4, this.saveMetadata()];
            case 8:
              return s6.sent(), [3, 13];
            case 9:
              return o4 = s6.sent(), p4.debug("channel background sync error", o4), o4 instanceof v && o4.isInvalidTokenError ? [4, this.clearMetaData()] : [3, 11];
            case 10:
              s6.sent(), s6.label = 11;
            case 11:
              throw o4;
            case 12:
              return C3.put(new Ze({ type: Le.FEATURE_LOCALCACHE_EVENT, ts: Date.now(), data: { channel_url: "", measured_on: "channel_back_sync", event: "cache_fetch", max_db_size: null !== (S6 = null === (b7 = m5.localCacheConfig) || void 0 === b7 ? void 0 : b7.maxSize) && void 0 !== S6 ? S6 : 0, use_local_cache: m5.localCacheEnabled, starting_point: 0, message_init_policy: "", collection_id: c4.userId } })), [7];
            case 13:
              return [3, 15];
            case 14:
              e3.hasNext = false, e3.nextToken = "", s6.label = 15;
            case 15:
              return [2, e3];
          }
        });
      });
    }), this._connectionEventContext = d5.on(function(e3) {
      if (e3 instanceof kr) if (e3.stateType === Sr.CONNECTED) o3.resume();
      else o3.pause();
    });
  }
  return t7.of = function(e3) {
    return Pe2[e3] || (Pe2[e3] = new t7({ _iid: e3 })), Pe2[e3].ref++, Pe2[e3];
  }, t7.clear = function(e3) {
    Pe2[e3] && (Pe2[e3].close(), delete Pe2[e3]);
  }, Object.defineProperty(t7.prototype, "range", { get: function() {
    var e3, t8;
    return null !== (t8 = null === (e3 = this._metadata) || void 0 === e3 ? void 0 : e3.range) && void 0 !== t8 ? t8 : new ds2({});
  }, enumerable: false, configurable: true }), Object.defineProperty(t7.prototype, "completed", { get: function() {
    var e3;
    return !!(null === (e3 = this._metadata) || void 0 === e3 ? void 0 : e3.completed);
  }, enumerable: false, configurable: true }), t7.prototype.loadMetadata = function() {
    return r(this, void 0, void 0, function() {
      var e3;
      return s(this, function(t8) {
        switch (t8.label) {
          case 0:
            return this._metadata ? [3, 2] : [4, Ws.of(this._iid).cacheContext.preference.get(this._metadataKey)];
          case 1:
            e3 = t8.sent(), this._metadata = { token: e3 ? e3.token : "", range: new ds2(e3 ? e3.range : { top: Number.MAX_SAFE_INTEGER, bottom: 0 }), completed: !!e3 && e3.completed }, t8.label = 2;
          case 2:
            return [2, this._metadata];
        }
      });
    });
  }, t7.prototype.saveMetadata = function() {
    return r(this, void 0, void 0, function() {
      return s(this, function(e3) {
        switch (e3.label) {
          case 0:
            return this._metadata ? [4, Ws.of(this._iid).cacheContext.preference.set(this._metadataKey, this._metadata)] : [3, 2];
          case 1:
            return e3.sent(), [2, true];
          case 2:
            return [2, false];
        }
      });
    });
  }, t7.prototype.clearMetaData = function() {
    return r(this, void 0, void 0, function() {
      return s(this, function(e3) {
        switch (e3.label) {
          case 0:
            return [4, Ws.of(this._iid).cacheContext.preference.remove(this._metadataKey)];
          case 1:
            return e3.sent(), this._metadata = void 0, [2];
        }
      });
    });
  }, t7.prototype.resume = function() {
    var e3, t8, n4 = Ws.of(this._iid), a5 = n4.logger;
    n4.sessionManager.session.hasSession && (a5.debug("channel background sync resume()"), this._sync.start(null !== (t8 = null === (e3 = this._metadata) || void 0 === e3 ? void 0 : e3.token) && void 0 !== t8 ? t8 : ""));
  }, t7.prototype.pause = function() {
    Ws.of(this._iid).logger.debug("channel background sync stop()"), this._sync.stop();
  }, t7.prototype.close = function() {
    this.ref--, this.ref <= 0 && (this.ref = 0, this.pause(), this._connectionEventContext.close(), delete Pe2[this._iid]);
  }, t7;
}();
var Re2 = {};
var Ve2 = function() {
  function t7(t8) {
    var n4 = t8._iid, a5 = this;
    this.ref = 0, this._iid = n4;
    var r4, o3 = Ws.of(this._iid), l3 = o3.logger, u4 = o3.sdkState, c4 = o3.dispatcher, d5 = o3.cacheContext;
    this._metadataKey = (r4 = u4.userId, "sendbird:".concat(r4, "@groupchannel/changelogs.meta")), this._subscribers = new te();
    var p4 = function(e3) {
      return "sendbird:".concat(e3, "@groupchannel/changelogs");
    }(u4.userId);
    this._sync = new Es2(p4, function() {
      return r(a5, void 0, void 0, function() {
        var e3, t9, n5, a6, r5, i4, o4, c5, h4, p5, f4, _2;
        return s(this, function(s6) {
          switch (s6.label) {
            case 0:
              return e3 = { hasNext: true, nextToken: 0 }, [4, this.loadMetadata()];
            case 1:
              s6.sent(), l3.debug("channel changelog sync from", null === (p5 = this._metadata) || void 0 === p5 ? void 0 : p5.token), s6.label = 2;
            case 2:
              s6.trys.push([2, 9, , 12]), t9 = { includeEmpty: true, includeMetaData: true }, s6.label = 3;
            case 3:
              return s6.trys.push([3, 5, , 6]), [4, d5.preference.get(xr(u4.appId))];
            case 4:
              return n5 = s6.sent(), t9.includeChatNotification = Boolean(n5), [3, 6];
            case 5:
              return s6.sent(), t9.includeChatNotification = false, [3, 6];
            case 6:
              return [4, ps2.of(this._iid).getMyGroupChannelChangeLogs(null !== (_2 = null === (f4 = this._metadata) || void 0 === f4 ? void 0 : f4.token) && void 0 !== _2 ? _2 : "", t9, Ks.SYNC_CHANNEL_CHANGELOGS)];
            case 7:
              return a6 = s6.sent(), r5 = a6.updatedChannels, i4 = a6.deletedChannelUrls, o4 = a6.hasMore, c5 = a6.token, this._subscribers.dispatch("progress", { updatedChannels: r5, deletedChannelUrls: i4, hasMore: o4, token: c5 }), e3.hasNext = o4, e3.nextToken = c5, this._metadata && (this._metadata.token = c5), l3.debug("channel changelog sync progress", e3), [4, this.saveMetadata()];
            case 8:
              return s6.sent(), [3, 12];
            case 9:
              return h4 = s6.sent(), l3.debug("channel changelog sync error", h4), h4 instanceof v && h4.isInvalidTokenError ? [4, this.clearMetadata()] : [3, 11];
            case 10:
              s6.sent(), s6.label = 11;
            case 11:
              throw h4;
            case 12:
              return [2, e3];
          }
        });
      });
    }), this._sync.on("stop", function() {
      a5._subscribers.dispatch("pause");
    }), this._connectionEventContext = c4.on(function(e3) {
      if (e3 instanceof kr) if (e3.stateType === Sr.CONNECTED) a5.resume();
      else a5.pause();
    });
  }
  return t7.of = function(e3) {
    return Re2[e3] || (Re2[e3] = new t7({ _iid: e3 })), Re2[e3].ref++, Re2[e3];
  }, t7.clear = function(e3) {
    Re2[e3] && (Re2[e3].close(), delete Re2[e3]);
  }, Object.defineProperty(t7.prototype, "isRunning", { get: function() {
    return this._sync.isRunning;
  }, enumerable: false, configurable: true }), t7.prototype.loadMetadata = function() {
    return r(this, void 0, void 0, function() {
      var e3, t8, n4, a5;
      return s(this, function(r4) {
        switch (r4.label) {
          case 0:
            return this._metadata ? [3, 2] : (e3 = Ws.of(this._iid), t8 = e3.cacheContext, n4 = e3.firstConnectedAt, [4, t8.preference.get(this._metadataKey)]);
          case 1:
            a5 = r4.sent(), this._metadata = { token: a5 ? a5.token : n4 }, r4.label = 2;
          case 2:
            return [2, this._metadata];
        }
      });
    });
  }, t7.prototype.saveMetadata = function() {
    return r(this, void 0, void 0, function() {
      return s(this, function(e3) {
        switch (e3.label) {
          case 0:
            return this._metadata ? [4, Ws.of(this._iid).cacheContext.preference.set(this._metadataKey, this._metadata)] : [3, 2];
          case 1:
            return e3.sent(), [2, true];
          case 2:
            return [2, false];
        }
      });
    });
  }, t7.prototype.clearMetadata = function() {
    return r(this, void 0, void 0, function() {
      return s(this, function(e3) {
        switch (e3.label) {
          case 0:
            return [4, Ws.of(this._iid).cacheContext.preference.remove(this._metadataKey)];
          case 1:
            return e3.sent(), this._metadata = void 0, [2];
        }
      });
    });
  }, t7.prototype.on = function(e3, t8) {
    return this._subscribers.on(e3, t8);
  }, t7.prototype.resume = function() {
    Ws.of(this._iid).sessionManager.session.hasSession && this._sync.start(0);
  }, t7.prototype.pause = function() {
    this._sync.stop();
  }, t7.prototype.close = function() {
    this.ref--, this.ref <= 0 && (this.ref = 0, this.pause(), this._connectionEventContext.close(), delete Re2[this._iid]);
  }, t7;
}();
var Ke2 = function(e3, t7) {
  return e3.findIndex(function(e4) {
    return e4.isIdentical(t7);
  });
};
var Qe2 = function(e3, t7, n4) {
  if (e3.length > 0) {
    for (var a5 = Ke2(e3, t7), r4 = 0, i4 = e3.length - 1, s6 = Math.floor((r4 + i4) / 2); r4 < i4; ) {
      var o3 = je2(e3[s6], t7, n4);
      if (o3 > 0) i4 = s6, s6 = Math.floor((r4 + i4) / 2);
      else {
        if (!(o3 < 0)) return { place: s6, oldPosition: a5 };
        r4 = s6 + 1, s6 = Math.floor((r4 + i4) / 2);
      }
    }
    return { place: je2(e3[s6], t7, n4) >= 0 ? s6 : s6 + 1, oldPosition: a5 };
  }
  return { place: e3.length, oldPosition: -1 };
};
var je2 = function(e3, t7, n4) {
  switch (n4) {
    case E.LATEST_LAST_MESSAGE:
      return e3.lastMessage && t7.lastMessage ? 0 === (a5 = t7.lastMessage.createdAt - e3.lastMessage.createdAt) ? t7.createdAt - e3.createdAt : a5 : e3.lastMessage ? -1 : t7.lastMessage ? 1 : t7.createdAt - e3.createdAt;
    case E.CHRONOLOGICAL:
      return t7.createdAt - e3.createdAt;
    case E.CHANNEL_NAME_ALPHABETICAL:
      var a5;
      return 0 === (a5 = e3.name.localeCompare(t7.name)) ? e3.createdAt - t7.createdAt : a5;
    default:
      return 0;
  }
};
var ze2 = function() {
  function t7(t8, n4) {
    var a5 = n4.filter, r4 = void 0 === a5 ? new rn2() : a5, o3 = n4.order, l3 = void 0 === o3 ? E.LATEST_LAST_MESSAGE : o3, u4 = n4.limit, c4 = void 0 === u4 ? Br : u4, d5 = n4.includeChangesOnInitialLoad, p4 = void 0 !== d5 && d5, _2 = this;
    this.channels = [], this._isInitialized = false, this._iid = t8, this._key = "gcc-".concat($()), this._isDisposed = false, this._isGetRemoteChannelsSucceeded = true, this._includeChangesOnInitialLoad = p4, this.filter = r4, this.order = l3, this._hasMore = true, this._token = "", this._limit = c4;
    var v5 = Ws.of(this._iid), m5 = v5.sdkState, g4 = v5.cacheContext, y6 = v5.dispatcher;
    g4.localCacheEnabled && (this._backgroundSync = He2.of(t8), this._backgroundSync.resume()), this._changelogSync = Ve2.of(t8), this._changelogSync.resume(), ps2.of(this._iid).subscribeChannelEvent(this._key, { onUpdate: function(e3, t9) {
      var n5 = t9.source;
      if (gn2(n5)) {
        var a6 = e3.filter(function(e4) {
          return _2.filter.match(e4, m5.userId);
        }), r5 = e3.filter(function(e4) {
          return !_2.filter.match(e4, m5.userId);
        }).map(function(e4) {
          return e4.url;
        });
        a6.length > 0 && _2._addChannelsToView(a6, t9), r5.length > 0 && _2._removeChannelsFromView(r5, t9);
      }
    }, onRemove: function(e3, t9) {
      _2._removeChannelsFromView(e3, t9);
    } }), y6.on(function(t9) {
      t9 instanceof kr && (t9.stateType === Sr.CONNECTED ? _2._isGetRemoteChannelsSucceeded || r(_2, void 0, void 0, function() {
        return s(this, function(e3) {
          switch (e3.label) {
            case 0:
              return [4, this._revokeLoadMore()];
            case 1:
              return e3.sent(), [2];
          }
        });
      }) : t9.stateType === Sr.LOGOUT && _2.dispose());
    });
  }
  return Object.defineProperty(t7.prototype, "hasMore", { get: function() {
    return !this._isDisposed && this._hasMore;
  }, enumerable: false, configurable: true }), t7.prototype.setGroupChannelCollectionHandler = function(e3) {
    this._handler = e3;
  }, t7.prototype._addChannelsToView = function(t8, n4, a5) {
    var r4, i4, o3, l3, u4 = this;
    void 0 === a5 && (a5 = false);
    var c4 = [], h4 = [], d5 = [];
    try {
      for (var p4 = o(t8), f4 = p4.next(); !f4.done; f4 = p4.next()) {
        var _2 = f4.value, v5 = Ke2(this.channels, _2);
        v5 >= 0 && this.channels.splice(v5, 1);
        var m5 = Qe2(this.channels, _2, this.order).place;
        if (v5 < 0) m5 === this.channels.length ? !a5 && this._hasMore || (c4.push(_2), this.channels.push(_2)) : (c4.push(_2), this.channels.splice(m5, 0, _2));
        else switch (n4.source) {
          case Ks.EVENT_CHANNEL_UPDATED:
          case Ks.EVENT_MESSAGE_RECEIVED:
          case Ks.SYNC_CHANNEL_CHANGELOGS:
          case Ks.EVENT_MESSAGE_SENT:
            this.order === E.CHANNEL_NAME_ALPHABETICAL && this._hasMore && m5 === this.channels.length ? d5.push(_2) : (this.channels.splice(m5, 0, _2), h4.push(_2));
            break;
          default:
            this.channels.splice(m5, 0, _2), h4.push(_2);
        }
      }
    } catch (e3) {
      r4 = { error: e3 };
    } finally {
      try {
        f4 && !f4.done && (i4 = p4.return) && i4.call(p4);
      } finally {
        if (r4) throw r4.error;
      }
    }
    if (d5.length > 0) try {
      for (var g4 = o(d5), y6 = g4.next(); !y6.done; y6 = g4.next()) {
        _2 = y6.value;
        var C3 = Ke2(this.channels, _2);
        -1 !== C3 && this.channels.splice(C3, 1);
      }
    } catch (e3) {
      o3 = { error: e3 };
    } finally {
      try {
        y6 && !y6.done && (l3 = g4.return) && l3.call(g4);
      } finally {
        if (o3) throw o3.error;
      }
    }
    gn2(n4.source) && os(function() {
      return r(u4, void 0, void 0, function() {
        var e3, t9, a6;
        return s(this, function(r5) {
          return c4.length > 0 && (null === (e3 = this._handler) || void 0 === e3 ? void 0 : e3.onChannelsAdded) && this._handler.onChannelsAdded(n4, c4), h4.length > 0 && (null === (t9 = this._handler) || void 0 === t9 ? void 0 : t9.onChannelsUpdated) && this._handler.onChannelsUpdated(n4, h4), d5.length > 0 && (null === (a6 = this._handler) || void 0 === a6 ? void 0 : a6.onChannelsDeleted) && this._handler.onChannelsDeleted(n4, d5.map(function(e4) {
            return e4.url;
          })), [2];
        });
      });
    });
  }, t7.prototype._removeChannelsFromView = function(t8, n4) {
    var a5, r4, i4 = this, o3 = [], l3 = function(e3) {
      var t9 = u4.channels.findIndex(function(t10) {
        return t10.url === e3;
      });
      t9 >= 0 && (o3.push(u4.channels[t9].url), u4.channels.splice(t9, 1));
    }, u4 = this;
    try {
      for (var c4 = o(t8), h4 = c4.next(); !h4.done; h4 = c4.next()) {
        l3(h4.value);
      }
    } catch (e3) {
      a5 = { error: e3 };
    } finally {
      try {
        h4 && !h4.done && (r4 = c4.return) && r4.call(c4);
      } finally {
        if (a5) throw a5.error;
      }
    }
    return gn2(n4.source) && o3.length > 0 && os(function() {
      return r(i4, void 0, void 0, function() {
        var e3;
        return s(this, function(t9) {
          return (null === (e3 = this._handler) || void 0 === e3 ? void 0 : e3.onChannelsDeleted) && this._handler.onChannelsDeleted(n4, o3), [2];
        });
      });
    }), o3;
  }, t7.prototype._getLocalChannels = function() {
    return r(this, void 0, void 0, function() {
      var e3, t8;
      return s(this, function(n4) {
        switch (n4.label) {
          case 0:
            return e3 = ps2.of(this._iid), t8 = this.channels.length > 0 ? function(e4, t9) {
              var n5, a5, r4, i4;
              switch (t9) {
                case E.LATEST_LAST_MESSAGE:
                  return null !== (a5 = null === (n5 = e4.lastMessage) || void 0 === n5 ? void 0 : n5.createdAt) && void 0 !== a5 ? a5 : e4.createdAt;
                case E.CHRONOLOGICAL:
                  return e4.createdAt;
                case E.CHANNEL_NAME_ALPHABETICAL:
                  return e4.name;
                default:
                  return null !== (i4 = null === (r4 = e4.lastMessage) || void 0 === r4 ? void 0 : r4.createdAt) && void 0 !== i4 ? i4 : e4.createdAt;
              }
            }(this.channels[this.channels.length - 1], this.order) : null, [4, e3.getChannelsFromCache(t8, this.filter, this.order, this._limit, t8 ? this.channels[this.channels.length - 1].url : void 0)];
          case 1:
            return [2, n4.sent()];
        }
      });
    });
  }, t7.prototype._getRemoteChannels = function() {
    return r(this, void 0, void 0, function() {
      var e3, t8, n4;
      return s(this, function(a5) {
        switch (a5.label) {
          case 0:
            return [4, ps2.of(this._iid).getMyGroupChannels(this._token, se(n(n({}, this.filter), { userIdsFilter: this.filter.userIdsFilter, searchFilter: this.filter.searchFilter, order: this.order })), this._limit)];
          case 1:
            return e3 = a5.sent(), t8 = e3.channels, n4 = e3.token, this._token = n4, this._hasMore = !!n4, [2, t8];
        }
      });
    });
  }, t7.prototype._revokeLoadMore = function() {
    return r(this, void 0, void 0, function() {
      var e3;
      return s(this, function(t8) {
        switch (t8.label) {
          case 0:
            if (this._isDisposed) return [2];
            t8.label = 1;
          case 1:
            return t8.trys.push([1, 3, , 4]), [4, this._getRemoteChannels()];
          case 2:
            return e3 = t8.sent(), this._isGetRemoteChannelsSucceeded = true, this._addChannelsToView(e3, { source: Ks.REQUEST_CHANNEL }, true), [3, 4];
          case 3:
            return t8.sent(), this._isGetRemoteChannelsSucceeded = false, [3, 4];
          case 4:
            return [2];
        }
      });
    });
  }, t7.prototype.loadMore = function() {
    var t8;
    return r(this, void 0, void 0, function() {
      var n4, a5, r4, o3, l3, u4, c4, h4, d5, p4, f4, _2, m5, y6, C3, b6, S6, M5, E4, w4 = this;
      return s(this, function(L5) {
        switch (L5.label) {
          case 0:
            if (this._isDisposed) throw new v({ code: u.COLLECTION_DISPOSED, message: "Collection has been disposed." });
            return n4 = null, this._includeChangesOnInitialLoad && 0 === this.channels.length && this._changelogSync.isRunning ? [4, new Promise(function(e3) {
              w4._changelogSyncSubscriberContext = w4._changelogSync.on("progress", function(t9) {
                return e3(t9);
              }).on("pause", function() {
                return e3(null);
              });
            })] : [3, 2];
          case 1:
            n4 = L5.sent(), null === (t8 = this._changelogSyncSubscriberContext) || void 0 === t8 || t8.close(), L5.label = 2;
          case 2:
            return a5 = Ws.of(this._iid), r4 = a5.cacheContext, o3 = a5.connectionManager, l3 = a5.statManager, this._isInitialized ? [3, 5] : (this._isInitialized = true, r4.localCacheEnabled ? [4, this._backgroundSync.loadMetadata()] : [3, 4]);
          case 3:
            L5.sent(), L5.label = 4;
          case 4:
            l3.put(new qs({ type: Le.FEATURE_LOCALCACHE, data: { use_local_cache: r4.localCacheEnabled, collection_interface: { group_channel: true } } })), L5.label = 5;
          case 5:
            return u4 = [], this._hasMore ? !r4.localCacheEnabled || o3.isConnected && !this._backgroundSync.completed ? [3, 7] : [4, as(function() {
              return r(w4, void 0, void 0, function() {
                return s(this, function(e3) {
                  switch (e3.label) {
                    case 0:
                      return [4, this._getLocalChannels()];
                    case 1:
                      return u4 = e3.sent(), [2];
                  }
                });
              });
            })] : [3, 11];
          case 6:
            return L5.sent(), this._hasMore = u4.length >= this._limit, [3, 10];
          case 7:
            return L5.trys.push([7, 9, , 10]), [4, this._getRemoteChannels()];
          case 8:
            return u4 = L5.sent(), this._isGetRemoteChannelsSucceeded = true, [3, 10];
          case 9:
            return L5.sent(), this._isGetRemoteChannelsSucceeded = false, [3, 10];
          case 10:
            this._addChannelsToView(u4, { source: Ks.REQUEST_CHANNEL }, true), L5.label = 11;
          case 11:
            if (n4) {
              try {
                for (c4 = o(n4.updatedChannels), h4 = c4.next(); !h4.done; h4 = c4.next()) d5 = h4.value, (C3 = Ke2(u4, d5)) >= 0 ? u4[C3] = d5 : (p4 = Qe2(u4, d5, this.order).place, u4.splice(p4, 0, d5));
              } catch (e3) {
                b6 = { error: e3 };
              } finally {
                try {
                  h4 && !h4.done && (S6 = c4.return) && S6.call(c4);
                } finally {
                  if (b6) throw b6.error;
                }
              }
              f4 = u4.map(function(e3) {
                return e3.url;
              });
              try {
                for (_2 = o(n4.deletedChannelUrls), m5 = _2.next(); !m5.done; m5 = _2.next()) y6 = m5.value, (C3 = f4.indexOf(y6)) >= 0 && (u4.splice(C3, 1), f4.splice(C3, 1));
              } catch (e3) {
                M5 = { error: e3 };
              } finally {
                try {
                  m5 && !m5.done && (E4 = _2.return) && E4.call(_2);
                } finally {
                  if (M5) throw M5.error;
                }
              }
            }
            return [2, u4];
        }
      });
    });
  }, t7.prototype.dispose = function() {
    var e3, t8, n4;
    this._isDisposed || (this._isDisposed = true, this.channels.length > 0 && this.channels.splice(0, this.channels.length), null === (e3 = this._backgroundSync) || void 0 === e3 || e3.close(), null === (t8 = this._changelogSync) || void 0 === t8 || t8.close(), null === (n4 = this._changelogSyncSubscriberContext) || void 0 === n4 || n4.close(), ps2.of(this._iid).unsubscribeChannelEvent(this._key));
  }, t7;
}();
var We3 = function(e3) {
  function t7(t8) {
    var n4 = this, a5 = t8.token, r4 = t8.limit, i4 = t8.order, s6 = t8.includeEmpty, o3 = t8.membershipFilter, l3 = t8.channelNameContainsFilter, u4 = t8.channelUrlsFilter, c4 = t8.customTypesFilter, h4 = t8.customTypeStartsWithFilter, d5 = t8.superChannelFilter, p4 = t8.metadataOrderKeyFilter, f4 = t8.metadataKey, _2 = t8.metadataValues, v5 = t8.metadataValueStartsWith, m5 = t8.includeFrozen, g4 = t8.includeMetaData;
    return (n4 = e3.call(this) || this).method = oe.GET, n4.path = he, n4.params = re(se({ token: a5, limit: r4, order: i4, show_member: true, show_read_receipt: true, show_delivery_receipt: true, show_empty: s6, public_mode: Qt2.PUBLIC, public_membership_mode: o3, name_contains: l3, channel_urls: u4, custom_types: c4, custom_type_startswith: h4, super_mode: d5, metadata_order_key: p4, metadata_key: f4, metadata_values: _2, metadata_value_startswith: v5, show_frozen: m5, show_metadata: g4 })), n4;
  }
  return t(t7, e3), t7;
}(xe);
var Be2 = function(e3) {
  function t7(t8, n4) {
    var a5 = e3.call(this, t8, n4) || this;
    a5.channels = [];
    var r4 = n4.next, i4 = n4.channels, s6 = n4.ts;
    return a5.token = r4, i4 && i4.length > 0 && (a5.channels = i4.map(function(e4) {
      return e4.ts = s6, new ur2(t8, e4);
    })), a5.ts = "number" == typeof s6 ? s6 : 0, a5;
  }
  return t(t7, e3), t7;
}(Ue);
!function(e3) {
  e3.ALL = "all", e3.JOINED = "joined";
}(De3 || (De3 = {}));
var qe3 = function(t7) {
  function n4(e3, n5) {
    var a5, r4, i4, s6, o3, l3, u4, c4, h4, d5, p4, f4, _2, v5, m5 = this;
    return (m5 = t7.call(this, e3, n5) || this).includeEmpty = false, m5.includeFrozen = true, m5.includeMetaData = true, m5.channelUrlsFilter = null, m5.customTypesFilter = null, m5.customTypeStartsWithFilter = null, m5.channelNameContainsFilter = null, m5.membershipFilter = De3.ALL, m5.superChannelFilter = Kt2.ALL, m5.metadataKey = null, m5.metadataValues = null, m5.metadataOrderKeyFilter = null, m5.metadataValueStartsWith = null, m5.order = p2.CHRONOLOGICAL, m5.includeEmpty = null !== (a5 = n5.includeEmpty) && void 0 !== a5 && a5, m5.includeFrozen = null === (r4 = n5.includeFrozen) || void 0 === r4 || r4, m5.includeMetaData = null === (i4 = n5.includeMetaData) || void 0 === i4 || i4, m5.channelUrlsFilter = null !== (s6 = n5.channelUrlsFilter) && void 0 !== s6 ? s6 : null, m5.customTypesFilter = null !== (o3 = n5.customTypesFilter) && void 0 !== o3 ? o3 : null, m5.customTypeStartsWithFilter = null !== (l3 = n5.customTypeStartsWithFilter) && void 0 !== l3 ? l3 : null, m5.channelNameContainsFilter = null !== (u4 = n5.channelNameContainsFilter) && void 0 !== u4 ? u4 : null, m5.membershipFilter = null !== (c4 = n5.membershipFilter) && void 0 !== c4 ? c4 : De3.ALL, m5.superChannelFilter = null !== (h4 = n5.superChannelFilter) && void 0 !== h4 ? h4 : Kt2.ALL, m5.metadataKey = null !== (d5 = n5.metadataKey) && void 0 !== d5 ? d5 : null, m5.metadataValues = null !== (p4 = n5.metadataValues) && void 0 !== p4 ? p4 : null, m5.metadataOrderKeyFilter = null !== (f4 = n5.metadataOrderKeyFilter) && void 0 !== f4 ? f4 : null, m5.metadataValueStartsWith = null !== (_2 = n5.metadataValueStartsWith) && void 0 !== _2 ? _2 : null, m5.order = null !== (v5 = n5.order) && void 0 !== v5 ? v5 : p2.CHRONOLOGICAL, m5;
  }
  return t(n4, t7), n4.prototype._validate = function() {
    return t7.prototype._validate.call(this) && w("boolean", this.includeEmpty) && w("boolean", this.includeFrozen) && w("boolean", this.includeMetaData) && w("string", this.channelNameContainsFilter, true) && N("string", this.channelUrlsFilter, true) && N("string", this.customTypesFilter, true) && w("string", this.customTypeStartsWithFilter, true) && S(De3, this.membershipFilter) && S(Kt2, this.superChannelFilter) && S(p2, this.order) && w("string", this.metadataOrderKeyFilter, true) && w("string", this.metadataKey, true) && N("string", this.metadataValues, true) && w("string", this.metadataValueStartsWith, true);
  }, n4.prototype.next = function() {
    return r(this, void 0, void 0, function() {
      var e3, t8, n5, a5, r4, o3, l3;
      return s(this, function(s6) {
        switch (s6.label) {
          case 0:
            return this._validate() ? this._isLoading ? [3, 3] : (e3 = [], this._hasNext ? (this._isLoading = true, t8 = Ws.of(this._iid).requestQueue, n5 = new We3(se(n(n({}, this), { token: this._token }))), [4, t8.send(n5)]) : [3, 2]) : [3, 5];
          case 1:
            return a5 = s6.sent(), r4 = a5.as(Be2), o3 = r4.channels, l3 = r4.token, this._token = l3, this._hasNext = !!l3, this._isLoading = false, [2, o3];
          case 2:
            return [2, e3];
          case 3:
            throw v.queryInProgress;
          case 4:
            return [3, 6];
          case 5:
            throw v.invalidParameters;
          case 6:
            return [2];
        }
      });
    });
  }, n4;
}(_o);
var Ye3 = function(e3) {
  function t7(t8) {
    void 0 === t8 && (t8 = {});
    var n4 = e3.call(this) || this;
    return Object.keys(t8).forEach(function(e4) {
      n4.hasOwnProperty(e4) && (n4[e4] = t8[e4]);
    }), n4;
  }
  return t(t7, e3), t7;
}(function(e3) {
  function t7() {
    var t8 = null !== e3 && e3.apply(this, arguments) || this;
    return t8.onUserJoined = st, t8.onUserLeft = st, t8.onUserReceivedInvitation = st, t8.onUserDeclinedInvitation = st, t8.onChannelHidden = st, t8.onUnreadMemberStatusUpdated = st, t8.onUndeliveredMemberStatusUpdated = st, t8.onTypingStatusUpdated = st, t8.onPollUpdated = st, t8.onPollVoted = st, t8.onPollDeleted = st, t8.onPinnedMessageUpdated = st, t8;
  }
  return t(t7, e3), t7;
}(t2));
var Xe2 = function(e3) {
  function t7(t8) {
    var n4 = this, a5 = t8.token, r4 = t8.limit, i4 = t8.order, s6 = t8.reverse, o3 = t8.channelUrl, l3 = t8.messageTypeFilter, u4 = t8.scheduledStatus;
    return (n4 = e3.call(this) || this).method = oe.GET, n4.path = "".concat(me), n4.params = re(se({ token: a5, limit: r4, reverse: s6, channel_url: o3, order: i4, message_type: l3, status: u4 })), n4;
  }
  return t(t7, e3), t7;
}(xe);
var Je3 = function(e3) {
  function t7(t8, n4) {
    var a5 = e3.call(this, t8, n4) || this;
    a5.scheduledMessages = [];
    var r4 = n4.next, i4 = n4.scheduled_messages;
    return a5.token = r4, a5.scheduledMessages = i4.map(function(e4) {
      return Mt(t8, e4);
    }), a5;
  }
  return t(t7, e3), t7;
}(Ue);
var Ze3 = function(t7) {
  function n4(e3, n5) {
    var a5, r4, i4, s6, o3, l3 = this;
    return (l3 = t7.call(this, e3, n5) || this).channelUrl = null, l3.order = null, l3.reverse = false, l3.scheduledStatus = null, l3.messageTypeFilter = G.ALL, l3.channelUrl = null !== (a5 = n5.channelUrl) && void 0 !== a5 ? a5 : null, l3.order = null !== (r4 = n5.order) && void 0 !== r4 ? r4 : null, l3.reverse = null !== (i4 = n5.reverse) && void 0 !== i4 && i4, l3.scheduledStatus = null !== (s6 = n5.scheduledStatus) && void 0 !== s6 ? s6 : null, l3.messageTypeFilter = null !== (o3 = n5.messageTypeFilter) && void 0 !== o3 ? o3 : G.ALL, l3;
  }
  return t(n4, t7), n4.prototype._validate = function() {
    return t7.prototype._validate.call(this) && w("string", this.channelUrl, true) && (S(R2, this.order) || null === this.order) && w("boolean", this.reverse) && (N(ut, this.scheduledStatus) || null === this.scheduledStatus) && S(G, this.messageTypeFilter);
  }, n4.prototype.next = function() {
    return r(this, void 0, void 0, function() {
      var e3, t8, n5, a5, r4, o3;
      return s(this, function(s6) {
        switch (s6.label) {
          case 0:
            return this._validate() ? this._isLoading ? [3, 3] : this._hasNext ? (this._isLoading = true, e3 = Ws.of(this._iid).requestQueue, t8 = new Xe2(se(n(n({}, this), { token: this._token }))), [4, e3.send(t8)]) : [3, 2] : [3, 5];
          case 1:
            return n5 = s6.sent(), a5 = n5.as(Je3), r4 = a5.scheduledMessages, o3 = a5.token, this._token = o3, this._hasNext = !!o3, this._isLoading = false, [2, r4];
          case 2:
            return [2, []];
          case 3:
            throw v.queryInProgress;
          case 4:
            return [3, 6];
          case 5:
            throw v.invalidParameters;
          case 6:
            return [2];
        }
      });
    });
  }, n4;
}(_o);
var $e2 = function(t7) {
  function n4() {
    var e3 = null !== t7 && t7.apply(this, arguments) || this;
    return e3.name = "groupChannel", e3;
  }
  return t(n4, t7), n4.prototype.init = function(e3, n5) {
    var a5 = n5.sdkState, r4 = n5.dispatcher, i4 = n5.sessionManager, s6 = n5.requestQueue, o3 = n5.logger, l3 = n5.onlineDetector, u4 = n5.cacheContext;
    t7.prototype.init.call(this, e3, { sdkState: a5, dispatcher: r4, sessionManager: i4, requestQueue: s6, logger: o3, onlineDetector: l3, cacheContext: u4 }), this._manager = new ps2(e3, { sdkState: a5, cacheContext: u4, dispatcher: r4, sessionManager: i4, requestQueue: s6, logger: o3 });
  }, n4.prototype.createGroupChannelCollection = function(e3) {
    return void 0 === e3 && (e3 = {}), new ze2(this._iid, e3);
  }, n4.prototype.createMyGroupChannelListQuery = function(e3) {
    return void 0 === e3 && (e3 = {}), new us2(this._iid, e3);
  }, n4.prototype.createPublicGroupChannelListQuery = function(e3) {
    return void 0 === e3 && (e3 = {}), new qe3(this._iid, e3);
  }, n4.prototype.createScheduledMessageListQuery = function(e3) {
    return void 0 === e3 && (e3 = {}), new Ze3(this._iid, e3);
  }, n4.prototype.addGroupChannelHandler = function(e3, t8) {
    Jr(w("string", e3) && t8 instanceof Ye3).throw(v.invalidParameters), this._manager.addHandler(e3, t8);
  }, n4.prototype.removeGroupChannelHandler = function(e3) {
    Jr(w("string", e3)).throw(v.invalidParameters), this._manager.removeHandler(e3);
  }, n4.prototype.removeAllGroupChannelHandlers = function() {
    this._manager.clearHandler();
  }, n4.prototype.buildGroupChannelFromSerializedData = function(e3) {
    return this._manager.buildGroupChannelFromSerializedData(e3);
  }, n4.prototype.buildGroupChannelListQueryFromSerializedData = function(e3) {
    return this._manager.buildGroupChannelListQueryFromSerializedData(e3);
  }, n4.prototype.buildMemberFromSerializedData = function(e3) {
    return this._manager.buildMemberFromSerializedData(e3);
  }, n4.prototype.getChannel = function(t8) {
    return r(this, void 0, void 0, function() {
      return s(this, function(e3) {
        return Jr(w("string", t8)).throw(v.invalidParameters), [2, this._manager.getChannel(t8)];
      });
    });
  }, n4.prototype.getChannelWithoutCache = function(t8) {
    return r(this, void 0, void 0, function() {
      return s(this, function(e3) {
        return Jr(w("string", t8)).throw(v.invalidParameters), [2, this._manager.getChannelWithoutCache(t8)];
      });
    });
  }, n4.prototype.getMyGroupChannelChangeLogsByToken = function(t8, n5) {
    return void 0 === n5 && (n5 = {}), r(this, void 0, void 0, function() {
      var e3;
      return s(this, function(a5) {
        switch (a5.label) {
          case 0:
            return e3 = n(n({}, cn2), n5), Jr(w("string", t8) && ln2(e3)).throw(v.invalidParameters), [4, this._manager.getMyGroupChannelChangeLogs(t8, e3)];
          case 1:
            return [2, a5.sent()];
        }
      });
    });
  }, n4.prototype.getMyGroupChannelChangeLogsByTimestamp = function(t8, n5) {
    return void 0 === n5 && (n5 = {}), r(this, void 0, void 0, function() {
      var e3;
      return s(this, function(a5) {
        switch (a5.label) {
          case 0:
            return e3 = n(n({}, cn2), n5), Jr(w("number", t8) && ln2(e3)).throw(v.invalidParameters), [4, this._manager.getMyGroupChannelChangeLogs(t8, e3)];
          case 1:
            return [2, a5.sent()];
        }
      });
    });
  }, n4.prototype.getGroupChannelCount = function(t8) {
    return r(this, void 0, void 0, function() {
      var e3;
      return s(this, function(n5) {
        return e3 = n(n({}, hn2), t8), Jr(dn2(e3)).throw(v.invalidParameters), [2, this._manager.getGroupChannelCount(e3)];
      });
    });
  }, n4.prototype.getUnreadItemCount = function(t8) {
    return void 0 === t8 && (t8 = {}), r(this, void 0, void 0, function() {
      return s(this, function(e3) {
        switch (e3.label) {
          case 0:
            return [4, this._manager.getUnreadItemCount(t8)];
          case 1:
            return [2, e3.sent()];
        }
      });
    });
  }, n4.prototype.getTotalUnreadChannelCount = function() {
    return r(this, void 0, void 0, function() {
      return s(this, function(e3) {
        switch (e3.label) {
          case 0:
            return [4, this._manager.getTotalUnreadChannelCount()];
          case 1:
            return [2, e3.sent()];
        }
      });
    });
  }, n4.prototype.getTotalUnreadMessageCount = function(t8) {
    return void 0 === t8 && (t8 = {}), r(this, void 0, void 0, function() {
      return s(this, function(e3) {
        switch (e3.label) {
          case 0:
            return [4, this._manager.getTotalUnreadMessageCount(t8)];
          case 1:
            return [2, e3.sent()];
        }
      });
    });
  }, n4.prototype.getTotalScheduledMessageCount = function(t8) {
    return void 0 === t8 && (t8 = {}), r(this, void 0, void 0, function() {
      return s(this, function(e3) {
        switch (e3.label) {
          case 0:
            return [4, this._manager.getTotalScheduledMessageCount(t8)];
          case 1:
            return [2, e3.sent()];
        }
      });
    });
  }, n4.prototype.getSubscribedTotalUnreadMessageCount = function() {
    return this._manager.getSubscribedTotalUnreadMessageCount();
  }, n4.prototype.getSubscribedCustomTypeTotalUnreadMessageCount = function() {
    return this._manager.getSubscribedCustomTypeTotalUnreadMessageCount();
  }, n4.prototype.getSubscribedCustomTypeUnreadMessageCount = function(e3) {
    return this._manager.getSubscribedCustomTypeUnreadMessageCount(e3);
  }, n4.prototype.createChannel = function(t8) {
    return void 0 === t8 && (t8 = {}), r(this, void 0, void 0, function() {
      var e3;
      return s(this, function(n5) {
        return e3 = n(n({}, on2), t8), Jr(un2(e3)).throw(v.invalidParameters), [2, this._manager.createChannel(e3)];
      });
    });
  }, n4.prototype.createDistinctChannelIfNotExist = function(t8) {
    return void 0 === t8 && (t8 = {}), r(this, void 0, void 0, function() {
      var e3;
      return s(this, function(n5) {
        return e3 = n(n({}, on2), t8), Jr(un2(e3)).throw(v.invalidParameters), e3 && (e3.isDistinct = true), [2, this.createChannel(e3)];
      });
    });
  }, n4.prototype.createChannelWithUserIds = function(t8, n5, a5, r4, i4, o3) {
    return void 0 === n5 && (n5 = false), void 0 === i4 && (i4 = ""), void 0 === o3 && (o3 = ""), r(this, void 0, void 0, function() {
      var e3;
      return s(this, function(s6) {
        return e3 = n(n({}, on2), { invitedUserIds: t8, isDistinct: n5, name: a5, data: i4, customType: o3 }), "string" == typeof r4 ? e3.coverUrl = r4 : e3.coverImage = r4, [2, this.createChannel(e3)];
      });
    });
  }, n4.prototype.markAsReadAll = function() {
    return r(this, void 0, void 0, function() {
      return s(this, function(e3) {
        return this._manager.markAsReadAll(), [2];
      });
    });
  }, n4.prototype.markAsReadWithChannelUrls = function(t8) {
    return r(this, void 0, void 0, function() {
      return s(this, function(e3) {
        return Jr(N("string", t8)).throw(v.invalidParameters), this._manager.markAsReadWithChannelUrls(t8), [2];
      });
    });
  }, n4.prototype.markAsDelivered = function(t8) {
    return r(this, void 0, void 0, function() {
      return s(this, function(e3) {
        switch (e3.label) {
          case 0:
            return Jr(w("string", t8)).throw(v.invalidParameters), [4, this.getChannel(t8)];
          case 1:
            return [4, e3.sent().markAsDelivered()];
          case 2:
            return e3.sent(), [2];
        }
      });
    });
  }, n4;
}(Zs);

// node_modules/@sendbird/chat/poll.js
var b3 = function(a5) {
  function b6() {
    var t7 = null !== a5 && a5.apply(this, arguments) || this;
    return t7.name = "poll", t7;
  }
  return t(b6, a5), b6.prototype.init = function(t7, r4) {
    var n4 = r4.sdkState, o3 = r4.dispatcher, i4 = r4.sessionManager, s6 = r4.requestQueue, l3 = r4.logger, u4 = r4.onlineDetector, c4 = r4.cacheContext;
    a5.prototype.init.call(this, t7, { sdkState: n4, dispatcher: o3, sessionManager: i4, requestQueue: s6, logger: l3, onlineDetector: u4, cacheContext: c4 }), this._manager = new Do(t7, { sdkState: n4, dispatcher: o3, sessionManager: i4, requestQueue: s6, logger: l3, onlineDetector: u4, cacheContext: c4 });
  }, b6.prototype.create = function(t7) {
    return r(this, void 0, void 0, function() {
      var e3;
      return s(this, function(r4) {
        return e3 = n(n({}, To), t7), Jr(No(e3)).throw(v.invalidParameters), [2, this._manager.create(e3)];
      });
    });
  }, b6.prototype.get = function(t7) {
    return r(this, void 0, void 0, function() {
      var e3;
      return s(this, function(r4) {
        return e3 = n(n({}, Io), t7), Jr(ko(e3)).throw(v.invalidParameters), [2, this._manager.get(e3)];
      });
    });
  }, b6.prototype.getOption = function(t7) {
    return r(this, void 0, void 0, function() {
      var e3;
      return s(this, function(r4) {
        return e3 = n(n({}, Co), t7), Jr(Ao(e3)).throw(v.invalidParameters), [2, this._manager.getOption(e3)];
      });
    });
  }, b6.prototype.buildPollFromSerializedData = function(t7) {
    return this._manager.buildPollFromSerializedData(t7);
  }, b6;
}(Zs);

// node_modules/@sendbird/chat/lib/__bundle-e56a2f57.js
var n2 = function(t7) {
  return ["-lastMessageUpdatedAt", "-createdAt", "syncIndex"];
};
var r2 = function(e3) {
  function n4() {
    return null !== e3 && e3.apply(this, arguments) || this;
  }
  return t(n4, e3), n4;
}(ie);

// node_modules/@sendbird/chat/index.js
var vt2 = function(e3) {
  this.key = e3.key, this.url = e3.url;
};
var gt2 = function(e3) {
  this.id = e3.id, this.name = e3.name, this.url = e3.url, this.emojis = e3.emojis ? e3.emojis.map(function(e4) {
    return new vt2(e4);
  }) : [];
};
var mt2 = function(e3) {
  this.emojiHash = e3.emoji_hash || "", this.emojiCategories = e3.emoji_categories ? e3.emoji_categories.map(function(e4) {
    return new gt2(e4);
  }) : [];
};
var bt2 = { profileImage: void 0, profileUrl: void 0, nickname: void 0 };
var _t2 = function(e3) {
  return function(t7, n4) {
    return r(void 0, void 0, void 0, function() {
      var r4, s6, o3, c4;
      return s(this, function(d5) {
        switch (d5.label) {
          case 0:
            switch (t7) {
              case 1:
              case 2:
              case 3:
              case 4:
                return [3, 1];
              case 5:
                return [3, 2];
              case 6:
                return [3, 4];
            }
            return [3, 11];
          case 1:
            return n4(), [3, 12];
          case 2:
            return [4, e3.store.clear()];
          case 3:
            return d5.sent(), n4(), [3, 12];
          case 4:
            return d5.trys.push([4, 9, , 10]), r4 = /* @__PURE__ */ function(e4) {
              return { v2: function() {
                return r(void 0, void 0, void 0, function() {
                  return s(this, function(t8) {
                    switch (t8.label) {
                      case 0:
                        return [4, e4.commitSchema([{ collectionName: Kr, keyName: jr, index: [L2(E.LATEST_LAST_MESSAGE), L2(E.CHRONOLOGICAL), L2(E.CHANNEL_NAME_ALPHABETICAL)] }, { collectionName: Gr, keyName: Vr2, index: [ks(Ns.CHANNEL_LATEST), ks(Ns.NEWEST_CHILD_MESSAGE)] }, { collectionName: qs2, keyName: zs, index: [ks(Ns.CHANNEL_LATEST), ks(Ns.NEWEST_CHILD_MESSAGE)] }, { collectionName: Jr2, keyName: Xr2 }])];
                      case 1:
                        return [2, t8.sent()];
                    }
                  });
                });
              }, v3: function() {
                return r(void 0, void 0, void 0, function() {
                  return s(this, function(t8) {
                    switch (t8.label) {
                      case 0:
                        return [4, e4.commitSchema([{ collectionName: $r, keyName: ei, index: [n2("latest_last_message")] }])];
                      case 1:
                        return [2, t8.sent()];
                    }
                  });
                });
              }, v4: function() {
                return r(void 0, void 0, void 0, function() {
                  return s(this, function(t8) {
                    switch (t8.label) {
                      case 0:
                        return [4, e4.commitSchema([{ collectionName: Wr, keyName: Yr2, index: [Rs()] }])];
                      case 1:
                        return [2, t8.sent()];
                    }
                  });
                });
              } };
            }(e3), s6 = r4.v2, o3 = r4.v3, c4 = r4.v4, [4, s6()];
          case 5:
            return d5.sent(), [4, o3()];
          case 6:
            return d5.sent(), [4, c4()];
          case 7:
            return d5.sent(), [4, e3.collection(Gr).removeIf({ where: { channelType: q.OPEN } })];
          case 8:
          case 9:
            return d5.sent(), [3, 10];
          case 10:
            return n4(), [3, 12];
          case 11:
            n4(), d5.label = 12;
          case 12:
            return [2];
        }
      });
    });
  };
};
var yt2 = function() {
  return "undefined" != typeof document ? document.visibilityState : "visible";
};
var wt2 = function(e3) {
  function t7(t8) {
    var n4 = t8.getVisibilityState, r4 = void 0 === n4 ? yt2 : n4, i4 = t8.initialState, s6 = void 0 === i4 ? "visible" : i4, o3 = t8.isEnabled, a5 = void 0 === o3 || o3, u4 = t8.pauseCheckDelay, c4 = void 0 === u4 ? 3e4 : u4, d5 = e3.call(this) || this;
    return d5._pauseCheckDelay = 3e4, d5._currentState = "visible", d5._getVisibilityState = r4, d5._pauseCheckDelay = c4, d5._currentState = s6, d5._isEnabled = a5, d5._boundToggleState = d5._toggleState.bind(d5), d5;
  }
  return t(t7, e3), Object.defineProperty(t7.prototype, "currentState", { get: function() {
    return this._currentState;
  }, enumerable: false, configurable: true }), Object.defineProperty(t7.prototype, "isAvailable", { get: function() {
    return "undefined" != typeof window && !!window.addEventListener && !!window.removeEventListener;
  }, enumerable: false, configurable: true }), t7.prototype._toggleState = function() {
    var e4 = this, t8 = this._getVisibilityState();
    "hidden" !== t8 ? "hidden" === this._currentState && (this._pauseDelayTimer && (clearTimeout(this._pauseDelayTimer), this._pauseDelayTimer = void 0), this.dispatch("resume")) : "hidden" !== this._currentState && (this._pauseDelayTimer = setTimeout(function() {
      e4._pauseDelayTimer = void 0, e4.dispatch("pause");
    }, this._pauseCheckDelay)), this._currentState = t8;
  }, t7.prototype.start = function() {
    this._isEnabled && this.isAvailable && (this._boundToggleState = this._toggleState.bind(this), window.addEventListener("visibilitychange", this._boundToggleState, { capture: true }));
  }, t7.prototype.stop = function() {
    this._isEnabled && this.isAvailable && this._boundToggleState && window.removeEventListener("visibilitychange", this._boundToggleState, { capture: true });
  }, t7;
}(te);
var kt2 = function() {
  function e3(e4) {
    var t7 = e4.logger, n4 = e4.connectionDelegate, r4 = void 0 === n4 ? null : n4, i4 = this;
    this._onlineWorker = function() {
      var e5;
      return null === (e5 = i4.connectionDelegate) || void 0 === e5 ? void 0 : e5.reconnect();
    }, this._offlineWorker = function() {
      var e5;
      return null === (e5 = i4.connectionDelegate) || void 0 === e5 ? void 0 : e5.disconnect();
    }, this.unsubscribes = [], this._onlineListener = function(e5) {
      if (i4.isAvailableOnWeb) return window.addEventListener("online", e5), function() {
        return window.removeEventListener("online", e5, false);
      };
    }, this._offlineListener = function(e5) {
      if (i4.isAvailableOnWeb) return window.addEventListener("offline", e5), function() {
        return window.removeEventListener("offline", e5, false);
      };
    }, this.logger = t7, r4 && (this.connectionDelegate = r4);
  }
  return Object.defineProperty(e3.prototype, "isAvailableOnWeb", { get: function() {
    return "undefined" != typeof window && !!window.addEventListener && "ononline" in window && "onoffline" in window && "undefined" != typeof navigator && void 0 !== navigator.onLine;
  }, enumerable: false, configurable: true }), e3.prototype.setOnlineListener = function(e4) {
    Boolean(e4) && "function" == typeof e4 && (this._onlineListener = e4);
  }, e3.prototype.setOfflineListener = function(e4) {
    Boolean(e4) && "function" == typeof e4 && (this._offlineListener = e4);
  }, e3.prototype.start = function() {
    this.unsubscribes = [this._onlineListener(this._onlineWorker), this._offlineListener(this._offlineWorker)];
  }, e3.prototype.stop = function() {
    var e4 = this;
    this.unsubscribes.forEach(function(t7) {
      try {
        null == t7 || t7();
      } catch (t8) {
        e4.logger.warn(t8.message);
      }
    }), this.unsubscribes = [];
  }, e3.prototype.isOnline = function() {
    return r(this, void 0, void 0, function() {
      return s(this, function(e4) {
        return this.isAvailableOnWeb ? [2, navigator.onLine] : [2, new Promise(function(e5) {
          fetch("https://www.google.com", { method: oe.GET, mode: "no-cors" }).then(function() {
            return e5(true);
          }).catch(function() {
            return e5(false);
          });
        })];
      });
    });
  }, e3;
}();
var St2 = function(e3) {
  function t7(t8) {
    var n4 = t8.userId, r4 = t8.nickname, i4 = t8.profileUrl, s6 = t8.profileImage, o3 = t8.preferredLanguages, a5 = e3.call(this) || this;
    return a5.method = oe.PUT, a5.path = "".concat(ce, "/").concat(encodeURIComponent(n4)), a5.params = re(se({ nickname: r4, profile_url: i4, profile_file: s6, preferred_languages: o3 })), a5;
  }
  return t(t7, e3), t7;
}(xe);
var It2 = function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this;
    return r4.user = new es(t8, n({}, n4)), r4;
  }
  return t(t7, e3), t7;
}(Ue);
var Ct2 = function(e3) {
  function t7(t8) {
    var n4 = t8.userId, r4 = t8.token, i4 = t8.deviceOS, s6 = t8.deviceManufacturer, o3 = t8.systemPushEnabled, a5 = e3.call(this) || this;
    return a5.method = oe.POST, a5.path = "".concat(ce, "/").concat(encodeURIComponent(n4), "/push/apns"), a5.params = re({ apns_device_token: r4, always_push: true, device_os: i4, device_manufacturer: s6, system_push_enabled: o3 }), a5;
  }
  return t(t7, e3), t7;
}(xe);
!function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this;
    return r4.token = n4.token, r4.type = n4.type ? f[n4.type.toLowerCase()] : f.UNKNOWN, r4.user = new es(t8, n4.user), r4;
  }
  t(t7, e3);
}(Ue);
var Et2 = function(e3) {
  function t7(t8) {
    var n4 = t8.userId, r4 = t8.token, i4 = t8.deviceOS, s6 = t8.deviceManufacturer, o3 = t8.systemPushEnabled, a5 = e3.call(this) || this;
    return a5.method = oe.POST, a5.path = "".concat(ce, "/").concat(encodeURIComponent(n4), "/push/gcm"), a5.params = re({ gcm_reg_token: r4, always_push: true, device_os: i4, device_manufacturer: s6, system_push_enabled: o3 }), a5;
  }
  return t(t7, e3), t7;
}(xe);
!function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this;
    return r4.token = n4.token, r4.type = n4.type ? f[n4.type.toLowerCase()] : f.UNKNOWN, r4.user = new es(t8, n4.user), r4;
  }
  t(t7, e3);
}(Ue);
var Tt2 = function(e3) {
  function t7(t8) {
    var n4 = t8.userId, r4 = t8.token, i4 = e3.call(this) || this;
    return i4.method = oe.DELETE, i4.path = "".concat(ce, "/").concat(encodeURIComponent(n4), "/push/apns/").concat(encodeURIComponent(r4)), i4;
  }
  return t(t7, e3), t7;
}(xe);
!function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this;
    return r4.token = n4.token, r4.user = new es(t8, n4.user), r4.lastDeletedAt = n4.device_token_last_deleted_at, r4;
  }
  t(t7, e3);
}(Ue);
var Pt2 = function(e3) {
  function t7(t8) {
    var n4 = t8.userId, r4 = t8.token, i4 = e3.call(this) || this;
    return i4.method = oe.DELETE, i4.path = "".concat(ce, "/").concat(encodeURIComponent(n4), "/push/gcm/").concat(encodeURIComponent(r4)), i4;
  }
  return t(t7, e3), t7;
}(xe);
!function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this;
    return r4.token = n4.token, r4.user = new es(t8, n4.user), r4.lastDeletedAt = n4.device_token_last_deleted_at, r4;
  }
  t(t7, e3);
}(Ue);
var Dt2 = function(e3) {
  function t7(t8) {
    var n4 = t8.userId, r4 = e3.call(this) || this;
    return r4.method = oe.DELETE, r4.path = "".concat(ce, "/").concat(encodeURIComponent(n4), "/push/apns"), r4;
  }
  return t(t7, e3), t7;
}(xe);
!function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this;
    return r4.type = n4.type ? f[n4.type.toLowerCase()] : f.UNKNOWN, r4.user = new es(t8, n4.user), r4.lastDeletedAt = n4.device_token_last_deleted_at, r4;
  }
  t(t7, e3);
}(Ue);
var Ut2 = function(e3) {
  function t7(t8) {
    var n4 = t8.userId, r4 = e3.call(this) || this;
    return r4.method = oe.DELETE, r4.path = "".concat(ce, "/").concat(encodeURIComponent(n4), "/push/gcm"), r4;
  }
  return t(t7, e3), t7;
}(xe);
!function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this;
    return r4.type = n4.type ? f[n4.type.toLowerCase()] : f.UNKNOWN, r4.user = new es(t8, n4.user), r4.lastDeletedAt = n4.device_token_last_deleted_at, r4;
  }
  t(t7, e3);
}(Ue);
var Ot2 = function(e3) {
  function t7(t8) {
    var n4 = t8.userId, r4 = t8.type, i4 = t8.token, s6 = t8.ts, o3 = e3.call(this) || this;
    return o3.method = oe.GET, o3.path = "".concat(ce, "/").concat(encodeURIComponent(n4), "/push/").concat(encodeURIComponent(r4), "/device_tokens"), o3.params = { created_ts: s6, token: i4 }, o3;
  }
  return t(t7, e3), t7;
}(xe);
var At2 = function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this;
    return r4.pushTokens = { type: n4.type ? f[n4.type.toLowerCase()] : f.UNKNOWN, deviceTokens: n4.device_tokens, hasMore: n4.has_more, token: n4.token }, r4;
  }
  return t(t7, e3), t7;
}(Ue);
var Nt2 = function(e3) {
  function t7(t8) {
    var n4 = t8.userId, r4 = e3.call(this) || this;
    return r4.method = oe.GET, r4.path = "".concat(ce, "/").concat(encodeURIComponent(n4), "/channel_invitation_preference"), r4;
  }
  return t(t7, e3), t7;
}(xe);
var Mt2 = function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this;
    return r4.autoAccept = n4.auto_accept, r4;
  }
  return t(t7, e3), t7;
}(Ue);
var Lt2 = function(e3) {
  function t7(t8) {
    var n4 = t8.userId, r4 = t8.willAutoAccept, i4 = e3.call(this) || this;
    return i4.method = oe.PUT, i4.path = "".concat(ce, "/").concat(encodeURIComponent(n4), "/channel_invitation_preference"), i4.params = { auto_accept: r4 }, i4;
  }
  return t(t7, e3), t7;
}(xe);
var Rt2 = function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this;
    return r4.autoAccept = n4.auto_accept, r4;
  }
  return t(t7, e3), t7;
}(Ue);
var zt2 = function(e3) {
  function t7(t8) {
    var n4 = t8.userId, r4 = e3.call(this) || this;
    return r4.method = oe.GET, r4.path = "".concat(ce, "/").concat(encodeURIComponent(n4), "/push_preference"), r4;
  }
  return t(t7, e3), t7;
}(xe);
var Qt3 = function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this;
    return r4.preference = { doNotDisturbOn: n4.do_not_disturb, startHour: n4.start_hour, startMin: n4.start_min, endHour: n4.end_hour, endMin: n4.end_min, timezone: n4.timezone }, r4;
  }
  return t(t7, e3), t7;
}(Ue);
var jt2 = function(e3) {
  function t7(t8) {
    var n4 = t8.userId, r4 = t8.doNotDisturbOn, i4 = t8.startHour, s6 = t8.startMin, o3 = t8.endHour, a5 = t8.endMin, u4 = t8.timezone, c4 = e3.call(this) || this;
    return c4.method = oe.PUT, c4.path = "".concat(ce, "/").concat(encodeURIComponent(n4), "/push_preference"), c4.params = { do_not_disturb: r4, start_hour: i4, start_min: s6, end_hour: o3, end_min: a5, timezone: u4 }, c4;
  }
  return t(t7, e3), t7;
}(xe);
var Ft2 = function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this;
    return r4.preference = { doNotDisturbOn: n4.do_not_disturb, startHour: n4.start_hour, startMin: n4.start_min, endHour: n4.end_hour, endMin: n4.end_min, timezone: n4.timezone }, r4;
  }
  return t(t7, e3), t7;
}(Ue);
var qt2 = function(e3) {
  function t7(t8) {
    var n4 = t8.userId, r4 = e3.call(this) || this;
    return r4.method = oe.GET, r4.path = "".concat(ce, "/").concat(encodeURIComponent(n4), "/push_preference"), r4;
  }
  return t(t7, e3), t7;
}(xe);
var Ht2 = function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this;
    return r4.snoozePeriod = { isSnoozeOn: n4.snooze_enabled }, "number" == typeof n4.snooze_start_ts && (r4.snoozePeriod.startTs = n4.snooze_start_ts), "number" == typeof n4.snooze_end_ts && (r4.snoozePeriod.endTs = n4.snooze_end_ts), r4;
  }
  return t(t7, e3), t7;
}(Ue);
var xt2 = function(e3) {
  function t7(t8) {
    var n4 = t8.userId, r4 = t8.snoozeOn, i4 = t8.startTs, s6 = t8.endTs, o3 = e3.call(this) || this;
    return o3.method = oe.PUT, o3.path = "".concat(ce, "/").concat(encodeURIComponent(n4), "/push_preference"), o3.params = { snooze_enabled: r4, snooze_start_ts: i4, snooze_end_ts: s6 }, o3;
  }
  return t(t7, e3), t7;
}(xe);
var Kt3 = function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this;
    return r4.snoozePeriod = { isSnoozeOn: n4.snooze_enabled }, "number" == typeof n4.snooze_start_ts && (r4.snoozePeriod.startTs = n4.snooze_start_ts), "number" == typeof n4.snooze_end_ts && (r4.snoozePeriod.endTs = n4.snooze_end_ts), r4;
  }
  return t(t7, e3), t7;
}(Ue);
var Gt2 = function(e3) {
  function t7(t8) {
    var n4 = t8.userId, r4 = t8.blockedUserId, i4 = e3.call(this) || this;
    return i4.method = oe.POST, i4.path = "".concat(ce, "/").concat(encodeURIComponent(n4), "/block"), i4.params = { target_id: r4 }, i4;
  }
  return t(t7, e3), t7;
}(xe);
!function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this;
    return r4.user = new es(t8, n4), r4;
  }
  t(t7, e3);
}(Ue);
var Wt3 = function(e3) {
  function t7(t8) {
    var n4 = t8.userId, r4 = t8.unblockedUserId, i4 = e3.call(this) || this;
    return i4.method = oe.DELETE, i4.path = "".concat(ce, "/").concat(encodeURIComponent(n4), "/block/").concat(encodeURIComponent(r4)), i4;
  }
  return t(t7, e3), t7;
}(xe);
!function(e3) {
  function t7() {
    return null !== e3 && e3.apply(this, arguments) || this;
  }
  t(t7, e3);
}(Ue);
var Vt2 = function(e3) {
  function t7(t8) {
    var n4 = t8.userId, r4 = e3.call(this) || this;
    return r4.method = oe.GET, r4.path = "".concat(ce, "/").concat(encodeURIComponent(n4), "/push_preference"), r4;
  }
  return t(t7, e3), t7;
}(xe);
var Bt2 = function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this;
    return r4.pushTriggerOption = n4.push_trigger_option, r4;
  }
  return t(t7, e3), t7;
}(Ue);
var Jt3 = function(e3) {
  function t7(t8) {
    var n4 = t8.userId, r4 = t8.pushTriggerOption, i4 = e3.call(this) || this;
    return i4.method = oe.PUT, i4.path = "".concat(ce, "/").concat(encodeURIComponent(n4), "/push_preference"), i4.params = { push_trigger_option: r4 }, i4;
  }
  return t(t7, e3), t7;
}(xe);
var Yt3 = function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this;
    return r4.pushTriggerOption = n4.push_trigger_option, r4;
  }
  return t(t7, e3), t7;
}(Ue);
var Zt3 = function(e3) {
  function t7(t8) {
    var n4 = t8.userId, r4 = e3.call(this) || this;
    return r4.method = oe.GET, r4.path = "".concat(ce, "/").concat(encodeURIComponent(n4), "/push/template"), r4;
  }
  return t(t7, e3), t7;
}(xe);
var $t3 = function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this;
    return r4.name = n4.name, r4;
  }
  return t(t7, e3), t7;
}(Ue);
var Xt3 = function(e3) {
  function t7(t8) {
    var n4 = t8.userId, r4 = t8.templateName, i4 = e3.call(this) || this;
    return i4.method = oe.PUT, i4.path = "".concat(ce, "/").concat(encodeURIComponent(n4), "/push/template"), i4.params = { name: r4 }, i4;
  }
  return t(t7, e3), t7;
}(xe);
var en3 = function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this;
    return r4.name = n4.name, r4;
  }
  return t(t7, e3), t7;
}(Ue);
var tn3 = function(e3) {
  function t7(t8) {
    var n4 = t8.userId, r4 = t8.token, i4 = e3.call(this) || this;
    return i4.method = oe.GET, i4.path = "".concat(ce, "/").concat(encodeURIComponent(n4), "/friends/changelogs"), i4.params = { token: r4 }, i4;
  }
  return t(t7, e3), t7;
}(xe);
var nn3 = function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this;
    return r4.changelogs = { addedUsers: n4.added.map(function(e4) {
      return new es(t8, e4);
    }), updatedUsers: n4.updated.map(function(e4) {
      return new es(t8, e4);
    }), deletedUserIds: n4.deleted, hasMore: n4.has_more, token: n4.next }, r4;
  }
  return t(t7, e3), t7;
}(Ue);
var rn3 = function(e3) {
  function t7(t8) {
    var n4 = t8.userId, r4 = t8.discoveries, i4 = e3.call(this) || this;
    return i4.method = oe.PUT, i4.path = "".concat(ce, "/").concat(encodeURIComponent(n4), "/friend_discoveries"), i4.params = { friend_discoveries: r4.map(function(e4) {
      return { friend_discovery_key: e4.friendDiscoveryKey, friend_name: e4.friendName };
    }) }, i4;
  }
  return t(t7, e3), t7;
}(xe);
var sn3 = function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this;
    return r4.friendDiscoveryRequestId = n4.friend_discovery_request_id, r4;
  }
  return t(t7, e3), t7;
}(Ue);
var on3 = function(e3) {
  function t7(t8) {
    var n4 = t8.userId, r4 = t8.discoveryKeys, i4 = e3.call(this) || this;
    return i4.method = oe.DELETE, i4.path = "".concat(ce, "/").concat(encodeURIComponent(n4), "/friend_discoveries"), i4.params = { friend_discovery_keys: r4 }, i4;
  }
  return t(t7, e3), t7;
}(xe);
!function(e3) {
  function t7() {
    return null !== e3 && e3.apply(this, arguments) || this;
  }
  t(t7, e3);
}(Ue);
var an3 = function(e3) {
  function t7(t8) {
    var n4 = t8.userId, r4 = t8.userIds, i4 = e3.call(this) || this;
    return i4.method = oe.POST, i4.path = "".concat(ce, "/").concat(encodeURIComponent(n4), "/friends"), i4.params = { user_ids: r4 }, i4;
  }
  return t(t7, e3), t7;
}(xe);
var un3 = function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this;
    return r4.users = n4.users.map(function(e4) {
      return new es(t8, e4);
    }), r4;
  }
  return t(t7, e3), t7;
}(Ue);
var cn3 = function(e3) {
  function t7(t8) {
    var n4 = t8.userId, r4 = t8.userIds, i4 = e3.call(this) || this;
    return i4.method = oe.DELETE, i4.path = "".concat(ce, "/").concat(encodeURIComponent(n4), "/friends"), i4.params = { user_ids: r4 }, i4;
  }
  return t(t7, e3), t7;
}(xe);
!function(e3) {
  function t7() {
    return null !== e3 && e3.apply(this, arguments) || this;
  }
  t(t7, e3);
}(Ue);
var dn3 = function(e3) {
  function t7(t8) {
    var n4 = t8.userId, r4 = e3.call(this) || this;
    return r4.method = oe.GET, r4.path = "".concat(ce, "/").concat(n4, "/allow_friend_discovery"), r4.params = {}, r4;
  }
  return t(t7, e3), t7;
}(xe);
var ln3 = function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this;
    return r4.allowFriendDiscovery = n4.allow_friend_discovery, r4;
  }
  return t(t7, e3), t7;
}(Ue);
var hn3 = function(e3) {
  function t7(t8) {
    var n4 = t8.userId, r4 = t8.allowFriendDiscovery, i4 = e3.call(this) || this;
    return i4.method = oe.PUT, i4.path = "".concat(ce, "/").concat(n4, "/allow_friend_discovery"), i4.params = { allow_friend_discovery: r4 }, i4;
  }
  return t(t7, e3), t7;
}(xe);
!function(e3) {
  function t7() {
    return null !== e3 && e3.apply(this, arguments) || this;
  }
  t(t7, e3);
}(Ue);
var fn3;
var pn3 = function(e3) {
  function t7() {
    var t8 = e3.call(this) || this;
    return t8.method = oe.GET, t8.path = ve, t8;
  }
  return t(t7, e3), t7;
}(xe);
var vn3 = function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this;
    return r4.emojiContainer = new mt2(n4), r4;
  }
  return t(t7, e3), t7;
}(Ue);
var gn3 = function(e3) {
  function t7(t8) {
    var n4 = t8.categoryId, r4 = e3.call(this) || this;
    return r4.method = oe.GET, r4.path = "".concat(ve, "/").concat(n4), r4;
  }
  return t(t7, e3), t7;
}(xe);
var mn3 = function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this;
    return r4.emojiCategory = new gt2(n4), r4;
  }
  return t(t7, e3), t7;
}(Ue);
var bn3 = function(e3) {
  function t7(t8) {
    var n4 = t8.key, r4 = e3.call(this) || this;
    return r4.method = oe.GET, r4.path = "".concat(ge, "/").concat(n4), r4;
  }
  return t(t7, e3), t7;
}(xe);
var _n3 = function(e3) {
  function t7(t8, n4) {
    var r4 = e3.call(this, t8, n4) || this;
    return r4.emoji = new vt2(n4), r4;
  }
  return t(t7, e3), t7;
}(Ue);
var yn3 = function(e3) {
  function t7() {
    var t8 = e3.call(this) || this;
    return t8.method = oe.GET, t8.path = "".concat(ye), t8;
  }
  return t(t7, e3), t7;
}(xe);
var wn3 = function(e3) {
  function t7(t8, n4) {
    var r4, i4 = this, s6 = null != n4 ? n4 : {};
    return (i4 = e3.call(this, t8, n4) || this).uikitConfiguration = { string: JSON.stringify(s6), json: s6 }, i4.updatedAt = null !== (r4 = null == n4 ? void 0 : n4.updated_at) && void 0 !== r4 ? r4 : 0, i4;
  }
  return t(t7, e3), t7;
}(Ue);
!function(e3) {
  e3.DELIVERED = "DELIVERED", e3.CLICKED = "CLICKED";
}(fn3 || (fn3 = {}));
var kn3;
var Sn3 = function(e3) {
  function t7(t8) {
    var n4 = t8.deviceToken, r4 = t8.pushTrackingId, i4 = t8.messageId, s6 = t8.allowedPushNotification, o3 = t8.channelKey, a5 = t8.templateKey, u4 = t8.eventType, c4 = t8.notificationEventDeadline, d5 = e3.call(this) || this;
    return d5.method = oe.POST, d5.path = Ce, d5.params = re({ device_token: n4, push_tracking_id: r4, message_id: i4, allowed_push_notification: s6, channel_key: o3, template_key: a5, event_type: u4, notification_event_deadline: c4 }), d5;
  }
  return t(t7, e3), t7;
}(xe);
var In3 = function() {
  function n4(e3, t7, n5) {
    var r4 = this;
    this._storeInitialized = false, this._iid = e3, this.options = t7;
    var s6 = Ws.of(e3), o3 = s6.sdkState, u4 = s6.cacheContext, c4 = s6.dispatcher, d5 = s6.sessionManager, l3 = s6.requestQueue, h4 = s6.logger, f4 = s6.userEventHandlers, p4 = s6.appStateToggleEnabled;
    this._onlineDetector = new kt2({ logger: h4, connectionDelegate: { reconnect: function() {
      return r(r4, void 0, void 0, function() {
        var t8, n6, r5, i4, s7, o4;
        return s(this, function(a5) {
          switch (a5.label) {
            case 0:
              if (t8 = Ws.of(e3), n6 = t8.sdkState, r5 = t8.connectionManager, (i4 = t8.sessionManager).session.hasSession) return [3, 5];
              a5.label = 1;
            case 1:
              return a5.trys.push([1, 3, , 4]), [4, r5.connect(i4.session.authToken)];
            case 2:
              return a5.sent(), [3, 4];
            case 3:
              if (s7 = a5.sent(), g(s7)) throw s7;
              return h4.debug("connect failed by reconnect event = ", s7), [3, 4];
            case 4:
              return [3, 9];
            case 5:
              if ("foreground" !== n6.appState) return [3, 9];
              a5.label = 6;
            case 6:
              return a5.trys.push([6, 8, , 9]), [4, r5.resetAndReconnect()];
            case 7:
              return a5.sent(), [3, 9];
            case 8:
              if (o4 = a5.sent(), g(o4)) throw o4;
              return h4.debug("resetAndReconnect failed by reconnect event = ", o4), [3, 9];
            case 9:
              return c4.dispatch(new r2()), [2];
          }
        });
      });
    }, disconnect: function() {
      as(function() {
        return r(r4, void 0, void 0, function() {
          return s(this, function(t8) {
            switch (t8.label) {
              case 0:
                return [4, Ws.of(e3).connectionManager.disconnect()];
              case 1:
                return t8.sent(), [2];
            }
          });
        });
      });
    } } });
    var v5 = new S2(e3, { localCacheEnabled: u4.localCacheEnabled, enableAutoResend: u4.localCacheConfig.enableAutoResend, dispatcher: c4, sdkState: o3, logger: h4 });
    n5.forEach(function(t8) {
      t8.init(e3, { sdkState: o3, cacheContext: u4, dispatcher: c4, sessionManager: d5, requestQueue: l3, logger: h4, onlineDetector: r4._onlineDetector }), r4[t8.name] = t8;
    }), this._appStateChangeDetector = new wt2({ isEnabled: p4 }), this._appStateChangeDetector.on("resume", function() {
      h4.debug("the page resumes from freeze"), r4.setForegroundState();
    }).on("pause", function() {
      h4.debug("the page freezes"), r4.setBackgroundState();
    }), c4.on(function(t8) {
      var n6;
      if (t8 instanceof kr) {
        if (t8.stateType === Sr.CONNECTED) v5.processNonAutoResendRegisteredPendingMessages();
      } else if (t8 instanceof Fe) {
        if ("USEV" === t8.code) {
          var s7 = t8.as(T).event;
          if (s7.category === C2.FRIEND_DISCOVERED) {
            var c5 = N2.getDataAsFriendDiscoveredEvent(e3, s7).friendDiscoveries;
            os(function() {
              return r(r4, void 0, void 0, function() {
                return s(this, function(e4) {
                  return [2, f4.forEach(function(e5) {
                    e5.onFriendsDiscovered && e5.onFriendsDiscovered(c5);
                  })];
                });
              });
            });
          }
        }
      } else if (t8 instanceof Nr) {
        var d6 = Ws.of(r4._iid).subscribedUnreadMessageCount, l4 = false, p5 = t8.ts;
        "number" == typeof p5 && p5 > d6.ts && (d6.all !== t8.all && (l4 = true), d6.all = t8.all >= 0 ? t8.all : 0, t8.customTypes && Object.keys(t8.customTypes).forEach(function(e4) {
          d6.customTypes[e4] !== t8.customTypes[e4] && (l4 = true), d6.customTypes[e4] = t8.customTypes[e4];
        }), l4 = l4 && d6.ts > 0, d6.ts = p5), l4 && os(function() {
          return r(r4, void 0, void 0, function() {
            return s(this, function(e4) {
              return [2, f4.forEach(function(e5) {
                e5.onTotalUnreadMessageCountChanged && e5.onTotalUnreadMessageCountChanged({ groupChannelCount: d6.all, feedChannelCount: d6.feed, customTypeUnreadCount: d6.customTypes }), e5.onTotalUnreadMessageCountUpdated && e5.onTotalUnreadMessageCountUpdated(d6.all, d6.customTypes);
              })];
            });
          });
        });
      } else t8 instanceof ts ? (u4.preference.set(r4._getUserProfileCacheKey(o3.userId), ns.payloadify(t8.userProfile)), (null === (n6 = t8.userProfile.appInfo.notificationInfo) || void 0 === n6 ? void 0 : n6.isEnabled) && u4.preference.set(xr(r4.appId), { value: true })) : t8 instanceof Me && t8.error && t8.error.isSessionInvalidatedError && (h4.debug("session revoked."), r4._internalDisconnect(t8.error));
    });
  }
  return n4.init = function(e3) {
    var t7 = e3.appId, r4 = e3.appVersion, i4 = e3.modules, s6 = void 0 === i4 ? [] : i4, o3 = e3.options, a5 = void 0 === o3 ? new R() : o3, u4 = e3.debugMode, c4 = void 0 !== u4 && u4, d5 = e3.customApiHost, l3 = e3.customWebSocketHost, h4 = e3.newInstance, f4 = void 0 !== h4 && h4, p4 = e3.logLevel, v5 = e3.localCacheEnabled, g4 = void 0 !== v5 && v5, m5 = e3.localCacheConfig, b6 = void 0 === m5 ? new F() : m5, _2 = e3.localCacheEncryption, y6 = e3.useAsyncStorageStore, w4 = void 0 === y6 ? null : y6, k3 = e3.useMMKVStorageStore, S6 = void 0 === k3 ? null : k3, I5 = e3.appStateToggleEnabled, C3 = void 0 === I5 || I5;
    if (!kn3 || f4) {
      var E4 = "su-".concat($()), T4 = null != _2 ? _2 : { encrypt: function(e4) {
        return e4;
      }, decrypt: function(e4) {
        return e4;
      } }, P2 = new Cs();
      P2.level = null != p4 ? p4 : As.WARN;
      var D3 = new Is({ encryption: T4 });
      c4 || (Ye() ? S6 ? D3 = new Ss({ MMKV: S6, encryption: T4 }) : w4 && (D3 = new Ms({ AsyncStorage: w4, encryption: T4 }), P2.warn("AsyncStorage store is deprecated due to the small size limit. Please use MMKVStorage store instead.")) : D3 = new ws({ encryption: T4 })), new Ws(E4, { appId: t7, appVersion: r4, options: a5, apiHost: null != d5 ? d5 : "https://api-".concat(t7, ".sendbird.com"), websocketHost: null != l3 ? l3 : "wss://ws-".concat(t7, ".sendbird.com"), store: D3, encryption: T4, logger: P2, localCacheEnabled: g4, localCacheConfig: b6, debugMode: c4, appStateToggleEnabled: C3 });
      var U2 = [new da(), new b3()], O4 = new n4(E4, a5, c(c([], a(s6), false), a(U2), false));
      return kn3 || (kn3 = O4), O4;
    }
    return kn3;
  }, Object.defineProperty(n4, "instance", { get: function() {
    return kn3;
  }, enumerable: false, configurable: true }), Object.defineProperty(n4, "version", { get: function() {
    return l;
  }, enumerable: false, configurable: true }), Object.defineProperty(n4.prototype, "appId", { get: function() {
    return Ws.of(this._iid).sdkState.appId;
  }, enumerable: false, configurable: true }), Object.defineProperty(n4.prototype, "appInfo", { get: function() {
    var e3 = Ws.of(this._iid).appInfo;
    return null != e3 ? e3 : null;
  }, enumerable: false, configurable: true }), Object.defineProperty(n4.prototype, "appVersion", { get: function() {
    var e3;
    return null !== (e3 = Ws.of(this._iid).sdkState.appVersion) && void 0 !== e3 ? e3 : "";
  }, enumerable: false, configurable: true }), Object.defineProperty(n4.prototype, "debugMode", { get: function() {
    return !!Ws.of(this._iid).debugMode;
  }, enumerable: false, configurable: true }), Object.defineProperty(n4.prototype, "logLevel", { get: function() {
    return Ws.of(this._iid).logger.level;
  }, set: function(e3) {
    Ws.of(this._iid).logger.level = e3;
  }, enumerable: false, configurable: true }), Object.defineProperty(n4.prototype, "isCacheEnabled", { get: function() {
    return Ws.of(this._iid).cacheContext.localCacheEnabled;
  }, enumerable: false, configurable: true }), Object.defineProperty(n4.prototype, "localCacheConfig", { get: function() {
    var e3 = Ws.of(this._iid).cacheContext;
    return e3.localCacheEnabled ? e3.localCacheConfig : null;
  }, enumerable: false, configurable: true }), Object.defineProperty(n4.prototype, "ekey", { get: function() {
    return Ws.of(this._iid).sessionManager.ekey;
  }, enumerable: false, configurable: true }), Object.defineProperty(n4.prototype, "currentUser", { get: function() {
    var e3;
    return null !== (e3 = Ws.of(this._iid).sessionManager.currentUser) && void 0 !== e3 ? e3 : null;
  }, enumerable: false, configurable: true }), Object.defineProperty(n4.prototype, "connectionState", { get: function() {
    var e3 = Ws.of(this._iid).connectionManager;
    return e3.isConnected ? mr.OPEN : e3.isConnecting ? mr.CONNECTING : mr.CLOSED;
  }, enumerable: false, configurable: true }), Object.defineProperty(n4.prototype, "lastConnectedAt", { get: function() {
    var e3 = Ws.of(this._iid), t7 = e3.connectedAt;
    return e3.connectionManager.isConnected ? t7 : 0;
  }, enumerable: false, configurable: true }), Object.defineProperty(n4.prototype, "fcmPushToken", { get: function() {
    var e3;
    return null !== (e3 = this._fcmPushToken) && void 0 !== e3 ? e3 : null;
  }, enumerable: false, configurable: true }), Object.defineProperty(n4.prototype, "apnsPushToken", { get: function() {
    var e3;
    return null !== (e3 = this._apnsPushToken) && void 0 !== e3 ? e3 : null;
  }, enumerable: false, configurable: true }), n4.prototype._getNestDBVersion = function() {
    return 7;
  }, n4.prototype._getPreferenceCacheKey = function(e3) {
    return "sendbird@".concat(this.appId, "/").concat(e3, ".pref");
  }, n4.prototype._getUserProfileCacheKey = function(e3) {
    return "sendbird@".concat(this.appId, "/").concat(e3, ".profile");
  }, n4.prototype._internalDisconnect = function(e3) {
    return r(this, void 0, void 0, function() {
      var t7, n5, r4, i4;
      return s(this, function(s6) {
        switch (s6.label) {
          case 0:
            return t7 = Ws.of(this._iid), n5 = t7.connectionManager, r4 = t7.sdkState, i4 = t7.requestQueue, this._appStateChangeDetector.stop(), this._onlineDetector.stop(), i4.cancelAll(), [4, n5.logout(e3)];
          case 1:
            return s6.sent(), [4, this.clearCachedData()];
          case 2:
            return s6.sent(), r4.appState = "foreground", [2];
        }
      });
    });
  }, n4.prototype.getMemoryStoreForDebugging = function() {
    var e3 = Ws.of(this._iid), t7 = e3.debugMode, n5 = e3.cacheContext;
    if (t7) return n5.store instanceof Is ? n5.store : null;
    throw v.debugModeRequired;
  }, n4.prototype.addExtension = function(e3, t7) {
    var n5 = Ws.of(this._iid).sdkState;
    ["sb_uikit", "sb_syncmanager", "device-os-platform"].indexOf(e3) > -1 && n5.extensions && (n5.extensions[e3] = t7);
  }, n4.prototype.addSendbirdExtensions = function(e3, t7, n5) {
    var r4, i4, s6 = Ws.of(this._iid), o3 = s6.logger, a5 = s6.sdkState, u4 = new RegExp(Je);
    if (0 === e3.length) return o3.debug("sb.addSendbirdExtensions() has failed because the given sendbirdExtensions is empty."), false;
    if (e3.find(function(e4) {
      return !u4.test(e4.version);
    })) return o3.debug("sb.addSendbirdExtensions() has failed because the given version did not satisfy the SemVer specification."), false;
    if (n5) try {
      for (var c4 = o(Object.entries(n5)), d5 = c4.next(); !d5.done; d5 = c4.next()) {
        var l3 = a(d5.value, 2), h4 = l3[0], f4 = l3[1];
        if (/&|=/.test(h4) || /&|=/.test(f4)) return o3.debug("sb.addSendbirdExtensions() has failed because the given customData includes at least one invalid character: = or &."), false;
      }
    } catch (e4) {
      r4 = { error: e4 };
    } finally {
      try {
        d5 && !d5.done && (i4 = c4.return) && i4.call(c4);
      } finally {
        if (r4) throw r4.error;
      }
    }
    return a5.sendbirdRuntimeEnvironment = { sendbirdExtensions: e3, deviceOS: t7, customData: n5 }, true;
  }, n4.prototype.setOnlineListener = function(e3) {
    this._onlineDetector.setOnlineListener(e3);
  }, n4.prototype.setOfflineListener = function(e3) {
    this._onlineDetector.setOfflineListener(e3);
  }, n4.prototype._safeInitializeStore = function(e3) {
    return r(this, void 0, void 0, function() {
      var t7;
      return s(this, function(n5) {
        switch (n5.label) {
          case 0:
            t7 = Ws.of(this._iid).cacheContext, n5.label = 1;
          case 1:
            return n5.trys.push([1, 3, , 5]), [4, t7.store.init(e3)];
          case 2:
            return n5.sent(), this._storeInitialized = true, [3, 5];
          case 3:
            return n5.sent(), t7.replaceStore(new Is()), [4, this._safeInitializeStore(e3)];
          case 4:
            return n5.sent(), [3, 5];
          case 5:
            return [2];
        }
      });
    });
  }, n4.prototype.setLocaleForChatbot = function(e3) {
    var t7 = Ws.of(this._iid).sdkState, n5 = function(e4) {
      return e4.replace(/[^a-zA-Z-_.]/g, "");
    }(e3.trim());
    n5 && (t7.localeForChatbot = n5);
  }, n4.prototype.initializeCache = function(e3) {
    return r(this, void 0, void 0, function() {
      var t7, n5, r4, i4, s6, o3, u4, c4, d5;
      return s(this, function(a5) {
        switch (a5.label) {
          case 0:
            if (t7 = Ws.of(this._iid), n5 = t7.sdkState, r4 = t7.cacheContext, i4 = t7.dispatcher, s6 = t7.logger, n5.userId && n5.userId === e3) return [3, 11];
            if (o3 = "sendbird@".concat(n5.appId, "/").concat(e3, ".db"), !r4.localCacheEnabled) return [3, 9];
            a5.label = 1;
          case 1:
            return a5.trys.push([1, 6, , 8]), r4.nestdb && r4.nestdb.state !== Ts.CLOSED && r4.nestdb.name === o3 ? [3, 3] : (u4 = "sendbird@".concat(n5.appId, "/").concat(e3, ".db"), (c4 = r4.nestdb = new Us({ name: u4, version: this._getNestDBVersion(), store: r4.store, config: new Ui({ dbname: u4, itemSizeLimit: 61440 }) })).on("upgrade", _t2(c4)), c4.on("storeReplaced", function(e4) {
              r4.replaceStore(e4), r4.localCacheEnabled = false, c4.on("upgrade", _t2(c4));
            }), [4, c4.open()]);
          case 2:
            return a5.sent(), this._storeInitialized = true, i4.dispatch(new v2(this._iid, { userId: e3 })), [3, 5];
          case 3:
            return [4, this._safeInitializeStore(o3)];
          case 4:
            a5.sent(), a5.label = 5;
          case 5:
            return n5.userId = e3, [3, 8];
          case 6:
            return d5 = a5.sent(), s6.warn("Nest DB Open Failed. ", d5), r4.store instanceof Is || (r4.replaceStore(new Is()), r4.localCacheEnabled = false), [4, this._safeInitializeStore(o3)];
          case 7:
            throw a5.sent(), n5.userId = e3, v.databaseError;
          case 8:
            return [3, 11];
          case 9:
            return [4, this._safeInitializeStore(o3)];
          case 10:
            a5.sent(), n5.userId = e3, a5.label = 11;
          case 11:
            return [2];
        }
      });
    });
  }, n4.prototype.getCacheDataSize = function() {
    return r(this, void 0, void 0, function() {
      var e3;
      return s(this, function(t7) {
        switch (t7.label) {
          case 0:
            return (e3 = Ws.of(this._iid).cacheContext).localCacheEnabled && e3.nestdb ? [4, e3.nestdb.estimateUsage()] : [3, 2];
          case 1:
            return [2, t7.sent()];
          case 2:
            return [2, 0];
        }
      });
    });
  }, n4.prototype.clearCachedData = function() {
    return r(this, void 0, void 0, function() {
      var e3;
      return s(this, function(t7) {
        switch (t7.label) {
          case 0:
            return (e3 = Ws.of(this._iid).cacheContext).localCacheEnabled && e3.nestdb ? [4, e3.nestdb.clear()] : [3, 2];
          case 1:
            t7.sent(), t7.label = 2;
          case 2:
            return this._storeInitialized ? [4, e3.preference.clear()] : [3, 4];
          case 3:
            t7.sent(), t7.label = 4;
          case 4:
            return [2];
        }
      });
    });
  }, n4.prototype.clearCachedMessages = function(e3) {
    return r(this, void 0, void 0, function() {
      var t7, n5, r4 = this;
      return s(this, function(s6) {
        switch (s6.label) {
          case 0:
            return Jr(N("string", e3)).throw(v.invalidParameters), t7 = Qs.of(this._iid), n5 = Ks2.of(this._iid), t7 && n5 ? [4, Promise.all(e3.map(function(e4) {
              return r(r4, void 0, void 0, function() {
                return s(this, function(r5) {
                  switch (r5.label) {
                    case 0:
                      return [4, t7.removeMessagesOfChannel(e4)];
                    case 1:
                      return r5.sent(), [4, n5.removeMessagesOfChannel(e4)];
                    case 2:
                      return r5.sent(), [2];
                  }
                });
              });
            }))] : [3, 2];
          case 1:
            s6.sent(), s6.label = 2;
          case 2:
            return [2];
        }
      });
    });
  }, n4.prototype._setupPreference = function(e3) {
    return r(this, void 0, void 0, function() {
      var t7, n5, r4, i4, s6;
      return s(this, function(o3) {
        switch (o3.label) {
          case 0:
            return t7 = Ws.of(this._iid), n5 = t7.sdkState, r4 = t7.cacheContext, i4 = t7.statManager, [4, r4.preference.init(this._getPreferenceCacheKey(e3), this._getNestDBVersion())];
          case 1:
            return o3.sent(), [4, r4.preference.get(this._getUserProfileCacheKey(e3))];
          case 2:
            return (s6 = o3.sent()) && new ns(this._iid, s6).apply(), [4, i4.init("sendbird@".concat(n5.appId, "/").concat(e3, ".statlog"))];
          case 3:
            return o3.sent(), [2];
        }
      });
    });
  }, n4.prototype._ready = function(e3, n5, r4) {
    return void 0 === r4 && (r4 = {}), r(this, void 0, void 0, function() {
      var i4, s6, o3, u4, c4, d5;
      return s(this, function(a5) {
        switch (a5.label) {
          case 0:
            return Jr(w("string", e3) && w("string", n5, true)).throw(v.invalidParameters), i4 = Ws.of(this._iid), s6 = i4.sdkState, o3 = i4.cacheContext, u4 = i4.connectionManager, c4 = r4.errorForOtherUser, s6.userId && s6.userId !== e3 ? c4 ? [3, 2] : [4, u4.logout()] : [3, 3];
          case 1:
            return a5.sent(), [3, 3];
          case 2:
            throw c4;
          case 3:
            return a5.trys.push([3, 5, 6, 8]), [4, this.initializeCache(e3)];
          case 4:
            return a5.sent(), Ws.of(this._iid).dispatcher.dispatch(new D()), [3, 8];
          case 5:
            return a5.sent(), d5 = Ws.of(this._iid).logger, o3.localCacheEnabled = false, d5.warn("Cache initialization failed - cache is not available."), [3, 8];
          case 6:
            return [4, this._setupPreference(e3)];
          case 7:
            return a5.sent(), [7];
          case 8:
            return [2];
        }
      });
    });
  }, n4.prototype.authenticateFeed = function(e3, t7) {
    return r(this, void 0, void 0, function() {
      return s(this, function(n5) {
        switch (n5.label) {
          case 0:
            return [4, this.authenticate(e3, t7)];
          case 1:
            return [2, n5.sent()];
        }
      });
    });
  }, n4.prototype.authenticate = function(e3, t7) {
    var n5;
    return r(this, void 0, void 0, function() {
      var r4, i4, s6, o3;
      return s(this, function(a5) {
        switch (a5.label) {
          case 0:
            return r4 = Ws.of(this._iid), i4 = r4.sessionManager, s6 = r4.connectionManager, [4, this._ready(e3, t7, { errorForOtherUser: s6.isConnected ? v.alreadyConnectedAsAnotherUser : void 0 })];
          case 1:
            return a5.sent(), (null === (n5 = i4.session.services) || void 0 === n5 ? void 0 : n5.includes(P.CHAT)) ? [3, 3] : (t7 || i4.handler || (o3 = new vi(), this.setSessionHandler(o3)), [4, i4.authenticate(e3, t7)]);
          case 2:
            a5.sent(), a5.label = 3;
          case 3:
            return [2, this.currentUser];
        }
      });
    });
  }, n4.prototype.connect = function(e3, t7) {
    return r(this, void 0, void 0, function() {
      return s(this, function(n5) {
        switch (n5.label) {
          case 0:
            return [4, this._ready(e3, t7)];
          case 1:
            n5.sent(), n5.label = 2;
          case 2:
            return n5.trys.push([2, , 4, 5]), [4, Ws.of(this._iid).connectionManager.connect(t7)];
          case 3:
            return n5.sent(), [3, 5];
          case 4:
            return this._onlineDetector.start(), this._appStateChangeDetector.start(), [7];
          case 5:
            return [2, this.currentUser];
        }
      });
    });
  }, n4.prototype.reconnect = function() {
    var e3 = Ws.of(this._iid), t7 = e3.connectionManager, n5 = e3.sdkState, r4 = e3.sessionManager.session.hasSession;
    return r4 && (this._appStateChangeDetector.start(), this._onlineDetector.start(), t7.resetAndReconnect().then(function() {
      n5.appState = "foreground";
    }).catch(function() {
    })), r4;
  }, n4.prototype.disconnect = function() {
    return r(this, void 0, void 0, function() {
      return s(this, function(e3) {
        switch (e3.label) {
          case 0:
            return [4, this._internalDisconnect()];
          case 1:
            return e3.sent(), [2];
        }
      });
    });
  }, n4.prototype.disconnectWebSocket = function() {
    return r(this, void 0, void 0, function() {
      var e3, t7, n5;
      return s(this, function(r4) {
        switch (r4.label) {
          case 0:
            return e3 = Ws.of(this._iid), t7 = e3.connectionManager, n5 = e3.requestQueue, this._appStateChangeDetector.stop(), this._onlineDetector.stop(), n5.cancelAll(), [4, t7.disconnectWebSocket(true)];
          case 1:
            return r4.sent(), [2];
        }
      });
    });
  }, n4.prototype.setBackgroundState = function() {
    var e3 = Ws.of(this._iid), t7 = e3.connectionManager, n5 = e3.sdkState, r4 = e3.logger;
    "foreground" === n5.appState && (n5.appState = "background", r4.debug("going background state"), t7.background().catch(function(e4) {
      r4.debug("setBackgroundState error = ", e4);
    }));
  }, n4.prototype.setForegroundState = function() {
    var e3 = Ws.of(this._iid), t7 = e3.connectionManager, n5 = e3.sdkState, r4 = e3.dispatcher, i4 = e3.logger;
    "background" === n5.appState && (n5.appState = "foreground", i4.debug("going foreground state"), t7.resetAndReconnect().catch(function(e4) {
      i4.debug("setForgroundState error = ", e4);
    }), r4.dispatch(new r2()));
  }, n4.prototype.setSessionHandler = function(e3) {
    Jr(e3 instanceof vi).throw(v.invalidParameters), Ws.of(this._iid).sessionManager.handler = e3;
  }, n4.prototype.addUserEventHandler = function(e3, n5) {
    Jr(w("string", e3) && n5 instanceof yi).throw(v.invalidParameters), Ws.of(this._iid).userEventHandlers.set(e3, n5);
  }, n4.prototype.removeUserEventHandler = function(e3) {
    Ws.of(this._iid).userEventHandlers.delete(e3);
  }, n4.prototype.removeAllUserEventHandler = function() {
    Ws.of(this._iid).userEventHandlers.clear();
  }, n4.prototype.addConnectionHandler = function(e3, n5) {
    Jr(w("string", e3) && n5 instanceof mi).throw(v.invalidParameters), Ws.of(this._iid).connectionHandlers.set(e3, n5);
  }, n4.prototype.removeConnectionHandler = function(e3) {
    Ws.of(this._iid).connectionHandlers.delete(e3);
  }, n4.prototype.removeAllConnectionHandler = function() {
    Ws.of(this._iid).connectionHandlers.clear();
  }, n4.prototype.createApplicationUserListQuery = function(e3) {
    return void 0 === e3 && (e3 = {}), new bi(this._iid, e3);
  }, n4.prototype.createBlockedUserListQuery = function(e3) {
    return void 0 === e3 && (e3 = {}), new Ti(this._iid, e3);
  }, n4.prototype.createFriendListQuery = function(e3) {
    return void 0 === e3 && (e3 = {}), new Si(this._iid, e3);
  }, n4.prototype.createMessageSearchQuery = function(e3) {
    return new sa(this._iid, e3);
  }, n4.prototype.createPollListQuery = function(e3) {
    return new xo(this._iid, n({}, e3));
  }, n4.prototype.createPollVoterListQuery = function(e3) {
    return new Mo(this._iid, n({}, e3));
  }, n4.prototype.buildUserFromSerializedData = function(e3) {
    var t7 = Xr(e3);
    return new es(this._iid, es.payloadify(t7));
  }, n4.prototype.updateCurrentUserInfo = function(n5) {
    return void 0 === n5 && (n5 = {}), r(this, void 0, void 0, function() {
      var r4, i4, s6, o3, u4, c4, d5;
      return s(this, function(a5) {
        switch (a5.label) {
          case 0:
            return r4 = n(n({}, bt2), n5), Jr(function(n6) {
              return k(n6.profileImage, true) && w("string", n6.profileUrl, true) && w("string", n6.nickname, true);
            }(r4)).throw(v.invalidParameters), this.currentUser ? (i4 = Ws.of(this._iid), s6 = i4.sdkState, o3 = i4.requestQueue, u4 = new St2(n({ userId: s6.userId }, r4)), [4, o3.send(u4)]) : [3, 2];
          case 1:
            return c4 = a5.sent(), d5 = c4.as(It2).user, this.currentUser && (r4.nickname && (this.currentUser.nickname = d5.nickname), (r4.profileUrl || r4.profileImage) && (this.currentUser.plainProfileUrl = d5.profileUrl)), [2, d5];
          case 2:
            throw v.connectionRequired;
        }
      });
    });
  }, n4.prototype.updateCurrentUserInfoWithPreferredLanguages = function(e3) {
    return r(this, void 0, void 0, function() {
      var t7, n5, r4, i4, s6, o3;
      return s(this, function(a5) {
        switch (a5.label) {
          case 0:
            return Jr(N("string", e3)).throw(v.invalidParameters), this.currentUser ? (t7 = Ws.of(this._iid), n5 = t7.sdkState, r4 = t7.requestQueue, i4 = new St2({ userId: n5.userId, preferredLanguages: e3 }), [4, r4.send(i4)]) : [3, 2];
          case 1:
            return s6 = a5.sent(), o3 = s6.as(It2).user, this.currentUser && (this.currentUser.preferredLanguages = o3.preferredLanguages), [2, o3];
          case 2:
            throw v.connectionRequired;
        }
      });
    });
  }, n4.prototype.registerFCMPushTokenForCurrentUser = function(e3, n5) {
    var r4, s6;
    return r(this, void 0, void 0, function() {
      var o3, u4, c4, d5, l3, h4, f4 = this;
      return s(this, function(p4) {
        switch (p4.label) {
          case 0:
            if (Jr(w("string", e3) && w("string", null == n5 ? void 0 : n5.deviceManufacturer, true)).throw(v.invalidParameters), (null == n5 ? void 0 : n5.deviceOS) && Jr(S(We, n5.deviceOS.platform, true) && w("string", n5.deviceOS.version, true)).throw(v.invalidParameters), !this.currentUser) return [3, 6];
            o3 = { deviceOS: "".concat((null === (r4 = null == n5 ? void 0 : n5.deviceOS) || void 0 === r4 ? void 0 : r4.platform) || We.ANDROID, "-").concat((null === (s6 = null == n5 ? void 0 : n5.deviceOS) || void 0 === s6 ? void 0 : s6.version) || "unknown"), deviceManufacturer: null == n5 ? void 0 : n5.deviceManufacturer, systemPushEnabled: null == n5 ? void 0 : n5.systemPushEnabled }, p4.label = 1;
          case 1:
            return p4.trys.push([1, 4, , 5]), u4 = Ws.of(this._iid), c4 = u4.sessionManager, d5 = u4.sdkState, l3 = u4.requestQueue, c4.hasDeviceToken(f.FCM, e3) ? [2, d.SUCCESS] : (h4 = new Et2({ userId: d5.userId, token: e3, deviceOS: o3.deviceOS, deviceManufacturer: o3.deviceManufacturer, systemPushEnabled: o3.systemPushEnabled }), [4, l3.send(h4)]);
          case 2:
            return p4.sent(), [4, as(function() {
              return r(f4, void 0, void 0, function() {
                return s(this, function(t7) {
                  switch (t7.label) {
                    case 0:
                      return c4.setDeviceToken(f.FCM, e3, o3), [4, c4.saveDeviceToken()];
                    case 1:
                      return t7.sent(), [2];
                  }
                });
              });
            })];
          case 3:
            return p4.sent(), this._fcmPushToken = "", [2, d.SUCCESS];
          case 4:
            return p4.sent(), [2, d.ERROR];
          case 5:
            return [3, 7];
          case 6:
            return this._fcmPushToken = e3, [2, d.PENDING];
          case 7:
            return [2];
        }
      });
    });
  }, n4.prototype.unregisterFCMPushTokenForCurrentUser = function(e3) {
    return r(this, void 0, void 0, function() {
      var n5, r4, s6, o3, u4, c4, d5 = this;
      return s(this, function(l3) {
        switch (l3.label) {
          case 0:
            if (Jr(w("string", e3)).throw(v.invalidParameters), !this.currentUser) return [3, 6];
            l3.label = 1;
          case 1:
            return l3.trys.push([1, 4, , 5]), n5 = Ws.of(this._iid), r4 = n5.sessionManager, s6 = n5.sdkState, o3 = n5.requestQueue, u4 = new Pt2({ userId: s6.userId, token: e3 }), [4, o3.send(u4)];
          case 2:
            return c4 = l3.sent().lastDeletedAt, [4, as(function() {
              return r(d5, void 0, void 0, function() {
                return s(this, function(t7) {
                  switch (t7.label) {
                    case 0:
                      return r4.unsetDeviceToken(f.FCM, e3), r4.setDeviceTokenDeletedAt(c4), [4, r4.saveDeviceToken()];
                    case 1:
                      return t7.sent(), [2];
                  }
                });
              });
            })];
          case 3:
            return l3.sent(), this._fcmPushToken = "", [2, d.SUCCESS];
          case 4:
            return l3.sent(), [2, d.ERROR];
          case 5:
            return [3, 7];
          case 6:
            return this._fcmPushToken = e3, [2, d.PENDING];
          case 7:
            return [2];
        }
      });
    });
  }, n4.prototype.unregisterFCMPushTokenAllForCurrentUser = function() {
    return r(this, void 0, void 0, function() {
      var e3, t7, n5, r4, s6, o3, u4 = this;
      return s(this, function(c4) {
        switch (c4.label) {
          case 0:
            return this.currentUser ? (e3 = Ws.of(this._iid), t7 = e3.sessionManager, n5 = e3.sdkState, r4 = e3.requestQueue, s6 = new Ut2({ userId: n5.userId }), [4, r4.send(s6)]) : [3, 3];
          case 1:
            return o3 = c4.sent().lastDeletedAt, [4, as(function() {
              return r(u4, void 0, void 0, function() {
                return s(this, function(e4) {
                  switch (e4.label) {
                    case 0:
                      return t7.unsetDeviceTokens(f.FCM), t7.setDeviceTokenDeletedAt(o3), [4, t7.saveDeviceToken()];
                    case 1:
                      return e4.sent(), [2];
                  }
                });
              });
            })];
          case 2:
            c4.sent(), c4.label = 3;
          case 3:
            return [2];
        }
      });
    });
  }, n4.prototype.registerAPNSPushTokenForCurrentUser = function(e3, n5) {
    var r4, s6;
    return r(this, void 0, void 0, function() {
      var o3, u4, c4, d5, l3, h4, f4 = this;
      return s(this, function(p4) {
        switch (p4.label) {
          case 0:
            if (Jr(w("string", e3) && w("string", null == n5 ? void 0 : n5.deviceManufacturer, true)).throw(v.invalidParameters), (null == n5 ? void 0 : n5.deviceOS) && Jr(S(We, n5.deviceOS.platform, true) && w("string", n5.deviceOS.version, true)).throw(v.invalidParameters), !this.currentUser) return [3, 6];
            o3 = { deviceOS: "".concat((null === (r4 = null == n5 ? void 0 : n5.deviceOS) || void 0 === r4 ? void 0 : r4.platform) || We.IOS, "-").concat((null === (s6 = null == n5 ? void 0 : n5.deviceOS) || void 0 === s6 ? void 0 : s6.version) || "unknown"), deviceManufacturer: null == n5 ? void 0 : n5.deviceManufacturer, systemPushEnabled: null == n5 ? void 0 : n5.systemPushEnabled }, p4.label = 1;
          case 1:
            return p4.trys.push([1, 4, , 5]), u4 = Ws.of(this._iid), c4 = u4.sessionManager, d5 = u4.sdkState, l3 = u4.requestQueue, c4.hasDeviceToken(f.APNS, e3) ? [2, d.SUCCESS] : (h4 = new Ct2({ userId: d5.userId, token: e3, deviceOS: o3.deviceOS, deviceManufacturer: o3.deviceManufacturer, systemPushEnabled: o3.systemPushEnabled }), [4, l3.send(h4)]);
          case 2:
            return p4.sent(), [4, as(function() {
              return r(f4, void 0, void 0, function() {
                return s(this, function(t7) {
                  switch (t7.label) {
                    case 0:
                      return c4.setDeviceToken(f.APNS, e3, o3), [4, c4.saveDeviceToken()];
                    case 1:
                      return t7.sent(), [2];
                  }
                });
              });
            })];
          case 3:
            return p4.sent(), this._apnsPushToken = "", [2, d.SUCCESS];
          case 4:
            return p4.sent(), [2, d.ERROR];
          case 5:
            return [3, 7];
          case 6:
            return this._apnsPushToken = e3, [2, d.PENDING];
          case 7:
            return [2];
        }
      });
    });
  }, n4.prototype.unregisterAPNSPushTokenForCurrentUser = function(e3) {
    return r(this, void 0, void 0, function() {
      var n5, r4, s6, o3, u4, c4, d5 = this;
      return s(this, function(l3) {
        switch (l3.label) {
          case 0:
            if (Jr(w("string", e3)).throw(v.invalidParameters), !this.currentUser) return [3, 6];
            l3.label = 1;
          case 1:
            return l3.trys.push([1, 4, , 5]), n5 = Ws.of(this._iid), r4 = n5.sessionManager, s6 = n5.sdkState, o3 = n5.requestQueue, u4 = new Tt2({ userId: s6.userId, token: e3 }), [4, o3.send(u4)];
          case 2:
            return c4 = l3.sent().lastDeletedAt, [4, as(function() {
              return r(d5, void 0, void 0, function() {
                return s(this, function(t7) {
                  switch (t7.label) {
                    case 0:
                      return r4.unsetDeviceToken(f.APNS, e3), r4.setDeviceTokenDeletedAt(c4), [4, r4.saveDeviceToken()];
                    case 1:
                      return t7.sent(), [2];
                  }
                });
              });
            })];
          case 3:
            return l3.sent(), this._apnsPushToken = "", [2, d.SUCCESS];
          case 4:
            return l3.sent(), [2, d.ERROR];
          case 5:
            return [3, 7];
          case 6:
            return this._apnsPushToken = e3, [2, d.PENDING];
          case 7:
            return [2];
        }
      });
    });
  }, n4.prototype.unregisterAPNSPushTokenAllForCurrentUser = function() {
    return r(this, void 0, void 0, function() {
      var e3, t7, n5, r4, s6, o3, u4 = this;
      return s(this, function(c4) {
        switch (c4.label) {
          case 0:
            return this.currentUser ? (e3 = Ws.of(this._iid), t7 = e3.sessionManager, n5 = e3.sdkState, r4 = e3.requestQueue, s6 = new Dt2({ userId: n5.userId }), [4, r4.send(s6)]) : [3, 3];
          case 1:
            return o3 = c4.sent().lastDeletedAt, [4, as(function() {
              return r(u4, void 0, void 0, function() {
                return s(this, function(e4) {
                  switch (e4.label) {
                    case 0:
                      return t7.unsetDeviceTokens(f.APNS), t7.setDeviceTokenDeletedAt(o3), [4, t7.saveDeviceToken()];
                    case 1:
                      return e4.sent(), [2];
                  }
                });
              });
            })];
          case 2:
            c4.sent(), c4.label = 3;
          case 3:
            return [2];
        }
      });
    });
  }, n4.prototype.markPushNotificationAsDelivered = function(e3, t7) {
    var n5;
    return void 0 === t7 && (t7 = true), r(this, void 0, void 0, function() {
      var r4, i4, s6, o3, u4, c4, d5, l3, h4, f4, p4, v5, g4, m5, b6, _2, y6, w4, k3;
      return s(this, function(a5) {
        switch (a5.label) {
          case 0:
            if (r4 = Ws.of(this._iid), i4 = r4.logger, s6 = r4.sessionManager, o3 = r4.requestQueue, u4 = r4.pushNotificationAckManager, i4.debug("markPushNotificationAsDelivered:", e3), c4 = fn3.DELIVERED, d5 = u4.parseData(e3), l3 = d5.pushTrackingId, h4 = d5.sessionTopics, f4 = d5.sessionKey, p4 = d5.messageId, v5 = d5.channelKey, g4 = d5.templateKey, m5 = d5.notificationEventDeadline, !f4) throw i4.info("Can't use markPushNotificationAsDelivered() feature."), v.malformedDataError;
            if (!h4.includes(Ps.PUSH_ACKNOWLEDGEMENT)) throw i4.info("Can't use markPushNotificationAsDelivered() feature."), v.malformedDataError;
            if (u4.isAcked(l3, c4)) return i4.info("already delivered push notification:", l3), [2];
            b6 = Boolean(v5), _2 = t7 && b6, y6 = null === (n5 = s6.deviceTokens[0]) || void 0 === n5 ? void 0 : n5.token, w4 = new Sn3({ deviceToken: null != y6 ? y6 : "", pushTrackingId: l3, eventType: c4, messageId: p4, channelKey: v5, templateKey: g4, notificationEventDeadline: m5, allowedPushNotification: _2 }), f4 && (w4.headers["Session-Key"] = f4), a5.label = 1;
          case 1:
            return a5.trys.push([1, 3, , 4]), [4, o3.send(w4)];
          case 2:
            return a5.sent(), u4.markAsAcked(l3, c4), [3, 4];
          case 3:
            throw k3 = a5.sent(), i4.debug("failed to mark push notification as delivered. push tracking id: ".concat(l3, ". error: ").concat(k3)), k3;
          case 4:
            return [2];
        }
      });
    });
  }, n4.prototype.markPushNotificationAsClicked = function(e3) {
    var t7;
    return r(this, void 0, void 0, function() {
      var n5, r4, i4, s6, o3, u4, c4, d5, l3, h4, f4, p4, v5, g4, m5, b6, _2;
      return s(this, function(a5) {
        switch (a5.label) {
          case 0:
            if (n5 = Ws.of(this._iid), r4 = n5.logger, i4 = n5.sessionManager, s6 = n5.requestQueue, o3 = n5.pushNotificationAckManager, r4.debug("markPushNotificationAsClicked:", e3), u4 = fn3.CLICKED, c4 = o3.parseData(e3), d5 = c4.pushTrackingId, l3 = c4.sessionTopics, h4 = c4.sessionKey, f4 = c4.messageId, p4 = c4.channelKey, v5 = c4.templateKey, g4 = c4.notificationEventDeadline, !h4) throw r4.info("Can't use markPushNotificationAsDelivered() feature."), v.malformedDataError;
            if (!l3.includes(Ps.PUSH_ACKNOWLEDGEMENT)) throw r4.info("Can't use markPushNotificationAsDelivered() feature."), v.malformedDataError;
            if (o3.isAcked(d5, u4)) return r4.info("already clicked push notification:", d5), [2];
            m5 = null === (t7 = i4.deviceTokens[0]) || void 0 === t7 ? void 0 : t7.token, b6 = new Sn3({ deviceToken: null != m5 ? m5 : "", pushTrackingId: d5, eventType: u4, messageId: f4, channelKey: p4, templateKey: v5, notificationEventDeadline: g4 }), h4 && (b6.headers["Session-Key"] = h4), a5.label = 1;
          case 1:
            return a5.trys.push([1, 3, , 4]), [4, s6.send(b6)];
          case 2:
            return a5.sent(), o3.markAsAcked(d5, u4), [3, 4];
          case 3:
            throw _2 = a5.sent(), r4.debug("failed to mark push notification as clicked. push tracking id: ".concat(d5, ". error: ").concat(_2)), _2;
          case 4:
            return [2];
        }
      });
    });
  }, n4.prototype.getChannelInvitationPreference = function() {
    return r(this, void 0, void 0, function() {
      var e3, t7, n5, r4, i4;
      return s(this, function(s6) {
        switch (s6.label) {
          case 0:
            return e3 = Ws.of(this._iid), t7 = e3.sdkState, n5 = e3.requestQueue, r4 = new Nt2({ userId: t7.userId }), [4, n5.send(r4)];
          case 1:
            return i4 = s6.sent(), [2, { autoAccept: i4.as(Mt2).autoAccept }];
        }
      });
    });
  }, n4.prototype.setChannelInvitationPreference = function(e3) {
    return r(this, void 0, void 0, function() {
      var n5, r4, i4, s6, o3;
      return s(this, function(a5) {
        switch (a5.label) {
          case 0:
            return Jr(w("boolean", e3)).throw(v.invalidParameters), n5 = Ws.of(this._iid), r4 = n5.sdkState, i4 = n5.requestQueue, s6 = new Lt2({ userId: r4.userId, willAutoAccept: e3 }), [4, i4.send(s6)];
          case 1:
            return o3 = a5.sent(), [2, { autoAccept: o3.as(Rt2).autoAccept }];
        }
      });
    });
  }, n4.prototype.getDoNotDisturb = function() {
    return r(this, void 0, void 0, function() {
      var e3, t7, n5, r4, i4;
      return s(this, function(s6) {
        switch (s6.label) {
          case 0:
            return e3 = Ws.of(this._iid), t7 = e3.sdkState, n5 = e3.requestQueue, r4 = new zt2({ userId: t7.userId }), [4, n5.send(r4)];
          case 1:
            return i4 = s6.sent(), [2, i4.as(Qt3).preference];
        }
      });
    });
  }, n4.prototype.setDoNotDisturb = function(e3, n5, r4, s6, o3, u4) {
    return void 0 === n5 && (n5 = 0), void 0 === r4 && (r4 = 0), void 0 === s6 && (s6 = 0), void 0 === o3 && (o3 = 0), void 0 === u4 && (u4 = ""), r(this, void 0, void 0, function() {
      var i4, c4, d5, l3, h4;
      return s(this, function(a5) {
        switch (a5.label) {
          case 0:
            return Jr(w("boolean", e3) && w("number", n5) && w("number", r4) && w("number", s6) && w("number", o3) && w("string", u4)).throw(v.invalidParameters), i4 = Ws.of(this._iid), c4 = i4.sdkState, d5 = i4.requestQueue, l3 = new jt2({ userId: c4.userId, doNotDisturbOn: e3, startHour: n5, startMin: r4, endHour: s6, endMin: o3, timezone: u4 }), [4, d5.send(l3)];
          case 1:
            return h4 = a5.sent(), [2, h4.as(Ft2).preference];
        }
      });
    });
  }, n4.prototype.getSnoozePeriod = function() {
    return r(this, void 0, void 0, function() {
      var e3, t7, n5, r4, i4;
      return s(this, function(s6) {
        switch (s6.label) {
          case 0:
            return e3 = Ws.of(this._iid), t7 = e3.sdkState, n5 = e3.requestQueue, r4 = new qt2({ userId: t7.userId }), [4, n5.send(r4)];
          case 1:
            return i4 = s6.sent(), [2, i4.as(Ht2).snoozePeriod];
        }
      });
    });
  }, n4.prototype.setSnoozePeriod = function(e3, n5, r4) {
    return void 0 === n5 && (n5 = 0), void 0 === r4 && (r4 = 0), r(this, void 0, void 0, function() {
      var i4, s6, o3, u4, c4;
      return s(this, function(a5) {
        switch (a5.label) {
          case 0:
            return Jr(w("boolean", e3) && w("number", n5) && w("number", r4)).throw(v.invalidParameters), i4 = Ws.of(this._iid), s6 = i4.sdkState, o3 = i4.requestQueue, u4 = new xt2({ userId: s6.userId, snoozeOn: e3, startTs: n5, endTs: r4 }), [4, o3.send(u4)];
          case 1:
            return c4 = a5.sent(), [2, c4.as(Kt3).snoozePeriod];
        }
      });
    });
  }, n4.prototype.getMyPushTokensByToken = function(e3, n5) {
    return r(this, void 0, void 0, function() {
      var r4, i4, s6, o3, u4, c4, d5, l3, h4, f4, p4, v5;
      return s(this, function(a5) {
        switch (a5.label) {
          case 0:
            return Jr(w("string", e3) && S(f, n5)).throw(v.invalidParameters), r4 = Ws.of(this._iid), i4 = r4.sdkState, s6 = r4.requestQueue, o3 = r4.sessionManager, u4 = new Ot2({ userId: i4.userId, type: n5, token: e3 }), [4, s6.send(u4)];
          case 1:
            c4 = a5.sent(), d5 = c4.as(At2).pushTokens;
            try {
              for (l3 = o(d5.deviceTokens), h4 = l3.next(); !h4.done; h4 = l3.next()) f4 = h4.value, o3.setDeviceToken(d5.type, f4);
            } catch (e4) {
              p4 = { error: e4 };
            } finally {
              try {
                h4 && !h4.done && (v5 = l3.return) && v5.call(l3);
              } finally {
                if (p4) throw p4.error;
              }
            }
            return [4, o3.saveDeviceToken()];
          case 2:
            return a5.sent(), [2, d5];
        }
      });
    });
  }, n4.prototype.getPushTriggerOption = function() {
    return r(this, void 0, void 0, function() {
      var e3, t7, n5, r4;
      return s(this, function(i4) {
        switch (i4.label) {
          case 0:
            return e3 = Ws.of(this._iid), t7 = e3.sdkState, n5 = e3.requestQueue, r4 = new Vt2({ userId: t7.userId }), [4, n5.send(r4)];
          case 1:
            return [2, i4.sent().as(Bt2).pushTriggerOption];
        }
      });
    });
  }, n4.prototype.setPushTriggerOption = function(e3) {
    return r(this, void 0, void 0, function() {
      var t7, n5, r4, i4;
      return s(this, function(s6) {
        switch (s6.label) {
          case 0:
            return Jr(S(_, e3)).throw(v.invalidParameters), t7 = Ws.of(this._iid), n5 = t7.sdkState, r4 = t7.requestQueue, i4 = new Jt3({ userId: n5.userId, pushTriggerOption: e3 }), [4, r4.send(i4)];
          case 1:
            return [2, s6.sent().as(Yt3).pushTriggerOption];
        }
      });
    });
  }, n4.prototype.getPushTemplate = function() {
    return r(this, void 0, void 0, function() {
      var e3, t7, n5, r4;
      return s(this, function(i4) {
        switch (i4.label) {
          case 0:
            return e3 = Ws.of(this._iid), t7 = e3.sdkState, n5 = e3.requestQueue, r4 = new Zt3({ userId: t7.userId }), [4, n5.send(r4)];
          case 1:
            return [2, i4.sent().as($t3).name];
        }
      });
    });
  }, n4.prototype.setPushTemplate = function(e3) {
    return r(this, void 0, void 0, function() {
      var t7, n5, r4, i4;
      return s(this, function(s6) {
        switch (s6.label) {
          case 0:
            return Jr(S(p, e3)).throw(v.invalidParameters), t7 = Ws.of(this._iid), n5 = t7.sdkState, r4 = t7.requestQueue, i4 = new Xt3({ userId: n5.userId, templateName: e3 }), [4, r4.send(i4)];
          case 1:
            return [2, s6.sent().as(en3).name];
        }
      });
    });
  }, n4.prototype.blockUser = function(e3) {
    return r(this, void 0, void 0, function() {
      var n5, r4, i4, s6;
      return s(this, function(o3) {
        switch (o3.label) {
          case 0:
            return Jr(e3 instanceof es || w("string", e3)).throw(v.invalidParameters), n5 = Ws.of(this._iid), r4 = n5.sdkState, i4 = n5.requestQueue, s6 = new Gt2({ userId: r4.userId, blockedUserId: e3 instanceof es ? e3.userId : e3 }), [4, i4.send(s6)];
          case 1:
            return o3.sent(), [2];
        }
      });
    });
  }, n4.prototype.blockUserWithUserId = function(e3) {
    return r(this, void 0, void 0, function() {
      return s(this, function(t7) {
        return [2, this.blockUser(e3)];
      });
    });
  }, n4.prototype.unblockUser = function(e3) {
    return r(this, void 0, void 0, function() {
      var n5, r4, i4, s6;
      return s(this, function(o3) {
        switch (o3.label) {
          case 0:
            return Jr(e3 instanceof es || w("string", e3)).throw(v.invalidParameters), n5 = Ws.of(this._iid), r4 = n5.sdkState, i4 = n5.requestQueue, s6 = new Wt3({ userId: r4.userId, unblockedUserId: e3 instanceof es ? e3.userId : e3 }), [4, i4.send(s6)];
          case 1:
            return o3.sent(), [2];
        }
      });
    });
  }, n4.prototype.unblockUserWithUserId = function(e3) {
    return r(this, void 0, void 0, function() {
      return s(this, function(t7) {
        return [2, this.unblockUser(e3)];
      });
    });
  }, n4.prototype.getFriendChangeLogsByToken = function(e3) {
    return r(this, void 0, void 0, function() {
      var n5, r4, i4, s6, o3;
      return s(this, function(a5) {
        switch (a5.label) {
          case 0:
            return Jr(w("string", e3)).throw(v.invalidParameters), n5 = Ws.of(this._iid), r4 = n5.sdkState, i4 = n5.requestQueue, s6 = new tn3({ userId: r4.userId, token: e3 }), [4, i4.send(s6)];
          case 1:
            return o3 = a5.sent(), [2, o3.as(nn3).changelogs];
        }
      });
    });
  }, n4.prototype.getAllowFriendDiscovery = function() {
    return r(this, void 0, void 0, function() {
      var e3, t7, n5, r4, i4;
      return s(this, function(s6) {
        switch (s6.label) {
          case 0:
            return e3 = Ws.of(this._iid), t7 = e3.sdkState, n5 = e3.requestQueue, r4 = new dn3({ userId: t7.userId }), [4, n5.send(r4)];
          case 1:
            return i4 = s6.sent(), [2, i4.as(ln3).allowFriendDiscovery];
        }
      });
    });
  }, n4.prototype.setAllowFriendDiscovery = function(e3) {
    return r(this, void 0, void 0, function() {
      var n5, r4, i4, s6;
      return s(this, function(o3) {
        switch (o3.label) {
          case 0:
            return Jr(w("boolean", e3)).throw(v.invalidParameters), n5 = Ws.of(this._iid), r4 = n5.sdkState, i4 = n5.requestQueue, s6 = new hn3({ userId: r4.userId, allowFriendDiscovery: e3 }), [4, i4.send(s6)];
          case 1:
            return o3.sent(), [2, e3];
        }
      });
    });
  }, n4.prototype.uploadFriendDiscoveries = function(e3) {
    return r(this, void 0, void 0, function() {
      var t7, n5, r4, i4, s6;
      return s(this, function(o3) {
        switch (o3.label) {
          case 0:
            return t7 = Ws.of(this._iid), n5 = t7.sdkState, r4 = t7.requestQueue, i4 = new rn3({ userId: n5.userId, discoveries: e3 }), [4, r4.send(i4)];
          case 1:
            return s6 = o3.sent(), [2, s6.as(sn3).friendDiscoveryRequestId];
        }
      });
    });
  }, n4.prototype.deleteFriendDiscovery = function(e3) {
    return r(this, void 0, void 0, function() {
      return s(this, function(t7) {
        return [2, this.deleteFriendDiscoveries([e3])];
      });
    });
  }, n4.prototype.deleteFriendDiscoveries = function(e3) {
    return r(this, void 0, void 0, function() {
      var t7, n5, r4, i4;
      return s(this, function(s6) {
        switch (s6.label) {
          case 0:
            return Jr(N("string", e3)).throw(v.invalidParameters), t7 = Ws.of(this._iid), n5 = t7.sdkState, r4 = t7.requestQueue, i4 = new on3({ userId: n5.userId, discoveryKeys: e3 }), [4, r4.send(i4)];
          case 1:
            return s6.sent(), [2];
        }
      });
    });
  }, n4.prototype.addFriends = function(e3) {
    return r(this, void 0, void 0, function() {
      var t7, n5, r4, i4, s6;
      return s(this, function(o3) {
        switch (o3.label) {
          case 0:
            return Jr(N("string", e3)).throw(v.invalidParameters), t7 = Ws.of(this._iid), n5 = t7.sdkState, r4 = t7.requestQueue, i4 = new an3({ userId: n5.userId, userIds: e3 }), [4, r4.send(i4)];
          case 1:
            return s6 = o3.sent(), [2, s6.as(un3).users];
        }
      });
    });
  }, n4.prototype.deleteFriend = function(e3) {
    return r(this, void 0, void 0, function() {
      return s(this, function(t7) {
        return [2, this.deleteFriends([e3])];
      });
    });
  }, n4.prototype.deleteFriends = function(e3) {
    return r(this, void 0, void 0, function() {
      var t7, n5, r4, i4;
      return s(this, function(s6) {
        switch (s6.label) {
          case 0:
            return Jr(N("string", e3)).throw(v.invalidParameters), t7 = Ws.of(this._iid), n5 = t7.sdkState, r4 = t7.requestQueue, i4 = new cn3({ userId: n5.userId, userIds: e3 }), [4, r4.send(i4)];
          case 1:
            return s6.sent(), [2];
        }
      });
    });
  }, n4.prototype.getAllEmoji = function() {
    return r(this, void 0, void 0, function() {
      var e3, t7, n5;
      return s(this, function(r4) {
        switch (r4.label) {
          case 0:
            return e3 = Ws.of(this._iid).requestQueue, t7 = new pn3(), [4, e3.send(t7)];
          case 1:
            return n5 = r4.sent(), [2, n5.as(vn3).emojiContainer];
        }
      });
    });
  }, n4.prototype.getEmojiCategory = function(e3) {
    return r(this, void 0, void 0, function() {
      var t7, n5, r4;
      return s(this, function(i4) {
        switch (i4.label) {
          case 0:
            return t7 = Ws.of(this._iid).requestQueue, n5 = new gn3({ categoryId: e3 }), [4, t7.send(n5)];
          case 1:
            return r4 = i4.sent(), [2, r4.as(mn3).emojiCategory];
        }
      });
    });
  }, n4.prototype.getEmoji = function(e3) {
    return r(this, void 0, void 0, function() {
      var t7, n5, r4;
      return s(this, function(i4) {
        switch (i4.label) {
          case 0:
            return t7 = Ws.of(this._iid).requestQueue, n5 = new bn3({ key: e3 }), [4, t7.send(n5)];
          case 1:
            return r4 = i4.sent(), [2, r4.as(_n3).emoji];
        }
      });
    });
  }, n4.prototype.getUIKitConfiguration = function() {
    return r(this, void 0, void 0, function() {
      var e3, t7, n5, r4;
      return s(this, function(i4) {
        switch (i4.label) {
          case 0:
            return e3 = Ws.of(this._iid), Jr(e3.hasExtension("sb_uikit")).throw(v.notSupportedError), t7 = e3.requestQueue, n5 = new yn3(), [4, t7.send(n5)];
          case 1:
            return r4 = i4.sent(), [2, r4.as(wn3).uikitConfiguration];
        }
      });
    });
  }, n4;
}();

// node_modules/@sendbird/uikit-tools/dist/esm/uikitConfiguration/internal/context.js
var import_react12 = __toESM(require_react(), 1);

// node_modules/@sendbird/uikit-tools/dist/esm/constants/applicationAttributes.js
var applicationAttributes = {
  reactions: "reactions",
  message_search_v3: "message_search_v3",
  enable_og_tag: "enable_og_tag",
  enable_message_threading: "enable_message_threading",
  allow_broadcast_channel: "allow_broadcast_channel",
  allow_super_group_channel: "allow_super_group_channel"
};

// node_modules/@sendbird/uikit-tools/dist/esm/constants/premiumFeatures.js
var premiumFeatures = {
  reactions: "reactions",
  moderation_group: "moderation_group",
  message_search_v3: "message_search_v3",
  data_export: "data_export",
  migration: "migration",
  delivery_receipt: "delivery_receipt",
  auto_thumbnail: "auto_thumbnail",
  image_moderation: "image_moderation",
  super_group_channel: "super_group_channel",
  announcement: "announcement",
  moderation_open: "moderation_open",
  desk: "desk",
  bot_interface: "bot_interface",
  auto_trans: "auto_trans"
};

// node_modules/@sendbird/uikit-tools/dist/esm/constants/sbuConstants.js
var sbuConstants = {
  collection: {
    groupChannel: {
      defaultLimit: 20,
      defaultOrder: E.LATEST_LAST_MESSAGE,
      defaultIncludeEmpty: false
    },
    message: {
      defaultLimit: { next: 25, prev: 25 },
      searchLimit: { next: 10, prev: 10 }
    }
  }
};

// node_modules/@sendbird/uikit-tools/dist/esm/hooks/useGroupChannelList/index.js
var import_react6 = __toESM(require_react(), 1);

// node_modules/@sendbird/uikit-tools/dist/esm/hooks/useAsyncEffect.js
var import_react = __toESM(require_react(), 1);
var __awaiter2 = function(thisArg, _arguments, P2, generator) {
  function adopt(value) {
    return value instanceof P2 ? value : new P2(function(resolve) {
      resolve(value);
    });
  }
  return new (P2 || (P2 = Promise))(function(resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e3) {
        reject(e3);
      }
    }
    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e3) {
        reject(e3);
      }
    }
    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }
    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};
var useAsyncEffect = (asyncEffect, deps) => {
  (0, import_react.useEffect)(createAsyncEffectCallback(asyncEffect), deps);
};
var useAsyncLayoutEffect = (asyncEffect, deps) => {
  (0, import_react.useLayoutEffect)(createAsyncEffectCallback(asyncEffect), deps);
};
var iife = (callback) => callback();
var createAsyncEffectCallback = (asyncEffect) => () => {
  const destructor = iife(asyncEffect);
  return () => {
    if (!destructor)
      return;
    if (destructor instanceof Promise) {
      iife(() => __awaiter2(void 0, void 0, void 0, function* () {
        const awaitedDestructor = yield destructor;
        if (awaitedDestructor)
          awaitedDestructor();
      }));
    } else {
      iife(destructor);
    }
  };
};

// node_modules/@sendbird/uikit-tools/dist/esm/hooks/useGroupChannelHandler.js
var import_react3 = __toESM(require_react(), 1);

// node_modules/@sendbird/uikit-tools/dist/esm/hooks/useUniqId.js
var import_react2 = __toESM(require_react(), 1);
var id = 0;
function useUniqId() {
  return (0, import_react2.useState)(() => `${id++}`)[0];
}

// node_modules/@sendbird/uikit-tools/dist/esm/hooks/useGroupChannelHandler.js
var useGroupChannelHandler = (sdk, hookHandler, handlerId) => {
  const handlerRef = (0, import_react3.useRef)(hookHandler);
  const id2 = useUniqId();
  const internalHandlerId = handlerId !== null && handlerId !== void 0 ? handlerId : id2;
  handlerRef.current = hookHandler;
  (0, import_react3.useEffect)(() => {
    var _a2;
    const handlerMapper = (handler) => {
      const handlerKeys = Object.keys(handler);
      handlerKeys.forEach((key) => {
        handler[key] = (...args) => {
          var _a3, _b2;
          return (_b2 = (_a3 = handlerRef.current) === null || _a3 === void 0 ? void 0 : _a3[key]) === null || _b2 === void 0 ? void 0 : _b2.call(_a3, ...args);
        };
      });
      return handler;
    };
    (_a2 = sdk === null || sdk === void 0 ? void 0 : sdk.groupChannel) === null || _a2 === void 0 ? void 0 : _a2.addGroupChannelHandler(internalHandlerId, handlerMapper(new Ye3()));
    return () => {
      var _a3;
      (_a3 = sdk === null || sdk === void 0 ? void 0 : sdk.groupChannel) === null || _a3 === void 0 ? void 0 : _a3.removeGroupChannelHandler(internalHandlerId);
    };
  }, [sdk === null || sdk === void 0 ? void 0 : sdk.groupChannel, internalHandlerId]);
};

// node_modules/@sendbird/uikit-tools/dist/esm/hooks/usePreservedCallback.js
var import_react4 = __toESM(require_react(), 1);
function usePreservedCallback(callback) {
  const callbackRef = (0, import_react4.useRef)(callback);
  callbackRef.current = callback;
  return (0, import_react4.useCallback)((...args) => callbackRef.current(...args), [callbackRef]);
}

// node_modules/@sendbird/uikit-tools/dist/esm/hooks/useGroupChannelList/reducer.js
var import_react5 = __toESM(require_react(), 1);
var __rest2 = function(s6, e3) {
  var t7 = {};
  for (var p4 in s6) if (Object.prototype.hasOwnProperty.call(s6, p4) && e3.indexOf(p4) < 0)
    t7[p4] = s6[p4];
  if (s6 != null && typeof Object.getOwnPropertySymbols === "function")
    for (var i4 = 0, p4 = Object.getOwnPropertySymbols(s6); i4 < p4.length; i4++) {
      if (e3.indexOf(p4[i4]) < 0 && Object.prototype.propertyIsEnumerable.call(s6, p4[i4]))
        t7[p4[i4]] = s6[p4[i4]];
    }
  return t7;
};
var defaultReducer = (_a2, action) => {
  var draft = __rest2(_a2, []);
  const compareByOrder = createCompareByOrder(draft.order);
  switch (action.type) {
    case "update_refreshing": {
      draft.refreshing = action.value.status;
      break;
    }
    case "update_initialized": {
      draft.initialized = action.value.status;
      break;
    }
    case "update_channels": {
      getGroupChannels(action.value.channels).forEach((freshChannel) => {
        const idx = draft.groupChannels.findIndex((staleChannel) => staleChannel.url === freshChannel.url);
        if (idx > -1)
          draft.groupChannels[idx] = freshChannel;
      });
      compareByOrder && (draft.groupChannels = draft.groupChannels.sort(compareByOrder));
      break;
    }
    case "delete_channels": {
      action.value.channelUrls.forEach((url) => {
        const idx = draft.groupChannels.findIndex((c4) => c4.url === url);
        if (idx > -1)
          draft.groupChannels.splice(idx, 1);
      });
      compareByOrder && (draft.groupChannels = draft.groupChannels.sort(compareByOrder));
      break;
    }
    case "append_channels": {
      const groupChannels = getGroupChannels(action.value.channels);
      if (action.value.clearBeforeAction) {
        draft.groupChannels = groupChannels;
      } else {
        draft.groupChannels = mergeObjectArrays(draft.groupChannels, groupChannels, "url");
      }
      compareByOrder && (draft.groupChannels = draft.groupChannels.sort(compareByOrder));
      break;
    }
    case "update_order": {
      draft.order = action.value.order;
      const compareByOrder2 = createCompareByOrder(draft.order);
      compareByOrder2 && (draft.groupChannels = draft.groupChannels.sort(compareByOrder2));
      break;
    }
  }
  return draft;
};
var useGroupChannelListReducer = (order) => {
  const [{ initialized, refreshing, groupChannels }, dispatch] = (0, import_react5.useReducer)(defaultReducer, {
    initialized: false,
    refreshing: false,
    groupChannels: [],
    order
  });
  const updateChannels = (channels) => {
    dispatch({ type: "update_channels", value: { channels } });
  };
  const deleteChannels = (channelUrls) => {
    dispatch({ type: "delete_channels", value: { channelUrls } });
  };
  const appendChannels = (channels, clearBeforeAction) => {
    dispatch({ type: "append_channels", value: { channels, clearBeforeAction } });
  };
  const updateInitialized = (status) => {
    dispatch({ type: "update_initialized", value: { status } });
  };
  const updateRefreshing = (status) => {
    dispatch({ type: "update_refreshing", value: { status } });
  };
  const updateOrder = (order2) => {
    dispatch({ type: "update_order", value: { order: order2 } });
  };
  return {
    updateInitialized,
    updateRefreshing,
    updateChannels,
    deleteChannels,
    appendChannels,
    updateOrder,
    initialized,
    refreshing,
    groupChannels
  };
};
var createCompareByOrder = (order) => {
  if (!order)
    return void 0;
  return (channel1, channel2) => {
    switch (order) {
      case "latest_last_message": {
        if (channel1.lastMessage && channel2.lastMessage) {
          return channel2.lastMessage.createdAt - channel1.lastMessage.createdAt;
        } else if (channel1.lastMessage) {
          return -1;
        } else if (channel2.lastMessage) {
          return 1;
        } else {
          return channel2.createdAt - channel1.createdAt;
        }
      }
      case "chronological": {
        return channel2.createdAt - channel1.createdAt;
      }
      case "channel_name_alphabetical": {
        return channel1.name.localeCompare(channel2.name);
      }
      default: {
        return 0;
      }
    }
  };
};
function mergeObjectArrays(A3, B3, key) {
  const uniqueValues = new Set(A3.map((obj) => obj[key]));
  const newArr = [...A3];
  for (let i4 = 0; i4 < B3.length; i4++) {
    if (!uniqueValues.has(B3[i4][key])) {
      newArr.push(B3[i4]);
      uniqueValues.add(B3[i4][key]);
    }
  }
  return newArr;
}
function getGroupChannels(channels) {
  return channels.filter((it3) => it3.isGroupChannel());
}

// node_modules/@sendbird/uikit-tools/dist/esm/hooks/useGroupChannelList/index.js
var __awaiter3 = function(thisArg, _arguments, P2, generator) {
  function adopt(value) {
    return value instanceof P2 ? value : new P2(function(resolve) {
      resolve(value);
    });
  }
  return new (P2 || (P2 = Promise))(function(resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e3) {
        reject(e3);
      }
    }
    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e3) {
        reject(e3);
      }
    }
    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }
    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};
var createGroupChannelListCollection = (sdk, collectionCreator) => {
  const basicParams = {
    includeEmpty: sbuConstants.collection.groupChannel.defaultIncludeEmpty,
    limit: sbuConstants.collection.groupChannel.defaultLimit,
    order: sbuConstants.collection.groupChannel.defaultOrder
  };
  const passedCollection = collectionCreator === null || collectionCreator === void 0 ? void 0 : collectionCreator(basicParams);
  if (passedCollection)
    return passedCollection;
  return sdk.groupChannel.createGroupChannelCollection(Object.assign(Object.assign({}, basicParams), { filter: new rn2(basicParams) }));
};
var useGroupChannelList = (sdk, options) => {
  var _a2, _b2, _c;
  const deliveryReceiptEnabled = Boolean((_b2 = (_a2 = sdk.appInfo) === null || _a2 === void 0 ? void 0 : _a2.premiumFeatureList) === null || _b2 === void 0 ? void 0 : _b2.includes(premiumFeatures.delivery_receipt));
  const collectionRef = (0, import_react6.useRef)();
  const internalOptions = (0, import_react6.useRef)(options);
  internalOptions.current = options;
  const { initialized, groupChannels, refreshing, appendChannels, deleteChannels, updateRefreshing, updateInitialized } = useGroupChannelListReducer();
  const updateChannelsAndMarkAsDelivered = (shouldMarkAsDelivered, source, updatedChannels) => {
    var _a3, _b3, _c2, _d;
    const channels = (_b3 = (_a3 = collectionRef.current) === null || _a3 === void 0 ? void 0 : _a3.channels) !== null && _b3 !== void 0 ? _b3 : [];
    appendChannels(channels, true);
    if (shouldMarkAsDelivered && deliveryReceiptEnabled) {
      switch (source) {
        case mn2.EVENT_MESSAGE_RECEIVED:
        case mn2.EVENT_MESSAGE_SENT:
        case mn2.SYNC_CHANNEL_BACKGROUND:
        case mn2.SYNC_CHANNEL_CHANGELOGS:
        case void 0:
          (_d = (_c2 = internalOptions.current) === null || _c2 === void 0 ? void 0 : _c2.markAsDelivered) === null || _d === void 0 ? void 0 : _d.call(_c2, updatedChannels !== null && updatedChannels !== void 0 ? updatedChannels : channels);
          break;
      }
    }
  };
  const init = usePreservedCallback((uid) => __awaiter3(void 0, void 0, void 0, function* () {
    var _d, _e3, _f, _g2;
    if (collectionRef.current)
      (_d = collectionRef.current) === null || _d === void 0 ? void 0 : _d.dispose();
    if (uid) {
      collectionRef.current = createGroupChannelListCollection(sdk, options === null || options === void 0 ? void 0 : options.collectionCreator);
      (_e3 = collectionRef.current) === null || _e3 === void 0 ? void 0 : _e3.setGroupChannelCollectionHandler({
        onChannelsAdded: (context, channels) => {
          var _a3, _b3;
          const groupChannels2 = channels.filter((channel) => channel.isGroupChannel());
          updateChannelsAndMarkAsDelivered(true, context.source, groupChannels2);
          (_b3 = (_a3 = internalOptions.current) === null || _a3 === void 0 ? void 0 : _a3.onChannelsAdded) === null || _b3 === void 0 ? void 0 : _b3.call(_a3, groupChannels2);
        },
        onChannelsUpdated: (context, channels) => {
          var _a3, _b3;
          const groupChannels2 = channels.filter((channel) => channel.isGroupChannel());
          updateChannelsAndMarkAsDelivered(true, context.source, groupChannels2);
          (_b3 = (_a3 = internalOptions.current) === null || _a3 === void 0 ? void 0 : _a3.onChannelsUpdated) === null || _b3 === void 0 ? void 0 : _b3.call(_a3, groupChannels2);
        },
        onChannelsDeleted: (_2, channelUrls) => {
          var _a3, _b3;
          updateChannelsAndMarkAsDelivered(false);
          (_b3 = (_a3 = internalOptions.current) === null || _a3 === void 0 ? void 0 : _a3.onChannelsDeleted) === null || _b3 === void 0 ? void 0 : _b3.call(_a3, channelUrls);
        }
      });
      if ((_f = collectionRef.current) === null || _f === void 0 ? void 0 : _f.hasMore) {
        yield (_g2 = collectionRef.current) === null || _g2 === void 0 ? void 0 : _g2.loadMore();
        updateChannelsAndMarkAsDelivered(true);
      }
    }
  }));
  (0, import_react6.useEffect)(() => {
    return () => {
      var _a3;
      if (collectionRef.current)
        (_a3 = collectionRef.current) === null || _a3 === void 0 ? void 0 : _a3.dispose();
    };
  }, []);
  useAsyncEffect(() => __awaiter3(void 0, void 0, void 0, function* () {
    updateInitialized(false);
    if (sdk.currentUser) {
      yield init(sdk.currentUser.userId);
      updateInitialized(true);
    }
  }), [sdk, (_c = sdk.currentUser) === null || _c === void 0 ? void 0 : _c.userId]);
  useGroupChannelHandler(sdk, {
    onUserBanned: (channel, user) => {
      var _a3, _b3, _c2;
      const isMe = user.userId === ((_a3 = sdk.currentUser) === null || _a3 === void 0 ? void 0 : _a3.userId);
      if (isMe) {
        deleteChannels([channel.url]);
        (_c2 = (_b3 = internalOptions.current) === null || _b3 === void 0 ? void 0 : _b3.onChannelsDeleted) === null || _c2 === void 0 ? void 0 : _c2.call(_b3, [channel.url]);
      } else {
        updateChannelsAndMarkAsDelivered(false);
      }
    }
  });
  const refresh = usePreservedCallback(() => __awaiter3(void 0, void 0, void 0, function* () {
    if (sdk.currentUser) {
      updateRefreshing(true);
      yield init(sdk.currentUser.userId);
      updateRefreshing(false);
    }
  }));
  const loadMore = usePreservedCallback(() => __awaiter3(void 0, void 0, void 0, function* () {
    var _h, _j;
    if ((_h = collectionRef.current) === null || _h === void 0 ? void 0 : _h.hasMore) {
      yield (_j = collectionRef.current) === null || _j === void 0 ? void 0 : _j.loadMore();
      updateChannelsAndMarkAsDelivered(true);
    }
  }));
  return {
    /**
     * Initializing state, only available on first render
     * */
    initialized,
    /**
     * Get group channels state
     * */
    groupChannels,
    /**
     * Refresh, clear and reload messages from latest
     * @return {Promise<void>}
     * */
    refresh,
    /**
     * Refreshing state, status is changes when the refresh is called.
     * */
    refreshing,
    /**
     * Fetch more channels to state
     * @return {Promise<void>}
     * */
    loadMore
  };
};

// node_modules/@sendbird/uikit-tools/dist/esm/hooks/useGroupChannelMessages/index.js
var import_react9 = __toESM(require_react(), 1);

// node_modules/@sendbird/uikit-tools/dist/esm/utils/channel.js
function isDifferentChannel(a5, b6) {
  if (!a5 || !b6)
    return true;
  return a5.url !== b6.url;
}

// node_modules/@sendbird/uikit-tools/dist/esm/utils/message.js
function isSendableMessage(msg) {
  return msg !== void 0 && msg !== null && "sendingStatus" in msg;
}
function isMyMessage(msg, currentUserId = "##__USER_ID_IS_NOT_PROVIDED__##") {
  var _a2;
  if (!isSendableMessage(msg))
    return false;
  return ((_a2 = msg.sender) === null || _a2 === void 0 ? void 0 : _a2.userId) === currentUserId;
}
function isNewMessage(msg, currentUserId) {
  const myMessage = isMyMessage(msg, currentUserId);
  if (myMessage)
    return false;
  if (msg.isAdminMessage())
    return false;
  return msg.updatedAt === 0;
}
function getMessageUniqId(msg) {
  if ("sendingStatus" in msg) {
    if (msg.sendingStatus === "succeeded")
      return String(msg.messageId);
    return msg.reqId;
  }
  return String(msg.messageId);
}

// node_modules/@sendbird/uikit-tools/dist/esm/utils/validators.js
function isBoolean(val) {
  return typeof val === "boolean";
}
function isOneOf(val, values) {
  return values.includes(val);
}
function isSet(val) {
  return val instanceof Set;
}
function isNotEmptyArray(arr) {
  if (!arr || !Array.isArray(arr))
    return false;
  return arr.length !== 0;
}
function isSameType(a5, b6) {
  return Object.prototype.toString.call(a5) === Object.prototype.toString.call(b6);
}

// node_modules/@sendbird/uikit-tools/dist/esm/hooks/useForceUpdate.js
var import_react7 = __toESM(require_react(), 1);
var useForceUpdate = () => {
  const [, updater] = (0, import_react7.useState)(0);
  return (0, import_react7.useCallback)(() => updater((prev) => prev + 1), []);
};

// node_modules/@sendbird/uikit-tools/dist/esm/hooks/useGroupChannelMessages/reducer.js
var import_react8 = __toESM(require_react(), 1);

// node_modules/@sendbird/uikit-tools/dist/esm/utils/convertors.js
function snakeToCamel(obj) {
  if (typeof obj !== "object" || obj === null) {
    return obj;
  }
  if (Array.isArray(obj)) {
    return obj.map((item) => snakeToCamel(item));
  }
  const result = {};
  Object.keys(obj).forEach((key) => {
    const camelKey = key.replace(/_\w/g, (m5) => m5[1].toUpperCase());
    result[camelKey] = snakeToCamel(obj[key]);
  });
  return result;
}
function arrayToMapWithGetter(arr, getSelector) {
  return arr.reduce((accum, curr) => {
    const _key = getSelector(curr);
    accum[_key] = curr;
    return accum;
  }, {});
}

// node_modules/@sendbird/uikit-tools/dist/esm/hooks/useGroupChannelMessages/reducer.js
var __rest3 = function(s6, e3) {
  var t7 = {};
  for (var p4 in s6) if (Object.prototype.hasOwnProperty.call(s6, p4) && e3.indexOf(p4) < 0)
    t7[p4] = s6[p4];
  if (s6 != null && typeof Object.getOwnPropertySymbols === "function")
    for (var i4 = 0, p4 = Object.getOwnPropertySymbols(s6); i4 < p4.length; i4++) {
      if (e3.indexOf(p4[i4]) < 0 && Object.prototype.propertyIsEnumerable.call(s6, p4[i4]))
        t7[p4[i4]] = s6[p4[i4]];
    }
  return t7;
};
var defaultReducer2 = (_a2, action) => {
  var draft = __rest3(_a2, []);
  switch (action.type) {
    case "update_initialized": {
      draft["initialized"] = action.value.status;
      return draft;
    }
    case "update_refreshing": {
      draft["refreshing"] = action.value.status;
      return draft;
    }
    case "update_loading": {
      draft["loading"] = action.value.status;
      return draft;
    }
    case "update_messages": {
      const userId = action.value.currentUserId;
      if (action.value.clearBeforeAction) {
        draft["messageMap"] = messagesToObject(action.value.messages);
      } else {
        const nextMessages = action.value.messages.filter((next) => {
          var _a3;
          if (isMyMessage(next, userId)) {
            const prev = (_a3 = draft["messageMap"][next.reqId]) !== null && _a3 !== void 0 ? _a3 : draft["messageMap"][next.messageId];
            if (isMyMessage(prev, userId)) {
              const shouldUpdate = shouldUpdateMessage(prev, next);
              if (shouldUpdate) {
                delete draft["messageMap"][prev.reqId];
                delete draft["messageMap"][prev.messageId];
              }
              return shouldUpdate;
            }
          }
          return true;
        });
        const obj = messagesToObject(nextMessages);
        draft["messageMap"] = Object.assign(Object.assign({}, draft["messageMap"]), obj);
      }
      return draft;
    }
    case "update_new_messages": {
      const userId = action.value.currentUserId;
      const newMessages = action.value.messages.filter((it3) => isNewMessage(it3, userId));
      if (action.value.clearBeforeAction) {
        draft["newMessageMap"] = arrayToMapWithGetter(newMessages, getMessageUniqId);
      } else {
        const messageKeys = newMessages.map((it3) => it3.messageId);
        messageKeys.forEach((key) => delete draft["newMessageMap"][key]);
        draft["newMessageMap"] = Object.assign(Object.assign({}, draft["newMessageMap"]), arrayToMapWithGetter(newMessages, getMessageUniqId));
      }
      return draft;
    }
    case "delete_messages":
    case "delete_new_messages": {
      const key = action.type === "delete_messages" ? "messageMap" : "newMessageMap";
      draft[key] = Object.assign({}, draft[key]);
      action.value.messageIds.forEach((msgId) => {
        const message = draft[key][msgId];
        if (message) {
          if (isSendableMessage(message))
            delete draft[key][message.reqId];
          delete draft[key][message.messageId];
        }
      });
      action.value.reqIds.forEach((reqId) => {
        const message = draft[key][reqId];
        if (message) {
          if (isSendableMessage(message))
            delete draft[key][message.reqId];
          delete draft[key][message.messageId];
        }
      });
      return draft;
    }
  }
};
var messagesToObject = (messages) => {
  return messages.reduce((accum, curr) => {
    if (isSendableMessage(curr)) {
      accum[curr.reqId] = curr;
      if (curr.sendingStatus === W.SUCCEEDED) {
        accum[curr.messageId] = curr;
      }
    } else {
      accum[curr.messageId] = curr;
    }
    return accum;
  }, {});
};
var shouldUpdateMessage = (prev, next) => {
  if (prev.sendingStatus === W.SUCCEEDED)
    return next.sendingStatus === W.SUCCEEDED;
  return prev.sendingStatus !== next.sendingStatus;
};
var useChannelMessagesReducer = (sortComparator = defaultMessageComparator) => {
  const [{ initialized, loading, refreshing, messageMap, newMessageMap }, dispatch] = (0, import_react8.useReducer)(defaultReducer2, {
    initialized: false,
    loading: true,
    refreshing: false,
    messageMap: {},
    newMessageMap: {}
  });
  const updateMessages = (messages2, clearBeforeAction, currentUserId) => {
    dispatch({ type: "update_messages", value: { messages: messages2, clearBeforeAction, currentUserId } });
  };
  const deleteMessages = (messageIds, reqIds) => {
    dispatch({ type: "delete_messages", value: { messageIds, reqIds } });
  };
  const updateNewMessages = (messages2, clearBeforeAction, currentUserId) => {
    dispatch({ type: "update_new_messages", value: { messages: messages2, clearBeforeAction, currentUserId } });
  };
  const deleteNewMessages = (messageIds, reqIds) => {
    dispatch({ type: "delete_new_messages", value: { messageIds, reqIds } });
  };
  const updateInitialized = (status) => {
    dispatch({ type: "update_initialized", value: { status } });
  };
  const updateLoading = (status) => {
    dispatch({ type: "update_loading", value: { status } });
  };
  const updateRefreshing = (status) => {
    dispatch({ type: "update_refreshing", value: { status } });
  };
  const newMessages = Object.values(newMessageMap);
  const messages = (0, import_react8.useMemo)(() => Array.from(new Set(Object.values(messageMap))).sort(sortComparator), [messageMap]);
  return {
    updateInitialized,
    updateLoading,
    updateRefreshing,
    updateMessages,
    deleteMessages,
    initialized,
    loading,
    refreshing,
    messages,
    newMessages,
    updateNewMessages,
    deleteNewMessages
  };
};
var LARGE_OFFSET = Math.floor(Number.MAX_SAFE_INTEGER / 10);
function defaultMessageComparator(a5, b6) {
  let aStatusOffset = 0;
  let bStatusOffset = 0;
  if (isSendableMessage(a5) && a5.sendingStatus !== "succeeded")
    aStatusOffset = LARGE_OFFSET;
  if (isSendableMessage(b6) && b6.sendingStatus !== "succeeded")
    bStatusOffset = LARGE_OFFSET;
  return a5.createdAt + aStatusOffset - (b6.createdAt + bStatusOffset);
}

// node_modules/@sendbird/uikit-tools/dist/esm/hooks/useGroupChannelMessages/index.js
var __awaiter4 = function(thisArg, _arguments, P2, generator) {
  function adopt(value) {
    return value instanceof P2 ? value : new P2(function(resolve) {
      resolve(value);
    });
  }
  return new (P2 || (P2 = Promise))(function(resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e3) {
        reject(e3);
      }
    }
    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e3) {
        reject(e3);
      }
    }
    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }
    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};
var createMessageCollection = (channel, limit, options) => {
  var _a2;
  const basicParams = {
    prevResultLimit: limit.prev,
    nextResultLimit: limit.next,
    startingPoint: options === null || options === void 0 ? void 0 : options.startingPoint,
    replyType: options === null || options === void 0 ? void 0 : options.replyType
  };
  const passedCollection = (_a2 = options === null || options === void 0 ? void 0 : options.collectionCreator) === null || _a2 === void 0 ? void 0 : _a2.call(options, basicParams);
  if (passedCollection)
    return passedCollection;
  return channel.createMessageCollection(Object.assign(Object.assign({}, basicParams), { filter: new Os(basicParams) }));
};
function getCollectionLimitBy(startingPoint) {
  return startingPoint < Date.now() ? sbuConstants.collection.message.searchLimit : sbuConstants.collection.message.defaultLimit;
}
var useGroupChannelMessages = (sdk, channel, options = {}) => {
  var _a2, _b2, _c;
  const internalOptions = (0, import_react9.useRef)(options);
  internalOptions.current = options;
  const channelRef = (0, import_react9.useRef)(channel);
  channelRef.current = channel;
  const logger = internalOptions.current.logger;
  const initialStartingPoint = (_a2 = internalOptions.current.startingPoint) !== null && _a2 !== void 0 ? _a2 : Number.MAX_SAFE_INTEGER;
  const initialLimit = getCollectionLimitBy(initialStartingPoint);
  const isFetching = (0, import_react9.useRef)({ prev: false, next: false });
  const forceUpdate = useForceUpdate();
  const collectionRef = (0, import_react9.useRef)({
    initialized: false,
    apiInitialized: false,
    instance: null
  });
  const { initialized, loading, refreshing, messages, newMessages, updateMessages, updateNewMessages, deleteNewMessages, deleteMessages, updateInitialized, updateLoading, updateRefreshing } = useChannelMessagesReducer(options === null || options === void 0 ? void 0 : options.sortComparator);
  const markAsReadBySource = usePreservedCallback((source) => {
    var _a3, _b3, _c2, _d;
    if (!channelRef.current || !channelRef.current.url)
      return (_a3 = logger === null || logger === void 0 ? void 0 : logger.error) === null || _a3 === void 0 ? void 0 : _a3.call(logger, "[useGroupChannelMessages] channel is required");
    try {
      switch (source) {
        case Ks.EVENT_MESSAGE_RECEIVED:
        case Ks.EVENT_MESSAGE_SENT_SUCCESS:
        case Ks.SYNC_MESSAGE_FILL:
        case void 0:
          (_c2 = (_b3 = internalOptions.current).markAsRead) === null || _c2 === void 0 ? void 0 : _c2.call(_b3, [channelRef.current]);
          break;
      }
    } catch (e3) {
      (_d = logger === null || logger === void 0 ? void 0 : logger.warn) === null || _d === void 0 ? void 0 : _d.call(logger, "[useGroupChannelMessages/markAsReadBySource]", e3);
    }
  });
  const updateNewMessagesReceived = usePreservedCallback((source, messages2) => {
    var _a3, _b3, _c2, _d, _e3;
    const incomingMessages = messages2.filter((it3) => {
      var _a4;
      return !isMyMessage(it3, (_a4 = sdk.currentUser) === null || _a4 === void 0 ? void 0 : _a4.userId);
    });
    if (incomingMessages.length > 0) {
      switch (source) {
        case Ks.EVENT_MESSAGE_RECEIVED:
        case Ks.SYNC_MESSAGE_FILL: {
          if ((_b3 = (_a3 = internalOptions.current).shouldCountNewMessages) === null || _b3 === void 0 ? void 0 : _b3.call(_a3)) {
            updateNewMessages(incomingMessages, false, (_c2 = sdk.currentUser) === null || _c2 === void 0 ? void 0 : _c2.userId);
          }
          (_e3 = (_d = internalOptions.current).onMessagesReceived) === null || _e3 === void 0 ? void 0 : _e3.call(_d, incomingMessages);
          break;
        }
      }
    }
  });
  const init = usePreservedCallback((startingPoint, limit) => __awaiter4(void 0, void 0, void 0, function* () {
    return new Promise((resolve) => {
      var _a3, _b3;
      if (!channelRef.current || !channelRef.current.url)
        return (_a3 = logger === null || logger === void 0 ? void 0 : logger.error) === null || _a3 === void 0 ? void 0 : _a3.call(logger, "[useGroupChannelMessages] channel is required");
      if (collectionRef.current.instance)
        collectionRef.current.instance.dispose();
      markAsReadBySource();
      updateNewMessages([], true, (_b3 = sdk.currentUser) === null || _b3 === void 0 ? void 0 : _b3.userId);
      const updateUnsentMessages = () => {
        var _a4, _b4, _c2;
        const { pendingMessages, failedMessages } = (_a4 = collectionRef.current.instance) !== null && _a4 !== void 0 ? _a4 : {};
        if (isNotEmptyArray(pendingMessages))
          updateMessages(pendingMessages, false, (_b4 = sdk.currentUser) === null || _b4 === void 0 ? void 0 : _b4.userId);
        if (isNotEmptyArray(failedMessages))
          updateMessages(failedMessages, false, (_c2 = sdk.currentUser) === null || _c2 === void 0 ? void 0 : _c2.userId);
      };
      const collectionInstance = createMessageCollection(channelRef.current, limit, Object.assign(Object.assign({}, internalOptions.current), { startingPoint }));
      collectionRef.current = { apiInitialized: false, initialized: false, instance: collectionInstance };
      collectionInstance.setMessageCollectionHandler({
        onMessagesAdded: (ctx, __, messages2) => {
          var _a4;
          markAsReadBySource(ctx.source);
          updateNewMessagesReceived(ctx.source, messages2);
          updateMessages(messages2, false, (_a4 = sdk.currentUser) === null || _a4 === void 0 ? void 0 : _a4.userId);
        },
        onMessagesUpdated: (ctx, __, messages2) => {
          var _a4, _b4, _c2;
          markAsReadBySource(ctx.source);
          updateNewMessagesReceived(ctx.source, messages2);
          updateMessages(messages2, false, (_a4 = sdk.currentUser) === null || _a4 === void 0 ? void 0 : _a4.userId);
          if (ctx.source === Ks.EVENT_MESSAGE_UPDATED) {
            (_c2 = (_b4 = internalOptions.current).onMessagesUpdated) === null || _c2 === void 0 ? void 0 : _c2.call(_b4, messages2);
          }
        },
        onMessagesDeleted: (_2, __, ___, messages2) => {
          const msgIds = messages2.map((it3) => it3.messageId);
          const reqIds = messages2.filter(isSendableMessage).map((it3) => it3.reqId);
          deleteMessages(msgIds, reqIds);
          deleteNewMessages(msgIds, reqIds);
        },
        onChannelDeleted: (_2, channelUrl) => {
          var _a4, _b4;
          (_b4 = (_a4 = internalOptions.current).onChannelDeleted) === null || _b4 === void 0 ? void 0 : _b4.call(_a4, channelUrl);
        },
        onChannelUpdated: (_2, channel2) => {
          var _a4, _b4;
          forceUpdate();
          (_b4 = (_a4 = internalOptions.current).onChannelUpdated) === null || _b4 === void 0 ? void 0 : _b4.call(_a4, channel2);
        },
        onHugeGapDetected: () => {
          init(Number.MAX_SAFE_INTEGER, sbuConstants.collection.message.defaultLimit);
        }
      });
      collectionInstance.initialize(gs2.CACHE_AND_REPLACE_BY_API).onCacheResult((err, messages2) => {
        var _a4, _b4, _c2;
        if (err)
          sdk.isCacheEnabled && ((_a4 = logger === null || logger === void 0 ? void 0 : logger.error) === null || _a4 === void 0 ? void 0 : _a4.call(logger, "[useGroupChannelMessages/onCacheResult]", err));
        else if (messages2) {
          (_b4 = logger === null || logger === void 0 ? void 0 : logger.debug) === null || _b4 === void 0 ? void 0 : _b4.call(logger, "[useGroupChannelMessages/onCacheResult]", "message length:", messages2.length);
          updateMessages(messages2, true, (_c2 = sdk.currentUser) === null || _c2 === void 0 ? void 0 : _c2.userId);
          updateUnsentMessages();
          if (messages2.length > 0) {
            collectionRef.current.initialized = true;
            resolve();
          }
        }
      }).onApiResult((err, messages2) => {
        var _a4, _b4, _c2, _d, _e3;
        if (err)
          (_a4 = logger === null || logger === void 0 ? void 0 : logger.warn) === null || _a4 === void 0 ? void 0 : _a4.call(logger, "[useGroupChannelMessages/onApiResult]", err);
        else if (messages2) {
          (_b4 = logger === null || logger === void 0 ? void 0 : logger.debug) === null || _b4 === void 0 ? void 0 : _b4.call(logger, "[useGroupChannelMessages/onApiResult]", "message length:", messages2.length);
          updateMessages(messages2, true, (_c2 = sdk.currentUser) === null || _c2 === void 0 ? void 0 : _c2.userId);
          if (!internalOptions.current.startingPoint)
            (_e3 = (_d = internalOptions.current).onMessagesReceived) === null || _e3 === void 0 ? void 0 : _e3.call(_d, messages2);
          if (sdk.isCacheEnabled)
            updateUnsentMessages();
        }
        collectionRef.current.initialized = true;
        collectionRef.current.apiInitialized = true;
        resolve();
      });
    });
  }));
  useGroupChannelHandler(sdk, {
    onUserBanned(eventChannel, bannedUser) {
      var _a3, _b3, _c2;
      if (eventChannel.isGroupChannel() && !isDifferentChannel(eventChannel, channelRef.current)) {
        if (bannedUser.userId === ((_a3 = sdk.currentUser) === null || _a3 === void 0 ? void 0 : _a3.userId)) {
          (_c2 = (_b3 = internalOptions.current).onCurrentUserBanned) === null || _c2 === void 0 ? void 0 : _c2.call(_b3);
        } else {
          forceUpdate();
        }
      }
    }
  });
  (0, import_react9.useLayoutEffect)(() => {
    const timeout = setTimeout(() => __awaiter4(void 0, void 0, void 0, function* () {
      if (sdk.currentUser && channelRef.current) {
        updateInitialized(false);
        updateLoading(true);
        yield init(initialStartingPoint, initialLimit);
        updateLoading(false);
        updateInitialized(true);
      }
    }));
    return () => clearTimeout(timeout);
  }, [sdk, (_b2 = sdk.currentUser) === null || _b2 === void 0 ? void 0 : _b2.userId, (_c = channelRef.current) === null || _c === void 0 ? void 0 : _c.url, internalOptions.current.replyType]);
  (0, import_react9.useEffect)(() => {
    return () => {
      if (collectionRef.current.instance)
        collectionRef.current.instance.dispose();
    };
  }, []);
  const refresh = usePreservedCallback(() => __awaiter4(void 0, void 0, void 0, function* () {
    if (sdk.currentUser && channelRef.current) {
      updateRefreshing(true);
      yield init(Number.MAX_SAFE_INTEGER, sbuConstants.collection.message.defaultLimit);
      updateRefreshing(false);
    }
  }));
  const loadPrevious = usePreservedCallback(() => __awaiter4(void 0, void 0, void 0, function* () {
    var _d;
    const collection = collectionRef.current.instance;
    if ((collection === null || collection === void 0 ? void 0 : collection.hasPrevious) && !isFetching.current.prev) {
      try {
        isFetching.current.prev = true;
        const list = yield collection.loadPrevious();
        updateMessages(list, false, (_d = sdk.currentUser) === null || _d === void 0 ? void 0 : _d.userId);
      } catch (_e3) {
      } finally {
        isFetching.current.prev = false;
      }
    }
  }));
  const hasPrevious = usePreservedCallback(() => {
    const { initialized: initialized2, instance } = collectionRef.current;
    if (initialized2 && instance) {
      return instance.hasPrevious;
    } else {
      return false;
    }
  });
  const loadNext = usePreservedCallback(() => __awaiter4(void 0, void 0, void 0, function* () {
    var _f;
    const collection = collectionRef.current.instance;
    if ((collection === null || collection === void 0 ? void 0 : collection.hasNext) && !isFetching.current.next) {
      try {
        isFetching.current.next = true;
        const list = yield collection.loadNext();
        updateMessages(list, false, (_f = sdk.currentUser) === null || _f === void 0 ? void 0 : _f.userId);
      } catch (_g2) {
      } finally {
        isFetching.current.next = false;
      }
    }
  }));
  const hasNext = usePreservedCallback(() => {
    const { initialized: initialized2, apiInitialized, instance } = collectionRef.current;
    if (apiInitialized && initialized2 && instance) {
      return instance.hasNext;
    } else {
      return false;
    }
  });
  const sendUserMessage = usePreservedCallback((params, onPending) => {
    var _a3;
    if (!channelRef.current || !channelRef.current.url) {
      (_a3 = logger === null || logger === void 0 ? void 0 : logger.error) === null || _a3 === void 0 ? void 0 : _a3.call(logger, "[useGroupChannelMessages] channel is required");
      throw new Error("Channel is required");
    }
    return new Promise((resolve, reject) => {
      channelRef.current.sendUserMessage(params).onPending((pendingMessage) => {
        var _a4;
        if (pendingMessage.channelUrl === channelRef.current.url) {
          updateMessages([pendingMessage], false, (_a4 = sdk.currentUser) === null || _a4 === void 0 ? void 0 : _a4.userId);
        }
        onPending === null || onPending === void 0 ? void 0 : onPending(pendingMessage);
      }).onSucceeded((sentMessage) => {
        var _a4;
        if (sentMessage.channelUrl === channelRef.current.url) {
          updateMessages([sentMessage], false, (_a4 = sdk.currentUser) === null || _a4 === void 0 ? void 0 : _a4.userId);
        }
        resolve(sentMessage);
      }).onFailed((err, failedMessage) => {
        var _a4;
        if (failedMessage && failedMessage.channelUrl === channelRef.current.url) {
          updateMessages([failedMessage], false, (_a4 = sdk.currentUser) === null || _a4 === void 0 ? void 0 : _a4.userId);
        }
        reject(err);
      });
    });
  });
  const sendFileMessage = usePreservedCallback((params, onPending) => {
    var _a3;
    if (!channelRef.current || !channelRef.current.url) {
      (_a3 = logger === null || logger === void 0 ? void 0 : logger.error) === null || _a3 === void 0 ? void 0 : _a3.call(logger, "[useGroupChannelMessages] channel is required");
      throw new Error("Channel is required");
    }
    return new Promise((resolve, reject) => {
      channelRef.current.sendFileMessage(params).onPending((pendingMessage) => {
        var _a4;
        if (pendingMessage.channelUrl === channelRef.current.url) {
          updateMessages([pendingMessage], false, (_a4 = sdk.currentUser) === null || _a4 === void 0 ? void 0 : _a4.userId);
        }
        onPending === null || onPending === void 0 ? void 0 : onPending(pendingMessage);
      }).onSucceeded((sentMessage) => {
        var _a4;
        if (sentMessage.channelUrl === channelRef.current.url) {
          updateMessages([sentMessage], false, (_a4 = sdk.currentUser) === null || _a4 === void 0 ? void 0 : _a4.userId);
        }
        resolve(sentMessage);
      }).onFailed((err, failedMessage) => {
        var _a4;
        if (failedMessage && failedMessage.channelUrl === channelRef.current.url) {
          updateMessages([failedMessage], false, (_a4 = sdk.currentUser) === null || _a4 === void 0 ? void 0 : _a4.userId);
        }
        reject(err);
      });
    });
  });
  const sendFileMessages = usePreservedCallback((paramsList, onPending) => __awaiter4(void 0, void 0, void 0, function* () {
    var _h;
    if (!channelRef.current || !channelRef.current.url) {
      (_h = logger === null || logger === void 0 ? void 0 : logger.error) === null || _h === void 0 ? void 0 : _h.call(logger, "[useGroupChannelMessages] channel is required");
      throw new Error("Channel is required");
    }
    return new Promise((resolve) => {
      const messages2 = [];
      channelRef.current.sendFileMessages(paramsList).onPending((pendingMessage) => {
        var _a3;
        if (pendingMessage.channelUrl === channelRef.current.url) {
          updateMessages([pendingMessage], false, (_a3 = sdk.currentUser) === null || _a3 === void 0 ? void 0 : _a3.userId);
        }
        onPending === null || onPending === void 0 ? void 0 : onPending(pendingMessage);
      }).onSucceeded((sentMessage) => {
        var _a3;
        if (sentMessage.isFileMessage() && sentMessage.channelUrl === channelRef.current.url) {
          updateMessages([sentMessage], false, (_a3 = sdk.currentUser) === null || _a3 === void 0 ? void 0 : _a3.userId);
          messages2.push(sentMessage);
        }
        if (messages2.length === paramsList.length)
          resolve(messages2);
      }).onFailed((_2, failedMessage) => {
        var _a3;
        if (failedMessage && failedMessage.channelUrl === channelRef.current.url) {
          updateMessages([failedMessage], false, (_a3 = sdk.currentUser) === null || _a3 === void 0 ? void 0 : _a3.userId);
          messages2.push(failedMessage);
        } else {
          messages2.push(null);
        }
        if (messages2.length === paramsList.length)
          resolve(messages2);
      });
    });
  }));
  const sendMultipleFilesMessage = usePreservedCallback((params, onPending) => {
    var _a3;
    if (!channelRef.current || !channelRef.current.url) {
      (_a3 = logger === null || logger === void 0 ? void 0 : logger.error) === null || _a3 === void 0 ? void 0 : _a3.call(logger, "[useGroupChannelMessages] channel is required");
      throw new Error("Channel is required");
    }
    return new Promise((resolve, reject) => {
      channelRef.current.sendMultipleFilesMessage(params).onPending((pendingMessage) => {
        var _a4;
        if (pendingMessage.channelUrl === channelRef.current.url) {
          updateMessages([pendingMessage], false, (_a4 = sdk.currentUser) === null || _a4 === void 0 ? void 0 : _a4.userId);
        }
        onPending === null || onPending === void 0 ? void 0 : onPending(pendingMessage);
      }).onFileUploaded(() => {
        forceUpdate();
      }).onSucceeded((sentMessage) => {
        var _a4;
        if (sentMessage.channelUrl === channelRef.current.url) {
          updateMessages([sentMessage], false, (_a4 = sdk.currentUser) === null || _a4 === void 0 ? void 0 : _a4.userId);
        }
        resolve(sentMessage);
      }).onFailed((err, failedMessage) => {
        var _a4;
        if (failedMessage && failedMessage.channelUrl === channelRef.current.url) {
          updateMessages([failedMessage], false, (_a4 = sdk.currentUser) === null || _a4 === void 0 ? void 0 : _a4.userId);
        }
        reject(err);
      });
    });
  });
  const updateUserMessage = usePreservedCallback((messageId, params) => __awaiter4(void 0, void 0, void 0, function* () {
    var _j, _k;
    if (!channelRef.current || !channelRef.current.url) {
      (_j = logger === null || logger === void 0 ? void 0 : logger.error) === null || _j === void 0 ? void 0 : _j.call(logger, "[useGroupChannelMessages] channel is required");
      throw new Error("Channel is required");
    }
    const updatedMessage = yield channelRef.current.updateUserMessage(messageId, params);
    if (updatedMessage.channelUrl === channelRef.current.url) {
      updateMessages([updatedMessage], false, (_k = sdk.currentUser) === null || _k === void 0 ? void 0 : _k.userId);
    }
    return updatedMessage;
  }));
  const updateFileMessage = usePreservedCallback((messageId, params) => __awaiter4(void 0, void 0, void 0, function* () {
    var _l, _m;
    if (!channelRef.current || !channelRef.current.url) {
      (_l = logger === null || logger === void 0 ? void 0 : logger.error) === null || _l === void 0 ? void 0 : _l.call(logger, "[useGroupChannelMessages] channel is required");
      throw new Error("Channel is required");
    }
    const updatedMessage = yield channelRef.current.updateFileMessage(messageId, params);
    if (updatedMessage.channelUrl === channelRef.current.url) {
      updateMessages([updatedMessage], false, (_m = sdk.currentUser) === null || _m === void 0 ? void 0 : _m.userId);
    }
    return updatedMessage;
  }));
  const resendMessage = usePreservedCallback((failedMessage) => __awaiter4(void 0, void 0, void 0, function* () {
    var _o2;
    if (!channelRef.current || !channelRef.current.url) {
      (_o2 = logger === null || logger === void 0 ? void 0 : logger.error) === null || _o2 === void 0 ? void 0 : _o2.call(logger, "[useGroupChannelMessages] channel is required");
      throw new Error("Channel is required");
    }
    return new Promise((resolve, reject) => {
      let handler = void 0;
      if (failedMessage.isUserMessage())
        handler = channelRef.current.resendMessage(failedMessage);
      if (failedMessage.isFileMessage())
        handler = channelRef.current.resendMessage(failedMessage);
      if (failedMessage.isMultipleFilesMessage())
        handler = channelRef.current.resendMessage(failedMessage);
      if (handler) {
        if ("onPending" in handler) {
          handler.onPending((message) => {
            var _a3;
            if (message.channelUrl === channelRef.current.url) {
              updateMessages([message], false, (_a3 = sdk.currentUser) === null || _a3 === void 0 ? void 0 : _a3.userId);
            }
          });
        }
        if ("onFileUploaded" in handler) {
          handler.onFileUploaded(() => {
            forceUpdate();
          });
        }
        if ("onSucceeded" in handler) {
          handler.onSucceeded((message) => {
            var _a3;
            if (message.channelUrl === channelRef.current.url) {
              updateMessages([message], false, (_a3 = sdk.currentUser) === null || _a3 === void 0 ? void 0 : _a3.userId);
            }
            resolve(message);
          });
        }
        if ("onFailed" in handler) {
          handler.onFailed((err, message) => {
            var _a3;
            if (message && message.channelUrl === channelRef.current.url) {
              updateMessages([message], false, (_a3 = sdk.currentUser) === null || _a3 === void 0 ? void 0 : _a3.userId);
            }
            reject(err);
          });
        }
      }
    });
  }));
  const deleteMessage = usePreservedCallback((message) => __awaiter4(void 0, void 0, void 0, function* () {
    var _p, _q;
    if (!channelRef.current || !channelRef.current.url) {
      (_p = logger === null || logger === void 0 ? void 0 : logger.error) === null || _p === void 0 ? void 0 : _p.call(logger, "[useGroupChannelMessages] channel is required");
      throw new Error("Channel is required");
    }
    if (message.sendingStatus === "succeeded") {
      if (message.isUserMessage())
        yield channelRef.current.deleteMessage(message);
      if (message.isFileMessage())
        yield channelRef.current.deleteMessage(message);
      if (message.isMultipleFilesMessage())
        yield channelRef.current.deleteMessage(message);
    } else {
      try {
        yield (_q = collectionRef.current.instance) === null || _q === void 0 ? void 0 : _q.removeFailedMessage(message.reqId);
      } finally {
        deleteMessages([message.messageId], [message.reqId]);
      }
    }
  }));
  const resetNewMessages = usePreservedCallback(() => {
    var _a3;
    updateNewMessages([], true, (_a3 = sdk.currentUser) === null || _a3 === void 0 ? void 0 : _a3.userId);
  });
  const resetWithStartingPoint = usePreservedCallback((startingPoint) => __awaiter4(void 0, void 0, void 0, function* () {
    var _r2;
    if (sdk.currentUser && channelRef.current) {
      const limit = getCollectionLimitBy(startingPoint);
      updateLoading(true);
      updateMessages([], true, (_r2 = sdk.currentUser) === null || _r2 === void 0 ? void 0 : _r2.userId);
      yield init(startingPoint, limit);
      updateLoading(false);
    }
  }));
  return {
    /**
     * Initialized state, only available on first render
     * */
    initialized,
    /**
     * Loading state, status is changes on first mount or when the resetWithStartingPoint is called.
     * */
    loading,
    /**
     * Refreshing state, status is changes when the refresh is called.
     * */
    refreshing,
    /**
     * Get messages, this state is for render
     * For example, if a user receives a new messages while searching for an old message
     * for this case, new messages will be included here.
     * */
    messages,
    /**
     * If the `shouldCountNewMessages()` is true, only then push in the newMessages state.
     * (Return false for the `shouldCountNewMessages()` if the message scroll is the most recent; otherwise, return true.)
     *
     * A new message means a message that meets the below conditions
     * - Not admin message
     * - Not updated message
     * - Not current user's message
     * */
    newMessages,
    /**
     * Reset new message list
     * @return {void}
     * */
    resetNewMessages,
    /**
     * Reset message list and create a new collection for latest messages
     * @return {Promise<void>}
     * */
    refresh,
    /**
     * Load previous messages to state
     * @return {Promise<void>}
     * */
    loadPrevious,
    /**
     * Check if there are more previous messages to fetch
     * @return {boolean}
     * */
    hasPrevious,
    /**
     * Load next messages to state
     * @return {Promise<void>}
     * */
    loadNext,
    /**
     * Check if there are more next messages to fetch
     * @return {boolean}
     * */
    hasNext,
    /**
     * Send user message
     * @param {UserMessageCreateParams} params user message create params
     * @param {function} [onPending] pending message callback
     * @return {Promise<UserMessage>} succeeded message
     * */
    sendUserMessage,
    /**
     * Send file message
     * @param {FileMessageCreateParams} params file message create params
     * @param {function} [onPending] pending message callback
     * @return {Promise<FileMessage>} succeeded message
     * */
    sendFileMessage,
    /**
     * Send file messages
     * @param {FileMessageCreateParams[]} paramList file message create params
     * @param {function} [onPending] pending message callback for each message request
     * @return {Promise<FileMessage[]>} succeeded or failed message
     * */
    sendFileMessages,
    /**
     * Send multiple files message
     * @param {MultipleFilesMessageCreateParams} params multiple files message create params
     * @param {function} [onPending] pending message callback
     * @return {Promise<MultipleFilesMessage>} succeeded message
     * */
    sendMultipleFilesMessage,
    /**
     * Update user message
     * @param {number} messageId
     * @param {UserMessageUpdateParams} params user message update params
     * @return {Promise<UserMessage>}
     * */
    updateUserMessage,
    /**
     * Update file message
     * @param {number} messageId
     * @param {FileMessageUpdateParams} params file message update params
     * @return {Promise<FileMessage>}
     * */
    updateFileMessage,
    /**
     * Resend failed message
     * @template {UserMessage | FileMessage | MultipleFilesMessage} T
     * @param {T} failedMessage message to resend
     * @return {Promise<T>}
     * */
    resendMessage,
    /**
     * Delete a message
     * @template {UserMessage | FileMessage | MultipleFilesMessage} T
     * @param {T} message succeeded or failed message
     * @return {Promise<void>}
     * */
    deleteMessage,
    /**
     * Reset message list and create a new collection with starting point
     * @param {number} startingPoint
     * @param {function} callback
     * @return {void}
     * */
    resetWithStartingPoint,
    /**
     * Do not use this api
     * */
    _dangerous_reducer_updateMessages: updateMessages,
    /**
     * Do not use this api
     * */
    _dangerous_reducer_deleteMessages: deleteMessages
  };
};

// node_modules/@sendbird/uikit-tools/dist/esm/hooks/useGroupChannelThreadMessages/index.js
var import_react11 = __toESM(require_react(), 1);

// node_modules/@sendbird/uikit-tools/dist/esm/hooks/useGroupChannelThreadMessages/reducer.js
var import_react10 = __toESM(require_react(), 1);
var LARGE_OFFSET2 = Math.floor(Number.MAX_SAFE_INTEGER / 10);

// node_modules/@sendbird/uikit-tools/dist/esm/hooks/useIIFE.js
var useIIFE = (callback) => {
  return iife2(callback);
};
var iife2 = (callback) => callback();

// node_modules/@sendbird/uikit-tools/dist/esm/utils/mergeObject.js
function mergeObject(target, subset) {
  const object = Object.assign({}, target);
  Object.keys(subset).forEach((key) => {
    if (Object.prototype.hasOwnProperty.call(object, key) && isSameType(object[key], subset[key])) {
      if (typeof subset[key] === "object" && !Array.isArray(subset[key])) {
        object[key] = mergeObject(object[key], subset[key]);
      } else {
        object[key] = subset[key];
      }
    }
  });
  return object;
}

// node_modules/@sendbird/uikit-tools/dist/esm/uikitConfiguration/internal/initialConfig.js
var createInitialConfig = () => ({
  common: {
    enableUsingDefaultUserProfile: false
  },
  groupChannel: {
    channel: {
      enableMention: false,
      enableOgtag: true,
      enableReactions: true,
      enableReactionsSupergroup: false,
      enableTypingIndicator: true,
      enableVoiceMessage: false,
      input: {
        camera: {
          enablePhoto: true,
          enableVideo: true
        },
        enableDocument: true,
        gallery: {
          enablePhoto: true,
          enableVideo: true
        }
      },
      replyType: "quote_reply",
      threadReplySelectType: "thread",
      typingIndicatorTypes: /* @__PURE__ */ new Set(["text"]),
      enableFeedback: false,
      enableSuggestedReplies: false,
      showSuggestedRepliesFor: "last_message_only",
      suggestedRepliesDirection: "vertical",
      enableMarkdownForUserMessage: false
    },
    channelList: {
      enableMessageReceiptStatus: false,
      enableTypingIndicator: false
    },
    setting: {
      enableMessageSearch: false
    }
  },
  openChannel: {
    channel: {
      enableOgtag: true,
      input: {
        camera: {
          enablePhoto: true,
          enableVideo: true
        },
        enableDocument: true,
        gallery: {
          enablePhoto: true,
          enableVideo: true
        }
      }
    }
  }
});
function deleteLocalConfigs(config) {
  delete config.groupChannel.channel.typingIndicatorTypes;
  delete config.groupChannel.channel.enableFeedback;
  delete config.groupChannel.channel.enableSuggestedReplies;
  delete config.groupChannel.channel.showSuggestedRepliesFor;
  delete config.groupChannel.channel.suggestedRepliesDirection;
  delete config.groupChannel.channel.enableMarkdownForUserMessage;
  return config;
}
var createInitialRemoteConfig = () => {
  const config = createInitialConfig();
  return deleteLocalConfigs(config);
};
var initialConfig = createInitialConfig();
var initialRemoteConfig = createInitialRemoteConfig();

// node_modules/@sendbird/uikit-tools/dist/esm/uikitConfiguration/internal/configManager.js
var __awaiter5 = function(thisArg, _arguments, P2, generator) {
  function adopt(value) {
    return value instanceof P2 ? value : new P2(function(resolve) {
      resolve(value);
    });
  }
  return new (P2 || (P2 = Promise))(function(resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e3) {
        reject(e3);
      }
    }
    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e3) {
        reject(e3);
      }
    }
    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }
    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};
var MemoryStorage = {
  items: {},
  getItem(key) {
    var _a2;
    return __awaiter5(this, void 0, void 0, function* () {
      return (_a2 = MemoryStorage.items[key]) !== null && _a2 !== void 0 ? _a2 : null;
    });
  },
  setItem(key, value) {
    return __awaiter5(this, void 0, void 0, function* () {
      MemoryStorage.items[key] = value;
    });
  }
};
var UIKitConfigManager = class {
  constructor(storage) {
    this.storage = storage !== null && storage !== void 0 ? storage : MemoryStorage;
  }
  init(appId) {
    this.key = `sbu@${appId}.uikitConfiguration`;
    return this.get();
  }
  get safeKey() {
    if (!this.key)
      throw new Error("Please UIKitConfigManager.init() first");
    return this.key;
  }
  update(remoteConfigPayload) {
    return __awaiter5(this, void 0, void 0, function* () {
      const storedConfigPayload = yield this.get();
      const mergedConfigPayload = {
        updatedAt: remoteConfigPayload.updatedAt,
        configuration: mergeObject(storedConfigPayload.configuration, remoteConfigPayload.configuration)
      };
      yield this.storage.setItem(this.safeKey, JSON.stringify(mergedConfigPayload));
      return mergedConfigPayload;
    });
  }
  get() {
    return __awaiter5(this, void 0, void 0, function* () {
      const initialPayload = {
        updatedAt: 0,
        configuration: initialRemoteConfig
      };
      try {
        const storedConfig = yield this.storage.getItem(this.safeKey);
        if (storedConfig) {
          return JSON.parse(storedConfig);
        } else {
          return initialPayload;
        }
      } catch (_a2) {
        return initialPayload;
      }
    });
  }
};

// node_modules/@sendbird/uikit-tools/dist/esm/uikitConfiguration/internal/updators/updateCommonConfigs.js
function updateCommonConfigs(target, local, remote) {
  var _a2, _b2;
  if (remote.common && isBoolean((_a2 = remote.common) === null || _a2 === void 0 ? void 0 : _a2.enableUsingDefaultUserProfile)) {
    target.enableUsingDefaultUserProfile = remote.common.enableUsingDefaultUserProfile;
  }
  if (local.common && isBoolean((_b2 = local.common) === null || _b2 === void 0 ? void 0 : _b2.enableUsingDefaultUserProfile)) {
    target.enableUsingDefaultUserProfile = local.common.enableUsingDefaultUserProfile;
  }
}

// node_modules/@sendbird/uikit-tools/dist/esm/uikitConfiguration/internal/updators/updateGroupChannelConfigs.js
function updateGroupChannelConfigs(target, local, remote) {
  updateChannelConfig(target, local, remote);
  updateChannelInputConfig(target, local, remote);
  updateChannelListConfig(target, local, remote);
  updateChannelSettingConfig(target, local, remote);
}
function updateChannelConfig(target, local, remote) {
  var _a2, _b2, _c, _d, _e3, _f, _g2, _h, _j, _k, _l, _m, _o2, _p, _q, _r2, _s4, _t3, _u, _v, _w, _x, _y, _z, _0, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12, _13, _14, _15, _16, _17, _18, _19, _20, _21, _22, _23, _24, _25, _26, _27, _28, _29, _30, _31, _32, _33, _34, _35, _36, _37, _38, _39, _40, _41, _42, _43, _44, _45, _46, _47, _48, _49, _50, _51, _52, _53, _54, _55, _56, _57, _58, _59, _60, _61, _62, _63, _64, _65, _66, _67, _68, _69, _70, _71, _72, _73, _74, _75, _76, _77, _78, _79, _80, _81;
  if (((_a2 = remote.groupChannel) === null || _a2 === void 0 ? void 0 : _a2.channel) && isBoolean((_c = (_b2 = remote.groupChannel) === null || _b2 === void 0 ? void 0 : _b2.channel) === null || _c === void 0 ? void 0 : _c.enableOgtag)) {
    target.channel.enableOgtag = remote.groupChannel.channel.enableOgtag;
  }
  if (((_d = local.groupChannel) === null || _d === void 0 ? void 0 : _d.channel) && isBoolean((_f = (_e3 = local.groupChannel) === null || _e3 === void 0 ? void 0 : _e3.channel) === null || _f === void 0 ? void 0 : _f.enableOgtag)) {
    target.channel.enableOgtag = (_h = (_g2 = local.groupChannel) === null || _g2 === void 0 ? void 0 : _g2.channel) === null || _h === void 0 ? void 0 : _h.enableOgtag;
  }
  if (((_j = remote.groupChannel) === null || _j === void 0 ? void 0 : _j.channel) && isBoolean((_l = (_k = remote.groupChannel) === null || _k === void 0 ? void 0 : _k.channel) === null || _l === void 0 ? void 0 : _l.enableTypingIndicator)) {
    target.channel.enableTypingIndicator = (_o2 = (_m = remote.groupChannel) === null || _m === void 0 ? void 0 : _m.channel) === null || _o2 === void 0 ? void 0 : _o2.enableTypingIndicator;
  }
  if (((_p = local.groupChannel) === null || _p === void 0 ? void 0 : _p.channel) && isBoolean((_r2 = (_q = local.groupChannel) === null || _q === void 0 ? void 0 : _q.channel) === null || _r2 === void 0 ? void 0 : _r2.enableTypingIndicator)) {
    target.channel.enableTypingIndicator = (_t3 = (_s4 = local.groupChannel) === null || _s4 === void 0 ? void 0 : _s4.channel) === null || _t3 === void 0 ? void 0 : _t3.enableTypingIndicator;
  }
  if (((_u = remote.groupChannel) === null || _u === void 0 ? void 0 : _u.channel) && isBoolean((_w = (_v = remote.groupChannel) === null || _v === void 0 ? void 0 : _v.channel) === null || _w === void 0 ? void 0 : _w.enableReactions)) {
    target.channel.enableReactions = (_y = (_x = remote.groupChannel) === null || _x === void 0 ? void 0 : _x.channel) === null || _y === void 0 ? void 0 : _y.enableReactions;
  }
  if (((_z = local.groupChannel) === null || _z === void 0 ? void 0 : _z.channel) && isBoolean((_1 = (_0 = local.groupChannel) === null || _0 === void 0 ? void 0 : _0.channel) === null || _1 === void 0 ? void 0 : _1.enableReactions)) {
    target.channel.enableReactions = (_3 = (_2 = local.groupChannel) === null || _2 === void 0 ? void 0 : _2.channel) === null || _3 === void 0 ? void 0 : _3.enableReactions;
  }
  if (((_4 = remote.groupChannel) === null || _4 === void 0 ? void 0 : _4.channel) && isBoolean((_6 = (_5 = remote.groupChannel) === null || _5 === void 0 ? void 0 : _5.channel) === null || _6 === void 0 ? void 0 : _6.enableReactionsSupergroup)) {
    target.channel.enableReactionsSupergroup = (_8 = (_7 = remote.groupChannel) === null || _7 === void 0 ? void 0 : _7.channel) === null || _8 === void 0 ? void 0 : _8.enableReactionsSupergroup;
  }
  if (((_9 = local.groupChannel) === null || _9 === void 0 ? void 0 : _9.channel) && isBoolean((_11 = (_10 = local.groupChannel) === null || _10 === void 0 ? void 0 : _10.channel) === null || _11 === void 0 ? void 0 : _11.enableReactionsSupergroup)) {
    console.warn("Currently, EnableReactionsSupergroup feature is turned off by default. If you wish to use this feature, contact us: https://dashboard.sendbird.com/settings/contact_us?category=feedback_and_feature_requests&product=UIKit");
  }
  if (((_12 = remote.groupChannel) === null || _12 === void 0 ? void 0 : _12.channel) && isBoolean((_14 = (_13 = remote.groupChannel) === null || _13 === void 0 ? void 0 : _13.channel) === null || _14 === void 0 ? void 0 : _14.enableMention)) {
    target.channel.enableMention = (_16 = (_15 = remote.groupChannel) === null || _15 === void 0 ? void 0 : _15.channel) === null || _16 === void 0 ? void 0 : _16.enableMention;
  }
  if (((_17 = local.groupChannel) === null || _17 === void 0 ? void 0 : _17.channel) && isBoolean((_19 = (_18 = local.groupChannel) === null || _18 === void 0 ? void 0 : _18.channel) === null || _19 === void 0 ? void 0 : _19.enableMention)) {
    target.channel.enableMention = (_21 = (_20 = local.groupChannel) === null || _20 === void 0 ? void 0 : _20.channel) === null || _21 === void 0 ? void 0 : _21.enableMention;
  }
  if (((_22 = remote.groupChannel) === null || _22 === void 0 ? void 0 : _22.channel) && isOneOf((_24 = (_23 = remote.groupChannel) === null || _23 === void 0 ? void 0 : _23.channel) === null || _24 === void 0 ? void 0 : _24.replyType, ["none", "quote_reply", "thread"])) {
    target.channel.replyType = (_26 = (_25 = remote.groupChannel) === null || _25 === void 0 ? void 0 : _25.channel) === null || _26 === void 0 ? void 0 : _26.replyType;
  }
  if (((_27 = local.groupChannel) === null || _27 === void 0 ? void 0 : _27.channel) && isOneOf((_29 = (_28 = local.groupChannel) === null || _28 === void 0 ? void 0 : _28.channel) === null || _29 === void 0 ? void 0 : _29.replyType, ["none", "quote_reply", "thread"])) {
    target.channel.replyType = (_31 = (_30 = local.groupChannel) === null || _30 === void 0 ? void 0 : _30.channel) === null || _31 === void 0 ? void 0 : _31.replyType;
  }
  if (((_32 = remote.groupChannel) === null || _32 === void 0 ? void 0 : _32.channel) && isOneOf((_34 = (_33 = remote.groupChannel) === null || _33 === void 0 ? void 0 : _33.channel) === null || _34 === void 0 ? void 0 : _34.threadReplySelectType, ["thread", "parent"])) {
    target.channel.threadReplySelectType = (_36 = (_35 = remote.groupChannel) === null || _35 === void 0 ? void 0 : _35.channel) === null || _36 === void 0 ? void 0 : _36.threadReplySelectType;
  }
  if (((_37 = local.groupChannel) === null || _37 === void 0 ? void 0 : _37.channel) && isOneOf((_39 = (_38 = local.groupChannel) === null || _38 === void 0 ? void 0 : _38.channel) === null || _39 === void 0 ? void 0 : _39.threadReplySelectType, ["thread", "parent"])) {
    target.channel.threadReplySelectType = (_41 = (_40 = local.groupChannel) === null || _40 === void 0 ? void 0 : _40.channel) === null || _41 === void 0 ? void 0 : _41.threadReplySelectType;
  }
  if (((_42 = remote.groupChannel) === null || _42 === void 0 ? void 0 : _42.channel) && isBoolean((_44 = (_43 = remote.groupChannel) === null || _43 === void 0 ? void 0 : _43.channel) === null || _44 === void 0 ? void 0 : _44.enableVoiceMessage)) {
    target.channel.enableVoiceMessage = (_46 = (_45 = remote.groupChannel) === null || _45 === void 0 ? void 0 : _45.channel) === null || _46 === void 0 ? void 0 : _46.enableVoiceMessage;
  }
  if (((_47 = local.groupChannel) === null || _47 === void 0 ? void 0 : _47.channel) && isBoolean((_49 = (_48 = local.groupChannel) === null || _48 === void 0 ? void 0 : _48.channel) === null || _49 === void 0 ? void 0 : _49.enableVoiceMessage)) {
    target.channel.enableVoiceMessage = (_51 = (_50 = local.groupChannel) === null || _50 === void 0 ? void 0 : _50.channel) === null || _51 === void 0 ? void 0 : _51.enableVoiceMessage;
  }
  if (((_52 = local.groupChannel) === null || _52 === void 0 ? void 0 : _52.channel) && isSet((_54 = (_53 = local.groupChannel) === null || _53 === void 0 ? void 0 : _53.channel) === null || _54 === void 0 ? void 0 : _54.typingIndicatorTypes)) {
    target.channel.typingIndicatorTypes = (_56 = (_55 = local.groupChannel) === null || _55 === void 0 ? void 0 : _55.channel) === null || _56 === void 0 ? void 0 : _56.typingIndicatorTypes;
  }
  if (((_57 = local.groupChannel) === null || _57 === void 0 ? void 0 : _57.channel) && isBoolean((_59 = (_58 = local.groupChannel) === null || _58 === void 0 ? void 0 : _58.channel) === null || _59 === void 0 ? void 0 : _59.enableFeedback)) {
    target.channel.enableFeedback = (_61 = (_60 = local.groupChannel) === null || _60 === void 0 ? void 0 : _60.channel) === null || _61 === void 0 ? void 0 : _61.enableFeedback;
  }
  if (((_62 = local.groupChannel) === null || _62 === void 0 ? void 0 : _62.channel) && isBoolean((_64 = (_63 = local.groupChannel) === null || _63 === void 0 ? void 0 : _63.channel) === null || _64 === void 0 ? void 0 : _64.enableSuggestedReplies)) {
    target.channel.enableSuggestedReplies = (_66 = (_65 = local.groupChannel) === null || _65 === void 0 ? void 0 : _65.channel) === null || _66 === void 0 ? void 0 : _66.enableSuggestedReplies;
  }
  if (((_67 = local.groupChannel) === null || _67 === void 0 ? void 0 : _67.channel) && isOneOf((_69 = (_68 = local.groupChannel) === null || _68 === void 0 ? void 0 : _68.channel) === null || _69 === void 0 ? void 0 : _69.showSuggestedRepliesFor, ["all_messages", "last_message_only"])) {
    target.channel.showSuggestedRepliesFor = (_71 = (_70 = local.groupChannel) === null || _70 === void 0 ? void 0 : _70.channel) === null || _71 === void 0 ? void 0 : _71.showSuggestedRepliesFor;
  }
  if (((_72 = local.groupChannel) === null || _72 === void 0 ? void 0 : _72.channel) && isOneOf((_74 = (_73 = local.groupChannel) === null || _73 === void 0 ? void 0 : _73.channel) === null || _74 === void 0 ? void 0 : _74.suggestedRepliesDirection, ["vertical", "horizontal"])) {
    target.channel.suggestedRepliesDirection = (_76 = (_75 = local.groupChannel) === null || _75 === void 0 ? void 0 : _75.channel) === null || _76 === void 0 ? void 0 : _76.suggestedRepliesDirection;
  }
  if (((_77 = local.groupChannel) === null || _77 === void 0 ? void 0 : _77.channel) && isBoolean((_79 = (_78 = local.groupChannel) === null || _78 === void 0 ? void 0 : _78.channel) === null || _79 === void 0 ? void 0 : _79.enableMarkdownForUserMessage)) {
    target.channel.enableMarkdownForUserMessage = (_81 = (_80 = local.groupChannel) === null || _80 === void 0 ? void 0 : _80.channel) === null || _81 === void 0 ? void 0 : _81.enableMarkdownForUserMessage;
  }
}
function updateChannelInputConfig(target, local, remote) {
  var _a2, _b2, _c, _d, _e3, _f, _g2, _h, _j, _k, _l, _m, _o2, _p, _q, _r2, _s4, _t3, _u, _v, _w, _x, _y, _z, _0, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12, _13, _14, _15, _16, _17, _18, _19, _20, _21, _22, _23, _24, _25, _26, _27, _28, _29, _30, _31, _32, _33, _34, _35, _36, _37, _38, _39, _40, _41, _42, _43, _44, _45, _46, _47, _48, _49, _50, _51, _52, _53, _54, _55, _56, _57, _58, _59, _60, _61, _62, _63, _64, _65, _66, _67, _68, _69, _70, _71, _72, _73, _74, _75, _76, _77, _78, _79;
  if (((_b2 = (_a2 = remote.groupChannel) === null || _a2 === void 0 ? void 0 : _a2.channel) === null || _b2 === void 0 ? void 0 : _b2.input) && isBoolean((_e3 = (_d = (_c = remote.groupChannel) === null || _c === void 0 ? void 0 : _c.channel) === null || _d === void 0 ? void 0 : _d.input) === null || _e3 === void 0 ? void 0 : _e3.enableDocument)) {
    target.channel.input.enableDocument = (_h = (_g2 = (_f = remote.groupChannel) === null || _f === void 0 ? void 0 : _f.channel) === null || _g2 === void 0 ? void 0 : _g2.input) === null || _h === void 0 ? void 0 : _h.enableDocument;
  }
  if (((_k = (_j = local.groupChannel) === null || _j === void 0 ? void 0 : _j.channel) === null || _k === void 0 ? void 0 : _k.input) && isBoolean((_o2 = (_m = (_l = local.groupChannel) === null || _l === void 0 ? void 0 : _l.channel) === null || _m === void 0 ? void 0 : _m.input) === null || _o2 === void 0 ? void 0 : _o2.enableDocument)) {
    target.channel.input.enableDocument = (_r2 = (_q = (_p = local.groupChannel) === null || _p === void 0 ? void 0 : _p.channel) === null || _q === void 0 ? void 0 : _q.input) === null || _r2 === void 0 ? void 0 : _r2.enableDocument;
  }
  if (((_u = (_t3 = (_s4 = remote.groupChannel) === null || _s4 === void 0 ? void 0 : _s4.channel) === null || _t3 === void 0 ? void 0 : _t3.input) === null || _u === void 0 ? void 0 : _u.camera) && isBoolean((_y = (_x = (_w = (_v = remote.groupChannel) === null || _v === void 0 ? void 0 : _v.channel) === null || _w === void 0 ? void 0 : _w.input) === null || _x === void 0 ? void 0 : _x.camera) === null || _y === void 0 ? void 0 : _y.enablePhoto)) {
    target.channel.input.camera.enablePhoto = (_2 = (_1 = (_0 = (_z = remote.groupChannel) === null || _z === void 0 ? void 0 : _z.channel) === null || _0 === void 0 ? void 0 : _0.input) === null || _1 === void 0 ? void 0 : _1.camera) === null || _2 === void 0 ? void 0 : _2.enablePhoto;
  }
  if (((_5 = (_4 = (_3 = local.groupChannel) === null || _3 === void 0 ? void 0 : _3.channel) === null || _4 === void 0 ? void 0 : _4.input) === null || _5 === void 0 ? void 0 : _5.camera) && isBoolean((_9 = (_8 = (_7 = (_6 = local.groupChannel) === null || _6 === void 0 ? void 0 : _6.channel) === null || _7 === void 0 ? void 0 : _7.input) === null || _8 === void 0 ? void 0 : _8.camera) === null || _9 === void 0 ? void 0 : _9.enablePhoto)) {
    target.channel.input.camera.enablePhoto = (_13 = (_12 = (_11 = (_10 = local.groupChannel) === null || _10 === void 0 ? void 0 : _10.channel) === null || _11 === void 0 ? void 0 : _11.input) === null || _12 === void 0 ? void 0 : _12.camera) === null || _13 === void 0 ? void 0 : _13.enablePhoto;
  }
  if (((_16 = (_15 = (_14 = remote.groupChannel) === null || _14 === void 0 ? void 0 : _14.channel) === null || _15 === void 0 ? void 0 : _15.input) === null || _16 === void 0 ? void 0 : _16.camera) && isBoolean((_20 = (_19 = (_18 = (_17 = remote.groupChannel) === null || _17 === void 0 ? void 0 : _17.channel) === null || _18 === void 0 ? void 0 : _18.input) === null || _19 === void 0 ? void 0 : _19.camera) === null || _20 === void 0 ? void 0 : _20.enableVideo)) {
    target.channel.input.camera.enableVideo = (_24 = (_23 = (_22 = (_21 = remote.groupChannel) === null || _21 === void 0 ? void 0 : _21.channel) === null || _22 === void 0 ? void 0 : _22.input) === null || _23 === void 0 ? void 0 : _23.camera) === null || _24 === void 0 ? void 0 : _24.enableVideo;
  }
  if (((_27 = (_26 = (_25 = local.groupChannel) === null || _25 === void 0 ? void 0 : _25.channel) === null || _26 === void 0 ? void 0 : _26.input) === null || _27 === void 0 ? void 0 : _27.camera) && isBoolean((_31 = (_30 = (_29 = (_28 = local.groupChannel) === null || _28 === void 0 ? void 0 : _28.channel) === null || _29 === void 0 ? void 0 : _29.input) === null || _30 === void 0 ? void 0 : _30.camera) === null || _31 === void 0 ? void 0 : _31.enableVideo)) {
    target.channel.input.camera.enableVideo = (_35 = (_34 = (_33 = (_32 = local.groupChannel) === null || _32 === void 0 ? void 0 : _32.channel) === null || _33 === void 0 ? void 0 : _33.input) === null || _34 === void 0 ? void 0 : _34.camera) === null || _35 === void 0 ? void 0 : _35.enableVideo;
  }
  if (((_38 = (_37 = (_36 = remote.groupChannel) === null || _36 === void 0 ? void 0 : _36.channel) === null || _37 === void 0 ? void 0 : _37.input) === null || _38 === void 0 ? void 0 : _38.gallery) && isBoolean((_42 = (_41 = (_40 = (_39 = remote.groupChannel) === null || _39 === void 0 ? void 0 : _39.channel) === null || _40 === void 0 ? void 0 : _40.input) === null || _41 === void 0 ? void 0 : _41.gallery) === null || _42 === void 0 ? void 0 : _42.enablePhoto)) {
    target.channel.input.gallery.enablePhoto = (_46 = (_45 = (_44 = (_43 = remote.groupChannel) === null || _43 === void 0 ? void 0 : _43.channel) === null || _44 === void 0 ? void 0 : _44.input) === null || _45 === void 0 ? void 0 : _45.gallery) === null || _46 === void 0 ? void 0 : _46.enablePhoto;
  }
  if (((_49 = (_48 = (_47 = local.groupChannel) === null || _47 === void 0 ? void 0 : _47.channel) === null || _48 === void 0 ? void 0 : _48.input) === null || _49 === void 0 ? void 0 : _49.gallery) && isBoolean((_53 = (_52 = (_51 = (_50 = local.groupChannel) === null || _50 === void 0 ? void 0 : _50.channel) === null || _51 === void 0 ? void 0 : _51.input) === null || _52 === void 0 ? void 0 : _52.gallery) === null || _53 === void 0 ? void 0 : _53.enablePhoto)) {
    target.channel.input.gallery.enablePhoto = (_57 = (_56 = (_55 = (_54 = local.groupChannel) === null || _54 === void 0 ? void 0 : _54.channel) === null || _55 === void 0 ? void 0 : _55.input) === null || _56 === void 0 ? void 0 : _56.gallery) === null || _57 === void 0 ? void 0 : _57.enablePhoto;
  }
  if (((_60 = (_59 = (_58 = remote.groupChannel) === null || _58 === void 0 ? void 0 : _58.channel) === null || _59 === void 0 ? void 0 : _59.input) === null || _60 === void 0 ? void 0 : _60.gallery) && isBoolean((_64 = (_63 = (_62 = (_61 = remote.groupChannel) === null || _61 === void 0 ? void 0 : _61.channel) === null || _62 === void 0 ? void 0 : _62.input) === null || _63 === void 0 ? void 0 : _63.gallery) === null || _64 === void 0 ? void 0 : _64.enableVideo)) {
    target.channel.input.gallery.enableVideo = (_68 = (_67 = (_66 = (_65 = remote.groupChannel) === null || _65 === void 0 ? void 0 : _65.channel) === null || _66 === void 0 ? void 0 : _66.input) === null || _67 === void 0 ? void 0 : _67.gallery) === null || _68 === void 0 ? void 0 : _68.enableVideo;
  }
  if (((_71 = (_70 = (_69 = local.groupChannel) === null || _69 === void 0 ? void 0 : _69.channel) === null || _70 === void 0 ? void 0 : _70.input) === null || _71 === void 0 ? void 0 : _71.gallery) && isBoolean((_75 = (_74 = (_73 = (_72 = local.groupChannel) === null || _72 === void 0 ? void 0 : _72.channel) === null || _73 === void 0 ? void 0 : _73.input) === null || _74 === void 0 ? void 0 : _74.gallery) === null || _75 === void 0 ? void 0 : _75.enableVideo)) {
    target.channel.input.gallery.enableVideo = (_79 = (_78 = (_77 = (_76 = local.groupChannel) === null || _76 === void 0 ? void 0 : _76.channel) === null || _77 === void 0 ? void 0 : _77.input) === null || _78 === void 0 ? void 0 : _78.gallery) === null || _79 === void 0 ? void 0 : _79.enableVideo;
  }
}
function updateChannelListConfig(target, local, remote) {
  var _a2, _b2, _c, _d, _e3, _f, _g2, _h, _j, _k, _l, _m, _o2, _p, _q, _r2, _s4, _t3;
  if (((_a2 = remote.groupChannel) === null || _a2 === void 0 ? void 0 : _a2.channelList) && isBoolean((_c = (_b2 = remote.groupChannel) === null || _b2 === void 0 ? void 0 : _b2.channelList) === null || _c === void 0 ? void 0 : _c.enableTypingIndicator)) {
    target.channelList.enableTypingIndicator = remote.groupChannel.channelList.enableTypingIndicator;
  }
  if (((_d = local.groupChannel) === null || _d === void 0 ? void 0 : _d.channelList) && isBoolean((_f = (_e3 = local.groupChannel) === null || _e3 === void 0 ? void 0 : _e3.channelList) === null || _f === void 0 ? void 0 : _f.enableTypingIndicator)) {
    target.channelList.enableTypingIndicator = (_h = (_g2 = local.groupChannel) === null || _g2 === void 0 ? void 0 : _g2.channelList) === null || _h === void 0 ? void 0 : _h.enableTypingIndicator;
  }
  if (((_j = remote.groupChannel) === null || _j === void 0 ? void 0 : _j.channelList) && isBoolean((_l = (_k = remote.groupChannel) === null || _k === void 0 ? void 0 : _k.channelList) === null || _l === void 0 ? void 0 : _l.enableMessageReceiptStatus)) {
    target.channelList.enableMessageReceiptStatus = (_o2 = (_m = remote.groupChannel) === null || _m === void 0 ? void 0 : _m.channelList) === null || _o2 === void 0 ? void 0 : _o2.enableMessageReceiptStatus;
  }
  if (((_p = local.groupChannel) === null || _p === void 0 ? void 0 : _p.channelList) && isBoolean((_r2 = (_q = local.groupChannel) === null || _q === void 0 ? void 0 : _q.channelList) === null || _r2 === void 0 ? void 0 : _r2.enableMessageReceiptStatus)) {
    target.channelList.enableMessageReceiptStatus = (_t3 = (_s4 = local.groupChannel) === null || _s4 === void 0 ? void 0 : _s4.channelList) === null || _t3 === void 0 ? void 0 : _t3.enableMessageReceiptStatus;
  }
}
function updateChannelSettingConfig(target, local, remote) {
  var _a2, _b2, _c, _d, _e3, _f, _g2, _h;
  if (((_a2 = remote.groupChannel) === null || _a2 === void 0 ? void 0 : _a2.setting) && isBoolean((_c = (_b2 = remote.groupChannel) === null || _b2 === void 0 ? void 0 : _b2.setting) === null || _c === void 0 ? void 0 : _c.enableMessageSearch)) {
    target.setting.enableMessageSearch = remote.groupChannel.setting.enableMessageSearch;
  }
  if (((_d = local.groupChannel) === null || _d === void 0 ? void 0 : _d.setting) && isBoolean((_f = (_e3 = local.groupChannel) === null || _e3 === void 0 ? void 0 : _e3.setting) === null || _f === void 0 ? void 0 : _f.enableMessageSearch)) {
    target.setting.enableMessageSearch = (_h = (_g2 = local.groupChannel) === null || _g2 === void 0 ? void 0 : _g2.setting) === null || _h === void 0 ? void 0 : _h.enableMessageSearch;
  }
}

// node_modules/@sendbird/uikit-tools/dist/esm/uikitConfiguration/internal/updators/updateOpenChannelConfigs.js
function updateOpenChannelConfigs(target, local, remote) {
  updateChannelConfig2(target, local, remote);
  updateChannelInputConfig2(target, local, remote);
}
function updateChannelConfig2(target, local, remote) {
  var _a2, _b2, _c, _d, _e3, _f, _g2, _h;
  if (((_a2 = remote.openChannel) === null || _a2 === void 0 ? void 0 : _a2.channel) && isBoolean((_c = (_b2 = remote.openChannel) === null || _b2 === void 0 ? void 0 : _b2.channel) === null || _c === void 0 ? void 0 : _c.enableOgtag)) {
    target.channel.enableOgtag = remote.openChannel.channel.enableOgtag;
  }
  if (((_d = local.openChannel) === null || _d === void 0 ? void 0 : _d.channel) && isBoolean((_f = (_e3 = local.openChannel) === null || _e3 === void 0 ? void 0 : _e3.channel) === null || _f === void 0 ? void 0 : _f.enableOgtag)) {
    target.channel.enableOgtag = (_h = (_g2 = local.openChannel) === null || _g2 === void 0 ? void 0 : _g2.channel) === null || _h === void 0 ? void 0 : _h.enableOgtag;
  }
}
function updateChannelInputConfig2(target, local, remote) {
  var _a2, _b2, _c, _d, _e3, _f, _g2, _h, _j, _k, _l, _m, _o2, _p, _q, _r2, _s4, _t3, _u, _v, _w, _x, _y, _z, _0, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12, _13, _14, _15, _16, _17, _18, _19, _20, _21, _22, _23, _24, _25, _26, _27, _28, _29, _30, _31, _32, _33, _34, _35, _36, _37, _38, _39, _40, _41, _42, _43, _44, _45, _46, _47, _48, _49, _50, _51, _52, _53, _54, _55, _56, _57, _58, _59, _60, _61, _62, _63, _64, _65, _66, _67, _68, _69, _70, _71, _72, _73, _74, _75, _76, _77, _78, _79;
  if (((_b2 = (_a2 = remote.openChannel) === null || _a2 === void 0 ? void 0 : _a2.channel) === null || _b2 === void 0 ? void 0 : _b2.input) && isBoolean((_e3 = (_d = (_c = remote.openChannel) === null || _c === void 0 ? void 0 : _c.channel) === null || _d === void 0 ? void 0 : _d.input) === null || _e3 === void 0 ? void 0 : _e3.enableDocument)) {
    target.channel.input.enableDocument = (_h = (_g2 = (_f = remote.openChannel) === null || _f === void 0 ? void 0 : _f.channel) === null || _g2 === void 0 ? void 0 : _g2.input) === null || _h === void 0 ? void 0 : _h.enableDocument;
  }
  if (((_k = (_j = local.openChannel) === null || _j === void 0 ? void 0 : _j.channel) === null || _k === void 0 ? void 0 : _k.input) && isBoolean((_o2 = (_m = (_l = local.openChannel) === null || _l === void 0 ? void 0 : _l.channel) === null || _m === void 0 ? void 0 : _m.input) === null || _o2 === void 0 ? void 0 : _o2.enableDocument)) {
    target.channel.input.enableDocument = (_r2 = (_q = (_p = local.openChannel) === null || _p === void 0 ? void 0 : _p.channel) === null || _q === void 0 ? void 0 : _q.input) === null || _r2 === void 0 ? void 0 : _r2.enableDocument;
  }
  if (((_u = (_t3 = (_s4 = remote.openChannel) === null || _s4 === void 0 ? void 0 : _s4.channel) === null || _t3 === void 0 ? void 0 : _t3.input) === null || _u === void 0 ? void 0 : _u.camera) && isBoolean((_y = (_x = (_w = (_v = remote.openChannel) === null || _v === void 0 ? void 0 : _v.channel) === null || _w === void 0 ? void 0 : _w.input) === null || _x === void 0 ? void 0 : _x.camera) === null || _y === void 0 ? void 0 : _y.enablePhoto)) {
    target.channel.input.camera.enablePhoto = (_2 = (_1 = (_0 = (_z = remote.openChannel) === null || _z === void 0 ? void 0 : _z.channel) === null || _0 === void 0 ? void 0 : _0.input) === null || _1 === void 0 ? void 0 : _1.camera) === null || _2 === void 0 ? void 0 : _2.enablePhoto;
  }
  if (((_5 = (_4 = (_3 = local.openChannel) === null || _3 === void 0 ? void 0 : _3.channel) === null || _4 === void 0 ? void 0 : _4.input) === null || _5 === void 0 ? void 0 : _5.camera) && isBoolean((_9 = (_8 = (_7 = (_6 = local.openChannel) === null || _6 === void 0 ? void 0 : _6.channel) === null || _7 === void 0 ? void 0 : _7.input) === null || _8 === void 0 ? void 0 : _8.camera) === null || _9 === void 0 ? void 0 : _9.enablePhoto)) {
    target.channel.input.camera.enablePhoto = (_13 = (_12 = (_11 = (_10 = local.openChannel) === null || _10 === void 0 ? void 0 : _10.channel) === null || _11 === void 0 ? void 0 : _11.input) === null || _12 === void 0 ? void 0 : _12.camera) === null || _13 === void 0 ? void 0 : _13.enablePhoto;
  }
  if (((_16 = (_15 = (_14 = remote.openChannel) === null || _14 === void 0 ? void 0 : _14.channel) === null || _15 === void 0 ? void 0 : _15.input) === null || _16 === void 0 ? void 0 : _16.camera) && isBoolean((_20 = (_19 = (_18 = (_17 = remote.openChannel) === null || _17 === void 0 ? void 0 : _17.channel) === null || _18 === void 0 ? void 0 : _18.input) === null || _19 === void 0 ? void 0 : _19.camera) === null || _20 === void 0 ? void 0 : _20.enableVideo)) {
    target.channel.input.camera.enableVideo = (_24 = (_23 = (_22 = (_21 = remote.openChannel) === null || _21 === void 0 ? void 0 : _21.channel) === null || _22 === void 0 ? void 0 : _22.input) === null || _23 === void 0 ? void 0 : _23.camera) === null || _24 === void 0 ? void 0 : _24.enableVideo;
  }
  if (((_27 = (_26 = (_25 = local.openChannel) === null || _25 === void 0 ? void 0 : _25.channel) === null || _26 === void 0 ? void 0 : _26.input) === null || _27 === void 0 ? void 0 : _27.camera) && isBoolean((_31 = (_30 = (_29 = (_28 = local.openChannel) === null || _28 === void 0 ? void 0 : _28.channel) === null || _29 === void 0 ? void 0 : _29.input) === null || _30 === void 0 ? void 0 : _30.camera) === null || _31 === void 0 ? void 0 : _31.enableVideo)) {
    target.channel.input.camera.enableVideo = (_35 = (_34 = (_33 = (_32 = local.openChannel) === null || _32 === void 0 ? void 0 : _32.channel) === null || _33 === void 0 ? void 0 : _33.input) === null || _34 === void 0 ? void 0 : _34.camera) === null || _35 === void 0 ? void 0 : _35.enableVideo;
  }
  if (((_38 = (_37 = (_36 = remote.openChannel) === null || _36 === void 0 ? void 0 : _36.channel) === null || _37 === void 0 ? void 0 : _37.input) === null || _38 === void 0 ? void 0 : _38.gallery) && isBoolean((_42 = (_41 = (_40 = (_39 = remote.openChannel) === null || _39 === void 0 ? void 0 : _39.channel) === null || _40 === void 0 ? void 0 : _40.input) === null || _41 === void 0 ? void 0 : _41.gallery) === null || _42 === void 0 ? void 0 : _42.enablePhoto)) {
    target.channel.input.gallery.enablePhoto = (_46 = (_45 = (_44 = (_43 = remote.openChannel) === null || _43 === void 0 ? void 0 : _43.channel) === null || _44 === void 0 ? void 0 : _44.input) === null || _45 === void 0 ? void 0 : _45.gallery) === null || _46 === void 0 ? void 0 : _46.enablePhoto;
  }
  if (((_49 = (_48 = (_47 = local.openChannel) === null || _47 === void 0 ? void 0 : _47.channel) === null || _48 === void 0 ? void 0 : _48.input) === null || _49 === void 0 ? void 0 : _49.gallery) && isBoolean((_53 = (_52 = (_51 = (_50 = local.openChannel) === null || _50 === void 0 ? void 0 : _50.channel) === null || _51 === void 0 ? void 0 : _51.input) === null || _52 === void 0 ? void 0 : _52.gallery) === null || _53 === void 0 ? void 0 : _53.enablePhoto)) {
    target.channel.input.gallery.enablePhoto = (_57 = (_56 = (_55 = (_54 = local.openChannel) === null || _54 === void 0 ? void 0 : _54.channel) === null || _55 === void 0 ? void 0 : _55.input) === null || _56 === void 0 ? void 0 : _56.gallery) === null || _57 === void 0 ? void 0 : _57.enablePhoto;
  }
  if (((_60 = (_59 = (_58 = remote.openChannel) === null || _58 === void 0 ? void 0 : _58.channel) === null || _59 === void 0 ? void 0 : _59.input) === null || _60 === void 0 ? void 0 : _60.gallery) && isBoolean((_64 = (_63 = (_62 = (_61 = remote.openChannel) === null || _61 === void 0 ? void 0 : _61.channel) === null || _62 === void 0 ? void 0 : _62.input) === null || _63 === void 0 ? void 0 : _63.gallery) === null || _64 === void 0 ? void 0 : _64.enableVideo)) {
    target.channel.input.gallery.enableVideo = (_68 = (_67 = (_66 = (_65 = remote.openChannel) === null || _65 === void 0 ? void 0 : _65.channel) === null || _66 === void 0 ? void 0 : _66.input) === null || _67 === void 0 ? void 0 : _67.gallery) === null || _68 === void 0 ? void 0 : _68.enableVideo;
  }
  if (((_71 = (_70 = (_69 = local.openChannel) === null || _69 === void 0 ? void 0 : _69.channel) === null || _70 === void 0 ? void 0 : _70.input) === null || _71 === void 0 ? void 0 : _71.gallery) && isBoolean((_75 = (_74 = (_73 = (_72 = local.openChannel) === null || _72 === void 0 ? void 0 : _72.channel) === null || _73 === void 0 ? void 0 : _73.input) === null || _74 === void 0 ? void 0 : _74.gallery) === null || _75 === void 0 ? void 0 : _75.enableVideo)) {
    target.channel.input.gallery.enableVideo = (_79 = (_78 = (_77 = (_76 = local.openChannel) === null || _76 === void 0 ? void 0 : _76.channel) === null || _77 === void 0 ? void 0 : _77.input) === null || _78 === void 0 ? void 0 : _78.gallery) === null || _79 === void 0 ? void 0 : _79.enableVideo;
  }
}

// node_modules/@sendbird/uikit-tools/dist/esm/uikitConfiguration/internal/utils.js
function getConfigsByPriority(localConfigs, remoteConfigs) {
  const prioritizedConfigs = createInitialConfig();
  updateCommonConfigs(prioritizedConfigs.common, localConfigs, remoteConfigs);
  updateGroupChannelConfigs(prioritizedConfigs.groupChannel, localConfigs, remoteConfigs);
  updateOpenChannelConfigs(prioritizedConfigs.openChannel, localConfigs, remoteConfigs);
  return prioritizedConfigs;
}
function isRawSBUConfigPayload(json) {
  return typeof json === "object" && "configuration" in json && "updated_at" in json;
}

// node_modules/@sendbird/uikit-tools/dist/esm/uikitConfiguration/internal/context.js
var __awaiter6 = function(thisArg, _arguments, P2, generator) {
  function adopt(value) {
    return value instanceof P2 ? value : new P2(function(resolve) {
      resolve(value);
    });
  }
  return new (P2 || (P2 = Promise))(function(resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e3) {
        reject(e3);
      }
    }
    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e3) {
        reject(e3);
      }
    }
    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }
    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};
function getApplicationAttributes(sdk) {
  var _a2, _b2;
  return (_b2 = (_a2 = sdk.appInfo) === null || _a2 === void 0 ? void 0 : _a2.applicationAttributes) !== null && _b2 !== void 0 ? _b2 : [];
}
var UIKitConfigContext = (0, import_react12.createContext)({
  initDashboardConfigs: () => Promise.resolve(),
  configs: initialConfig,
  configsWithAppAttr: () => initialConfig
});
var UIKitConfigProvider = ({ storage, children, localConfigs = {} }) => {
  const [remoteConfigs, setRemoteConfigs] = (0, import_react12.useState)(createInitialRemoteConfig);
  const [manager] = (0, import_react12.useState)(() => new UIKitConfigManager(storage));
  const initDashboardConfigs = (0, import_react12.useCallback)((sdk) => __awaiter6(void 0, void 0, void 0, function* () {
    const storedConfigPayload = yield manager.init(sdk.appId);
    if (sdk.appInfo && sdk.appInfo.uikitConfigInfo.lastUpdatedAt === storedConfigPayload.updatedAt) {
      setRemoteConfigs(storedConfigPayload.configuration);
    } else {
      try {
        const response = yield sdk.getUIKitConfiguration();
        if (isRawSBUConfigPayload(response.json)) {
          const remoteConfigPayload = snakeToCamel(response.json);
          const updatedConfigPayload = yield manager.update(remoteConfigPayload);
          setRemoteConfigs(updatedConfigPayload.configuration);
        }
      } catch (_a2) {
        setRemoteConfigs(storedConfigPayload.configuration);
      }
    }
  }), [manager]);
  const configs = getConfigsByPriority(localConfigs, remoteConfigs);
  const configsWithAppAttr = usePreservedCallback((sdk) => ({
    groupChannel: {
      channel: {
        get enableReactions() {
          return configs.groupChannel.channel.enableReactions && getApplicationAttributes(sdk).includes(applicationAttributes.reactions);
        },
        get enableReactionsSupergroup() {
          return configs.groupChannel.channel.enableReactionsSupergroup && getApplicationAttributes(sdk).includes(applicationAttributes.reactions);
        },
        get enableOgtag() {
          return configs.groupChannel.channel.enableOgtag && getApplicationAttributes(sdk).includes(applicationAttributes.enable_og_tag);
        }
      },
      setting: {
        get enableMessageSearch() {
          return configs.groupChannel.setting.enableMessageSearch && getApplicationAttributes(sdk).includes(applicationAttributes.message_search_v3);
        }
      }
    },
    openChannel: {
      channel: {
        get enableOgtag() {
          return configs.openChannel.channel.enableOgtag && getApplicationAttributes(sdk).includes(applicationAttributes.enable_og_tag);
        }
      }
    }
  }));
  return import_react12.default.createElement(UIKitConfigContext.Provider, { value: { initDashboardConfigs, configs, configsWithAppAttr } }, children);
};
var useUIKitConfig = () => (0, import_react12.useContext)(UIKitConfigContext);

// node_modules/@sendbird/uikit-react/withSendbird.js
var import_react13 = __toESM(require_react(), 1);
var SendbirdSdkContext = import_react13.default.createContext(null);
var withSendbirdContext = function(OriginalComponent, mapStoreToProps) {
  var ContextAwareComponent = function(props) {
    return import_react13.default.createElement(SendbirdSdkContext.Consumer, null, function(context) {
      if (mapStoreToProps && typeof mapStoreToProps !== "function") {
        console.warn("Second parameter to withSendbirdContext must be a pure function");
      }
      var mergedProps = mapStoreToProps && typeof mapStoreToProps === "function" ? __assign(__assign({}, mapStoreToProps(context)), props) : __assign(__assign({}, context), props);
      return import_react13.default.createElement(OriginalComponent, __assign({}, mergedProps));
    });
  };
  var componentName = OriginalComponent.displayName || OriginalComponent.name || "Component";
  ContextAwareComponent.displayName = "SendbirdAware".concat(componentName);
  return ContextAwareComponent;
};

// node_modules/@sendbird/uikit-react/useSendbirdStateContext.js
var import_react14 = __toESM(require_react(), 1);
var NO_CONTEXT_ERROR = "No sendbird state value available. Make sure you are rendering `<SendbirdProvider>` at the top of your app.";
function useSendbirdStateContext() {
  var context = (0, import_react14.useContext)(SendbirdSdkContext);
  if (!context)
    throw new Error(NO_CONTEXT_ERROR);
  return context;
}

// node_modules/@sendbird/uikit-react/chunks/bundle-BKxPk2t0.js
var import_react15 = __toESM(require_react(), 1);
var UserProfileContext = import_react15.default.createContext({
  disableUserProfile: true,
  isOpenChannel: false
});
var UserProfileProvider = function(_a2) {
  var _b2 = _a2.isOpenChannel, isOpenChannel = _b2 === void 0 ? false : _b2, _c = _a2.disableUserProfile, disableUserProfile = _c === void 0 ? false : _c, renderUserProfile = _a2.renderUserProfile, onUserProfileMessage = _a2.onUserProfileMessage, children = _a2.children;
  return import_react15.default.createElement(UserProfileContext.Provider, { value: {
    isOpenChannel,
    disableUserProfile,
    renderUserProfile,
    onUserProfileMessage
  } }, children);
};

// node_modules/@sendbird/uikit-react/chunks/bundle-Cvt9FZvn.js
var uuidv4 = function() {
  return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function(c4) {
    var r4 = Math.random() * 16 | 0;
    var v5 = c4 === "x" ? r4 : r4 & 3 | 8;
    return v5.toString(16);
  });
};

// node_modules/@sendbird/uikit-react/chunks/bundle-CtBgdgkK.js
var noop = function() {
};
var deleteNullish = function(obj) {
  var cleaned = {};
  Object.entries(obj).forEach(function(_a2) {
    var key = _a2[0], value = _a2[1];
    if (value !== void 0 && value !== null) {
      cleaned[key] = value;
    }
  });
  return cleaned;
};
function openURL(url) {
  var safeURL = url;
  if (safeURL) {
    if (!safeURL.startsWith("http://") && !safeURL.startsWith("https://")) {
      safeURL = "https://" + safeURL;
    }
    window.open(safeURL, "_blank", "noopener,noreferrer");
  }
}
function classnames() {
  var args = [];
  for (var _i2 = 0; _i2 < arguments.length; _i2++) {
    args[_i2] = arguments[_i2];
  }
  return args.filter(Boolean).join(" ");
}

// node_modules/@sendbird/uikit-react/chunks/bundle-D2Fmzffb.js
var stringSet = {
  en: {
    // Group Channel - Conversation
    MESSAGE_STATUS__YESTERDAY: "Yesterday",
    CHANNEL__MESSAGE_LIST__NOTIFICATION__NEW_MESSAGE: "new message(s) since",
    /** @deprecated Please use `DATE_FORMAT__MESSAGE_LIST__NOTIFICATION__UNREAD_SINCE` instead * */
    CHANNEL__MESSAGE_LIST__NOTIFICATION__ON: "on",
    // Channel List
    CHANNEL_PREVIEW_MOBILE_LEAVE: "Leave channel",
    // Group Channel - Settings
    CHANNEL_SETTING__HEADER__TITLE: "Channel information",
    CHANNEL_SETTING__PROFILE__EDIT: "Edit",
    CHANNEL_SETTING__MEMBERS__TITLE: "Members",
    CHANNEL_SETTING__MEMBERS__SEE_ALL_MEMBERS: "All members",
    CHANNEL_SETTING__MEMBERS__INVITE_MEMBER: "Invite users",
    CHANNEL_SETTING__MEMBERS__YOU: " (You)",
    CHANNEL_SETTING__MEMBERS__SELECT_TITLE: "Select members",
    CHANNEL_SETTING__MEMBERS__OPERATOR: "Operator",
    CHANNEL_SETTING__LEAVE_CHANNEL__TITLE: "Leave channel",
    CHANNEL_SETTING__OPERATORS__TITLE: "Operators",
    CHANNEL_SETTING__OPERATORS__TITLE_ALL: "All operators",
    CHANNEL_SETTING__OPERATORS__TITLE_ADD: "Add operator",
    CHANNEL_SETTING__OPERATORS__ADD_BUTTON: "Add",
    CHANNEL_SETTING__MUTED_MEMBERS__TITLE: "Muted members",
    CHANNEL_SETTING__MUTED_MEMBERS__TITLE_ALL: "All muted members",
    CHANNEL_SETTING__NO_UNMUTED: "No muted members yet",
    CHANNEL_SETTING__BANNED_MEMBERS__TITLE: "Banned users",
    CHANNEL_SETTING__FREEZE_CHANNEL: "Freeze Channel",
    CHANNEL_SETTING__MODERATION__REGISTER_AS_OPERATOR: "Register as operator",
    CHANNEL_SETTING__MODERATION__UNREGISTER_OPERATOR: "Unregister operator",
    CHANNEL_SETTING__MODERATION__MUTE: "Mute",
    CHANNEL_SETTING__MODERATION__UNMUTE: "Unmute",
    CHANNEL_SETTING__MODERATION__BAN: "Ban",
    CHANNEL_SETTING__MODERATION__UNBAN: "Unban",
    CHANNEL_SETTING__MODERATION__EMPTY_BAN: "No banned members yet",
    CHANNEL_SETTING__MODERATION__ALL_BAN: "All banned members",
    // OpenChannel - Conversation
    OPEN_CHANNEL_CONVERSATION__TITLE_PARTICIPANTS: "participants",
    OPEN_CHANNEL_CONVERSATION__SELECT_PARTICIPANTS: "Select participants",
    // OpenChannelList
    OPEN_CHANNEL_LIST__TITLE: "Channels",
    CREATE_OPEN_CHANNEL_LIST__TITLE: "New channel profile",
    CREATE_OPEN_CHANNEL_LIST__SUBTITLE__IMG_SECTION: "Channel image",
    CREATE_OPEN_CHANNEL_LIST__SUBTITLE__IMG_UPLOAD: "Upload",
    CREATE_OPEN_CHANNEL_LIST__SUBTITLE__TEXT_SECTION: "Channel name",
    CREATE_OPEN_CHANNEL_LIST__SUBTITLE__TEXT_PLACE_HOLDER: "Enter channel name",
    CREATE_OPEN_CHANNEL_LIST__SUBMIT: "Create",
    // OpenChannel - Settings
    OPEN_CHANNEL_SETTINGS__OPERATOR_TITLE: "Channel Information",
    OPEN_CHANNEL_SETTINGS__OPERATOR_URL: "URL",
    OPEN_CHANNEL_SETTINGS__PARTICIPANTS_ACCORDION_TITLE: "Participants",
    OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_PANEL: "Delete channel",
    OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_TITLE: "Delete channel?",
    OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_CONTEXT: "Once deleted, this channel can't be restored.",
    OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_SUBMIT: "Delete",
    OPEN_CHANNEL_SETTINGS__OPERATORS_TITLE: "Operators",
    OPEN_CHANNEL_SETTINGS__OPERATORS__TITLE_ADD: "Add operator",
    OPEN_CHANNEL_SETTINGS__OPERATORS__TITLE_ALL: "All operators",
    OPEN_CHANNEL_SETTINGS__MUTED_MEMBERS__TITLE: "Muted participants",
    OPEN_CHANNEL_SETTINGS__MUTED_MEMBERS__TITLE_ALL: "All muted participants",
    OPEN_CHANNEL_SETTINGS__MUTED_MEMBERS__NO_ONE: "No muted participants yet",
    OPEN_CHANNEL_SETTINGS__BANNED_MEMBERS__TITLE: "Banned users",
    OPEN_CHANNEL_SETTINGS__BANNED_MEMBERS__TITLE_ALL: "All banned users",
    OPEN_CHANNEL_SETTINGS__BANNED_MEMBERS__NO_ONE: "No banned users yet",
    OPEN_CHANNEL_SETTINGS__MEMBERS__YOU: " (You)",
    OPEN_CHANNEL_SETTINGS__MEMBERS__OPERATOR: "Operator",
    OPEN_CHANNEL_SETTINGS__PARTICIPANTS_TITLE: "Participants",
    OPEN_CHANNEL_SETTINGS__EMPTY_LIST: "No participants yet",
    OPEN_CHANNEL_SETTINGS__SEE_ALL: "See all participants",
    OPEN_CHANNEL_SETTINGS__ALL_PARTICIPANTS_TITLE: "All participants",
    OPEN_CHANNEL_SETTINGS__NO_TITLE: "(No title)",
    OPEN_CHANNEL_SETTING__MODERATION__REGISTER_AS_OPERATOR: "Register as operator",
    OPEN_CHANNEL_SETTING__MODERATION__UNREGISTER_OPERATOR: "Unregister operator",
    OPEN_CHANNEL_SETTING__MODERATION__MUTE: "Mute",
    OPEN_CHANNEL_SETTING__MODERATION__UNMUTE: "Unmute",
    OPEN_CHANNEL_SETTING__MODERATION__BAN: "Ban",
    OPEN_CHANNEL_SETTING__MODERATION__UNBAN: "Unban",
    // Channel - Common
    TRYING_TO_CONNECT: "Trying to connect…",
    TYPING_INDICATOR__IS_TYPING: "is typing...",
    TYPING_INDICATOR__AND: "and",
    TYPING_INDICATOR__ARE_TYPING: "are typing...",
    TYPING_INDICATOR__MULTIPLE_TYPING: "Several people are typing...",
    CHANNEL_FROZEN: "Channel frozen",
    PLACE_HOLDER__NO_CHANNEL: "No channels",
    PLACE_HOLDER__WRONG: "Something went wrong",
    PLACE_HOLDER__RETRY_TO_CONNECT: "Retry",
    PLACE_HOLDER__NO_MESSAGES: "No messages",
    TOOLTIP__AND_YOU: ", and you",
    TOOLTIP__YOU: "you",
    TOOLTIP__UNKNOWN_USER: "(no name)",
    UNKNOWN__UNKNOWN_MESSAGE_TYPE: "(Unknown message type)",
    UNKNOWN__CANNOT_READ_MESSAGE: "Cannot read this message.",
    UNKNOWN__TEMPLATE_ERROR: "(Template error)",
    UNKNOWN__CANNOT_READ_TEMPLATE: "Cannot read this template.",
    MESSAGE_EDITED: "(edited)",
    // Channel - Modal
    MODAL__DELETE_MESSAGE__TITLE: "Delete this message?",
    MODAL__CHANNEL_INFORMATION__TITLE: "Edit channel information",
    MODAL__CHANNEL_INFORMATION__CHANNEL_IMAGE: "Channel image",
    MODAL__CHANNEL_INFORMATION__UPLOAD: "Upload",
    MODAL__CHANNEL_INFORMATION__CHANNEL_NAME: "Channel name",
    MODAL__CHANNEL_INFORMATION__INPUT__PLACE_HOLDER: "Enter name",
    MODAL__INVITE_MEMBER__TITLE: "Invite member",
    MODAL__INVITE_MEMBER__SELECTED: "selected",
    MODAL__CHOOSE_CHANNEL_TYPE__TITLE: "New channel",
    MODAL__CHOOSE_CHANNEL_TYPE__GROUP: "Group",
    MODAL__CHOOSE_CHANNEL_TYPE__SUPER_GROUP: "Super group",
    MODAL__CHOOSE_CHANNEL_TYPE__BROADCAST: "Broadcast",
    MODAL__CREATE_CHANNEL__TITLE: "New channel",
    MODAL__CREATE_CHANNEL__GROUP: "Group",
    MODAL__CREATE_CHANNEL__SUPER: "Super group",
    MODAL__CREATE_CHANNEL__BROADCAST: "Broadcast",
    MODAL__CREATE_CHANNEL__SELECTED: "selected",
    MODAL__LEAVE_CHANNEL__TITLE: "Leave this channel?",
    MODAL__LEAVE_CHANNEL__FOOTER: "Leave",
    MODAL__VOICE_MESSAGE_INPUT_DISABLED__TITLE_MUTED: "You're muted by the operator.",
    MODAL__VOICE_MESSAGE_INPUT_DISABLED__TITLE_FROZEN: "Channel is frozen.",
    // User Profile
    USER_PROFILE__MESSAGE: "Message",
    USER_PROFILE__USER_ID: "User ID",
    EDIT_PROFILE__TITLE: "My profile",
    EDIT_PROFILE__IMAGE_LABEL: "Profile image",
    EDIT_PROFILE__IMAGE_UPLOAD: "Upload",
    EDIT_PROFILE__NICKNAME_LABEL: "Nickname",
    EDIT_PROFILE__NICKNAME_PLACEHOLDER: "Enter your nickname",
    EDIT_PROFILE__USERID_LABEL: "User ID",
    EDIT_PROFILE__THEME_LABEL: "Dark theme",
    // Message Input
    MESSAGE_INPUT__PLACE_HOLDER: "Enter message",
    MESSAGE_INPUT__PLACE_HOLDER__DISABLED: "Chat is unavailable in this channel",
    MESSAGE_INPUT__PLACE_HOLDER__FROZEN: "Chat is unavailable in this channel",
    MESSAGE_INPUT__PLACE_HOLDER__MUTED: "Chat is unavailable because you're muted",
    MESSAGE_INPUT__PLACE_HOLDER__MUTED_SHORT: "You're muted",
    MESSAGE_INPUT__QUOTE_REPLY__PLACE_HOLDER: "Reply to message",
    // Common UI
    BUTTON__SUBMIT: "Submit",
    BUTTON__CANCEL: "Cancel",
    BUTTON__DELETE: "Delete",
    BUTTON__SAVE: "Save",
    BUTTON__CREATE: "Create",
    BUTTON__INVITE: "Invite",
    BUTTON__OK: "OK",
    BADGE__OVER: "+",
    NO_TITLE: "No title",
    NO_NAME: "(No name)",
    NO_MEMBERS: "(No members)",
    LABEL__OPERATOR: "Operator",
    // Context Menu
    MESSAGE_MENU__COPY: "Copy",
    MESSAGE_MENU__REPLY: "Reply",
    MESSAGE_MENU__THREAD: "Reply in thread",
    MESSAGE_MENU__OPEN_IN_CHANNEL: "Open in channel",
    MESSAGE_MENU__EDIT: "Edit",
    MESSAGE_MENU__RESEND: "Resend",
    MESSAGE_MENU__DELETE: "Delete",
    MESSAGE_MENU__SAVE: "Save",
    //  * FIXME: get back legacy, remove after refactoring open channel messages *
    CONTEXT_MENU_DROPDOWN__COPY: "Copy",
    CONTEXT_MENU_DROPDOWN__EDIT: "Edit",
    CONTEXT_MENU_DROPDOWN__RESEND: "Resend",
    CONTEXT_MENU_DROPDOWN__DELETE: "Delete",
    CONTEXT_MENU_DROPDOWN__SAVE: "Save",
    // Feature - Message Search
    SEARCH: "Search",
    SEARCH_IN_CHANNEL: "Search in channel",
    SEARCH_IN: "Search in",
    SEARCHING: "Searching for messages...",
    NO_SEARCHED_MESSAGE: "No results found.",
    // Feature - Message Reply
    QUOTE_MESSAGE_INPUT__REPLY_TO: "Reply to",
    QUOTE_MESSAGE_INPUT__FILE_TYPE_IMAGE: "Photo",
    QUOTE_MESSAGE_INPUT__FILE_TYPE_GIF: "GIF",
    QUOTE_MESSAGE_INPUT__FILE_TYPE__VIDEO: "Video",
    QUOTED_MESSAGE__REPLIED_TO: "replied to",
    QUOTED_MESSAGE__CURRENT_USER: "You",
    QUOTED_MESSAGE__UNAVAILABLE: "Message unavailable",
    // Feature - Thread
    THREAD__HEADER_TITLE: "Thread",
    CHANNEL__THREAD_REPLY: "reply",
    CHANNEL__THREAD_REPLIES: "replies",
    CHANNEL__THREAD_OVER_MAX: "99+",
    THREAD__THREAD_REPLY: "reply",
    THREAD__THREAD_REPLIES: "replies",
    THREAD__INPUT__REPLY_TO_THREAD: "Reply to thread",
    THREAD__INPUT__REPLY_IN_THREAD: "Reply in thread",
    // Feature - Mention
    MENTION_NAME__NO_NAME: "(No name)",
    MENTION_COUNT__OVER_LIMIT: "You can mention up to %d times at a time.",
    UI__FILE_VIEWER__UNSUPPORT: "Unsupported message",
    // Feature - Voice Message
    VOICE_RECORDING_PERMISSION_DENIED: "You cannot record the voice since\n        voice recording is not permitted in your device system setting",
    VOICE_MESSAGE: "Voice Message",
    // Channel preview last message file type display strings
    CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_GIF: "GIF",
    CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_PHOTO: "Photo",
    CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_VIDEO: "Video",
    CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_AUDIO: "Audio",
    CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_VOICE_MESSAGE: "Voice message",
    CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_GENERAL: "File",
    CHANNEL_PREVIEW_LAST_MESSAGE_TEMPLATE_MESSAGE: "Message",
    // Date format
    DATE_FORMAT__MESSAGE_LIST__NOTIFICATION__UNREAD_SINCE: "p 'on' MMM dd",
    DATE_FORMAT__MESSAGE_LIST__DATE_SEPARATOR: "MMMM dd, yyyy",
    DATE_FORMAT__THREAD_LIST__DATE_SEPARATOR: "MMM dd, yyyy",
    // File upload
    FILE_UPLOAD_NOTIFICATION__COUNT_LIMIT: "Up to %d files can be attached.",
    FILE_UPLOAD_NOTIFICATION__SIZE_LIMIT: "The maximum size per file is %d MB.",
    // Feedback button text
    FEEDBACK_LIKE: "Like",
    FEEDBACK_DISLIKE: "Dislike",
    // Mobile feedback options menu items
    EDIT_COMMENT: "Edit comment",
    REMOVE_FEEDBACK: "Remove Feedback",
    // Feedback modal title
    FEEDBACK_MODAL_TITLE: "Provide additional feedback (optional)",
    FEEDBACK_CONTENT_PLACEHOLDER: "Leave a comment",
    BUTTON__REMOVE_FEEDBACK: "Remove feedback",
    // Feedback failed modal title
    FEEDBACK_FAILED_SUBMIT: "Couldn’t submit. Try again.",
    FEEDBACK_FAILED_SAVE: "Couldn’t save. Try again.",
    FEEDBACK_FAILED_DELETE: "Couldn’t delete. Try again."
  }
};
var getStringSet = function(lang) {
  if (lang === void 0) {
    lang = "en";
  }
  return stringSet[lang];
};

// node_modules/@sendbird/uikit-react/chunks/bundle-kNaMXwgI.js
var formatDistanceLocale = {
  lessThanXSeconds: {
    one: "less than a second",
    other: "less than {{count}} seconds"
  },
  xSeconds: {
    one: "1 second",
    other: "{{count}} seconds"
  },
  halfAMinute: "half a minute",
  lessThanXMinutes: {
    one: "less than a minute",
    other: "less than {{count}} minutes"
  },
  xMinutes: {
    one: "1 minute",
    other: "{{count}} minutes"
  },
  aboutXHours: {
    one: "about 1 hour",
    other: "about {{count}} hours"
  },
  xHours: {
    one: "1 hour",
    other: "{{count}} hours"
  },
  xDays: {
    one: "1 day",
    other: "{{count}} days"
  },
  aboutXWeeks: {
    one: "about 1 week",
    other: "about {{count}} weeks"
  },
  xWeeks: {
    one: "1 week",
    other: "{{count}} weeks"
  },
  aboutXMonths: {
    one: "about 1 month",
    other: "about {{count}} months"
  },
  xMonths: {
    one: "1 month",
    other: "{{count}} months"
  },
  aboutXYears: {
    one: "about 1 year",
    other: "about {{count}} years"
  },
  xYears: {
    one: "1 year",
    other: "{{count}} years"
  },
  overXYears: {
    one: "over 1 year",
    other: "over {{count}} years"
  },
  almostXYears: {
    one: "almost 1 year",
    other: "almost {{count}} years"
  }
};
var formatDistance = function formatDistance2(token, count, options) {
  var result;
  var tokenValue = formatDistanceLocale[token];
  if (typeof tokenValue === "string") {
    result = tokenValue;
  } else if (count === 1) {
    result = tokenValue.one;
  } else {
    result = tokenValue.other.replace("{{count}}", count.toString());
  }
  if (options !== null && options !== void 0 && options.addSuffix) {
    if (options.comparison && options.comparison > 0) {
      return "in " + result;
    } else {
      return result + " ago";
    }
  }
  return result;
};
var formatDistance$1 = formatDistance;
function buildFormatLongFn(args) {
  return function() {
    var options = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
    var width = options.width ? String(options.width) : args.defaultWidth;
    var format2 = args.formats[width] || args.formats[args.defaultWidth];
    return format2;
  };
}
var dateFormats = {
  full: "EEEE, MMMM do, y",
  long: "MMMM do, y",
  medium: "MMM d, y",
  short: "MM/dd/yyyy"
};
var timeFormats = {
  full: "h:mm:ss a zzzz",
  long: "h:mm:ss a z",
  medium: "h:mm:ss a",
  short: "h:mm a"
};
var dateTimeFormats = {
  full: "{{date}} 'at' {{time}}",
  long: "{{date}} 'at' {{time}}",
  medium: "{{date}}, {{time}}",
  short: "{{date}}, {{time}}"
};
var formatLong = {
  date: buildFormatLongFn({
    formats: dateFormats,
    defaultWidth: "full"
  }),
  time: buildFormatLongFn({
    formats: timeFormats,
    defaultWidth: "full"
  }),
  dateTime: buildFormatLongFn({
    formats: dateTimeFormats,
    defaultWidth: "full"
  })
};
var formatLong$1 = formatLong;
var formatRelativeLocale = {
  lastWeek: "'last' eeee 'at' p",
  yesterday: "'yesterday at' p",
  today: "'today at' p",
  tomorrow: "'tomorrow at' p",
  nextWeek: "eeee 'at' p",
  other: "P"
};
var formatRelative = function formatRelative2(token, _date, _baseDate, _options) {
  return formatRelativeLocale[token];
};
var formatRelative$1 = formatRelative;
function buildLocalizeFn(args) {
  return function(dirtyIndex, options) {
    var context = options !== null && options !== void 0 && options.context ? String(options.context) : "standalone";
    var valuesArray;
    if (context === "formatting" && args.formattingValues) {
      var defaultWidth = args.defaultFormattingWidth || args.defaultWidth;
      var width = options !== null && options !== void 0 && options.width ? String(options.width) : defaultWidth;
      valuesArray = args.formattingValues[width] || args.formattingValues[defaultWidth];
    } else {
      var _defaultWidth = args.defaultWidth;
      var _width = options !== null && options !== void 0 && options.width ? String(options.width) : args.defaultWidth;
      valuesArray = args.values[_width] || args.values[_defaultWidth];
    }
    var index = args.argumentCallback ? args.argumentCallback(dirtyIndex) : dirtyIndex;
    return valuesArray[index];
  };
}
var eraValues = {
  narrow: ["B", "A"],
  abbreviated: ["BC", "AD"],
  wide: ["Before Christ", "Anno Domini"]
};
var quarterValues = {
  narrow: ["1", "2", "3", "4"],
  abbreviated: ["Q1", "Q2", "Q3", "Q4"],
  wide: ["1st quarter", "2nd quarter", "3rd quarter", "4th quarter"]
};
var monthValues = {
  narrow: ["J", "F", "M", "A", "M", "J", "J", "A", "S", "O", "N", "D"],
  abbreviated: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
  wide: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"]
};
var dayValues = {
  narrow: ["S", "M", "T", "W", "T", "F", "S"],
  short: ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"],
  abbreviated: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
  wide: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"]
};
var dayPeriodValues = {
  narrow: {
    am: "a",
    pm: "p",
    midnight: "mi",
    noon: "n",
    morning: "morning",
    afternoon: "afternoon",
    evening: "evening",
    night: "night"
  },
  abbreviated: {
    am: "AM",
    pm: "PM",
    midnight: "midnight",
    noon: "noon",
    morning: "morning",
    afternoon: "afternoon",
    evening: "evening",
    night: "night"
  },
  wide: {
    am: "a.m.",
    pm: "p.m.",
    midnight: "midnight",
    noon: "noon",
    morning: "morning",
    afternoon: "afternoon",
    evening: "evening",
    night: "night"
  }
};
var formattingDayPeriodValues = {
  narrow: {
    am: "a",
    pm: "p",
    midnight: "mi",
    noon: "n",
    morning: "in the morning",
    afternoon: "in the afternoon",
    evening: "in the evening",
    night: "at night"
  },
  abbreviated: {
    am: "AM",
    pm: "PM",
    midnight: "midnight",
    noon: "noon",
    morning: "in the morning",
    afternoon: "in the afternoon",
    evening: "in the evening",
    night: "at night"
  },
  wide: {
    am: "a.m.",
    pm: "p.m.",
    midnight: "midnight",
    noon: "noon",
    morning: "in the morning",
    afternoon: "in the afternoon",
    evening: "in the evening",
    night: "at night"
  }
};
var ordinalNumber = function ordinalNumber2(dirtyNumber, _options) {
  var number = Number(dirtyNumber);
  var rem100 = number % 100;
  if (rem100 > 20 || rem100 < 10) {
    switch (rem100 % 10) {
      case 1:
        return number + "st";
      case 2:
        return number + "nd";
      case 3:
        return number + "rd";
    }
  }
  return number + "th";
};
var localize = {
  ordinalNumber,
  era: buildLocalizeFn({
    values: eraValues,
    defaultWidth: "wide"
  }),
  quarter: buildLocalizeFn({
    values: quarterValues,
    defaultWidth: "wide",
    argumentCallback: function argumentCallback(quarter) {
      return quarter - 1;
    }
  }),
  month: buildLocalizeFn({
    values: monthValues,
    defaultWidth: "wide"
  }),
  day: buildLocalizeFn({
    values: dayValues,
    defaultWidth: "wide"
  }),
  dayPeriod: buildLocalizeFn({
    values: dayPeriodValues,
    defaultWidth: "wide",
    formattingValues: formattingDayPeriodValues,
    defaultFormattingWidth: "wide"
  })
};
var localize$1 = localize;
function buildMatchFn(args) {
  return function(string) {
    var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    var width = options.width;
    var matchPattern = width && args.matchPatterns[width] || args.matchPatterns[args.defaultMatchWidth];
    var matchResult = string.match(matchPattern);
    if (!matchResult) {
      return null;
    }
    var matchedString = matchResult[0];
    var parsePatterns = width && args.parsePatterns[width] || args.parsePatterns[args.defaultParseWidth];
    var key = Array.isArray(parsePatterns) ? findIndex(parsePatterns, function(pattern) {
      return pattern.test(matchedString);
    }) : findKey(parsePatterns, function(pattern) {
      return pattern.test(matchedString);
    });
    var value;
    value = args.valueCallback ? args.valueCallback(key) : key;
    value = options.valueCallback ? options.valueCallback(value) : value;
    var rest = string.slice(matchedString.length);
    return {
      value,
      rest
    };
  };
}
function findKey(object, predicate) {
  for (var key in object) {
    if (object.hasOwnProperty(key) && predicate(object[key])) {
      return key;
    }
  }
  return void 0;
}
function findIndex(array, predicate) {
  for (var key = 0; key < array.length; key++) {
    if (predicate(array[key])) {
      return key;
    }
  }
  return void 0;
}
function buildMatchPatternFn(args) {
  return function(string) {
    var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    var matchResult = string.match(args.matchPattern);
    if (!matchResult) return null;
    var matchedString = matchResult[0];
    var parseResult = string.match(args.parsePattern);
    if (!parseResult) return null;
    var value = args.valueCallback ? args.valueCallback(parseResult[0]) : parseResult[0];
    value = options.valueCallback ? options.valueCallback(value) : value;
    var rest = string.slice(matchedString.length);
    return {
      value,
      rest
    };
  };
}
var matchOrdinalNumberPattern = /^(\d+)(th|st|nd|rd)?/i;
var parseOrdinalNumberPattern = /\d+/i;
var matchEraPatterns = {
  narrow: /^(b|a)/i,
  abbreviated: /^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,
  wide: /^(before christ|before common era|anno domini|common era)/i
};
var parseEraPatterns = {
  any: [/^b/i, /^(a|c)/i]
};
var matchQuarterPatterns = {
  narrow: /^[1234]/i,
  abbreviated: /^q[1234]/i,
  wide: /^[1234](th|st|nd|rd)? quarter/i
};
var parseQuarterPatterns = {
  any: [/1/i, /2/i, /3/i, /4/i]
};
var matchMonthPatterns = {
  narrow: /^[jfmasond]/i,
  abbreviated: /^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,
  wide: /^(january|february|march|april|may|june|july|august|september|october|november|december)/i
};
var parseMonthPatterns = {
  narrow: [/^j/i, /^f/i, /^m/i, /^a/i, /^m/i, /^j/i, /^j/i, /^a/i, /^s/i, /^o/i, /^n/i, /^d/i],
  any: [/^ja/i, /^f/i, /^mar/i, /^ap/i, /^may/i, /^jun/i, /^jul/i, /^au/i, /^s/i, /^o/i, /^n/i, /^d/i]
};
var matchDayPatterns = {
  narrow: /^[smtwf]/i,
  short: /^(su|mo|tu|we|th|fr|sa)/i,
  abbreviated: /^(sun|mon|tue|wed|thu|fri|sat)/i,
  wide: /^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i
};
var parseDayPatterns = {
  narrow: [/^s/i, /^m/i, /^t/i, /^w/i, /^t/i, /^f/i, /^s/i],
  any: [/^su/i, /^m/i, /^tu/i, /^w/i, /^th/i, /^f/i, /^sa/i]
};
var matchDayPeriodPatterns = {
  narrow: /^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,
  any: /^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i
};
var parseDayPeriodPatterns = {
  any: {
    am: /^a/i,
    pm: /^p/i,
    midnight: /^mi/i,
    noon: /^no/i,
    morning: /morning/i,
    afternoon: /afternoon/i,
    evening: /evening/i,
    night: /night/i
  }
};
var match = {
  ordinalNumber: buildMatchPatternFn({
    matchPattern: matchOrdinalNumberPattern,
    parsePattern: parseOrdinalNumberPattern,
    valueCallback: function valueCallback(value) {
      return parseInt(value, 10);
    }
  }),
  era: buildMatchFn({
    matchPatterns: matchEraPatterns,
    defaultMatchWidth: "wide",
    parsePatterns: parseEraPatterns,
    defaultParseWidth: "any"
  }),
  quarter: buildMatchFn({
    matchPatterns: matchQuarterPatterns,
    defaultMatchWidth: "wide",
    parsePatterns: parseQuarterPatterns,
    defaultParseWidth: "any",
    valueCallback: function valueCallback2(index) {
      return index + 1;
    }
  }),
  month: buildMatchFn({
    matchPatterns: matchMonthPatterns,
    defaultMatchWidth: "wide",
    parsePatterns: parseMonthPatterns,
    defaultParseWidth: "any"
  }),
  day: buildMatchFn({
    matchPatterns: matchDayPatterns,
    defaultMatchWidth: "wide",
    parsePatterns: parseDayPatterns,
    defaultParseWidth: "any"
  }),
  dayPeriod: buildMatchFn({
    matchPatterns: matchDayPeriodPatterns,
    defaultMatchWidth: "any",
    parsePatterns: parseDayPeriodPatterns,
    defaultParseWidth: "any"
  })
};
var match$1 = match;
var locale = {
  code: "en-US",
  formatDistance: formatDistance$1,
  formatLong: formatLong$1,
  formatRelative: formatRelative$1,
  localize: localize$1,
  match: match$1,
  options: {
    weekStartsOn: 0,
    firstWeekContainsDate: 1
  }
};
var defaultLocale = locale;

// node_modules/@sendbird/uikit-react/chunks/bundle-BvAzWVA5.js
var import_react16 = __toESM(require_react(), 1);
var LocalizationContextDefault = {
  stringSet: getStringSet("en"),
  dateLocale: defaultLocale
};
var LocalizationContext = import_react16.default.createContext(LocalizationContextDefault);
var LocalizationProvider = function(props) {
  var children = props.children;
  return import_react16.default.createElement(LocalizationContext.Provider, { value: __assign(__assign({}, LocalizationContextDefault), props) }, children);
};
var useLocalization = function() {
  return import_react16.default.useContext(LocalizationContext);
};

// node_modules/@sendbird/uikit-react/ui/ImageRenderer.js
var import_react17 = __toESM(require_react(), 1);
var numberToPx = function(value) {
  if (value === null)
    return void 0;
  return typeof value === "number" ? "".concat(value, "px") : value;
};
function getDynamicMinLengthInPx(sideLength, maxSideLength, defaultMinLength) {
  var _a2;
  return "min(".concat(maxSideLength !== null && maxSideLength !== void 0 ? maxSideLength : defaultMinLength, ", ").concat((_a2 = numberToPx(sideLength)) !== null && _a2 !== void 0 ? _a2 : defaultMinLength, ")");
}
function useDynamicSideLength(_a2) {
  var width = _a2.width, height = _a2.height, maxSideLength = _a2.maxSideLength, defaultMinLength = _a2.defaultMinLength;
  var dynamicMinWidth = (0, import_react17.useMemo)(function() {
    return getDynamicMinLengthInPx(width, maxSideLength, defaultMinLength);
  }, [width]);
  var dynamicMinHeight = (0, import_react17.useMemo)(function() {
    return getDynamicMinLengthInPx(height, maxSideLength, defaultMinLength);
  }, [height]);
  return [dynamicMinWidth, dynamicMinHeight];
}
var useIsElementInViewport = function(elementRef) {
  var _a2 = (0, import_react17.useState)(false), isVisible = _a2[0], setIsVisible = _a2[1];
  (0, import_react17.useLayoutEffect)(function() {
    var observer = new IntersectionObserver(function(entries) {
      var entry = entries[0];
      if (entry)
        setIsVisible(entry.isIntersecting);
    });
    if (elementRef.current)
      observer.observe(elementRef.current);
    return function() {
      return observer.disconnect();
    };
  }, [elementRef.current]);
  return isVisible;
};
var useLazyImageLoader = function(elementRef) {
  var isLoaded = (0, import_react17.useRef)(false);
  var isVisible = useIsElementInViewport(elementRef);
  if (isVisible)
    isLoaded.current = true;
  return isLoaded.current;
};
function getBorderRadiusForImageRenderer(circle, borderRadius) {
  if (circle === void 0) {
    circle = false;
  }
  if (borderRadius === void 0) {
    borderRadius = null;
  }
  return circle ? "50%" : numberToPx(borderRadius);
}
function getBorderRadiusForMultipleImageRenderer(borderRadius, index, totalCount) {
  var value = typeof borderRadius === "string" ? parseInt(borderRadius, 10) : borderRadius;
  var lastIndex = totalCount - 1;
  var topLeft = index === 0 ? value * 2 : value;
  var topRight = index === 1 ? value * 2 : value;
  var bottomRight = index === lastIndex ? value * 2 : value;
  var bottomLeft = index === lastIndex - 1 ? value * 2 : value;
  return "".concat(topLeft, "px ").concat(topRight, "px ").concat(bottomRight, "px ").concat(bottomLeft, "px");
}
var ImageRenderer = function(_a2) {
  var _b2 = _a2.className, className = _b2 === void 0 ? "" : _b2, url = _a2.url, _c = _a2.alt, alt = _c === void 0 ? "" : _c, _d = _a2.width, width = _d === void 0 ? null : _d, _e3 = _a2.maxSideLength, maxSideLength = _e3 === void 0 ? null : _e3, _f = _a2.height, height = _f === void 0 ? null : _f, _g2 = _a2.circle, circle = _g2 === void 0 ? false : _g2, _h = _a2.fixedSize, fixedSize = _h === void 0 ? false : _h, _j = _a2.placeHolder, placeHolder = _j === void 0 ? null : _j, _k = _a2.defaultComponent, defaultComponent = _k === void 0 ? null : _k, _l = _a2.borderRadius, borderRadius = _l === void 0 ? null : _l, _m = _a2.onLoad, onLoad = _m === void 0 ? noop : _m, _o2 = _a2.onError, onError2 = _o2 === void 0 ? noop : _o2, shadeOnHover = _a2.shadeOnHover, _p = _a2.isUploaded, isUploaded = _p === void 0 ? true : _p;
  var ref = (0, import_react17.useRef)(null);
  var isLoaded = useLazyImageLoader(ref);
  var internalUrl = isLoaded ? url : null;
  var _q = (0, import_react17.useState)(false), defaultComponentVisible = _q[0], setDefaultComponentVisible = _q[1];
  var _r2 = (0, import_react17.useState)(true), placeholderVisible = _r2[0], setPlaceholderVisible = _r2[1];
  var _s4 = useDynamicSideLength({
    width,
    height,
    maxSideLength,
    defaultMinLength: "400px"
  }), dynamicMinWidth = _s4[0], dynamicMinHeight = _s4[1];
  var renderPlaceholder = function() {
    if (typeof placeHolder === "function") {
      return placeHolder({
        style: {
          width: "100%",
          minWidth: dynamicMinWidth,
          maxWidth: fixedSize ? dynamicMinWidth : "400px",
          height: dynamicMinHeight,
          position: "absolute",
          display: "flex",
          justifyContent: "center",
          alignItems: "center"
        }
      });
    }
    return placeHolder;
  };
  var renderDefault = function() {
    if (typeof defaultComponent === "function")
      return defaultComponent();
    return defaultComponent;
  };
  var renderImage = function() {
    var backgroundStyle = internalUrl ? {
      backgroundRepeat: "no-repeat",
      backgroundPosition: "center",
      backgroundSize: "cover",
      backgroundImage: "url(".concat(internalUrl, ")")
    } : {};
    return import_react17.default.createElement("div", { className: "sendbird-image-renderer__image", style: __assign({ width: "100%", minWidth: dynamicMinWidth, maxWidth: fixedSize ? dynamicMinWidth : "400px", height: dynamicMinHeight, position: "absolute", borderRadius: getBorderRadiusForImageRenderer(circle, borderRadius) }, backgroundStyle) });
  };
  return dynamicMinWidth && dynamicMinHeight && import_react17.default.createElement(
    "div",
    { ref, className: __spreadArray(__spreadArray([], Array.isArray(className) ? className : [className], true), ["sendbird-image-renderer"], false).join(" "), style: {
      width: "100%",
      minWidth: dynamicMinWidth,
      maxWidth: fixedSize ? dynamicMinWidth : "400px",
      height: dynamicMinHeight
    } },
    placeholderVisible && renderPlaceholder(),
    !internalUrl || defaultComponentVisible ? renderDefault() : renderImage(),
    shadeOnHover && import_react17.default.createElement("div", { className: "sendbird-multiple-files-image-renderer__image-cover", style: __assign({ borderRadius: getBorderRadiusForImageRenderer(circle, borderRadius) }, isUploaded ? {} : { display: "inline-flex" }) }),
    internalUrl && import_react17.default.createElement(HiddenImageLoader, { src: internalUrl, alt, onLoadStart: function() {
      setPlaceholderVisible(true);
      setDefaultComponentVisible(false);
    }, onLoad: function() {
      setPlaceholderVisible(false);
      setDefaultComponentVisible(false);
      onLoad();
    }, onError: function() {
      setPlaceholderVisible(false);
      setDefaultComponentVisible(true);
      onError2();
    } })
  );
};
var HiddenImageLoader = function(props) {
  var src = props.src, alt = props.alt, _a2 = props.onLoadStart, onLoadStart = _a2 === void 0 ? noop : _a2, _b2 = props.onLoad, onLoad = _b2 === void 0 ? noop : _b2, _c = props.onError, onError2 = _c === void 0 ? noop : _c;
  var reloadCtx = (0, import_react17.useRef)({
    currSrc: src,
    prevSrc: src,
    loadFailure: false
  });
  if (reloadCtx.current.currSrc !== src) {
    reloadCtx.current.prevSrc = reloadCtx.current.currSrc;
    reloadCtx.current.currSrc = src;
  }
  (0, import_react17.useLayoutEffect)(function() {
    if (src) {
      var sourceChanged = reloadCtx.current.prevSrc !== reloadCtx.current.currSrc;
      var loadFailure = reloadCtx.current.loadFailure;
      if (sourceChanged || loadFailure) {
        onLoadStart();
      }
    }
  }, [src, navigator.onLine]);
  return import_react17.default.createElement("img", { className: "sendbird-image-renderer__hidden-image-loader", src, alt, onLoad: function() {
    reloadCtx.current.loadFailure = false;
    onLoad();
  }, onError: function() {
    reloadCtx.current.loadFailure = true;
    onError2();
  } });
};

// node_modules/@sendbird/uikit-react/chunks/bundle-DYIdeEpd.js
var pxToNumber = function(px) {
  if (typeof px === "number") {
    return px;
  }
  if (typeof px === "string") {
    var parsed = Number.parseFloat(px);
    if (!Number.isNaN(parsed)) {
      return parsed;
    }
  }
  return NaN;
};

// node_modules/@sendbird/uikit-react/ui/Icon.js
var React2 = __toESM(require_react(), 1);
var import_react18 = __toESM(require_react(), 1);
var Types = {
  ADD: "ADD",
  ARROW_LEFT: "ARROW_LEFT",
  ATTACH: "ATTACH",
  AUDIO_ON_LINED: "AUDIO_ON_LINED",
  BAN: "BAN",
  BROADCAST: "BROADCAST",
  CAMERA: "CAMERA",
  CHANNELS: "CHANNELS",
  CHAT: "CHAT",
  CHAT_FILLED: "CHAT_FILLED",
  CHEVRON_DOWN: "CHEVRON_DOWN",
  CHEVRON_RIGHT: "CHEVRON_RIGHT",
  CLOSE: "CLOSE",
  COLLAPSE: "COLLAPSE",
  COPY: "COPY",
  CREATE: "CREATE",
  DELETE: "DELETE",
  DISCONNECTED: "DISCONNECTED",
  DOCUMENT: "DOCUMENT",
  DONE: "DONE",
  DONE_ALL: "DONE_ALL",
  DOWNLOAD: "DOWNLOAD",
  EDIT: "EDIT",
  EMOJI_MORE: "EMOJI_MORE",
  ERROR: "ERROR",
  EXPAND: "EXPAND",
  FILE_AUDIO: "FILE_AUDIO",
  FILE_DOCUMENT: "FILE_DOCUMENT",
  FREEZE: "FREEZE",
  GIF: "GIF",
  INFO: "INFO",
  LEAVE: "LEAVE",
  MEMBERS: "MEMBERS",
  MESSAGE: "MESSAGE",
  MODERATIONS: "MODERATIONS",
  MORE: "MORE",
  MUTE: "MUTE",
  NOTIFICATIONS: "NOTIFICATIONS",
  NOTIFICATIONS_OFF_FILLED: "NOTIFICATIONS_OFF_FILLED",
  OPERATOR: "OPERATOR",
  PHOTO: "PHOTO",
  PLAY: "PLAY",
  PLUS: "PLUS",
  QUESTION: "QUESTION",
  REFRESH: "REFRESH",
  REPLY: "REPLY",
  REMOVE: "REMOVE",
  SEARCH: "SEARCH",
  SEND: "SEND",
  SETTINGS_FILLED: "SETTINGS_FILLED",
  SLIDE_LEFT: "SLIDE_LEFT",
  SPINNER: "SPINNER",
  SUPERGROUP: "SUPERGROUP",
  THREAD: "THREAD",
  THUMBNAIL_NONE: "THUMBNAIL_NONE",
  TOGGLE_OFF: "TOGGLE_OFF",
  TOGGLE_ON: "TOGGLE_ON",
  USER: "USER",
  FEEDBACK_LIKE: "FEEDBACK_LIKE",
  FEEDBACK_DISLIKE: "FEEDBACK_DISLIKE"
};
var Colors = {
  DEFAULT: "DEFAULT",
  PRIMARY: "PRIMARY",
  PRIMARY_2: "PRIMARY_2",
  SECONDARY: "SECONDARY",
  CONTENT: "CONTENT",
  CONTENT_INVERSE: "CONTENT_INVERSE",
  CONTENT_INVERSE_3: "CONTENT_INVERSE_3",
  WHITE: "WHITE",
  GRAY: "GRAY",
  THUMBNAIL_ICON: "THUMBNAIL_ICON",
  SENT: "SENT",
  READ: "READ",
  ON_BACKGROUND_1: "ON_BACKGROUND_1",
  ON_BACKGROUND_2: "ON_BACKGROUND_2",
  ON_BACKGROUND_3: "ON_BACKGROUND_3",
  ON_BACKGROUND_4: "ON_BACKGROUND_4",
  BACKGROUND_3: "BACKGROUND_3",
  ERROR: "ERROR"
};
function changeColorToClassName(color) {
  switch (color) {
    case Colors.PRIMARY:
      return "sendbird-icon-color--primary";
    case Colors.PRIMARY_2:
      return "sendbird-icon-color--primary-2";
    case Colors.SECONDARY:
      return "sendbird-icon-color--secondary";
    case Colors.CONTENT:
      return "sendbird-icon-color--content";
    case Colors.CONTENT_INVERSE:
      return "sendbird-icon-color--content-inverse";
    case Colors.CONTENT_INVERSE_3:
      return "sendbird-icon-color--content-inverse-3";
    case Colors.WHITE:
      return "sendbird-icon-color--white";
    case Colors.GRAY:
      return "sendbird-icon-color--gray";
    case Colors.THUMBNAIL_ICON:
      return "sendbird-icon-color--thumbnail-icon";
    case Colors.SENT:
      return "sendbird-icon-color--sent";
    case Colors.READ:
      return "sendbird-icon-color--read";
    case Colors.ON_BACKGROUND_1:
      return "sendbird-icon-color--on-background-1";
    case Colors.ON_BACKGROUND_2:
      return "sendbird-icon-color--on-background-2";
    case Colors.ON_BACKGROUND_3:
      return "sendbird-icon-color--on-background-3";
    case Colors.ON_BACKGROUND_4:
      return "sendbird-icon-color--on-background-4";
    case Colors.BACKGROUND_3:
      return "sendbird-icon-color--background-3";
    case Colors.ERROR:
      return "sendbird-icon-color--error";
    default:
      return "";
  }
}
function changeTypeToIconClassName(type) {
  switch (type) {
    case Types.ADD:
      return "sendbird-icon-add";
    case Types.ARROW_LEFT:
      return "sendbird-icon-arrow-left";
    case Types.ATTACH:
      return "sendbird-icon-attach";
    case Types.AUDIO_ON_LINED:
      return "sendbird-icon-audio-on-lined";
    case Types.BAN:
      return "sendbird-icon-ban";
    case Types.BROADCAST:
      return "sendbird-icon-broadcast";
    case Types.CAMERA:
      return "sendbird-icon-camera";
    case Types.CHANNELS:
      return "sendbird-icon-channels";
    case Types.CHAT:
      return "sendbird-icon-chat";
    case Types.CHAT_FILLED:
      return "sendbird-icon-chat-filled";
    case Types.CHEVRON_DOWN:
      return "sendbird-icon-chevron-down";
    case Types.CHEVRON_RIGHT:
      return "sendbird-icon-chevron-right";
    case Types.CLOSE:
      return "sendbird-icon-close";
    case Types.COLLAPSE:
      return "sendbird-icon-collapse";
    case Types.COPY:
      return "sendbird-icon-copy";
    case Types.CREATE:
      return "sendbird-icon-create";
    case Types.DELETE:
      return "sendbird-icon-delete";
    case Types.DISCONNECTED:
      return "sendbird-icon-disconnected";
    case Types.DOCUMENT:
      return "sendbird-icon-document";
    case Types.DONE:
      return "sendbird-icon-done";
    case Types.DONE_ALL:
      return "sendbird-icon-done-all";
    case Types.DOWNLOAD:
      return "sendbird-icon-down-load";
    case Types.EDIT:
      return "sendbird-icon-edit";
    case Types.EMOJI_MORE:
      return "sendbird-icon-emoji-more";
    case Types.ERROR:
      return "sendbird-icon-error";
    case Types.EXPAND:
      return "sendbird-icon-expand";
    case Types.FILE_AUDIO:
      return "sendbird-icon-file-audio";
    case Types.FILE_DOCUMENT:
      return "sendbird-icon-file-document";
    case Types.FREEZE:
      return "sendbird-icon-freeze";
    case Types.GIF:
      return "sendbird-icon-gif";
    case Types.INFO:
      return "sendbird-icon-info";
    case Types.LEAVE:
      return "sendbird-icon-leave";
    case Types.MEMBERS:
      return "sendbird-icon-members";
    case Types.MESSAGE:
      return "sendbird-icon-message";
    case Types.MODERATIONS:
      return "sendbird-icon-moderations";
    case Types.MORE:
      return "sendbird-icon-more";
    case Types.MUTE:
      return "sendbird-icon-mute";
    case Types.NOTIFICATIONS:
      return "sendbird-icon-notifications";
    case Types.NOTIFICATIONS_OFF_FILLED:
      return "sendbird-icon-notifications-off-filled";
    case Types.OPERATOR:
      return "sendbird-icon-operator";
    case Types.PHOTO:
      return "sendbird-icon-photo";
    case Types.PLAY:
      return "sendbird-icon-play";
    case Types.PLUS:
      return "sendbird-iconn-plus";
    case Types.QUESTION:
      return "sendbird-icon-question";
    case Types.REFRESH:
      return "sendbird-icon-refresh";
    case Types.REMOVE:
      return "sendbird-icon-remove";
    case Types.REPLY:
      return "sendbird-icon-reply";
    case Types.SEARCH:
      return "sendbird-icon-search";
    case Types.SEND:
      return "sendbird-icon-send";
    case Types.SETTINGS_FILLED:
      return "sendbird-icon-settings-filled";
    case Types.SPINNER:
      return "sendbird-icon-spinner";
    case Types.SUPERGROUP:
      return "sendbird-icon-supergroup";
    case Types.THREAD:
      return "sendbird-icon-thread";
    case Types.THUMBNAIL_NONE:
      return "sendbird-icon-thumbnail-none";
    case Types.TOGGLE_OFF:
      return "sendbird-icon-toggle-off";
    case Types.TOGGLE_ON:
      return "sendbird-icon-toggle-on";
    case Types.USER:
      return "sendbird-icon-user";
    case Types.FEEDBACK_LIKE:
      return "sendbird-icon-feedback-like";
    case Types.FEEDBACK_DISLIKE:
      return "sendbird-icon-feedback-dislike";
    default:
      return "sendbird-icon-unknown";
  }
}
var _path$U;
function _extends$X() {
  _extends$X = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends$X.apply(this, arguments);
}
var SvgIconAdd = (props) => React2.createElement("svg", _extends$X({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$U || (_path$U = React2.createElement("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M50.667 5.333a8 8 0 0 1 8 8v37.334a8 8 0 0 1-8 8H13.333a8 8 0 0 1-8-8V13.333a8 8 0 0 1 8-8zm0 5.334H13.333a2.667 2.667 0 0 0-2.666 2.666v37.334a2.667 2.667 0 0 0 2.666 2.666h37.334a2.667 2.667 0 0 0 2.666-2.666V13.333a2.667 2.667 0 0 0-2.666-2.666m-18.667 8a2.667 2.667 0 0 1 2.649 2.355l.018.311v8h8a2.667 2.667 0 0 1 .311 5.316l-.311.018h-8v8a2.667 2.667 0 0 1-5.316.311l-.018-.311v-8h-8a2.667 2.667 0 0 1-.311-5.316l.311-.018h8v-8A2.667 2.667 0 0 1 32 18.667",
  className: "icon-add_svg__fill"
})));
var _path$T;
function _extends$W() {
  _extends$W = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends$W.apply(this, arguments);
}
var SvgIconArrowLeft = (props) => React2.createElement("svg", _extends$W({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$T || (_path$T = React2.createElement("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M33.886 8.781a2.67 2.67 0 0 1 .221 3.52l-.221.251-16.78 16.781H56a2.667 2.667 0 0 1 .311 5.316l-.311.018-38.895-.001 16.78 16.782a2.666 2.666 0 0 1 .222 3.52l-.221.251a2.67 2.67 0 0 1-3.52.222l-.252-.222L8.781 33.886a2.67 2.67 0 0 1-.222-3.52l.222-.252L30.114 8.781a2.67 2.67 0 0 1 3.772 0",
  className: "icon-arrow-left_svg__fill"
})));
var _path$S;
function _extends$V() {
  _extends$V = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends$V.apply(this, arguments);
}
var SvgIconAttach = (props) => React2.createElement("svg", _extends$V({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$S || (_path$S = React2.createElement("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "m55.334 28.926-24.506 23.34c-5.222 4.973-13.74 4.973-18.962 0-5.149-4.903-5.149-12.797 0-17.7l24.506-23.34c3.138-2.988 8.278-2.988 11.416 0 3.064 2.919 3.064 7.594 0 10.513L23.255 45.077c-1.055 1.005-2.815 1.005-3.87.001-.98-.933-.98-2.39 0-3.325l22.64-21.535a2.667 2.667 0 0 0-3.676-3.864L15.709 37.89a7.58 7.58 0 0 0-.001 11.05c3.113 2.966 8.11 2.966 11.224 0l24.533-23.338c5.272-5.021 5.272-13.217 0-18.238-5.197-4.95-13.573-4.95-18.77 0L8.187 30.704c-7.356 7.005-7.356 18.419 0 25.424 7.281 6.935 19.036 6.935 26.318 0l24.506-23.34a2.666 2.666 0 1 0-3.678-3.862z",
  className: "icon-attach_svg__fill"
})));
var _g$2;
var _defs;
function _extends$U() {
  _extends$U = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends$U.apply(this, arguments);
}
var SvgIconAudioOnLined = (props) => React2.createElement("svg", _extends$U({
  xmlns: "http://www.w3.org/2000/svg",
  fill: "none",
  viewBox: "0 0 64 64"
}, props), _g$2 || (_g$2 = React2.createElement("g", {
  clipPath: "url(#icon-audio-on-lined_svg__a)"
}, React2.createElement("path", {
  d: "M32 0C26.11 0 21.333 4.776 21.333 10.667V32c0 5.891 4.776 10.667 10.667 10.667S42.667 37.89 42.667 32V10.667C42.667 4.776 37.89 0 32 0m-5.333 10.667a5.333 5.333 0 0 1 10.666 0V32a5.333 5.333 0 0 1-10.666 0z",
  className: "icon-audio-on-lined_svg__fill",
  clipRule: "evenodd"
}), React2.createElement("path", {
  d: "M16 26.667a2.667 2.667 0 1 0-5.333 0V32c0 10.879 8.143 19.856 18.666 21.168v5.499h-8a2.667 2.667 0 0 0 0 5.333h21.334a2.667 2.667 0 1 0 0-5.333h-8v-5.499C45.19 51.856 53.333 42.88 53.333 32v-5.333a2.667 2.667 0 1 0-5.333 0V32c0 8.837-7.163 16-16 16s-16-7.163-16-16z",
  className: "icon-audio-on-lined_svg__fill"
}))), _defs || (_defs = React2.createElement("defs", null, React2.createElement("clipPath", {
  id: "icon-audio-on-lined_svg__a"
}, React2.createElement("path", {
  fill: "#fff",
  d: "M0 0h64v64H0z"
})))));
var _path$R;
function _extends$T() {
  _extends$T = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends$T.apply(this, arguments);
}
var SvgIconBan = (props) => React2.createElement("svg", _extends$T({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$R || (_path$R = React2.createElement("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333 2.667 48.2 2.667 32 15.8 2.667 32 2.667M32 8C18.745 8 8 18.745 8 32s10.745 24 24 24 24-10.745 24-24S45.255 8 32 8m12.333 21.333a1 1 0 0 1 1 1v3.334a1 1 0 0 1-1 1H19.667a1 1 0 0 1-1-1v-3.334a1 1 0 0 1 1-1z",
  className: "icon-ban_svg__fill"
})));
var _path$Q;
function _extends$S() {
  _extends$S = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends$S.apply(this, arguments);
}
var SvgIconBroadcast = (props) => React2.createElement("svg", _extends$S({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$Q || (_path$Q = React2.createElement("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M58.545 5.498q.121.389.122.796v46.079a2.666 2.666 0 0 1-3.462 2.546l-17.951-5.61c-.645 5.273-5.14 9.358-10.587 9.358C20.776 58.667 16 53.89 16 48v-5.334h-5.333a8 8 0 0 1-7.997-7.75l-.003-.25V24a8 8 0 0 1 8-8H16L55.205 3.749a2.665 2.665 0 0 1 3.34 1.75zM21.333 44.587V48a5.333 5.333 0 0 0 10.652.398L32 47.92zm32-34.667-32 9.997v18.83l32 9.997zM16 21.333h-5.333a2.67 2.67 0 0 0-2.65 2.356L8 24v10.667a2.667 2.667 0 0 0 2.667 2.666H16z",
  className: "icon-broadcast_svg__fill"
})));
var _path$P;
function _extends$R() {
  _extends$R = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends$R.apply(this, arguments);
}
var SvgIconCamera = (props) => React2.createElement("svg", _extends$R({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$P || (_path$P = React2.createElement("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M40 5.333c.892 0 1.724.446 2.219 1.188l4.541 6.812H56a8 8 0 0 1 7.986 7.53l.014.47v29.334a8 8 0 0 1-8 8H8a8 8 0 0 1-8-8V21.333a8 8 0 0 1 8-8h9.237l4.544-6.812a2.67 2.67 0 0 1 1.888-1.167l.331-.02zm-1.43 5.334H25.428l-4.542 6.812a2.66 2.66 0 0 1-1.887 1.167l-.331.02H8a2.67 2.67 0 0 0-2.667 2.667v29.334A2.667 2.667 0 0 0 8 53.333h48a2.667 2.667 0 0 0 2.667-2.666V21.333A2.667 2.667 0 0 0 56 18.667H45.333a2.67 2.67 0 0 1-2.218-1.188zM32 21.333c7.364 0 13.333 5.97 13.333 13.334S39.363 48 32 48s-13.333-5.97-13.333-13.333S24.637 21.333 32 21.333m0 5.334a8 8 0 1 0 0 16 8 8 0 0 0 0-16",
  className: "icon-camera_svg__fill"
})));
var _path$O;
function _extends$Q() {
  _extends$Q = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends$Q.apply(this, arguments);
}
var SvgIconChannels = (props) => React2.createElement("svg", _extends$Q({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$O || (_path$O = React2.createElement("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "m42.65 5.333.311.017a2.666 2.666 0 0 1 2.373 2.633l-.017.311-1.45 13.04h9.466a2.667 2.667 0 0 1 .311 5.315l-.31.018H43.271l-1.184 10.666h11.245a2.667 2.667 0 0 1 .312 5.316l-.31.018H41.495l-1.512 13.627a2.667 2.667 0 0 1-5.318-.277l.017-.311 1.448-13.04H25.496l-1.512 13.628a2.667 2.667 0 0 1-5.318-.277l.017-.311 1.448-13.04h-9.464a2.667 2.667 0 0 1-.311-5.315l.31-.018h10.057l1.186-10.667H10.667a2.667 2.667 0 0 1-.311-5.315l.31-.018h11.835l1.515-13.627a2.67 2.67 0 0 1 2.634-2.373l.311.017a2.666 2.666 0 0 1 2.373 2.633l-.017.311-1.45 13.04H38.5l1.515-13.628a2.67 2.67 0 0 1 2.634-2.373zm-5.927 32 1.186-10.667H27.272l-1.184 10.667z",
  className: "icon-channels_svg__fill"
})));
var _path$N;
function _extends$P() {
  _extends$P = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends$P.apply(this, arguments);
}
var SvgIconChat = (props) => React2.createElement("svg", _extends$P({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$N || (_path$N = React2.createElement("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333c-4.455 0-8.679-.993-12.461-2.77l-1.753.58q-8.947 2.868-12.504 1.981-4.198-1.047-1.657-3.663 1.757-2.094 2.928-5.234.934-2.502-.737-7A29.15 29.15 0 0 1 2.666 32C2.667 15.8 15.8 2.667 32 2.667M32 8C18.745 8 8 18.745 8 32c0 3.5.747 6.88 2.168 9.978l.405.837.137.271.106.285c1.517 4.085 1.89 7.622.734 10.72l-.382.972-.192.433.235-.05a62 62 0 0 0 4.886-1.363l1.721-.568 2.04-.696 1.95.917A23.9 23.9 0 0 0 32 56c13.255 0 24-10.745 24-24S45.255 8 32 8",
  className: "icon-chat_svg__fill"
})));
var _path$M;
function _extends$O() {
  _extends$O = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends$O.apply(this, arguments);
}
var SvgIconChatFilled = (props) => React2.createElement("svg", _extends$O({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$M || (_path$M = React2.createElement("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333c-4.455 0-8.679-.993-12.461-2.77l-1.753.58q-8.947 2.868-12.504 1.981-4.198-1.047-1.657-3.663 1.757-2.094 2.928-5.234.934-2.502-.737-7A29.15 29.15 0 0 1 2.666 32C2.667 15.8 15.8 2.667 32 2.667",
  className: "icon-chat-filled_svg__fill"
})));
var _path$L;
function _extends$N() {
  _extends$N = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends$N.apply(this, arguments);
}
var SvgIconChevronDown = (props) => React2.createElement("svg", _extends$N({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$L || (_path$L = React2.createElement("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M16.121 21.879a3 3 0 0 0-4.242 0 3 3 0 0 0 0 4.242l18 18a3 3 0 0 0 4.242 0l18-18a3 3 0 0 0 0-4.242 3 3 0 0 0-4.242 0L32 37.757z",
  className: "icon-chevron-down_svg__fill"
})));
var _path$K;
function _extends$M() {
  _extends$M = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends$M.apply(this, arguments);
}
var SvgIconChevronRight = (props) => React2.createElement("svg", _extends$M({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$K || (_path$K = React2.createElement("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M22.114 46.114a2.668 2.668 0 0 0 3.772 3.772l16-16a2.67 2.67 0 0 0 0-3.772l-16-16a2.668 2.668 0 0 0-3.772 3.772L36.23 32z",
  className: "icon-chevron-right_svg__fill"
})));
var _path$J;
function _extends$L() {
  _extends$L = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends$L.apply(this, arguments);
}
var SvgIconClose = (props) => React2.createElement("svg", _extends$L({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$J || (_path$J = React2.createElement("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M52.552 11.448a2.666 2.666 0 0 1 .222 3.52l-.222.251-16.781 16.78 16.781 16.782a2.665 2.665 0 0 1 0 3.771 2.666 2.666 0 0 1-3.52.222l-.251-.222L32 35.771 15.219 52.552a2.665 2.665 0 0 1-3.771 0 2.666 2.666 0 0 1-.222-3.52l.222-.251L28.228 32l-16.78-16.781a2.665 2.665 0 0 1 0-3.771 2.666 2.666 0 0 1 3.52-.222l.251.222 16.78 16.78 16.782-16.78a2.665 2.665 0 0 1 3.771 0",
  className: "icon-close_svg__fill"
})));
var _path$I;
function _extends$K() {
  _extends$K = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends$K.apply(this, arguments);
}
var SvgIconCollapse = (props) => React2.createElement("svg", _extends$K({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$I || (_path$I = React2.createElement("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M16 8a2.667 2.667 0 0 0-2.649 2.356l-.018.31v42.667a2.667 2.667 0 0 0 5.316.311l.018-.31V34.666h25.56l-6.113 6.114a2.67 2.67 0 0 0-.221 3.52l.221.251a2.666 2.666 0 0 0 3.52.222l.252-.222 10.666-10.666a2.666 2.666 0 0 0 .222-3.52l-.222-.252-10.666-10.666a2.666 2.666 0 0 0-3.993 3.52l.221.251 6.113 6.114h-25.56V10.667A2.667 2.667 0 0 0 16 8",
  className: "icon-collapse_svg__fill"
})));
var _path$H;
function _extends$J() {
  _extends$J = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends$J.apply(this, arguments);
}
var SvgIconCopy = (props) => React2.createElement("svg", _extends$J({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$H || (_path$H = React2.createElement("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M53.333 21.333a8 8 0 0 1 8 8v24a8 8 0 0 1-8 8h-24a8 8 0 0 1-8-8v-24a8 8 0 0 1 8-8zm0 5.334h-24a2.667 2.667 0 0 0-2.666 2.666v24A2.667 2.667 0 0 0 29.333 56h24A2.667 2.667 0 0 0 56 53.333v-24a2.667 2.667 0 0 0-2.667-2.666m-18.666-24a8 8 0 0 1 7.986 7.53l.014.47v2.666a2.667 2.667 0 0 1-5.316.311l-.018-.31v-2.667a2.67 2.67 0 0 0-2.355-2.65L34.667 8h-24a2.67 2.67 0 0 0-2.65 2.356l-.017.31v24a2.67 2.67 0 0 0 2.356 2.65l.31.017h2.667a2.667 2.667 0 0 1 .311 5.316l-.31.018h-2.667a8 8 0 0 1-7.987-7.53l-.013-.47v-24c0-4.26 3.33-7.743 7.53-7.987l.47-.013z",
  className: "icon-copy_svg__fill"
})));
var _path$G;
function _extends$I() {
  _extends$I = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends$I.apply(this, arguments);
}
var SvgIconCreate = (props) => React2.createElement("svg", _extends$I({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$G || (_path$G = React2.createElement("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333c-4.455 0-8.679-.993-12.461-2.77l-1.753.58q-8.947 2.868-12.504 1.981-4.198-1.047-1.657-3.663 1.757-2.094 2.928-5.234.934-2.502-.737-7A29.15 29.15 0 0 1 2.666 32C2.667 15.8 15.8 2.667 32 2.667M32 8C18.745 8 8 18.745 8 32c0 3.5.747 6.88 2.168 9.978l.405.837.137.271.106.285c1.517 4.085 1.89 7.622.734 10.72l-.382.972-.192.433.235-.05a62 62 0 0 0 4.886-1.363l1.721-.568 2.04-.696 1.95.917A23.9 23.9 0 0 0 32 56c13.255 0 24-10.745 24-24S45.255 8 32 8m2.667 16v5.333H40c3.556 0 3.556 5.334 0 5.334h-5.333V40c0 3.556-5.334 3.556-5.334 0v-5.333H24c-3.556 0-3.556-5.334 0-5.334h5.333V24c0-3.556 5.334-3.556 5.334 0",
  className: "icon-create_svg__fill"
})));
var _path$F;
function _extends$H() {
  _extends$H = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends$H.apply(this, arguments);
}
var SvgIconDelete = (props) => React2.createElement("svg", _extends$H({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$F || (_path$F = React2.createElement("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M37.333 2.667c4.26 0 7.743 3.33 7.987 7.53l.013.47v2.666H56a2.667 2.667 0 0 1 .311 5.316l-.311.018h-2.668l.001 34.666c0 4.26-3.33 7.743-7.53 7.987l-.47.013H18.667a8 8 0 0 1-7.987-7.53l-.013-.47V18.667H8a2.667 2.667 0 0 1-.311-5.316L8 13.333h10.666v-2.666a8 8 0 0 1 7.53-7.987l.47-.013zm10.666 16H16v34.666a2.67 2.67 0 0 0 2.356 2.65l.31.017h26.667a2.67 2.67 0 0 0 2.65-2.356l.017-.31zm-21.332 8a2.667 2.667 0 0 1 2.648 2.355l.018.311v16a2.667 2.667 0 0 1-5.316.311l-.017-.31v-16a2.667 2.667 0 0 1 2.667-2.667m10.666 0a2.67 2.67 0 0 1 2.65 2.355l.017.311v16a2.667 2.667 0 0 1-5.315.311l-.018-.31v-16a2.667 2.667 0 0 1 2.666-2.667m0-18.667H26.667a2.67 2.67 0 0 0-2.65 2.356l-.017.31v2.667h16v-2.666a2.67 2.67 0 0 0-2.356-2.65L37.334 8z",
  className: "icon-delete_svg__fill"
})));
var _path$E;
function _extends$G() {
  _extends$G = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends$G.apply(this, arguments);
}
var SvgIconDisconnected = (props) => React2.createElement("svg", _extends$G({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$E || (_path$E = React2.createElement("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "m54.534 6.069-.248.217-9.736 9.735-.04.04-9.573 9.573q-.226.178-.405.404L6.286 54.286a2.423 2.423 0 0 0 3.18 3.645l.248-.217 13.374-13.373a2.42 2.42 0 0 0 1.88-.401 12.12 12.12 0 0 1 14.04 0 2.424 2.424 0 1 0 2.808-3.952 16.95 16.95 0 0 0-11.303-3.072l6.743-6.744a24.1 24.1 0 0 1 10.159 5.021 2.424 2.424 0 0 0 3.11-3.719 29 29 0 0 0-9.34-5.23l5.633-5.634a36.2 36.2 0 0 1 9.225 5.934 2.425 2.425 0 0 0 3.211-3.633 41 41 0 0 0-8.796-5.941l7.256-7.256a2.423 2.423 0 0 0-3.18-3.645m-35.04 21.474a29 29 0 0 0-6.032 3.942 2.424 2.424 0 0 0 3.137 3.697 24 24 0 0 1 5.022-3.282 2.425 2.425 0 0 0-2.127-4.357M4.748 22.909a2.424 2.424 0 0 0 3.207 3.636 36.36 36.36 0 0 1 26.978-8.977 2.424 2.424 0 0 0 .389-4.832A41.2 41.2 0 0 0 4.748 22.909",
  className: "icon-disconnected_svg__fill"
})));
var _path$D;
function _extends$F() {
  _extends$F = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends$F.apply(this, arguments);
}
var SvgIconDocument = (props) => React2.createElement("svg", _extends$F({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$D || (_path$D = React2.createElement("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M37.333 2.667a3 3 0 0 1 .274.014l.085.01.058.008q.07.01.141.026l.029.007q.075.016.146.037l.034.01q.357.107.663.303l.034.022q.053.034.104.072l.057.043q.045.033.085.068.091.075.176.16l-.126-.117q.075.065.143.135L55.21 19.438q.07.07.134.143l.035.04q.04.047.076.096l.04.054.07.1.024.038c.16.253.279.535.347.836l.01.048q.014.064.024.13l.006.048.007.051.004.041q.014.135.014.27v32a8 8 0 0 1-8 8H16a8 8 0 0 1-8-8V10.667a8 8 0 0 1 8-8zM34.666 8H16a2.667 2.667 0 0 0-2.667 2.667v42.666A2.667 2.667 0 0 0 16 56h32a2.667 2.667 0 0 0 2.667-2.667L50.666 24H37.333a2.667 2.667 0 0 1-2.648-2.356l-.018-.31zm12.227 10.667-6.894-6.894.001 6.894z",
  className: "icon-document_svg__fill"
})));
var _path$C;
function _extends$E() {
  _extends$E = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends$E.apply(this, arguments);
}
var SvgIconDone = (props) => React2.createElement("svg", _extends$E({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$C || (_path$C = React2.createElement("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M12.552 31.448a2.665 2.665 0 1 0-3.771 3.771l13.333 13.333a2.666 2.666 0 0 0 3.772 0L55.219 19.22a2.667 2.667 0 0 0-3.771-3.771L24 42.895z",
  className: "icon-done_svg__fill"
})));
var _path$B;
function _extends$D() {
  _extends$D = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends$D.apply(this, arguments);
}
var SvgIconDoneAll = (props) => React2.createElement("svg", _extends$D({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$B || (_path$B = React2.createElement("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M5.886 31.448 19.219 44.78a2.667 2.667 0 0 1-3.771 3.771L2.114 35.22a2.667 2.667 0 0 1 3.772-3.771zm52.228-16a2.666 2.666 0 1 1 3.772 3.771L32.552 48.552a2.665 2.665 0 0 1-3.771 0L15.448 35.22a2.665 2.665 0 0 1 0-3.771 2.665 2.665 0 0 1 3.771 0l11.448 11.447zm-9.562 0a2.665 2.665 0 0 1 0 3.771L32.556 35.215a2.665 2.665 0 0 1-3.771 0 2.664 2.664 0 0 1 0-3.77L44.78 15.447a2.665 2.665 0 0 1 3.771 0z",
  className: "icon-done-all_svg__fill"
})));
var _path$A;
function _extends$C() {
  _extends$C = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends$C.apply(this, arguments);
}
var SvgIconDownload = (props) => React2.createElement("svg", _extends$C({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$A || (_path$A = React2.createElement("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M56 42.667a2.667 2.667 0 0 1 2.649 2.355l.018.311v8c0 4.26-3.33 7.743-7.53 7.987l-.47.013H13.333a8 8 0 0 1-7.986-7.53l-.014-.47v-8a2.667 2.667 0 0 1 5.316-.311l.018.311v8a2.67 2.67 0 0 0 2.355 2.65l.311.017h37.334a2.667 2.667 0 0 0 2.648-2.356l.018-.31v-8A2.667 2.667 0 0 1 56 42.667m-36.552-8.781a2.666 2.666 0 0 1 3.52-3.993l.251.221 6.114 6.114V5.333a2.667 2.667 0 0 1 5.316-.311l.018.311v30.894l6.114-6.113a2.67 2.67 0 0 1 3.52-.221l.251.221a2.666 2.666 0 0 1 .222 3.52l-.222.252-10.658 10.657a2 2 0 0 1-.135.128l.127-.119a3 3 0 0 1-.195.176l-.056.045-.086.064-.056.04-.086.056-.06.036-.081.046-.079.04a3 3 0 0 1-.14.065l-.09.036q-.034.014-.067.025l-.09.03-.063.019q-.064.018-.13.034l-.013.003-.144.028-.064.01q-.045.008-.092.012l-.084.008-.103.006-.069.002h-.095q-.042 0-.082-.003l.139.003q-.126 0-.249-.011l-.061-.007-.092-.012-.09-.015-.118-.025-.04-.01a3 3 0 0 1-.34-.11l-.015-.006q-.074-.03-.145-.063l-.042-.02L30.71 45l-.067-.039q-.045-.026-.087-.054l-.062-.041q-.045-.03-.088-.063l-.04-.03-.008-.007a3 3 0 0 1-.251-.223z",
  className: "icon-download_svg__fill"
})));
var _path$z;
function _extends$B() {
  _extends$B = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends$B.apply(this, arguments);
}
var SvgIconEdit = (props) => React2.createElement("svg", _extends$B({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 65 65"
}, props), _path$z || (_path$z = React2.createElement("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M56 56a2.667 2.667 0 0 1 .311 5.315l-.311.018H8a2.667 2.667 0 0 1-.311-5.316L8 56zM35.448 3.448a2.665 2.665 0 0 1 3.771 0l10.667 10.666a2.67 2.67 0 0 1 0 3.772L20.552 47.219c-.5.5-1.178.781-1.885.781H8a2.667 2.667 0 0 1-2.667-2.667V34.667c0-.708.281-1.386.781-1.886zm1.885 5.659L10.667 35.77v6.896h6.89L44.227 16z",
  className: "icon-edit_svg__fill"
})));
var _path$y;
function _extends$A() {
  _extends$A = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends$A.apply(this, arguments);
}
var SvgIconEmojiMore = (props) => React2.createElement("svg", _extends$A({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$y || (_path$y = React2.createElement("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M32.097 3.22c2.65 0 5.255.357 7.763 1.054a2.134 2.134 0 0 1-1.144 4.111 24.7 24.7 0 0 0-6.619-.899c-13.603 0-24.63 11.027-24.63 24.63s11.027 24.63 24.63 24.63 24.63-11.027 24.63-24.63c0-2.227-.295-4.413-.87-6.518a2.13 2.13 0 0 1 1.494-2.62 2.13 2.13 0 0 1 2.62 1.494 29 29 0 0 1 1.023 7.644c0 15.96-12.938 28.897-28.897 28.897-15.96 0-28.897-12.937-28.897-28.897S16.138 3.22 32.097 3.22m10.705 34.792a2.133 2.133 0 0 1 2.024 2.808c-1.873 5.623-6.937 9.488-12.729 9.488s-10.856-3.865-12.73-9.488a2.134 2.134 0 0 1 1.875-2.803l.15-.005zm-3.477 4.266H24.867l.294.382c1.539 1.887 3.718 3.113 6.115 3.342l.314.024.507.015c2.617 0 5.037-1.188 6.743-3.151l.193-.23zM21.392 21.954c1.087 0 1.985.814 2.116 1.866l.017.267v5.353a2.133 2.133 0 0 1-4.25.268l-.017-.268v-5.353c0-1.178.955-2.133 2.134-2.133m21.41 0c1.088 0 1.985.814 2.117 1.866l.017.267v5.353a2.133 2.133 0 0 1-4.25.268l-.017-.268v-5.353c0-1.178.955-2.133 2.133-2.133M54.853 0a.8.8 0 0 1 .8.8v7.786h7.76a.8.8 0 0 1 .8.8v2.667a.8.8 0 0 1-.8.8h-7.76v7.758a.8.8 0 0 1-.8.8h-2.666a.8.8 0 0 1-.8-.8v-7.758h-7.785a.8.8 0 0 1-.8-.8V9.387a.8.8 0 0 1 .8-.8l7.784-.001V.8a.8.8 0 0 1 .8-.8z",
  className: "icon-emoji-more_svg__fill"
})));
var _path$x;
function _extends$z() {
  _extends$z = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends$z.apply(this, arguments);
}
var SvgIconError = (props) => React2.createElement("svg", _extends$z({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$x || (_path$x = React2.createElement("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M32 5.06a8 8 0 0 1 6.561 3.424l.287.439 22.608 37.744a8 8 0 0 1 .022 7.962 8 8 0 0 1-6.356 4.014l-.535.024H9.384a8 8 0 0 1-6.862-4.038 8.01 8.01 0 0 1-.226-7.493l.27-.506L25.16 8.91A8 8 0 0 1 32 5.06m0 5.333c-.816 0-1.58.372-2.076.99l-.196.28-22.565 37.67a2.67 2.67 0 0 0 1.909 3.973l.341.027h45.144a2.67 2.67 0 0 0 2.45-3.659l-.148-.304L34.28 11.676A2.67 2.67 0 0 0 32 10.393m0 32.274A2.667 2.667 0 1 1 32 48a2.667 2.667 0 0 1 0-5.333m0-21.334a2.667 2.667 0 0 1 2.649 2.356l.018.311v10.667a2.667 2.667 0 0 1-5.316.311l-.018-.311V24A2.667 2.667 0 0 1 32 21.333",
  className: "icon-error_svg__fill"
})));
var _path$w;
function _extends$y() {
  _extends$y = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends$y.apply(this, arguments);
}
var SvgIconExpand = (props) => React2.createElement("svg", _extends$y({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$w || (_path$w = React2.createElement("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M48 8a2.667 2.667 0 0 1 2.649 2.356l.018.31V32l-.001.027v21.306a2.667 2.667 0 0 1-5.315.311l-.018-.31V34.665H19.772l6.114 6.115a2.67 2.67 0 0 1 .221 3.52l-.221.251a2.666 2.666 0 0 1-3.52.222l-.252-.222-10.666-10.666a2.666 2.666 0 0 1-.222-3.52l.222-.252 10.666-10.666a2.666 2.666 0 0 1 3.993 3.52l-.221.251-6.113 6.114h25.56V10.667A2.667 2.667 0 0 1 48 8",
  className: "icon-expand_svg__fill"
})));
var _path$v;
function _extends$x() {
  _extends$x = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends$x.apply(this, arguments);
}
var SvgIconFileAudio = (props) => React2.createElement("svg", _extends$x({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$v || (_path$v = React2.createElement("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M30.52 12.51c1.685-1.226 4.139-.103 4.139 1.893v35.194c0 1.996-2.454 3.119-4.138 1.893l-12.45-9.909H7.898c-1.416 0-2.564-1.074-2.564-2.399V24.818c0-1.325 1.148-2.4 2.564-2.4h10.175zm20.427.163c10.293 10.667 10.293 27.987 0 38.654a2.137 2.137 0 0 1-3.156-.047c-.86-.942-.84-2.448.044-3.364 8.49-8.799 8.49-23.033 0-31.832-.884-.916-.904-2.422-.044-3.364a2.137 2.137 0 0 1 3.156-.047m-8.492 8.799c5.597 5.8 5.597 15.231 0 21.031a2.136 2.136 0 0 1-3.156-.046c-.86-.942-.84-2.448.044-3.364 3.794-3.932 3.794-10.279 0-14.211-.884-.916-.904-2.422-.044-3.363a2.136 2.136 0 0 1 3.156-.047",
  className: "icon-file-audio_svg__fill"
})));
var _path$u;
function _extends$w() {
  _extends$w = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends$w.apply(this, arguments);
}
var SvgIconFileDocument = (props) => React2.createElement("svg", _extends$w({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$u || (_path$u = React2.createElement("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M39.414 6.4a2.4 2.4 0 0 1 1.71.701l12.642 12.75c.407.41.634.953.634 1.516v29.765c0 3.542-4.342 6.468-8 6.468H16.16c-3.658 0-6.4-2.926-6.4-6.468L9.6 12.868c0-3.542 2.902-6.468 6.56-6.468zm3.331 35.173-21.49.027-.147.005c-1.066.08-1.908 1.014-1.908 2.155 0 1.193.92 2.16 2.055 2.16l21.49-.027.147-.005c1.066-.08 1.908-1.014 1.908-2.155 0-1.193-.92-2.16-2.055-2.16m0-8.533-21.49.027-.147.005c-1.066.08-1.908 1.014-1.908 2.155 0 1.193.92 2.16 2.055 2.16l21.49-.027.147-.005c1.066-.08 1.908-1.014 1.908-2.155 0-1.193-.92-2.16-2.055-2.16m-11.807-8.507h-9.6l-.153.006a2.15 2.15 0 0 0-1.985 2.154c0 1.193.957 2.16 2.138 2.16h9.6l.152-.005a2.15 2.15 0 0 0 1.985-2.155c0-1.193-.957-2.16-2.137-2.16",
  className: "icon-file-document_svg__fill"
})));
var _path$t;
function _extends$v() {
  _extends$v = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends$v.apply(this, arguments);
}
var SvgIconFreeze = (props) => React2.createElement("svg", _extends$v({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$t || (_path$t = React2.createElement("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "m41.636 3.226.251.222a2.67 2.67 0 0 1 .222 3.52l-.222.251-7.219 7.218V27.38l11.209-6.472 2.643-9.86a2.667 2.667 0 0 1 5.218 1.051l-.067.329-2.237 8.35 8.352 2.24a2.67 2.67 0 0 1 1.952 2.938l-.067.328a2.67 2.67 0 0 1-2.937 1.952l-.329-.066-9.861-2.643L37.334 32l11.209 6.47 9.862-2.64.329-.067a2.67 2.67 0 0 1 2.937 1.952l.067.328a2.67 2.67 0 0 1-1.952 2.938l-8.353 2.237 2.238 8.353.067.329a2.666 2.666 0 0 1-5.218 1.052l-2.643-9.861-11.209-6.472v12.944l7.219 7.218a2.667 2.667 0 0 1-3.52 3.993l-.251-.222L32 54.437l-6.114 6.115a2.666 2.666 0 0 1-3.52.222l-.251-.222a2.666 2.666 0 0 1-.222-3.52l.222-.251 7.218-7.22V36.62l-11.209 6.47-2.642 9.863a2.666 2.666 0 0 1-5.218-1.052l.067-.329 2.236-8.351-8.35-2.24a2.665 2.665 0 0 1-1.953-2.937l.067-.328a2.665 2.665 0 0 1 2.937-1.952l.329.066 9.861 2.642L26.667 32l-11.209-6.472-9.86 2.643-.329.066a2.665 2.665 0 0 1-2.937-1.952l-.067-.328a2.67 2.67 0 0 1 1.952-2.938l8.35-2.239-2.235-8.351-.067-.329a2.667 2.667 0 0 1 5.218-1.052l2.642 9.862 11.209 6.47V14.439L22.116 7.22a2.665 2.665 0 0 1 0-3.771 2.666 2.666 0 0 1 3.52-.222l.251.222 6.114 6.112 6.115-6.112a2.666 2.666 0 0 1 3.52-.222z",
  className: "icon-freeze_svg__fill"
})));
var _path$s;
function _extends$u() {
  _extends$u = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends$u.apply(this, arguments);
}
var SvgIconGif = (props) => React2.createElement("svg", _extends$u({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$s || (_path$s = React2.createElement("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M16.664 45.333q3.233 0 5.89-.953 2.658-.954 4.113-2.683V31.34h-10.29v3.94h4.902v4.474q-1.292 1.284-4.327 1.283-3.017 0-4.58-2.085-1.561-2.085-1.562-6.168v-1.657q.018-4.047 1.455-6.097t4.184-2.05q2.155 0 3.385 1.034t1.59 3.262h5.243q-.486-4.206-3.107-6.408t-7.273-2.201q-3.34 0-5.827 1.506t-3.807 4.35q-1.32 2.843-1.32 6.728v1.765q.036 3.78 1.428 6.578 1.392 2.797 3.95 4.269 2.56 1.47 5.953 1.47m20.67 0V18.667H32v26.666h5.333zm10.396 0V34.436h9.721v-4.432H47.73v-6.887h10.937v-4.45h-16v26.666z",
  className: "icon-gif_svg__fill"
})));
var _path$r;
function _extends$t() {
  _extends$t = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends$t.apply(this, arguments);
}
var SvgIconInfo = (props) => React2.createElement("svg", _extends$t({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$r || (_path$r = React2.createElement("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333 2.667 48.2 2.667 32 15.8 2.667 32 2.667M32 8C18.745 8 8 18.745 8 32s10.745 24 24 24 24-10.745 24-24S45.255 8 32 8m1.667 21.333a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1h-3.334a1 1 0 0 1-1-1v-14a1 1 0 0 1 1-1zm-1.667-8a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334",
  className: "icon-info_svg__fill"
})));
var _path$q;
function _extends$s() {
  _extends$s = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends$s.apply(this, arguments);
}
var SvgIconLeave = (props) => React2.createElement("svg", _extends$s({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$q || (_path$q = React2.createElement("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M32 5.333a2.667 2.667 0 0 1 .311 5.316l-.311.018H10.667a2.67 2.67 0 0 0-2.65 2.355L8 13.333v37.334a2.667 2.667 0 0 0 2.356 2.648l.31.018H32a2.667 2.667 0 0 1 .311 5.316l-.311.018H10.667a8 8 0 0 1-7.987-7.53l-.013-.47V13.333a8 8 0 0 1 7.53-7.986l.47-.014zm17.634 13.893.252.222 10.666 10.666a2.666 2.666 0 0 1 .222 3.52l-.222.252-10.666 10.666a2.666 2.666 0 0 1-3.993-3.52l.221-.251 4.78-4.782L20 36a2.667 2.667 0 0 1-.311-5.315l.311-.018h33.56l-7.446-7.448a2.67 2.67 0 0 1-.221-3.52l.221-.251a2.666 2.666 0 0 1 3.52-.222",
  className: "icon-leave_svg__fill"
})));
var _path$p;
function _extends$r() {
  _extends$r = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends$r.apply(this, arguments);
}
var SvgIconMembers = (props) => React2.createElement("svg", _extends$r({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$p || (_path$p = React2.createElement("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M34.667 37.333c7.17 0 13.018 5.66 13.32 12.755l.013.579V56a2.667 2.667 0 0 1-5.315.311L42.667 56v-5.333c0-4.26-3.33-7.743-7.53-7.987l-.47-.013H13.333a8 8 0 0 0-7.986 7.53l-.014.47V56a2.667 2.667 0 0 1-5.316.311L0 56v-5.333c0-7.17 5.66-13.019 12.755-13.321l.578-.013zM54 37.765a13.33 13.33 0 0 1 9.986 12.297l.014.605V56a2.667 2.667 0 0 1-5.315.311L58.667 56v-5.331a8 8 0 0 0-6-7.74A2.667 2.667 0 1 1 54 37.765M24 5.333c7.364 0 13.333 5.97 13.333 13.334S31.363 32 24 32s-13.333-5.97-13.333-13.333S16.637 5.333 24 5.333m19.328.43a13.333 13.333 0 0 1 0 25.834 2.667 2.667 0 1 1-1.323-5.167 8 8 0 0 0 0-15.5 2.667 2.667 0 1 1 1.323-5.167M24 10.667a8 8 0 1 0 0 16 8 8 0 0 0 0-16",
  className: "icon-members_svg__fill"
})));
var _path$o;
function _extends$q() {
  _extends$q = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends$q.apply(this, arguments);
}
var SvgIconMessage = (props) => React2.createElement("svg", _extends$q({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$o || (_path$o = React2.createElement("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333c-4.455 0-8.679-.993-12.461-2.77l-1.753.58q-8.947 2.868-12.504 1.981-4.198-1.047-1.657-3.663 1.757-2.094 2.928-5.234.934-2.502-.737-7A29.15 29.15 0 0 1 2.666 32C2.667 15.8 15.8 2.667 32 2.667M32 8C18.745 8 8 18.745 8 32c0 3.5.747 6.88 2.168 9.978l.405.837.137.271.106.285c1.517 4.085 1.89 7.622.734 10.72l-.382.972-.192.433.235-.05a62 62 0 0 0 4.886-1.363l1.721-.568 2.04-.696 1.95.917A23.9 23.9 0 0 0 32 56c13.255 0 24-10.745 24-24S45.255 8 32 8M18.667 29.333a2.667 2.667 0 1 1-.001 5.333 2.667 2.667 0 0 1 .001-5.333m13.333 0a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334m13.333 0a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334",
  className: "icon-message_svg__fill"
})));
var _path$n;
function _extends$p() {
  _extends$p = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends$p.apply(this, arguments);
}
var SvgIconModerations = (props) => React2.createElement("svg", _extends$p({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$n || (_path$n = React2.createElement("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M18.667 34.667a2.667 2.667 0 0 1 .311 5.316l-.311.017h-5.334v16a2.667 2.667 0 0 1-5.316.311L8 56V40H2.667a2.667 2.667 0 0 1-.311-5.315l.31-.018h16zM32 29.333a2.667 2.667 0 0 1 2.649 2.356l.018.311v24a2.667 2.667 0 0 1-5.316.311L29.333 56V32A2.667 2.667 0 0 1 32 29.333M61.333 40a2.667 2.667 0 0 1 .311 5.315l-.31.018h-5.335L56 56a2.667 2.667 0 0 1-5.315.311L50.667 56l-.001-10.668-5.333.001a2.667 2.667 0 0 1-.311-5.316l.311-.017zm-8-34.667a2.67 2.67 0 0 1 2.65 2.356L56 8v24a2.667 2.667 0 0 1-5.315.311L50.667 32V8a2.667 2.667 0 0 1 2.666-2.667m-42.666 0a2.667 2.667 0 0 1 2.648 2.356l.018.311v18.667a2.667 2.667 0 0 1-5.316.311L8 26.667V8a2.667 2.667 0 0 1 2.667-2.667m21.333 0a2.667 2.667 0 0 1 2.649 2.356l.018.311-.001 10.666H40a2.668 2.668 0 0 1 .311 5.317L40 24H24a2.667 2.667 0 0 1-.311-5.315l.311-.018h5.333V8A2.667 2.667 0 0 1 32 5.333",
  className: "icon-moderations_svg__fill"
})));
var _path$m;
function _extends$o() {
  _extends$o = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends$o.apply(this, arguments);
}
var SvgIconMore = (props) => React2.createElement("svg", _extends$o({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$m || (_path$m = React2.createElement("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M32 45.333a5.333 5.333 0 1 1 0 10.666 5.333 5.333 0 0 1 0-10.666M32 28a5.333 5.333 0 1 1 0 10.668A5.333 5.333 0 0 1 32 28m0-17.333c2.946 0 5.333 2.387 5.333 5.333S34.946 21.333 32 21.333 26.667 18.946 26.667 16s2.387-5.333 5.333-5.333",
  className: "icon-more_svg__fill"
})));
var _path$l;
function _extends$n() {
  _extends$n = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends$n.apply(this, arguments);
}
var SvgIconMute = (props) => React2.createElement("svg", _extends$n({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$l || (_path$l = React2.createElement("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "m55.62 19.616.067.123A26.55 26.55 0 0 1 58.667 32c0 4.326-1.03 8.41-2.864 12.025q-1.518 4.089-.67 6.363 1.066 2.855 2.662 4.758 2.31 2.379-1.506 3.33-3.135.782-10.879-1.646l-.488-.155-1.594-.527A26.6 26.6 0 0 1 32 58.667a26.55 26.55 0 0 1-12.326-3.014l-.059-.03 4-4A21.2 21.2 0 0 0 32 53.333c2.993 0 5.89-.614 8.562-1.786l.498-.226 1.925-.905 3.613 1.196.695.219q1.093.337 2.054.595l.472.125.485.121-.167-.42-.2-.594c-.814-2.685-.484-5.681.713-9.065l.154-.425.106-.284.528-1.084a21.2 21.2 0 0 0 1.895-8.8 21.2 21.2 0 0 0-1.71-8.385zm2.266-13.502a2.67 2.67 0 0 1 .221 3.52l-.221.252-48 48a2.668 2.668 0 0 1-3.993-3.52l.221-.252 5.238-5.237a26.56 26.56 0 0 1-6.015-16.412L5.333 32C5.333 17.272 17.273 5.333 32 5.333a26.55 26.55 0 0 1 16.877 6.02l5.237-5.239a2.67 2.67 0 0 1 3.772 0M32 10.667c-11.782 0-21.333 9.55-21.333 21.333 0 4.836 1.614 9.401 4.48 13.084l29.936-29.938A21.25 21.25 0 0 0 32 10.666z",
  className: "icon-mute_svg__fill"
})));
var _path$k;
function _extends$m() {
  _extends$m = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends$m.apply(this, arguments);
}
var SvgIconNotifications = (props) => React2.createElement("svg", _extends$m({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$k || (_path$k = React2.createElement("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M36.613 53.333c2.056 0 3.338 2.227 2.307 4.005a8 8 0 0 1-13.84 0c-.98-1.689.129-3.783 2.004-3.988l.303-.017zM32 2.667c11.56 0 20.972 9.194 21.323 20.669l.01.664v13.333a5.334 5.334 0 0 0 4.936 5.319l.753.033c2.963.318 3.077 4.616.342 5.24l-.342.056-.355.019H5.333l-.355-.019c-3.082-.33-3.082-4.965 0-5.296l.753-.033a5.335 5.335 0 0 0 4.92-4.9l.016-.419V24c0-11.782 9.55-21.333 21.333-21.333M32 8c-8.636 0-15.674 6.842-15.989 15.4L16 24v13.333c0 1.562-.336 3.046-.939 4.383l-.275.564-.218.387h34.861l-.215-.387a10.6 10.6 0 0 1-1.146-3.74l-.055-.674-.013-.533V24c0-8.837-7.163-16-16-16",
  className: "icon-notifications_svg__fill"
})));
var _path$j;
function _extends$l() {
  _extends$l = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends$l.apply(this, arguments);
}
var SvgIconNotificationsOffFilled = (props) => React2.createElement("svg", _extends$l({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$j || (_path$j = React2.createElement("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M36.613 53.333c2.056 0 3.338 2.227 2.307 4.005a8 8 0 0 1-13.84 0c-.98-1.689.129-3.783 2.004-3.988l.303-.017zM32 2.667c7.173 0 13.52 3.54 17.387 8.97l5.686-5.687a2.105 2.105 0 0 1 2.85-.117l.127.117a2.105 2.105 0 0 1 0 2.977L8.927 58.05c-.78.781-2.023.82-2.85.117l-.127-.117a2.105 2.105 0 0 1 0-2.977L13.023 48h-7.69l-.355-.019c-3.082-.33-3.082-4.965 0-5.296l.753-.033a5.335 5.335 0 0 0 4.92-4.9l.016-.419V24c0-11.782 9.55-21.333 21.333-21.333m20.85 16.795c.271 1.253.433 2.548.473 3.874l.01.664v13.333a5.334 5.334 0 0 0 4.936 5.319l.753.033c2.963.318 3.077 4.616.342 5.24l-.342.056-.355.019H24.31z",
  className: "icon-notifications-off-filled_svg__fill"
})));
var _path$i;
function _extends$k() {
  _extends$k = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends$k.apply(this, arguments);
}
var SvgIconOperator = (props) => React2.createElement("svg", _extends$k({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$i || (_path$i = React2.createElement("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M29.83 6.45a2.667 2.667 0 0 1 4.34 0l11.697 16.374L57 13.918c1.88-1.504 4.573.054 4.32 2.35l-.047.29-8 37.334A2.666 2.666 0 0 1 50.666 56H13.333a2.666 2.666 0 0 1-2.607-2.108l-8-37.333c-.525-2.452 2.315-4.207 4.273-2.641l11.132 8.906zM32 12.587l-11.163 15.63a2.667 2.667 0 0 1-3.836.532l-7.497-5.997 5.984 27.915h33.021l5.984-27.915L47 28.749a2.667 2.667 0 0 1-3.632-.281l-.204-.251zM32 32a5.333 5.333 0 1 1 0 10.668A5.333 5.333 0 0 1 32 32",
  className: "icon-operator_svg__fill"
})));
var _path$h;
function _extends$j() {
  _extends$j = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends$j.apply(this, arguments);
}
var SvgIconPhoto = (props) => React2.createElement("svg", _extends$j({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$h || (_path$h = React2.createElement("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M50.667 5.333a8 8 0 0 1 8 8v37.334a8 8 0 0 1-8 8H13.333a8 8 0 0 1-8-8V13.333a8 8 0 0 1 8-8zm-8 25.107L19.77 53.332l30.896.001a2.667 2.667 0 0 0 2.661-2.498l.005-.168v-9.564L42.666 30.44zm8-19.773H13.333a2.667 2.667 0 0 0-2.666 2.666v37.334c0 1.143.72 2.119 1.731 2.498L40.781 24.78a2.67 2.67 0 0 1 3.52-.222l.251.222 8.78 8.78.001-20.228a2.667 2.667 0 0 0-2.498-2.661zm-28 5.333a6.666 6.666 0 1 1 0 13.333 6.666 6.666 0 0 1 0-13.333m0 5.333a1.334 1.334 0 1 0 0 2.667 1.334 1.334 0 0 0 0-2.667",
  className: "icon-photo_svg__fill"
})));
var _path$g;
function _extends$i() {
  _extends$i = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends$i.apply(this, arguments);
}
var SvgIconPlay = (props) => React2.createElement("svg", _extends$i({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$g || (_path$g = React2.createElement("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M51.908 34.75c1.9-1.233 1.896-3.26.013-4.514L19.376 8.577c-1.893-1.26-3.404-.391-3.376 1.968l.522 42.888c.028 2.347 1.596 3.247 3.493 2.016z",
  className: "icon-play_svg__fill"
})));
var _path$f;
function _extends$h() {
  _extends$h = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends$h.apply(this, arguments);
}
var SvgIconPlus = (props) => React2.createElement("svg", _extends$h({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$f || (_path$f = React2.createElement("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M34.667 29.333h18.666c3.556 0 3.556 5.334 0 5.334H34.667v18.666c0 3.556-5.334 3.556-5.334 0V34.667H10.667c-3.556 0-3.556-5.334 0-5.334h18.666V10.667c0-3.556 5.334-3.556 5.334 0z",
  className: "icon-plus_svg__fill"
})));
var _path$e;
function _extends$g() {
  _extends$g = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends$g.apply(this, arguments);
}
var SvgIconQuestion = (props) => React2.createElement("svg", _extends$g({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$e || (_path$e = React2.createElement("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M32 61.333C15.8 61.333 2.667 48.2 2.667 32S15.8 2.667 32 2.667 61.333 15.8 61.333 32 48.2 61.333 32 61.333M32 56c13.255 0 24-10.745 24-24S45.255 8 32 8 8 18.745 8 32s10.745 24 24 24m2.213-18.63a2.667 2.667 0 1 1-5.333 0v-2.69c0-1.148.734-2.168 1.823-2.53.173-.058.532-.195 1.01-.407.809-.36 1.616-.79 2.354-1.282 1.835-1.223 2.813-2.528 2.813-3.786a5.333 5.333 0 0 0-10.364-1.777 2.667 2.667 0 0 1-5.032-1.77 10.668 10.668 0 0 1 20.729 3.551c0 3.413-2.022 6.109-5.187 8.22a21 21 0 0 1-2.813 1.578zm-5.333 7.523a2.667 2.667 0 1 1 5.333 0v.44a2.667 2.667 0 1 1-5.333 0v-.44",
  className: "icon-question_svg__fill"
})));
var _path$d;
function _extends$f() {
  _extends$f = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends$f.apply(this, arguments);
}
var SvgIconRefresh = (props) => React2.createElement("svg", _extends$f({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$d || (_path$d = React2.createElement("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "m46.14 14.43.562.537 6.631 6.167v-7.8a2.67 2.67 0 0 1 2.356-2.65l.311-.017a2.667 2.667 0 0 1 2.649 2.355l.018.311v16a2.67 2.67 0 0 1-2.356 2.65L56 32H40a2.667 2.667 0 0 1-.311-5.315l.311-.018h11.452l-8.44-7.85c-5.964-5.893-15.168-7.182-22.563-3.156-7.38 4.018-11.172 12.357-9.314 20.455 1.859 8.107 8.935 14.032 17.362 14.518 8.43.487 16.162-4.585 18.967-12.426a2.667 2.667 0 0 1 5.022 1.797C48.88 50.082 38.973 56.582 28.19 55.959c-10.785-.623-19.862-8.222-22.254-18.65C3.542 26.872 8.426 16.135 17.9 10.977c9.227-5.024 20.65-3.579 28.241 3.453z",
  className: "icon-refresh_svg__fill"
})));
var _path$c;
function _extends$e() {
  _extends$e = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends$e.apply(this, arguments);
}
var SvgIconRemove = (props) => React2.createElement("svg", _extends$e({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$c || (_path$c = React2.createElement("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333 2.667 48.2 2.667 32 15.8 2.667 32 2.667m9.886 19.447a2.67 2.67 0 0 0-3.772 0L32 28.23l-6.114-6.115-.134-.124a2.667 2.667 0 0 0-3.638.124l-.124.134a2.667 2.667 0 0 0 .124 3.638L28.23 32l-6.115 6.114-.124.134a2.667 2.667 0 0 0 .124 3.638l.134.124a2.667 2.667 0 0 0 3.638-.124L32 35.77l6.114 6.115.134.124a2.667 2.667 0 0 0 3.638-.124l.124-.134a2.667 2.667 0 0 0-.124-3.638L35.77 32l6.115-6.114.124-.134a2.667 2.667 0 0 0-.124-3.638z",
  className: "icon-remove_svg__fill"
})));
var _path$b;
function _extends$d() {
  _extends$d = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends$d.apply(this, arguments);
}
var SvgIconReplyFilled = (props) => React2.createElement("svg", _extends$d({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 12 12"
}, props), _path$b || (_path$b = React2.createElement("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M11.774 10.5c.062 0 .12-.025.164-.07a.22.22 0 0 0 .062-.164c-.069-1.447-.495-2.678-1.268-3.66-.618-.785-1.455-1.409-2.49-1.855a9.3 9.3 0 0 0-2.406-.655 10 10 0 0 0-.862-.078V2.225a.23.23 0 0 0-.128-.203.23.23 0 0 0-.24.028L.084 5.692A.22.22 0 0 0 0 5.865c0 .068.03.132.082.175l4.523 3.737c.067.056.16.068.24.03a.22.22 0 0 0 .13-.202v-1.95c1.134-.08 2.178.003 3.107.25a6.4 6.4 0 0 1 2.087.96c1.018.724 1.398 1.5 1.401 1.507a.23.23 0 0 0 .204.128",
  className: "icon-reply-filled_svg__fill"
})));
var _path$a;
function _extends$c() {
  _extends$c = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends$c.apply(this, arguments);
}
var SvgIconSearch = (props) => React2.createElement("svg", _extends$c({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$a || (_path$a = React2.createElement("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M26.667 48C14.885 48 5.333 38.449 5.333 26.667S14.885 5.333 26.667 5.333 48 14.885 48 26.667c0 4.93-1.672 9.469-4.48 13.081l13.67 13.67a2.668 2.668 0 0 1-3.772 3.772l-13.67-13.67A21.24 21.24 0 0 1 26.667 48m0-5.333c8.836 0 16-7.164 16-16s-7.164-16-16-16-16 7.163-16 16 7.163 16 16 16",
  className: "icon-search_svg__fill"
})));
var _path$9;
function _extends$b() {
  _extends$b = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends$b.apply(this, arguments);
}
var SvgIconSend = (props) => React2.createElement("svg", _extends$b({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$9 || (_path$9 = React2.createElement("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M59.795 29.43 7.329 2.979C4.691 1.802 1.76 4.153 2.932 6.798l6.925 18.609a2 2 0 0 0 1.544 1.275l32.273 5.394L11.4 37.47a2 2 0 0 0-1.544 1.275L2.932 57.353c-.879 2.645 1.76 4.997 4.397 3.527l52.466-26.453c2.051-.882 2.051-3.82 0-4.996z",
  className: "icon-send_svg__fill"
})));
var _path$8;
function _extends$a() {
  _extends$a = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends$a.apply(this, arguments);
}
var SvgIconSettingsFilled = (props) => React2.createElement("svg", _extends$a({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$8 || (_path$8 = React2.createElement("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M32 2.667A5.33 5.33 0 0 1 37.333 8v.24A4.4 4.4 0 0 0 40 12.267a4.4 4.4 0 0 0 4.853-.88l.16-.16a5.33 5.33 0 0 1 7.547 0 5.333 5.333 0 0 1 0 7.546l-.16.16a4.4 4.4 0 0 0-.88 4.854V24a4.4 4.4 0 0 0 4.027 2.667H56c2.946 0 5.333 2.387 5.333 5.333S58.946 37.333 56 37.333h-.24A4.4 4.4 0 0 0 51.733 40a4.4 4.4 0 0 0 .88 4.853l.16.16a5.33 5.33 0 0 1 0 7.547 5.333 5.333 0 0 1-7.546 0l-.16-.16a4.4 4.4 0 0 0-4.854-.88 4.4 4.4 0 0 0-2.666 4.027V56a5.333 5.333 0 0 1-10.667 0v-.24A4.4 4.4 0 0 0 24 51.733a4.4 4.4 0 0 0-4.853.88l-.16.16a5.33 5.33 0 0 1-7.547 0 5.333 5.333 0 0 1 0-7.546l.16-.16a4.4 4.4 0 0 0 .88-4.854 4.4 4.4 0 0 0-4.027-2.666H8A5.333 5.333 0 0 1 8 26.88h.24A4.4 4.4 0 0 0 12.267 24a4.4 4.4 0 0 0-.88-4.853l-.16-.16a5.33 5.33 0 0 1 0-7.547 5.333 5.333 0 0 1 7.546 0l.16.16a4.4 4.4 0 0 0 4.854.88H24a4.4 4.4 0 0 0 2.667-4.027V8A5.33 5.33 0 0 1 32 2.667M32 24a8 8 0 1 0 0 16 8 8 0 0 0 0-16",
  className: "icon-settings-filled_svg__fill"
})));
var _path$7;
function _extends$9() {
  _extends$9 = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends$9.apply(this, arguments);
}
var SvgIconSlideLeft = (props) => React2.createElement("svg", _extends$9({
  xmlns: "http://www.w3.org/2000/svg",
  fill: "none",
  viewBox: "0 0 32 32"
}, props), _path$7 || (_path$7 = React2.createElement("path", {
  d: "M21.943 24.39a1.333 1.333 0 0 1-1.886 1.886l-9.333-9.333a1.333 1.333 0 0 1 0-1.886l9.333-9.333a1.333 1.333 0 1 1 1.886 1.885L13.553 16z",
  className: "icon-slide-left_svg__fill",
  clipRule: "evenodd"
})));
var _path$6;
function _extends$8() {
  _extends$8 = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends$8.apply(this, arguments);
}
var SvgIconSpinner = (props) => React2.createElement("svg", _extends$8({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$6 || (_path$6 = React2.createElement("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M32 61.333C48.2 61.333 61.333 48.2 61.333 32S48.2 2.667 32 2.667 2.667 15.8 2.667 32a2.838 2.838 0 1 0 5.678 0C8.344 18.935 18.934 8.344 32 8.344c13.065 0 23.656 10.591 23.656 23.656S45.065 55.656 32 55.656a2.838 2.838 0 1 0 0 5.677",
  className: "icon-spinner_svg__fill"
})));
var _path$5;
function _extends$7() {
  _extends$7 = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends$7.apply(this, arguments);
}
var SvgIconSupergroup = (props) => React2.createElement("svg", _extends$7({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$5 || (_path$5 = React2.createElement("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M36.889 43.013c6.608 0 12.121 4.685 12.43 10.734l.014.537V58a2.667 2.667 0 0 1-5.316.311L44 58v-3.716c0-3.07-2.87-5.718-6.636-5.925l-.475-.013H27.11c-3.838 0-6.86 2.525-7.096 5.557l-.015.381V58a2.667 2.667 0 0 1-5.315.311L14.667 58v-3.716c0-6.126 5.324-10.986 11.864-11.26l.58-.011zm18.578-17.291q.401 0 .784.118c4.632 1.426 7.518 4.801 7.736 9.688l.013.594v12.8a2.667 2.667 0 0 1-5.315.311l-.018-.311V36.124c-.002-2.595-1.163-4.171-3.528-5.034l-.104-.037-2.502.002a2.667 2.667 0 0 1-2.648-2.356l-.018-.31a2.67 2.67 0 0 1 2.355-2.65l.311-.017zm-44 0 .31.018a2.666 2.666 0 0 1 2.356 2.648l-.018.311a2.666 2.666 0 0 1-2.648 2.356l-2.51-.002-.119.042c-2.246.85-3.503 2.574-3.505 5.147v12.68l-.018.31A2.666 2.666 0 0 1 0 48.922V36.24l.014-.591c.225-4.874 3.203-8.415 7.712-9.809q.384-.117.788-.118zM32 19.958c5.512 0 10 4.409 10 9.871s-4.488 9.872-10 9.872-10-4.41-10-9.872 4.488-9.871 10-9.871m0 5.333c-2.588 0-4.667 2.043-4.667 4.538s2.08 4.538 4.667 4.538c2.588 0 4.667-2.042 4.667-4.538 0-2.495-2.08-4.538-4.667-4.538M17.333 2.667c5.513 0 10 4.409 10 9.871s-4.487 9.871-10 9.871c-5.512 0-10-4.409-10-9.871s4.488-9.871 10-9.871m29.334 0c5.512 0 10 4.409 10 9.871s-4.488 9.871-10 9.871c-5.513 0-10-4.409-10-9.871s4.487-9.871 10-9.871M17.333 8c-2.587 0-4.666 2.042-4.666 4.538s2.079 4.538 4.666 4.538S22 15.034 22 12.538 19.921 8 17.333 8m29.334 0C44.079 8 42 10.042 42 12.538s2.079 4.538 4.667 4.538 4.666-2.042 4.666-4.538S49.254 8 46.667 8",
  className: "icon-supergroup_svg__fill"
})));
var _path$4;
var _path2;
function _extends$6() {
  _extends$6 = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends$6.apply(this, arguments);
}
var SvgIconThread = (props) => React2.createElement("svg", _extends$6({
  xmlns: "http://www.w3.org/2000/svg",
  fill: "none",
  viewBox: "0 0 64 64"
}, props), _path$4 || (_path$4 = React2.createElement("path", {
  d: "M38.824 25.895a2.95 2.95 0 0 1 4.16-.074L57.1 39.378a2.92 2.92 0 0 1 .002 4.213L42.985 57.177a2.95 2.95 0 0 1-4.158-.07 2.92 2.92 0 0 1 .07-4.14l11.928-11.48-11.926-11.451a2.92 2.92 0 0 1-.075-4.14",
  className: "icon-thread_svg__fill",
  clipRule: "evenodd"
})), _path2 || (_path2 = React2.createElement("path", {
  d: "M8.866 6c1.583 0 2.866 1.216 2.866 2.716V25.5c0 7.672 6.846 14.068 15.475 14.068h22.927c1.583 0 2.866 1.216 2.866 2.716S51.717 45 50.134 45H27.207C15.604 45 6 36.35 6 25.5V8.716C6 7.216 7.283 6 8.866 6",
  className: "icon-thread_svg__fill",
  clipRule: "evenodd"
})));
var _path$3;
function _extends$5() {
  _extends$5 = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends$5.apply(this, arguments);
}
var SvgIconThumbnailNone = (props) => React2.createElement("svg", _extends$5({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$3 || (_path$3 = React2.createElement("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M34.667 5.333a2.667 2.667 0 0 1 0 5.334H13.333a2.667 2.667 0 0 0-2.666 2.666v37.334c0 1.143.72 2.118 1.73 2.497l28.384-28.383a2.667 2.667 0 0 1 3.771 0l8.781 8.78v-4.228a2.667 2.667 0 0 1 2.498-2.661l.169-.005a2.667 2.667 0 0 1 2.667 2.666v21.334a8 8 0 0 1-8 8H13.33a8 8 0 0 1-7.998-8V13.333a8 8 0 0 1 8-8zm8 25.105L19.77 53.333h30.897a2.667 2.667 0 0 0 2.661-2.498l.005-.168v-9.563zM22.667 16a6.666 6.666 0 1 1 0 13.333 6.666 6.666 0 0 1 0-13.333m0 5.333a1.334 1.334 0 1 0 0 2.667 1.334 1.334 0 0 0 0-2.667M56.78 3.448a2.665 2.665 0 0 1 3.771 0 2.665 2.665 0 0 1 0 3.771l-4.782 4.78 4.782 4.782c.998.998 1.04 2.59.125 3.638l-.125.133a2.665 2.665 0 0 1-3.771 0l-4.782-4.781-4.78 4.781a2.667 2.667 0 0 1-3.638.125l-.133-.125a2.665 2.665 0 0 1 0-3.771L48.228 12l-4.78-4.781a2.667 2.667 0 0 1-.125-3.638l.125-.133a2.665 2.665 0 0 1 3.771 0l4.78 4.78z",
  className: "icon-thumbnail-none_svg__fill"
})));
var _g$1;
function _extends$4() {
  _extends$4 = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends$4.apply(this, arguments);
}
var SvgIconToggleoff = (props) => React2.createElement("svg", _extends$4({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 88 48"
}, props), _g$1 || (_g$1 = React2.createElement("g", {
  fill: "none",
  fillRule: "evenodd"
}, React2.createElement("rect", {
  width: 80,
  height: 40,
  x: 4,
  y: 4,
  fill: "#000",
  className: "icon-toggleoff_svg__fill",
  rx: 20
}), React2.createElement("circle", {
  cx: 24,
  cy: 24,
  r: 12,
  fill: "#FFF"
}), React2.createElement("path", {
  fill: "#FFF",
  d: "M64 4c11.046 0 20 8.954 20 20s-8.954 20-20 20H24C12.954 44 4 35.046 4 24S12.954 4 24 4zm0 2H24C14.059 6 6 14.059 6 24c0 9.764 7.774 17.712 17.47 17.992L24 42h40c9.941 0 18-8.059 18-18 0-9.764-7.774-17.712-17.47-17.992z"
}), React2.createElement("path", {
  fill: "#000",
  d: "M64 0H24C10.745 0 0 10.745 0 24s10.745 24 24 24h40c13.255 0 24-10.745 24-24S77.255 0 64 0m0 4c11.046 0 20 8.954 20 20s-8.954 20-20 20H24C12.954 44 4 35.046 4 24S12.954 4 24 4z",
  className: "icon-toggleoff_svg__fill"
}))));
var _g;
function _extends$3() {
  _extends$3 = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends$3.apply(this, arguments);
}
var SvgIconToggleon = (props) => React2.createElement("svg", _extends$3({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 88 48"
}, props), _g || (_g = React2.createElement("g", {
  fill: "none",
  fillRule: "evenodd"
}, React2.createElement("rect", {
  width: 80,
  height: 40,
  x: 4,
  y: 4,
  fill: "#000",
  className: "icon-toggleon_svg__fill",
  rx: 20
}), React2.createElement("circle", {
  cx: 64,
  cy: 24,
  r: 12,
  fill: "#FFF"
}), React2.createElement("path", {
  fill: "#FFF",
  d: "M64 4c11.046 0 20 8.954 20 20s-8.954 20-20 20H24C12.954 44 4 35.046 4 24S12.954 4 24 4zm0 2H24C14.059 6 6 14.059 6 24c0 9.764 7.774 17.712 17.47 17.992L24 42h40c9.941 0 18-8.059 18-18 0-9.764-7.774-17.712-17.47-17.992z"
}), React2.createElement("path", {
  fill: "#000",
  d: "M64 0H24C10.745 0 0 10.745 0 24s10.745 24 24 24h40c13.255 0 24-10.745 24-24S77.255 0 64 0m0 4c11.046 0 20 8.954 20 20s-8.954 20-20 20H24C12.954 44 4 35.046 4 24S12.954 4 24 4z",
  className: "icon-toggleon_svg__fill"
}))));
var _path$2;
function _extends$2() {
  _extends$2 = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends$2.apply(this, arguments);
}
var SvgIconUser = (props) => React2.createElement("svg", _extends$2({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$2 || (_path$2 = React2.createElement("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M42.667 37.333c7.17 0 13.018 5.66 13.32 12.755l.013.579V56a2.667 2.667 0 0 1-5.315.311L50.667 56v-5.333c0-4.26-3.33-7.743-7.53-7.987l-.47-.013H21.333a8 8 0 0 0-7.986 7.53l-.014.47V56a2.667 2.667 0 0 1-5.316.311L8 56v-5.333c0-7.17 5.66-13.019 12.755-13.321l.578-.013zM32 5.333c7.364 0 13.333 5.97 13.333 13.334S39.363 32 32 32s-13.333-5.97-13.333-13.333S24.637 5.333 32 5.333m0 5.334a8 8 0 1 0 0 16 8 8 0 0 0 0-16",
  className: "icon-user_svg__fill"
})));
var _path$1;
function _extends$1() {
  _extends$1 = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends$1.apply(this, arguments);
}
var SvgIconFeedbackLike = (props) => React2.createElement("svg", _extends$1({
  xmlns: "http://www.w3.org/2000/svg",
  width: 24,
  height: 24,
  fill: "none"
}, props), _path$1 || (_path$1 = React2.createElement("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M12.346 5.336v-.001c.405-.523 1.182-.524 1.58-.037.162.2.25.443.25.69v3.678c0 .518.42.938.938.938H18.6c.359 0 .7.179.911.488l.001.001.369.548.003.004c.174.256.226.583.134.895l-1.532 5.316c-.131.459-.559.782-1.044.782h-7.075c-.3 0-.593-.127-.8-.345l-1.13-1.222v-6.647zm-4.73 3.078 3.245-4.223.002-.002c1.125-1.456 3.339-1.521 4.517-.075.421.52.671 1.177.671 1.874v2.74h2.55c.99 0 1.908.496 2.462 1.31l.002.004.368.547.002.002a2.93 2.93 0 0 1 .382 2.475v.003l-1.528 5.302a2.96 2.96 0 0 1-2.847 2.142h-7.075a2.99 2.99 0 0 1-2.166-.935l-.007-.007-.066-.072a2.13 2.13 0 0 1-1.821 1.025H4.192a2.13 2.13 0 0 1-2.13-2.13v-8.3a2.13 2.13 0 0 1 2.13-2.13h2.115c.493 0 .948.168 1.31.45m-3.678 1.68c0-.141.114-.255.254-.255h2.115c.14 0 .254.114.254.255v8.3c0 .14-.114.255-.254.255H4.192a.255.255 0 0 1-.255-.255z",
  clipRule: "evenodd"
})));
var _path;
function _extends() {
  _extends = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends.apply(this, arguments);
}
var SvgIconFeedbackDislike = (props) => React2.createElement("svg", _extends({
  xmlns: "http://www.w3.org/2000/svg",
  width: 24,
  height: 24,
  fill: "none"
}, props), _path || (_path = React2.createElement("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M11.654 18.664v.001c-.405.523-1.182.524-1.58.037-.162-.2-.25-.444-.25-.69v-3.678a.94.94 0 0 0-.938-.938H5.4c-.359 0-.7-.179-.911-.488l-.001-.001-.369-.548-.003-.004a1.05 1.05 0 0 1-.134-.895l1.532-5.316c.131-.459.559-.782 1.044-.782h7.075c.3 0 .593.127.8.345l1.13 1.222v6.647zm4.73-3.078-3.245 4.223-.002.002c-1.125 1.456-3.339 1.521-4.517.075a2.98 2.98 0 0 1-.671-1.874v-2.74h-2.55c-.99 0-1.908-.496-2.462-1.31l-.002-.004-.368-.547-.002-.002a2.93 2.93 0 0 1-.382-2.475v-.003L3.711 5.63a2.96 2.96 0 0 1 2.847-2.142h7.075c.823 0 1.608.345 2.166.935l.007.007.066.072a2.13 2.13 0 0 1 1.821-1.025h2.115a2.13 2.13 0 0 1 2.13 2.13v8.3a2.13 2.13 0 0 1-2.13 2.13h-2.115a2.12 2.12 0 0 1-1.31-.45m3.678-1.68c0 .141-.114.255-.254.255h-2.115a.255.255 0 0 1-.255-.255v-8.3c0-.14.115-.255.255-.255h2.115c.14 0 .255.114.255.255z",
  clipRule: "evenodd"
})));
function changeTypeToIconComponent(type) {
  switch (type) {
    case Types.ADD:
      return import_react18.default.createElement(SvgIconAdd, null);
    case Types.ARROW_LEFT:
      return import_react18.default.createElement(SvgIconArrowLeft, null);
    case Types.ATTACH:
      return import_react18.default.createElement(SvgIconAttach, null);
    case Types.AUDIO_ON_LINED:
      return import_react18.default.createElement(SvgIconAudioOnLined, null);
    case Types.BAN:
      return import_react18.default.createElement(SvgIconBan, null);
    case Types.BROADCAST:
      return import_react18.default.createElement(SvgIconBroadcast, null);
    case Types.CAMERA:
      return import_react18.default.createElement(SvgIconCamera, null);
    case Types.CHANNELS:
      return import_react18.default.createElement(SvgIconChannels, null);
    case Types.CHAT:
      return import_react18.default.createElement(SvgIconChat, null);
    case Types.CHAT_FILLED:
      return import_react18.default.createElement(SvgIconChatFilled, null);
    case Types.CHEVRON_DOWN:
      return import_react18.default.createElement(SvgIconChevronDown, null);
    case Types.CHEVRON_RIGHT:
      return import_react18.default.createElement(SvgIconChevronRight, null);
    case Types.CLOSE:
      return import_react18.default.createElement(SvgIconClose, null);
    case Types.COLLAPSE:
      return import_react18.default.createElement(SvgIconCollapse, null);
    case Types.COPY:
      return import_react18.default.createElement(SvgIconCopy, null);
    case Types.CREATE:
      return import_react18.default.createElement(SvgIconCreate, null);
    case Types.DELETE:
      return import_react18.default.createElement(SvgIconDelete, null);
    case Types.DISCONNECTED:
      return import_react18.default.createElement(SvgIconDisconnected, null);
    case Types.DOCUMENT:
      return import_react18.default.createElement(SvgIconDocument, null);
    case Types.DONE:
      return import_react18.default.createElement(SvgIconDone, null);
    case Types.DONE_ALL:
      return import_react18.default.createElement(SvgIconDoneAll, null);
    case Types.DOWNLOAD:
      return import_react18.default.createElement(SvgIconDownload, null);
    case Types.EDIT:
      return import_react18.default.createElement(SvgIconEdit, null);
    case Types.EMOJI_MORE:
      return import_react18.default.createElement(SvgIconEmojiMore, null);
    case Types.ERROR:
      return import_react18.default.createElement(SvgIconError, null);
    case Types.EXPAND:
      return import_react18.default.createElement(SvgIconExpand, null);
    case Types.FILE_AUDIO:
      return import_react18.default.createElement(SvgIconFileAudio, null);
    case Types.FILE_DOCUMENT:
      return import_react18.default.createElement(SvgIconFileDocument, null);
    case Types.FREEZE:
      return import_react18.default.createElement(SvgIconFreeze, null);
    case Types.GIF:
      return import_react18.default.createElement(SvgIconGif, null);
    case Types.INFO:
      return import_react18.default.createElement(SvgIconInfo, null);
    case Types.LEAVE:
      return import_react18.default.createElement(SvgIconLeave, null);
    case Types.MEMBERS:
      return import_react18.default.createElement(SvgIconMembers, null);
    case Types.MESSAGE:
      return import_react18.default.createElement(SvgIconMessage, null);
    case Types.MODERATIONS:
      return import_react18.default.createElement(SvgIconModerations, null);
    case Types.MORE:
      return import_react18.default.createElement(SvgIconMore, null);
    case Types.MUTE:
      return import_react18.default.createElement(SvgIconMute, null);
    case Types.NOTIFICATIONS:
      return import_react18.default.createElement(SvgIconNotifications, null);
    case Types.NOTIFICATIONS_OFF_FILLED:
      return import_react18.default.createElement(SvgIconNotificationsOffFilled, null);
    case Types.OPERATOR:
      return import_react18.default.createElement(SvgIconOperator, null);
    case Types.PHOTO:
      return import_react18.default.createElement(SvgIconPhoto, null);
    case Types.PLAY:
      return import_react18.default.createElement(SvgIconPlay, null);
    case Types.PLUS:
      return import_react18.default.createElement(SvgIconPlus, null);
    case Types.QUESTION:
      return import_react18.default.createElement(SvgIconQuestion, null);
    case Types.REFRESH:
      return import_react18.default.createElement(SvgIconRefresh, null);
    case Types.REMOVE:
      return import_react18.default.createElement(SvgIconRemove, null);
    case Types.REPLY:
      return import_react18.default.createElement(SvgIconReplyFilled, null);
    case Types.SEARCH:
      return import_react18.default.createElement(SvgIconSearch, null);
    case Types.SEND:
      return import_react18.default.createElement(SvgIconSend, null);
    case Types.SETTINGS_FILLED:
      return import_react18.default.createElement(SvgIconSettingsFilled, null);
    case Types.SLIDE_LEFT:
      return import_react18.default.createElement(SvgIconSlideLeft, null);
    case Types.SPINNER:
      return import_react18.default.createElement(SvgIconSpinner, null);
    case Types.SUPERGROUP:
      return import_react18.default.createElement(SvgIconSupergroup, null);
    case Types.THREAD:
      return import_react18.default.createElement(SvgIconThread, null);
    case Types.THUMBNAIL_NONE:
      return import_react18.default.createElement(SvgIconThumbnailNone, null);
    case Types.TOGGLE_OFF:
      return import_react18.default.createElement(SvgIconToggleoff, null);
    case Types.TOGGLE_ON:
      return import_react18.default.createElement(SvgIconToggleon, null);
    case Types.USER:
      return import_react18.default.createElement(SvgIconUser, null);
    case Types.FEEDBACK_LIKE:
      return import_react18.default.createElement(SvgIconFeedbackLike, null);
    case Types.FEEDBACK_DISLIKE:
      return import_react18.default.createElement(SvgIconFeedbackDislike, null);
    default:
      return "icon";
  }
}
function Icon(_a2) {
  var _b2 = _a2.className, className = _b2 === void 0 ? "" : _b2, type = _a2.type, _c = _a2.fillColor, fillColor = _c === void 0 ? Colors.DEFAULT : _c, _d = _a2.width, width = _d === void 0 ? 26 : _d, _e3 = _a2.height, height = _e3 === void 0 ? 26 : _e3, _f = _a2.onClick, onClick = _f === void 0 ? noop : _f, _g2 = _a2.children, children = _g2 === void 0 ? null : _g2, testID = _a2.testID;
  var iconStyle = {
    width: typeof width === "string" ? width : "".concat(width, "px"),
    minWidth: typeof width === "string" ? width : "".concat(width, "px"),
    height: typeof height === "string" ? height : "".concat(height, "px"),
    minHeight: typeof height === "string" ? height : "".concat(height, "px")
  };
  return import_react18.default.createElement("div", { className: __spreadArray(__spreadArray([], Array.isArray(className) ? className : [className], true), [
    "sendbird-icon",
    changeTypeToIconClassName(type),
    changeColorToClassName(fillColor)
  ], false).join(" "), "data-testid": testID, role: "button", onClick, onKeyDown: onClick, tabIndex: 0, style: iconStyle }, children || changeTypeToIconComponent(type));
}
var IconTypes = Types;
var IconColors = Colors;

// node_modules/@sendbird/uikit-react/chunks/bundle-C76-LA1E.js
var import_react19 = __toESM(require_react(), 1);
var AvatarDefault = function(props) {
  var width = props.width, height = props.height, text = props.text;
  var iconWidth = pxToNumber(width);
  var iconHeight = pxToNumber(height);
  if (typeof iconWidth === "number" && !Number.isNaN(iconWidth)) {
    iconWidth *= 0.575;
  }
  if (typeof iconHeight === "number" && !Number.isNaN(iconHeight)) {
    iconHeight *= 0.575;
  }
  return import_react19.default.createElement("div", { className: classnames("sendbird-avatar-img--default", text && "text"), style: { width, height } }, text ? import_react19.default.createElement("div", { className: "sendbird-avatar-text" }, text) : import_react19.default.createElement(Icon, { type: IconTypes.USER, fillColor: IconColors.CONTENT, width: iconWidth, height: iconHeight }));
};
var imageRendererClassName = "sendbird-avatar-img";
var AvatarInner = function(_a2) {
  var _b2 = _a2.src, src = _b2 === void 0 ? "" : _b2, _c = _a2.alt, alt = _c === void 0 ? "" : _c, height = _a2.height, width = _a2.width, customDefaultComponent = _a2.customDefaultComponent;
  var defaultComponent = function() {
    return customDefaultComponent ? customDefaultComponent({ width, height }) : import_react19.default.createElement(AvatarDefault, { width, height });
  };
  if (typeof src === "string") {
    return import_react19.default.createElement(ImageRenderer, { className: imageRendererClassName, url: src, height, width, alt, defaultComponent });
  }
  if (src && src.length) {
    if (src.length === 1) {
      return import_react19.default.createElement(ImageRenderer, { className: imageRendererClassName, url: src[0], height, width, alt, defaultComponent });
    }
    if (src.length === 2) {
      return import_react19.default.createElement(
        "div",
        { className: "sendbird-avatar--inner__two-child" },
        import_react19.default.createElement(ImageRenderer, { className: imageRendererClassName, url: src[0], height, width, alt, defaultComponent }),
        import_react19.default.createElement(ImageRenderer, { className: imageRendererClassName, url: src[1], height, width, alt, defaultComponent })
      );
    }
    if (src.length === 3) {
      return import_react19.default.createElement(
        import_react19.default.Fragment,
        null,
        import_react19.default.createElement(
          "div",
          { className: "sendbird-avatar--inner__three-child--upper" },
          import_react19.default.createElement(ImageRenderer, { className: imageRendererClassName, url: src[0], height, width, alt, defaultComponent })
        ),
        import_react19.default.createElement(
          "div",
          { className: "sendbird-avatar--inner__three-child--lower" },
          import_react19.default.createElement(ImageRenderer, { className: imageRendererClassName, url: src[1], height, width, alt, defaultComponent }),
          import_react19.default.createElement(ImageRenderer, { className: imageRendererClassName, url: src[2], height, width, alt, defaultComponent })
        )
      );
    }
    return import_react19.default.createElement("div", { className: "sendbird-avatar--inner__four-child" }, src.slice(0, 4).map(function(url, index) {
      return import_react19.default.createElement(ImageRenderer, { className: imageRendererClassName, url, height, width, alt, key: "".concat(url, "-").concat(index), defaultComponent });
    }));
  }
  return import_react19.default.createElement(ImageRenderer, { className: imageRendererClassName, url: "", height, width, alt, defaultComponent });
};
function Avatar(_a2, ref) {
  var _b2 = _a2.className, className = _b2 === void 0 ? "" : _b2, _c = _a2.src, src = _c === void 0 ? "" : _c, _d = _a2.alt, alt = _d === void 0 ? "" : _d, _e3 = _a2.width, width = _e3 === void 0 ? "56px" : _e3, _f = _a2.height, height = _f === void 0 ? "56px" : _f, _g2 = _a2.zIndex, zIndex = _g2 === void 0 ? 0 : _g2, _h = _a2.left, left = _h === void 0 ? "" : _h, _j = _a2.bottom, bottom = _j === void 0 ? "" : _j, onClick = _a2.onClick, customDefaultComponent = _a2.customDefaultComponent;
  return import_react19.default.createElement(
    "div",
    { className: __spreadArray(__spreadArray([], Array.isArray(className) ? className : [className], true), [
      "sendbird-avatar"
    ], false).join(" "), role: "button", ref, style: {
      height,
      width,
      zIndex,
      left,
      bottom
    }, onClick, onKeyDown: onClick, tabIndex: 0 },
    import_react19.default.createElement(AvatarInner, { src, width, height, alt, customDefaultComponent })
  );
}
var Avatar$1 = import_react19.default.forwardRef(Avatar);

// node_modules/@sendbird/uikit-react/chunks/bundle-CEZ0D4qz.js
var import_react20 = __toESM(require_react(), 1);
var Typography = {
  H_1: "H_1",
  H_2: "H_2",
  SUBTITLE_1: "SUBTITLE_1",
  SUBTITLE_2: "SUBTITLE_2",
  BODY_1: "BODY_1",
  BODY_2: "BODY_2",
  BUTTON_1: "BUTTON_1",
  BUTTON_2: "BUTTON_2",
  BUTTON_3: "BUTTON_3",
  CAPTION_1: "CAPTION_1",
  CAPTION_2: "CAPTION_2",
  CAPTION_3: "CAPTION_3"
};
var Colors2 = {
  ONBACKGROUND_1: "ONBACKGROUND_1",
  ONBACKGROUND_2: "ONBACKGROUND_2",
  ONBACKGROUND_3: "ONBACKGROUND_3",
  ONBACKGROUND_4: "ONBACKGROUND_4",
  ONCONTENT_1: "ONCONTENT_1",
  ONCONTENT_2: "ONCONTENT_2",
  ONCONTENT_INVERSE_1: "ONCONTENT_INVERSE_1",
  ONCONTENT_INVERSE_3: "ONCONTENT_INVERSE_3",
  PRIMARY: "PRIMARY",
  ERROR: "ERROR",
  SECONDARY_3: "SECONDARY_3"
};
function changeTypographyToClassName(type) {
  switch (type) {
    case Typography.H_1:
      return "sendbird-label--h-1";
    case Typography.H_2:
      return "sendbird-label--h-2";
    case Typography.SUBTITLE_1:
      return "sendbird-label--subtitle-1";
    case Typography.SUBTITLE_2:
      return "sendbird-label--subtitle-2";
    case Typography.BODY_1:
      return "sendbird-label--body-1";
    case Typography.BODY_2:
      return "sendbird-label--body-2";
    case Typography.BUTTON_1:
      return "sendbird-label--button-1";
    case Typography.BUTTON_2:
      return "sendbird-label--button-2";
    case Typography.BUTTON_3:
      return "sendbird-label--button-3";
    case Typography.CAPTION_1:
      return "sendbird-label--caption-1";
    case Typography.CAPTION_2:
      return "sendbird-label--caption-2";
    case Typography.CAPTION_3:
      return "sendbird-label--caption-3";
    default:
      return "";
  }
}
function changeColorToClassName2(color) {
  switch (color) {
    case Colors2.ONBACKGROUND_1:
      return "sendbird-label--color-onbackground-1";
    case Colors2.ONBACKGROUND_2:
      return "sendbird-label--color-onbackground-2";
    case Colors2.ONBACKGROUND_3:
      return "sendbird-label--color-onbackground-3";
    case Colors2.ONBACKGROUND_4:
      return "sendbird-label--color-onbackground-4";
    case Colors2.ONCONTENT_1:
      return "sendbird-label--color-oncontent-1";
    case Colors2.ONCONTENT_2:
      return "sendbird-label--color-oncontent-2";
    case Colors2.ONCONTENT_INVERSE_1:
      return "sendbird-label--color-oncontent-inverse-1";
    case Colors2.ONCONTENT_INVERSE_3:
      return "sendbird-label--color-oncontent-inverse-3";
    case Colors2.PRIMARY:
      return "sendbird-label--color-primary";
    case Colors2.ERROR:
      return "sendbird-label--color-error";
    case Colors2.SECONDARY_3:
      return "sendbird-label--color-secondary-3";
    default:
      return "";
  }
}
var Label = (0, import_react20.forwardRef)(function(_a2, ref) {
  var _b2 = _a2.className, className = _b2 === void 0 ? [] : _b2, type = _a2.type, color = _a2.color, _c = _a2.children, children = _c === void 0 ? null : _c, testID = _a2.testID;
  return (
    // Donot make this into div
    // Mention uses Label. If we use div, it would break the mention detection on Paste
    // https://github.com/sendbird/sendbird-uikit-react/pull/479
    import_react20.default.createElement("span", { className: __spreadArray(__spreadArray([], Array.isArray(className) ? className : [className], true), [
      "sendbird-label",
      changeTypographyToClassName(type),
      changeColorToClassName2(color)
    ], false).join(" "), ref, "data-testid": testID }, children)
  );
});
var LabelTypography = Typography;
var LabelColors = Colors2;
var LabelStringSet = getStringSet("en");

// node_modules/@sendbird/uikit-react/chunks/bundle-DBzinRyn.js
var import_react21 = __toESM(require_react(), 1);
var DEFAULT_MOBILE = false;
var MOBILE_CLASSNAME = "sendbird--mobile-mode";
var MediaQueryContext = import_react21.default.createContext({
  breakpoint: DEFAULT_MOBILE,
  isMobile: false
});
var addClassNameToBody = function() {
  try {
    var body = document.querySelector("body");
    body === null || body === void 0 ? void 0 : body.classList.add(MOBILE_CLASSNAME);
  } catch (_a2) {
  }
};
var removeClassNameFromBody = function() {
  try {
    var body = document.querySelector("body");
    body === null || body === void 0 ? void 0 : body.classList.remove(MOBILE_CLASSNAME);
  } catch (_a2) {
  }
};
var MediaQueryProvider = function(props) {
  var children = props.children, logger = props.logger;
  var breakpoint = (props === null || props === void 0 ? void 0 : props.breakpoint) || false;
  var _a2 = (0, import_react21.useState)(false), isMobile = _a2[0], setIsMobile = _a2[1];
  (0, import_react21.useEffect)(function() {
    var _a3;
    var updateSize = function() {
      var _a4;
      if (typeof breakpoint === "boolean") {
        setIsMobile(breakpoint);
        if (breakpoint) {
          addClassNameToBody();
        } else {
          removeClassNameFromBody();
        }
      } else {
        var mq = window.matchMedia("(max-width: ".concat(breakpoint, ")"));
        (_a4 = logger === null || logger === void 0 ? void 0 : logger.info) === null || _a4 === void 0 ? void 0 : _a4.call(logger, "MediaQueryProvider: Screensize updated to ".concat(breakpoint));
        if (mq.matches) {
          setIsMobile(true);
          addClassNameToBody();
        } else {
          setIsMobile(false);
          removeClassNameFromBody();
        }
      }
    };
    updateSize();
    window.addEventListener("resize", updateSize);
    (_a3 = logger === null || logger === void 0 ? void 0 : logger.info) === null || _a3 === void 0 ? void 0 : _a3.call(logger, "MediaQueryProvider: addEventListener", { updateSize });
    return function() {
      var _a4;
      window.removeEventListener("resize", updateSize);
      (_a4 = logger === null || logger === void 0 ? void 0 : logger.info) === null || _a4 === void 0 ? void 0 : _a4.call(logger, "MediaQueryProvider: removeEventListener", { updateSize });
    };
  }, [breakpoint]);
  return import_react21.default.createElement(MediaQueryContext.Provider, { value: { breakpoint, isMobile } }, children);
};
var useMediaQueryContext = function() {
  return import_react21.default.useContext(MediaQueryContext);
};

// node_modules/@sendbird/uikit-react/chunks/bundle-CTaD4y3Q.js
var Colors3;
(function(Colors4) {
  Colors4["ONBACKGROUND_1"] = "ONBACKGROUND_1";
  Colors4["ONBACKGROUND_2"] = "ONBACKGROUND_2";
  Colors4["ONBACKGROUND_3"] = "ONBACKGROUND_3";
  Colors4["ONBACKGROUND_4"] = "ONBACKGROUND_4";
  Colors4["ONCONTENT_1"] = "ONCONTENT_1";
  Colors4["ONCONTENT_2"] = "ONCONTENT_2";
  Colors4["PRIMARY"] = "PRIMARY";
  Colors4["ERROR"] = "ERROR";
})(Colors3 || (Colors3 = {}));
var changeColorToClassName3 = function(color) {
  switch (color) {
    case Colors3.ONBACKGROUND_1:
      return "sendbird-color--onbackground-1";
    case Colors3.ONBACKGROUND_2:
      return "sendbird-color--onbackground-2";
    case Colors3.ONBACKGROUND_3:
      return "sendbird-color--onbackground-3";
    case Colors3.ONBACKGROUND_4:
      return "sendbird-color--onbackground-4";
    case Colors3.ONCONTENT_1:
      return "sendbird-color--oncontent-1";
    case Colors3.PRIMARY:
      return "sendbird-color--primary";
    case Colors3.ERROR:
      return "sendbird-color--error";
    default:
      return "";
  }
};

// node_modules/@sendbird/uikit-react/ui/TextButton.js
var import_react22 = __toESM(require_react(), 1);
var TextButton = function(_a2) {
  var _b2 = _a2.className, className = _b2 === void 0 ? "" : _b2, _c = _a2.color, color = _c === void 0 ? Colors3.ONBACKGROUND_1 : _c, _d = _a2.disabled, disabled = _d === void 0 ? false : _d, _e3 = _a2.disableUnderline, disableUnderline = _e3 === void 0 ? false : _e3, _f = _a2.onClick, onClick = _f === void 0 ? function() {
  } : _f, children = _a2.children;
  return import_react22.default.createElement("div", { className: __spreadArray(__spreadArray([], Array.isArray(className) ? className : [className], true), [
    changeColorToClassName3(color),
    disableUnderline ? "sendbird-textbutton--not-underline" : "sendbird-textbutton",
    disabled ? "sendbird-textbutton--disabled" : ""
  ], false).join(" "), role: "button", tabIndex: 0, onClick: function(e3) {
    return onClick(e3);
  }, onKeyPress: function(e3) {
    return onClick(e3);
  } }, children);
};

// node_modules/@sendbird/uikit-react/ui/IconButton.js
var import_react23 = __toESM(require_react(), 1);
var IconButton = import_react23.default.forwardRef(function(props, ref) {
  var _a2 = props.className, className = _a2 === void 0 ? "" : _a2, children = props.children, _b2 = props.disabled, disabled = _b2 === void 0 ? false : _b2, _c = props.width, width = _c === void 0 ? "56px" : _c, _d = props.height, height = _d === void 0 ? "56px" : _d, _e3 = props.type, type = _e3 === void 0 ? "button" : _e3, _f = props.style, style = _f === void 0 ? {} : _f, _g2 = props.onBlur, onBlur = _g2 === void 0 ? function() {
  } : _g2, _h = props.onClick, onClick = _h === void 0 ? function() {
  } : _h, testID = props.testID;
  var _j = (0, import_react23.useState)(false), isPressed = _j[0], setIsPressed = _j[1];
  return import_react23.default.createElement(
    "button",
    { "data-testid": testID, className: __spreadArray(__spreadArray([], Array.isArray(className) ? className : [className], true), [
      "sendbird-iconbutton",
      isPressed ? "sendbird-iconbutton--pressed" : ""
    ], false).join(" "), disabled, ref, type, style: __assign(__assign({}, style), { height, width }), onClick: function(e3) {
      if (disabled) {
        return;
      }
      setIsPressed(true);
      onClick === null || onClick === void 0 ? void 0 : onClick(e3);
    }, onBlur: function(e3) {
      setIsPressed(false);
      onBlur === null || onBlur === void 0 ? void 0 : onBlur(e3);
    } },
    import_react23.default.createElement("span", { className: "sendbird-iconbutton__inner" }, children)
  );
});

// node_modules/@sendbird/uikit-react/ui/Header.js
var import_react24 = __toESM(require_react(), 1);
var Header = function(_a2) {
  var _b2;
  var className = _a2.className, renderLeft = _a2.renderLeft, renderRight = _a2.renderRight, renderMiddle = _a2.renderMiddle;
  var isMobile = false;
  try {
    isMobile = (_b2 = useMediaQueryContext === null || useMediaQueryContext === void 0 ? void 0 : useMediaQueryContext()) === null || _b2 === void 0 ? void 0 : _b2.isMobile;
  } catch (err) {
  }
  return import_react24.default.createElement(
    "div",
    { className: classnames("sendbird-ui-header", className), "data-testid": "sendbird-ui-header" },
    renderLeft ? import_react24.default.createElement("div", { className: classnames("sendbird-ui-header__left", isMobile ? "sendbird-ui-header--is-mobile" : "sendbird-ui-header--is-desktop") }, renderLeft === null || renderLeft === void 0 ? void 0 : renderLeft()) : null,
    import_react24.default.createElement("div", { className: "sendbird-ui-header__middle" }, renderMiddle === null || renderMiddle === void 0 ? void 0 : renderMiddle()),
    renderRight ? import_react24.default.createElement("div", { className: classnames("sendbird-ui-header__right", isMobile ? "sendbird-ui-header--is-mobile" : "sendbird-ui-header--is-desktop") }, renderRight === null || renderRight === void 0 ? void 0 : renderRight()) : null
  );
};
var Title = function(_a2) {
  var title = _a2.title, subtitle = _a2.subtitle, onClickSubtitle = _a2.onClickSubtitle;
  return import_react24.default.createElement(
    "div",
    { className: "sendbird-ui-header__middle" },
    title && import_react24.default.createElement(Label, { className: "sendbird-ui-header__middle__title", type: LabelTypography.H_2, color: LabelColors.ONBACKGROUND_1 }, title),
    subtitle && (onClickSubtitle ? import_react24.default.createElement(
      TextButton,
      { className: "sendbird-ui-header__middle__subtitle__container", onClick: onClickSubtitle, disableUnderline: true },
      import_react24.default.createElement(Label, { className: "sendbird-ui-header__middle__subtitle", type: LabelTypography.CAPTION_3, color: LabelColors.ONBACKGROUND_2 }, subtitle)
    ) : import_react24.default.createElement(Label, { className: "sendbird-ui-header__middle__subtitle", type: LabelTypography.BODY_1, color: LabelColors.ONBACKGROUND_2 }, subtitle))
  );
};
var IconButton2 = function(_a2) {
  var className = _a2.className, onClick = _a2.onClick, type = _a2.type, color = _a2.color, _b2 = _a2.width, width = _b2 === void 0 ? "32px" : _b2, _c = _a2.height, height = _c === void 0 ? "32px" : _c, _d = _a2.renderIcon, renderIcon = _d === void 0 ? function(props) {
    return import_react24.default.createElement(Icon2, __assign({}, props));
  } : _d;
  return import_react24.default.createElement(IconButton, { className, width, height, onClick }, renderIcon({ type, color }));
};
var Icon2 = function(_a2) {
  var className = _a2.className, type = _a2.type, color = _a2.color, _b2 = _a2.width, width = _b2 === void 0 ? "22px" : _b2, _c = _a2.height, height = _c === void 0 ? "22px" : _c, _d = _a2.onClick, onClick = _d === void 0 ? noop : _d;
  return import_react24.default.createElement(Icon, { className, type, fillColor: color, width, height, onClick: function(e3) {
    return onClick === null || onClick === void 0 ? void 0 : onClick(e3);
  } });
};
var Header$1 = Object.assign(Header, { Title, IconButton: IconButton2, Icon: Icon2 });

// node_modules/@sendbird/uikit-react/utils/message/getOutgoingMessageState.js
var OutgoingMessageStates;
(function(OutgoingMessageStates2) {
  OutgoingMessageStates2["NONE"] = "NONE";
  OutgoingMessageStates2["PENDING"] = "PENDING";
  OutgoingMessageStates2["SENT"] = "SENT";
  OutgoingMessageStates2["FAILED"] = "FAILED";
  OutgoingMessageStates2["DELIVERED"] = "DELIVERED";
  OutgoingMessageStates2["READ"] = "READ";
})(OutgoingMessageStates || (OutgoingMessageStates = {}));
var getOutgoingMessageState = function(channel, message) {
  var _a2, _b2, _c, _d, _e3;
  if (!message || !("sendingStatus" in message))
    return OutgoingMessageStates.NONE;
  if (message.sendingStatus === "pending") {
    return OutgoingMessageStates.PENDING;
  }
  if (message.sendingStatus === "failed") {
    return OutgoingMessageStates.FAILED;
  }
  if ((_a2 = channel === null || channel === void 0 ? void 0 : channel.isGroupChannel) === null || _a2 === void 0 ? void 0 : _a2.call(channel)) {
    if (((_c = (_b2 = channel).getUnreadMemberCount) === null || _c === void 0 ? void 0 : _c.call(_b2, message)) === 0) {
      return OutgoingMessageStates.READ;
    } else if (((_e3 = (_d = channel).getUndeliveredMemberCount) === null || _e3 === void 0 ? void 0 : _e3.call(_d, message)) === 0) {
      return OutgoingMessageStates.DELIVERED;
    }
  }
  if (message.sendingStatus === "succeeded") {
    return OutgoingMessageStates.SENT;
  }
  return OutgoingMessageStates.NONE;
};

// node_modules/@sendbird/uikit-react/chunks/bundle-DJDeBhDz.js
var isIOS = function(userAgent) {
  return /iPhone|iPad|iPod/i.test(userAgent);
};
var isWebkit = function(userAgent) {
  return /WebKit/i.test(userAgent);
};
var isChrome = function(userAgent) {
  return /Chrome/i.test(userAgent);
};
var isSafari = function(userAgent) {
  return !isChrome(userAgent) && /Safari/i.test(userAgent);
};
var isMobileIOS = function(userAgent) {
  return isIOS(userAgent) && (isWebkit(userAgent) || isSafari(userAgent));
};

// node_modules/@sendbird/uikit-react/chunks/bundle-CwQYOWqR.js
function _typeof(o3) {
  "@babel/helpers - typeof";
  return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(o4) {
    return typeof o4;
  } : function(o4) {
    return o4 && "function" == typeof Symbol && o4.constructor === Symbol && o4 !== Symbol.prototype ? "symbol" : typeof o4;
  }, _typeof(o3);
}
function requiredArgs(required, args) {
  if (args.length < required) {
    throw new TypeError(required + " argument" + (required > 1 ? "s" : "") + " required, but only " + args.length + " present");
  }
}
function toDate(argument) {
  requiredArgs(1, arguments);
  var argStr = Object.prototype.toString.call(argument);
  if (argument instanceof Date || _typeof(argument) === "object" && argStr === "[object Date]") {
    return new Date(argument.getTime());
  } else if (typeof argument === "number" || argStr === "[object Number]") {
    return new Date(argument);
  } else {
    if ((typeof argument === "string" || argStr === "[object String]") && typeof console !== "undefined") {
      console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments");
      console.warn(new Error().stack);
    }
    return /* @__PURE__ */ new Date(NaN);
  }
}

// node_modules/@sendbird/uikit-react/chunks/bundle-D-cVbGxk.js
var n3 = Symbol("@ts-pattern/matcher");
var t3 = "@ts-pattern/anonymous-select-key";
var e = function(n4) {
  return Boolean(n4 && "object" == typeof n4);
};
var r3 = function(t7) {
  return t7 && !!t7[n3];
};
var u2 = function t4(u4, i4, c4) {
  if (e(u4)) {
    if (r3(u4)) {
      var o3 = u4[n3]().match(i4), a5 = o3.matched, f4 = o3.selections;
      return a5 && f4 && Object.keys(f4).forEach(function(n4) {
        return c4(n4, f4[n4]);
      }), a5;
    }
    if (!e(i4)) return false;
    if (Array.isArray(u4)) return !!Array.isArray(i4) && u4.length === i4.length && u4.every(function(n4, e3) {
      return t4(n4, i4[e3], c4);
    });
    if (u4 instanceof Map) return i4 instanceof Map && Array.from(u4.keys()).every(function(n4) {
      return t4(u4.get(n4), i4.get(n4), c4);
    });
    if (u4 instanceof Set) {
      if (!(i4 instanceof Set)) return false;
      if (0 === u4.size) return 0 === i4.size;
      if (1 === u4.size) {
        var s6 = Array.from(u4.values())[0];
        return r3(s6) ? Array.from(i4.values()).every(function(n4) {
          return t4(s6, n4, c4);
        }) : i4.has(s6);
      }
      return Array.from(u4.values()).every(function(n4) {
        return i4.has(n4);
      });
    }
    return Object.keys(u4).every(function(e3) {
      var o4, a6 = u4[e3];
      return (e3 in i4 || r3(o4 = a6) && "optional" === o4[n3]().matcherType) && t4(a6, i4[e3], c4);
    });
  }
  return Object.is(i4, u4);
};
var i2 = function t5(u4) {
  var i4, o3, a5;
  return e(u4) ? r3(u4) ? null != (i4 = null == (o3 = (a5 = u4[n3]()).getSelectionKeys) ? void 0 : o3.call(a5)) ? i4 : [] : Array.isArray(u4) ? c2(u4, t5) : c2(Object.values(u4), t5) : [];
};
var c2 = function(n4, t7) {
  return n4.reduce(function(n5, e3) {
    return n5.concat(t7(e3));
  }, []);
};
function o2(t7) {
  var e3;
  return (e3 = {})[n3] = function() {
    return { match: function(n4) {
      var e4 = {}, r4 = function(n5, t8) {
        e4[n5] = t8;
      };
      return void 0 === n4 ? (i2(t7).forEach(function(n5) {
        return r4(n5, void 0);
      }), { matched: true, selections: e4 }) : { matched: u2(t7, n4, r4), selections: e4 };
    }, getSelectionKeys: function() {
      return i2(t7);
    }, matcherType: "optional" };
  }, e3;
}
function a2(t7) {
  var e3;
  return (e3 = {})[n3] = function() {
    return { match: function(n4) {
      if (!Array.isArray(n4)) return { matched: false };
      var e4 = {};
      if (0 === n4.length) return i2(t7).forEach(function(n5) {
        e4[n5] = [];
      }), { matched: true, selections: e4 };
      var r4 = function(n5, t8) {
        e4[n5] = (e4[n5] || []).concat([t8]);
      };
      return { matched: n4.every(function(n5) {
        return u2(t7, n5, r4);
      }), selections: e4 };
    }, getSelectionKeys: function() {
      return i2(t7);
    } };
  }, e3;
}
function f3() {
  var t7, e3 = [].slice.call(arguments);
  return (t7 = {})[n3] = function() {
    return { match: function(n4) {
      var t8 = {}, r4 = function(n5, e4) {
        t8[n5] = e4;
      };
      return { matched: e3.every(function(t9) {
        return u2(t9, n4, r4);
      }), selections: t8 };
    }, getSelectionKeys: function() {
      return c2(e3, i2);
    }, matcherType: "and" };
  }, t7;
}
function s3() {
  var t7, e3 = [].slice.call(arguments);
  return (t7 = {})[n3] = function() {
    return { match: function(n4) {
      var t8 = {}, r4 = function(n5, e4) {
        t8[n5] = e4;
      };
      return c2(e3, i2).forEach(function(n5) {
        return r4(n5, void 0);
      }), { matched: e3.some(function(t9) {
        return u2(t9, n4, r4);
      }), selections: t8 };
    }, getSelectionKeys: function() {
      return c2(e3, i2);
    }, matcherType: "or" };
  }, t7;
}
function l2(t7) {
  var e3;
  return (e3 = {})[n3] = function() {
    return { match: function(n4) {
      return { matched: !u2(t7, n4, function() {
      }) };
    }, getSelectionKeys: function() {
      return [];
    }, matcherType: "not" };
  }, e3;
}
function h(t7) {
  var e3;
  return (e3 = {})[n3] = function() {
    return { match: function(n4) {
      return { matched: Boolean(t7(n4)) };
    } };
  }, e3;
}
function v4() {
  var e3, r4 = [].slice.call(arguments), c4 = "string" == typeof r4[0] ? r4[0] : void 0, o3 = 2 === r4.length ? r4[1] : "string" == typeof r4[0] ? void 0 : r4[0];
  return (e3 = {})[n3] = function() {
    return { match: function(n4) {
      var e4, r5 = ((e4 = {})[null != c4 ? c4 : t3] = n4, e4);
      return { matched: void 0 === o3 || u2(o3, n4, function(n5, t7) {
        r5[n5] = t7;
      }), selections: r5 };
    }, getSelectionKeys: function() {
      return [null != c4 ? c4 : t3].concat(void 0 === o3 ? [] : i2(o3));
    } };
  }, e3;
}
var y3 = h(function(n4) {
  return true;
});
var m2 = y3;
var d2 = h(function(n4) {
  return "string" == typeof n4;
});
var g3 = h(function(n4) {
  return "number" == typeof n4;
});
var p3 = h(function(n4) {
  return "boolean" == typeof n4;
});
var b4 = h(function(n4) {
  return "bigint" == typeof n4;
});
var w2 = h(function(n4) {
  return "symbol" == typeof n4;
});
var A2 = h(function(n4) {
  return null == n4;
});
var S3 = { __proto__: null, optional: o2, array: a2, intersection: f3, union: s3, not: l2, when: h, select: v4, any: y3, _: m2, string: d2, number: g3, boolean: p3, bigint: b4, symbol: w2, nullish: A2, instanceOf: function(n4) {
  return h(/* @__PURE__ */ function(n5) {
    return function(t7) {
      return t7 instanceof n5;
    };
  }(n4));
}, typed: function() {
  return { array: a2, optional: o2, intersection: f3, union: s3, not: l2, select: v4, when: h };
} };
function K2(n4) {
  return new O2(n4, []);
}
var O2 = function() {
  function n4(n5, t7) {
    this.value = void 0, this.cases = void 0, this.value = n5, this.cases = t7;
  }
  var e3 = n4.prototype;
  return e3.with = function() {
    var e4 = [].slice.call(arguments), r4 = e4[e4.length - 1], i4 = [e4[0]], c4 = [];
    return 3 === e4.length && "function" == typeof e4[1] ? (i4.push(e4[0]), c4.push(e4[1])) : e4.length > 2 && i4.push.apply(i4, e4.slice(1, e4.length - 1)), new n4(this.value, this.cases.concat([{ match: function(n5) {
      var e5 = {}, r5 = Boolean(i4.some(function(t7) {
        return u2(t7, n5, function(n6, t8) {
          e5[n6] = t8;
        });
      }) && c4.every(function(t7) {
        return t7(n5);
      }));
      return { matched: r5, value: r5 && Object.keys(e5).length ? t3 in e5 ? e5[t3] : e5 : n5 };
    }, handler: r4 }]));
  }, e3.when = function(t7, e4) {
    return new n4(this.value, this.cases.concat([{ match: function(n5) {
      return { matched: Boolean(t7(n5)), value: n5 };
    }, handler: e4 }]));
  }, e3.otherwise = function(t7) {
    return new n4(this.value, this.cases.concat([{ match: function(n5) {
      return { matched: true, value: n5 };
    }, handler: t7 }])).run();
  }, e3.exhaustive = function() {
    return this.run();
  }, e3.run = function() {
    for (var n5 = this.value, t7 = void 0, e4 = 0; e4 < this.cases.length; e4++) {
      var r4 = this.cases[e4], u4 = r4.match(this.value);
      if (u4.matched) {
        n5 = u4.value, t7 = r4.handler;
        break;
      }
    }
    if (!t7) {
      var i4;
      try {
        i4 = JSON.stringify(this.value);
      } catch (n6) {
        i4 = this.value;
      }
      throw new Error("Pattern matching error: no pattern matches value " + i4);
    }
    return t7(n5, this.value);
  }, n4;
}();
var TypingIndicatorType;
(function(TypingIndicatorType2) {
  TypingIndicatorType2["Text"] = "text";
  TypingIndicatorType2["Bubble"] = "bubble";
})(TypingIndicatorType || (TypingIndicatorType = {}));
var MessageContentMiddleContainerType;
(function(MessageContentMiddleContainerType2) {
  MessageContentMiddleContainerType2["DEFAULT"] = "default";
  MessageContentMiddleContainerType2["WIDE"] = "wide";
})(MessageContentMiddleContainerType || (MessageContentMiddleContainerType = {}));
function startOfSecond(dirtyDate) {
  requiredArgs(1, arguments);
  var date = toDate(dirtyDate);
  date.setMilliseconds(0);
  return date;
}
function isSameSecond(dirtyDateLeft, dirtyDateRight) {
  requiredArgs(2, arguments);
  var dateLeftStartOfSecond = startOfSecond(dirtyDateLeft);
  var dateRightStartOfSecond = startOfSecond(dirtyDateRight);
  return dateLeftStartOfSecond.getTime() === dateRightStartOfSecond.getTime();
}
var SUPPORTED_MIMES = {
  IMAGE: [
    "image/jpeg",
    "image/jpg",
    "image/png",
    "image/gif",
    "image/svg+xml",
    "image/webp"
    // not supported in IE
  ],
  VIDEO: [
    "video/mpeg",
    "video/ogg",
    "video/webm",
    "video/mp4"
    // 'video/quicktime', // NOTE: Do not support ThumbnailMessage for the .mov video
  ],
  AUDIO: [
    "audio/aac",
    "audio/midi",
    "audio/x-midi",
    "audio/mpeg",
    "audio/ogg",
    "audio/opus",
    "audio/wav",
    "audio/webm",
    "audio/3gpp",
    "audio/3gpp2",
    "audio/mp3"
  ],
  DOCUMENT: [
    "text/plain",
    "text/css",
    "text/csv",
    "text/html",
    "text/calendar",
    "text/javascript",
    "text/xml",
    "video/quicktime"
    // NOTE: Assume this video is a normal file, not video
  ],
  APPLICATION: [
    "application/x-abiword",
    "application/x-freearc",
    "application/vnd.amazon.ebook",
    "application/octet-stream",
    "application/x-bzip",
    "application/x-bzip2",
    "application/x-cdf",
    "application/x-csh",
    "application/msword",
    "application/vnd.openxmlformats-officedocument.wordprocessingml.document",
    "application/vnd.ms-fontobject",
    "application/epub+zip",
    "application/gzip",
    "application/java-archive",
    "application/json",
    "application/ld+json",
    "application/vnd.apple.installer+xml",
    "application/vnd.oasis.opendocument.presentation",
    "application/vnd.oasis.opendocument.spreadsheet",
    "application/vnd.oasis.opendocument.text",
    "application/ogg",
    "application/pdf",
    "application/x-httpd-php",
    "application/vnd.ms-powerpoint",
    "application/vnd.openxmlformats-officedocument.presentationml.presentation",
    "application/vnd.rar",
    "application/rtf",
    "application/x-sh",
    "application/x-tar",
    "application/vnd.visio",
    "application/xhtml+xml",
    "application/vnd.ms-excel",
    "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",
    "application/xml",
    "application/vnd.mozilla.xul+xml",
    "application/zip",
    "application/x-7z-compressed"
  ]
};
var getMimeTypesUIKitAccepts = function(acceptableMimeTypes) {
  if (Array.isArray(acceptableMimeTypes) && acceptableMimeTypes.length > 0) {
    return acceptableMimeTypes.reduce(function(prev, curr) {
      switch (curr) {
        case "image": {
          prev.push.apply(prev, SUPPORTED_MIMES.IMAGE);
          break;
        }
        case "video": {
          prev.push.apply(prev, SUPPORTED_MIMES.VIDEO);
          break;
        }
        case "audio": {
          prev.push.apply(prev, SUPPORTED_MIMES.AUDIO);
          break;
        }
        default: {
          prev.push(curr);
          break;
        }
      }
      return prev;
    }, []).join();
  }
  return Object.values(SUPPORTED_MIMES).reduce(function(prev, curr) {
    return prev.concat(curr);
  }, []).join();
};
var UIKitMessageTypes = {
  ADMIN: "ADMIN",
  TEXT: "TEXT",
  FILE: "FILE",
  MULTIPLE_FILES: "MULTIPLE_FILES",
  THUMBNAIL: "THUMBNAIL",
  OG: "OG",
  UNKNOWN: "UNKNOWN"
};
var UIKitFileTypes = {
  IMAGE: "IMAGE",
  AUDIO: "AUDIO",
  VIDEO: "VIDEO",
  GIF: "GIF",
  VOICE: "VOICE",
  OTHERS: "OTHERS"
};
var isTextuallyNull = function(text) {
  if (text === "" || text === null) {
    return true;
  }
  return false;
};
var isMOVType = function(type) {
  return type === "video/quicktime";
};
var isSupportedVideoFileTypeInSafari = function(type) {
  return isSafari(navigator.userAgent) && isMOVType(type);
};
var isImage = function(type) {
  return SUPPORTED_MIMES.IMAGE.indexOf(type) >= 0;
};
var isVideo = function(type) {
  return SUPPORTED_MIMES.VIDEO.indexOf(type) >= 0 || isSupportedVideoFileTypeInSafari(type);
};
var isGif = function(type) {
  return type === "image/gif";
};
var isSupportedFileView = function(type) {
  return isImage(type) || isVideo(type);
};
var isAudio = function(type) {
  return SUPPORTED_MIMES.AUDIO.indexOf(type) >= 0;
};
var getUIKitFileTypes = function() {
  return __assign({}, UIKitFileTypes);
};
var getUIKitFileType = function(type) {
  if (isGif(type))
    return UIKitFileTypes.GIF;
  if (isImage(type))
    return UIKitFileTypes.IMAGE;
  if (isVideo(type))
    return UIKitFileTypes.VIDEO;
  if (isAudio(type))
    return UIKitFileTypes.AUDIO;
  return UIKitFileTypes.OTHERS;
};
var isSentMessage = function(message) {
  return message.sendingStatus === "succeeded";
};
var isReadMessage = function(channel, message) {
  return getOutgoingMessageState(channel, message) === OutgoingMessageStates.READ;
};
var isFailedMessage = function(message) {
  return (message === null || message === void 0 ? void 0 : message.sendingStatus) === "failed";
};
var isPendingMessage = function(message) {
  return (message === null || message === void 0 ? void 0 : message.sendingStatus) === "pending";
};
var isSentStatus = function(state) {
  return state === OutgoingMessageStates.SENT || state === OutgoingMessageStates.DELIVERED || state === OutgoingMessageStates.READ;
};
var isAdminMessage = function(message) {
  return message && (message["isAdminMessage"] && typeof message.isAdminMessage === "function" ? message.isAdminMessage() : (message === null || message === void 0 ? void 0 : message.messageType) === "admin");
};
var isUserMessage = function(message) {
  return message && (message["isUserMessage"] && typeof message.isUserMessage === "function" ? message.isUserMessage() : (message === null || message === void 0 ? void 0 : message.messageType) === "user");
};
var isFileMessage = function(message) {
  return !!message && (message["isFileMessage"] && typeof message.isFileMessage === "function" ? message.isFileMessage() : (message === null || message === void 0 ? void 0 : message.messageType) === "file");
};
var isMultipleFilesMessage = function(message) {
  return message && (message["isMultipleFilesMessage"] && typeof message.isMultipleFilesMessage === "function" ? message.isMultipleFilesMessage() : message.messageType === "file" && Object.prototype.hasOwnProperty.call(message, "fileInfoList"));
};
var isThreadMessage = function(message) {
  return !!message.parentMessageId && !!message.parentMessage;
};
var isTemplateMessage = function(message) {
  var _a2;
  return !!(message && ((_a2 = message.extendedMessagePayload) === null || _a2 === void 0 ? void 0 : _a2["template"]));
};
var UI_CONTAINER_TYPES;
(function(UI_CONTAINER_TYPES2) {
  UI_CONTAINER_TYPES2["DEFAULT"] = "";
  UI_CONTAINER_TYPES2["WIDE"] = "ui_container_type__wide";
  UI_CONTAINER_TYPES2["DEFAULT_CAROUSEL"] = "ui_container_type__default-carousel";
})(UI_CONTAINER_TYPES || (UI_CONTAINER_TYPES = {}));
var getMessageContentMiddleClassNameByContainerType = function(_a2) {
  var _b2, _c;
  var message = _a2.message, isMobile = _a2.isMobile;
  var containerType = (_c = (_b2 = message.extendedMessagePayload) === null || _b2 === void 0 ? void 0 : _b2["ui"]) === null || _c === void 0 ? void 0 : _c["container_type"];
  if (!isMobile)
    return UI_CONTAINER_TYPES.DEFAULT;
  if (containerType === MessageContentMiddleContainerType.WIDE) {
    return UI_CONTAINER_TYPES.WIDE;
  }
  return UI_CONTAINER_TYPES.DEFAULT;
};
var isOGMessage = function(message) {
  if (!message || !isUserMessage(message))
    return false;
  return !!message.ogMetaData && !!(message.ogMetaData.url || message.ogMetaData.title || message.ogMetaData.description || message.ogMetaData.defaultImage);
};
var isTextMessage = function(message) {
  return isUserMessage(message);
};
var isThumbnailMessage = function(message) {
  if (!message || !isFileMessage(message))
    return false;
  return isSupportedFileView(message.type);
};
var isImageMessage = function(message) {
  if (!message || !isFileMessage(message))
    return false;
  return isThumbnailMessage(message) && isImage(message.type);
};
var isVideoMessage = function(message) {
  if (!message || !isFileMessage(message))
    return false;
  return isThumbnailMessage(message) && isVideo(message.type);
};
var isGifMessage = function(message) {
  if (!message || !isFileMessage(message))
    return false;
  return isThumbnailMessage(message) && isGif(message.type);
};
var isAudioMessage = function(message) {
  if (!message || !isFileMessage(message))
    return false;
  return isAudio(message.type);
};
var isImageFileInfo = function(fileInfo) {
  if (!fileInfo)
    return false;
  return !!fileInfo.mimeType && (isImage(fileInfo.mimeType) || isGif(fileInfo.mimeType));
};
var isAudioMessageMimeType = function(type) {
  return /^audio\//.test(type);
};
var isVoiceMessageMimeType = function(type) {
  return /^voice\//.test(type);
};
var isVoiceMessage = function(message) {
  var _a2, _b2, _c, _d;
  if (!message || !isFileMessage(message) || !message.type)
    return false;
  var _e3 = message.type.split(";"), mimeType = _e3[0], typeParameter = _e3[1];
  if (!isAudioMessageMimeType(mimeType)) {
    return false;
  }
  if (typeParameter) {
    var _f = typeParameter.split("="), key = _f[0], value = _f[1];
    return key === "sbu_type" && value === "voice";
  }
  return isVoiceMessageMimeType((_d = (_c = (_b2 = (_a2 = message === null || message === void 0 ? void 0 : message.metaArrays) === null || _a2 === void 0 ? void 0 : _a2.find(function(metaArray) {
    return metaArray.key === "KEY_INTERNAL_MESSAGE_TYPE";
  })) === null || _b2 === void 0 ? void 0 : _b2.value) === null || _c === void 0 ? void 0 : _c[0]) !== null && _d !== void 0 ? _d : "");
};
var isEditedMessage = function(message) {
  return isUserMessage(message) && (message === null || message === void 0 ? void 0 : message.updatedAt) > 0;
};
var getUIKitMessageTypes = function() {
  return __assign({}, UIKitMessageTypes);
};
var getUIKitMessageType = function(message) {
  if (isAdminMessage(message))
    return UIKitMessageTypes.ADMIN;
  if (isUserMessage(message)) {
    return isOGMessage(message) ? UIKitMessageTypes.OG : UIKitMessageTypes.TEXT;
  }
  if (isMultipleFilesMessage(message)) {
    return UIKitMessageTypes.MULTIPLE_FILES;
  }
  if (isFileMessage(message)) {
    if (isThumbnailMessage(message)) {
      return UIKitMessageTypes.THUMBNAIL;
    }
    if (isVoiceMessage(message)) {
      return UIKitFileTypes.VOICE;
    }
    return UIKitMessageTypes.FILE;
  }
  return UIKitMessageTypes.UNKNOWN;
};
var reducer = function(accumulator, currentValue) {
  if (Array.isArray(currentValue)) {
    return __spreadArray(__spreadArray([], accumulator, true), currentValue, true);
  } else {
    accumulator.push(currentValue);
    return accumulator;
  }
};
var getClassName = function(classNames) {
  return Array.isArray(classNames) ? classNames.reduce(reducer, []).join(" ") : classNames;
};
var startsWithAtAndEndsWithBraces = function(str) {
  var regex2 = /^\{@.*\}$/;
  return regex2.test(str);
};
var removeAtAndBraces = function(str) {
  return str.replace(/^\{@|}$/g, "");
};
var isReactedBy = function(userId, reaction) {
  return reaction.userIds.some(function(reactorUserId) {
    return reactorUserId === userId;
  });
};
var getEmojiTooltipString = function(reaction, userId, memberNicknamesMap, stringSet2) {
  var you = "";
  if (isReactedBy(userId, reaction)) {
    you = reaction.userIds.length === 1 ? stringSet2.TOOLTIP__YOU : stringSet2.TOOLTIP__AND_YOU;
  }
  return "".concat(reaction.userIds.filter(function(reactorUserId) {
    return reactorUserId !== userId;
  }).map(function(reactorUserId) {
    return memberNicknamesMap.get(reactorUserId) || stringSet2.TOOLTIP__UNKNOWN_USER;
  }).join(", ")).concat(you);
};
function getSuggestedReplies(message) {
  var _a2;
  if ((message === null || message === void 0 ? void 0 : message.extendedMessagePayload) && Array.isArray((_a2 = message === null || message === void 0 ? void 0 : message.extendedMessagePayload) === null || _a2 === void 0 ? void 0 : _a2.suggested_replies)) {
    return message.extendedMessagePayload.suggested_replies;
  } else {
    return [];
  }
}
var truncateString = function(fullStr, strLen) {
  if (!strLen)
    strLen = 40;
  if (fullStr === null || fullStr === void 0)
    return "";
  if (fullStr.length <= strLen)
    return fullStr;
  var separator = "...";
  var sepLen = separator.length;
  var charsToShow = strLen - sepLen;
  var frontChars = Math.ceil(charsToShow / 2);
  var backChars = Math.floor(charsToShow / 2);
  return fullStr.substr(0, frontChars) + separator + fullStr.substr(fullStr.length - backChars);
};
var copyToClipboard = function(text) {
  if (window.clipboardData && window.clipboardData.setData) {
    return window.clipboardData.setData("Text", text);
  }
  if (document.queryCommandSupported && document.queryCommandSupported("copy")) {
    var textarea = document.createElement("textarea");
    textarea.textContent = text;
    textarea.style.position = "fixed";
    document.body.appendChild(textarea);
    textarea.select();
    try {
      return document.execCommand("copy");
    } catch (ex) {
      return false;
    } finally {
      document.body.removeChild(textarea);
    }
  }
  return false;
};
var getEmojiListAll = function(emojiContainer) {
  var _a2;
  return (_a2 = emojiContainer === null || emojiContainer === void 0 ? void 0 : emojiContainer.emojiCategories) === null || _a2 === void 0 ? void 0 : _a2.map(function(emojiCategory) {
    return emojiCategory.emojis;
  }).reduce(function(prevArr, currArr) {
    return prevArr.concat(currArr);
  }, []);
};
var getEmojiMapAll = function(emojiContainer) {
  var _a2;
  var emojiMap = /* @__PURE__ */ new Map();
  (_a2 = emojiContainer === null || emojiContainer === void 0 ? void 0 : emojiContainer.emojiCategories) === null || _a2 === void 0 ? void 0 : _a2.forEach(function(category) {
    var _a3;
    (_a3 = category === null || category === void 0 ? void 0 : category.emojis) === null || _a3 === void 0 ? void 0 : _a3.forEach(function(emoji) {
      if (emoji && emoji.key) {
        emojiMap.set(emoji.key, emoji);
      }
    });
  });
  return emojiMap;
};
var findEmojiUrl = function(targetKey) {
  return function(_a2) {
    var key = _a2.key;
    return key === targetKey;
  };
};
var getEmojiUrl = function(emojiContainer, emojiKey) {
  var _a2, _b2;
  var isFindingKey = findEmojiUrl(emojiKey !== null && emojiKey !== void 0 ? emojiKey : "");
  return ((_b2 = (_a2 = emojiContainer === null || emojiContainer === void 0 ? void 0 : emojiContainer.emojiCategories.find(function(category) {
    return category.emojis.some(isFindingKey);
  })) === null || _a2 === void 0 ? void 0 : _a2.emojis.find(isFindingKey)) === null || _b2 === void 0 ? void 0 : _b2.url) || "";
};
var getUserName = function(user) {
  return (user === null || user === void 0 ? void 0 : user.friendName) || (user === null || user === void 0 ? void 0 : user.nickname) || (user === null || user === void 0 ? void 0 : user.userId);
};
var getSenderName = function(message) {
  return (message === null || message === void 0 ? void 0 : message.sender) && getUserName(message === null || message === void 0 ? void 0 : message.sender);
};
var hasSameMembers = function(a5, b6) {
  if (a5 === b6) {
    return true;
  }
  if (a5 == null || b6 == null) {
    return false;
  }
  if (a5.length !== b6.length) {
    return false;
  }
  var sortedA = __spreadArray([], a5, true).sort();
  var sortedB = __spreadArray([], b6, true).sort();
  for (var i4 = 0; i4 < sortedA.length; ++i4) {
    if (sortedA[i4] !== sortedB[i4]) {
      return false;
    }
  }
  return true;
};
var isFriend = function(user) {
  if (!user)
    return false;
  return !!(user.friendDiscoveryKey || user.friendName);
};
var filterMessageListParams = function(params, message) {
  var _a2, _b2, _c, _d;
  var _e3 = params.customTypesFilter, customTypesFilter = _e3 === void 0 ? [] : _e3;
  if ((params === null || params === void 0 ? void 0 : params.messageTypeFilter) && params.messageTypeFilter !== message.messageType) {
    return false;
  }
  if ((customTypesFilter === null || customTypesFilter === void 0 ? void 0 : customTypesFilter.length) > 0) {
    var customTypes = customTypesFilter.filter(function(item) {
      return item !== "*";
    });
    if (customTypes.length > 0 && !customTypes.includes(message.customType)) {
      return false;
    }
  }
  if ((params === null || params === void 0 ? void 0 : params.senderUserIdsFilter) && ((_a2 = params === null || params === void 0 ? void 0 : params.senderUserIdsFilter) === null || _a2 === void 0 ? void 0 : _a2.length) > 0) {
    if (((_b2 = message === null || message === void 0 ? void 0 : message.isUserMessage) === null || _b2 === void 0 ? void 0 : _b2.call(message)) || ((_c = message === null || message === void 0 ? void 0 : message.isFileMessage) === null || _c === void 0 ? void 0 : _c.call(message))) {
      var messageSender = message.sender || message["_sender"];
      if (!((_d = params === null || params === void 0 ? void 0 : params.senderUserIdsFilter) === null || _d === void 0 ? void 0 : _d.includes(messageSender === null || messageSender === void 0 ? void 0 : messageSender.userId))) {
        return false;
      }
    } else {
      return false;
    }
  }
  if (!(params === null || params === void 0 ? void 0 : params.includeParentMessageInfo) && ((message === null || message === void 0 ? void 0 : message.parentMessageId) || (message === null || message === void 0 ? void 0 : message.parentMessage))) {
    return false;
  }
  return true;
};
var filterChannelListParams = function(params, channel, currentUserId) {
  var _a2, _b2, _c, _d, _e3, _f, _g2;
  var includeEmpty = params.includeEmpty, includeFrozen = params.includeFrozen, searchFilter = params.searchFilter, userIdsFilter = params.userIdsFilter, customTypesFilter = params.customTypesFilter, channelUrlsFilter = params.channelUrlsFilter, customTypeStartsWithFilter = params.customTypeStartsWithFilter, channelNameContainsFilter = params.channelNameContainsFilter, nicknameContainsFilter = params.nicknameContainsFilter, myMemberStateFilter = params.myMemberStateFilter, hiddenChannelFilter = params.hiddenChannelFilter, unreadChannelFilter = params.unreadChannelFilter, publicChannelFilter = params.publicChannelFilter, superChannelFilter = params.superChannelFilter, _h = params.metadataKey, metadataKey = _h === void 0 ? "" : _h, _j = params.metadataValues, metadataValues = _j === void 0 ? ["a", "b"] : _j, metadataValueStartsWith = params.metadataValueStartsWith;
  if (!includeEmpty && (channel === null || channel === void 0 ? void 0 : channel.lastMessage) === null) {
    return false;
  }
  if ((searchFilter === null || searchFilter === void 0 ? void 0 : searchFilter.query) && ((_b2 = (_a2 = searchFilter === null || searchFilter === void 0 ? void 0 : searchFilter.fields) === null || _a2 === void 0 ? void 0 : _a2.length) !== null && _b2 !== void 0 ? _b2 : 0) > 0) {
    var searchQuery_1 = searchFilter.query;
    var searchFields = searchFilter.fields;
    if (searchQuery_1 && searchFields && searchFields.length > 0) {
      if (!searchFields.some(function(searchField) {
        var _a3, _b3;
        switch (searchField) {
          case "channel_name": {
            return (_a3 = channel === null || channel === void 0 ? void 0 : channel.name) === null || _a3 === void 0 ? void 0 : _a3.toLowerCase().includes(searchQuery_1.toLowerCase());
          }
          case "member_nickname": {
            return (_b3 = channel === null || channel === void 0 ? void 0 : channel.members) === null || _b3 === void 0 ? void 0 : _b3.some(function(member) {
              return member.nickname.toLowerCase().includes(searchQuery_1.toLowerCase());
            });
          }
          default: {
            return true;
          }
        }
      })) {
        return false;
      }
    }
  }
  if (((_c = userIdsFilter === null || userIdsFilter === void 0 ? void 0 : userIdsFilter.userIds) === null || _c === void 0 ? void 0 : _c.length) > 0) {
    var includeMode = userIdsFilter.includeMode, queryType = userIdsFilter.queryType;
    var userIds = userIdsFilter.userIds;
    var memberIds_1 = (_d = channel === null || channel === void 0 ? void 0 : channel.members) === null || _d === void 0 ? void 0 : _d.map(function(member) {
      return member.userId;
    });
    if (!includeMode) {
      if (!userIds.includes(currentUserId)) {
        userIds.push(currentUserId);
      }
      if (((_e3 = channel === null || channel === void 0 ? void 0 : channel.members) === null || _e3 === void 0 ? void 0 : _e3.length) > userIds.length) {
        return false;
      }
      if (!hasSameMembers(userIds, memberIds_1)) {
        return false;
      }
    } else if (userIds.length > 0) {
      switch (queryType) {
        case "AND": {
          if (userIds.some(function(userId) {
            return !memberIds_1.includes(userId);
          })) {
            return false;
          }
          break;
        }
        case "OR": {
          if (userIds.every(function(userId) {
            return !memberIds_1.includes(userId);
          })) {
            return false;
          }
          break;
        }
      }
    }
  }
  if (includeEmpty === false && (channel === null || channel === void 0 ? void 0 : channel.lastMessage) === null) {
    return false;
  }
  if (includeFrozen === false && (channel === null || channel === void 0 ? void 0 : channel.isFrozen) === true) {
    return false;
  }
  if (customTypesFilter && !customTypesFilter.includes(channel === null || channel === void 0 ? void 0 : channel.customType)) {
    return false;
  }
  if (customTypeStartsWithFilter && !new RegExp("^".concat(customTypeStartsWithFilter)).test(channel === null || channel === void 0 ? void 0 : channel.customType)) {
    return false;
  }
  if (channelNameContainsFilter && !((_f = channel === null || channel === void 0 ? void 0 : channel.name) === null || _f === void 0 ? void 0 : _f.toLowerCase().includes(channelNameContainsFilter.toLowerCase()))) {
    return false;
  }
  if (nicknameContainsFilter) {
    var lowerCasedSubString_1 = nicknameContainsFilter.toLowerCase();
    if ((_g2 = channel === null || channel === void 0 ? void 0 : channel.members) === null || _g2 === void 0 ? void 0 : _g2.every(function(member) {
      return !member.nickname.toLowerCase().includes(lowerCasedSubString_1);
    })) {
      return false;
    }
  }
  if (channelUrlsFilter && !channelUrlsFilter.includes(channel === null || channel === void 0 ? void 0 : channel.url)) {
    return false;
  }
  if (myMemberStateFilter) {
    switch (myMemberStateFilter) {
      case "joined_only":
        if ((channel === null || channel === void 0 ? void 0 : channel.myMemberState) !== "joined") {
          return false;
        }
        break;
      case "invited_only":
        if ((channel === null || channel === void 0 ? void 0 : channel.myMemberState) !== "invited") {
          return false;
        }
        break;
      case "invited_by_friend":
        if ((channel === null || channel === void 0 ? void 0 : channel.myMemberState) !== "invited" || !isFriend(channel === null || channel === void 0 ? void 0 : channel.inviter)) {
          return false;
        }
        break;
      case "invited_by_non_friend":
        if ((channel === null || channel === void 0 ? void 0 : channel.myMemberState) !== "invited" || isFriend(channel === null || channel === void 0 ? void 0 : channel.inviter)) {
          return false;
        }
        break;
    }
  }
  if (hiddenChannelFilter) {
    switch (hiddenChannelFilter) {
      case "unhidden_only":
        if ((channel === null || channel === void 0 ? void 0 : channel.isHidden) || (channel === null || channel === void 0 ? void 0 : channel.hiddenState) !== "unhidden") {
          return false;
        }
        break;
      case "hidden_only":
        if (!(channel === null || channel === void 0 ? void 0 : channel.isHidden)) {
          return false;
        }
        break;
      case "hidden_allow_auto_unhide":
        if (!(channel === null || channel === void 0 ? void 0 : channel.isHidden) || (channel === null || channel === void 0 ? void 0 : channel.hiddenState) !== "hidden_allow_auto_unhide") {
          return false;
        }
        break;
      case "hidden_prevent_auto_unhide":
        if (!(channel === null || channel === void 0 ? void 0 : channel.isHidden) || (channel === null || channel === void 0 ? void 0 : channel.hiddenState) !== "hidden_prevent_auto_unhide") {
          return false;
        }
        break;
    }
  }
  if (unreadChannelFilter) {
    switch (unreadChannelFilter) {
      case "unread_message":
        if ((channel === null || channel === void 0 ? void 0 : channel.unreadMessageCount) === 0) {
          return false;
        }
        break;
    }
  }
  if (publicChannelFilter) {
    switch (publicChannelFilter) {
      case "public":
        if (!(channel === null || channel === void 0 ? void 0 : channel.isPublic)) {
          return false;
        }
        break;
      case "private":
        if (channel === null || channel === void 0 ? void 0 : channel.isPublic) {
          return false;
        }
        break;
    }
  }
  if (superChannelFilter) {
    switch (superChannelFilter) {
      case "super":
        if (!(channel === null || channel === void 0 ? void 0 : channel.isSuper)) {
          return false;
        }
        break;
      case "nonsuper":
        if (channel === null || channel === void 0 ? void 0 : channel.isSuper) {
          return false;
        }
        break;
    }
  }
  var _k = channel.cachedMetaData, cachedMetaData = _k === void 0 ? {} : _k;
  if (metadataKey && (metadataValues || metadataValueStartsWith)) {
    var metadataValue_1 = cachedMetaData[metadataKey];
    if (!metadataValue_1) {
      return false;
    }
    if (metadataValues && !metadataValues.every(function(value) {
      return metadataValue_1.includes(value);
    })) {
      return false;
    }
    if (metadataValueStartsWith && !metadataValue_1.startsWith(metadataValueStartsWith)) {
      return false;
    }
  }
  return true;
};
var sortChannelList = function(channels, order) {
  var compareFunc = K2(order).with(E.CHANNEL_NAME_ALPHABETICAL, function() {
    return function(a5, b6) {
      return a5.name.localeCompare(b6.name);
    };
  }).with(E.CHRONOLOGICAL, function() {
    return function(a5, b6) {
      return b6.createdAt - a5.createdAt;
    };
  }).otherwise(function() {
    return function(a5, b6) {
      var _a2, _b2, _c, _d;
      return ((_b2 = (_a2 = b6.lastMessage) === null || _a2 === void 0 ? void 0 : _a2.createdAt) !== null && _b2 !== void 0 ? _b2 : Number.MIN_SAFE_INTEGER) - ((_d = (_c = a5.lastMessage) === null || _c === void 0 ? void 0 : _c.createdAt) !== null && _d !== void 0 ? _d : Number.MIN_SAFE_INTEGER);
    };
  });
  return channels.sort(compareFunc);
};
var getChannelsWithUpsertedChannel = function(_channels, channel, order) {
  var channels = __spreadArray([], _channels, true);
  var findingIndex = channels.findIndex(function(ch) {
    return ch.url === channel.url;
  });
  if (findingIndex !== -1) {
    channels[findingIndex] = channel;
  } else {
    channels.push(channel);
  }
  return sortChannelList(channels, order !== null && order !== void 0 ? order : E.LATEST_LAST_MESSAGE);
};
var StringObjType;
(function(StringObjType2) {
  StringObjType2["normal"] = "normal";
  StringObjType2["mention"] = "mention";
  StringObjType2["url"] = "url";
})(StringObjType || (StringObjType = {}));
var arrayEqual = function(array1, array2) {
  if (Array.isArray(array1) && Array.isArray(array2) && array1.length === array2.length) {
    for (var i4 = 0; i4 < array1.length; i4++) {
      if (array1[i4] !== array2[i4]) {
        return false;
      }
    }
    return true;
  }
  return false;
};
var isSendableMessage2 = function(message) {
  return Boolean(message) && "sender" in message;
};
var isChannelJustCreated = function(channel) {
  return isSameSecond(channel.createdAt, channel.invitedAt) && !channel.lastMessage;
};

// node_modules/@sendbird/uikit-react/ui/Button.js
var import_react25 = __toESM(require_react(), 1);
var ButtonTypes;
(function(ButtonTypes2) {
  ButtonTypes2["PRIMARY"] = "PRIMARY";
  ButtonTypes2["SECONDARY"] = "SECONDARY";
  ButtonTypes2["DANGER"] = "DANGER";
  ButtonTypes2["DISABLED"] = "DISABLED";
  ButtonTypes2["WARNING"] = "WARNING";
})(ButtonTypes || (ButtonTypes = {}));
var ButtonSizes;
(function(ButtonSizes2) {
  ButtonSizes2["BIG"] = "BIG";
  ButtonSizes2["SMALL"] = "SMALL";
})(ButtonSizes || (ButtonSizes = {}));
function changeTypeToClassName(type) {
  switch (type) {
    case ButtonTypes.PRIMARY:
      return "sendbird-button--primary";
    case ButtonTypes.SECONDARY:
      return "sendbird-button--secondary";
    case ButtonTypes.DANGER:
      return "sendbird-button--danger";
    case ButtonTypes.DISABLED:
      return "sendbird-button--disabled";
    case ButtonTypes.WARNING:
      return "sendbird-button--warning";
    default:
      return "";
  }
}
function changeSizeToClassName(size) {
  switch (size) {
    case ButtonSizes.BIG:
      return "sendbird-button--big";
    case ButtonSizes.SMALL:
      return "sendbird-button--small";
    default:
      return "";
  }
}
function Button(_a2) {
  var className = _a2.className, _b2 = _a2.type, type = _b2 === void 0 ? ButtonTypes.PRIMARY : _b2, _c = _a2.size, size = _c === void 0 ? ButtonSizes.BIG : _c, _d = _a2.children, children = _d === void 0 ? "Button" : _d, _e3 = _a2.disabled, disabled = _e3 === void 0 ? false : _e3, _f = _a2.onClick, onClick = _f === void 0 ? function() {
  } : _f, _g2 = _a2.labelType, labelType = _g2 === void 0 ? LabelTypography.BUTTON_1 : _g2, _h = _a2.labelColor, labelColor = _h === void 0 ? LabelColors.ONCONTENT_1 : _h;
  var injectingClassNames = __spreadArray(__spreadArray([], Array.isArray(className) ? className : [className], true), [
    "sendbird-button",
    disabled ? "sendbird-button__disabled" : "",
    changeTypeToClassName(type),
    changeSizeToClassName(size)
  ], false).join(" ");
  return import_react25.default.createElement(
    "button",
    { className: injectingClassNames, type: "button", onClick, disabled },
    import_react25.default.createElement(Label, { className: "sendbird-button__text", type: labelType, color: labelColor }, children)
  );
}

// node_modules/css-vars-ponyfill/dist/css-vars-ponyfill.esm.js
function _extends2() {
  _extends2 = Object.assign ? Object.assign.bind() : function(target) {
    for (var i4 = 1; i4 < arguments.length; i4++) {
      var source = arguments[i4];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends2.apply(this, arguments);
}
function getUrls(urls) {
  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  var settings = {
    mimeType: options.mimeType || null,
    onBeforeSend: options.onBeforeSend || Function.prototype,
    onSuccess: options.onSuccess || Function.prototype,
    onError: options.onError || Function.prototype,
    onComplete: options.onComplete || Function.prototype
  };
  var urlArray = Array.isArray(urls) ? urls : [urls];
  var urlQueue = Array.apply(null, Array(urlArray.length)).map(function(x2) {
    return null;
  });
  function isValidCss(text) {
    var isString = typeof text === "string";
    var isHTML = isString && text.trim().charAt(0) === "<";
    return isString && !isHTML;
  }
  function onError2(xhr, urlIndex) {
    settings.onError(xhr, urlArray[urlIndex], urlIndex);
  }
  function onSuccess2(responseText, urlIndex) {
    var returnVal = settings.onSuccess(responseText, urlArray[urlIndex], urlIndex);
    responseText = returnVal === false ? "" : returnVal || responseText;
    urlQueue[urlIndex] = responseText;
    if (urlQueue.indexOf(null) === -1) {
      settings.onComplete(urlQueue);
    }
  }
  var parser = document.createElement("a");
  urlArray.forEach(function(url, i4) {
    parser.setAttribute("href", url);
    parser.href = String(parser.href);
    var isIElte9 = Boolean(document.all && !window.atob);
    var isIElte9CORS = isIElte9 && parser.host.split(":")[0] !== location.host.split(":")[0];
    if (isIElte9CORS) {
      var isSameProtocol = parser.protocol === location.protocol;
      if (isSameProtocol) {
        var xdr = new XDomainRequest();
        xdr.open("GET", url);
        xdr.timeout = 0;
        xdr.onprogress = Function.prototype;
        xdr.ontimeout = Function.prototype;
        xdr.onload = function() {
          var text = xdr.responseText;
          if (isValidCss(text)) {
            onSuccess2(text, i4);
          } else {
            onError2(xdr, i4);
          }
        };
        xdr.onerror = function(err) {
          onError2(xdr, i4);
        };
        setTimeout(function() {
          xdr.send();
        }, 0);
      } else {
        console.warn("Internet Explorer 9 Cross-Origin (CORS) requests must use the same protocol (".concat(url, ")"));
        onError2(null, i4);
      }
    } else {
      var xhr = new XMLHttpRequest();
      xhr.open("GET", url);
      if (settings.mimeType && xhr.overrideMimeType) {
        xhr.overrideMimeType(settings.mimeType);
      }
      settings.onBeforeSend(xhr, url, i4);
      xhr.onreadystatechange = function() {
        if (xhr.readyState === 4) {
          var text = xhr.responseText;
          if (xhr.status < 400 && isValidCss(text)) {
            onSuccess2(text, i4);
          } else if (xhr.status === 0 && isValidCss(text)) {
            onSuccess2(text, i4);
          } else {
            onError2(xhr, i4);
          }
        }
      };
      xhr.send();
    }
  });
}
function getCssData(options) {
  var regex2 = {
    cssComments: /\/\*[\s\S]+?\*\//g,
    cssImports: /(?:@import\s*)(?:url\(\s*)?(?:['"])([^'"]*)(?:['"])(?:\s*\))?(?:[^;]*;)/g
  };
  var settings = {
    rootElement: options.rootElement || document,
    include: options.include || 'style,link[rel="stylesheet"]',
    exclude: options.exclude || null,
    filter: options.filter || null,
    skipDisabled: options.skipDisabled !== false,
    useCSSOM: options.useCSSOM || false,
    onBeforeSend: options.onBeforeSend || Function.prototype,
    onSuccess: options.onSuccess || Function.prototype,
    onError: options.onError || Function.prototype,
    onComplete: options.onComplete || Function.prototype
  };
  var sourceNodes = Array.apply(null, settings.rootElement.querySelectorAll(settings.include)).filter(function(node) {
    return !matchesSelector(node, settings.exclude);
  });
  var cssArray = Array.apply(null, Array(sourceNodes.length)).map(function(x2) {
    return null;
  });
  function handleComplete() {
    var isComplete = cssArray.indexOf(null) === -1;
    if (isComplete) {
      cssArray.reduce(function(skipIndices, value, i4) {
        if (value === "") {
          skipIndices.push(i4);
        }
        return skipIndices;
      }, []).reverse().forEach(function(skipIndex) {
        return [sourceNodes, cssArray].forEach(function(arr) {
          return arr.splice(skipIndex, 1);
        });
      });
      var cssText = cssArray.join("");
      settings.onComplete(cssText, cssArray, sourceNodes);
    }
  }
  function handleSuccess(cssText, cssIndex, node, sourceUrl) {
    var returnVal = settings.onSuccess(cssText, node, sourceUrl);
    cssText = returnVal !== void 0 && Boolean(returnVal) === false ? "" : returnVal || cssText;
    resolveImports(cssText, node, sourceUrl, function(resolvedCssText, errorData) {
      if (cssArray[cssIndex] === null) {
        errorData.forEach(function(data) {
          return settings.onError(data.xhr, node, data.url);
        });
        if (!settings.filter || settings.filter.test(resolvedCssText)) {
          cssArray[cssIndex] = resolvedCssText;
        } else {
          cssArray[cssIndex] = "";
        }
        handleComplete();
      }
    });
  }
  function parseImportData(cssText, baseUrl) {
    var ignoreRules = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : [];
    var importData = {};
    importData.rules = (cssText.replace(regex2.cssComments, "").match(regex2.cssImports) || []).filter(function(rule) {
      return ignoreRules.indexOf(rule) === -1;
    });
    importData.urls = importData.rules.map(function(rule) {
      return rule.replace(regex2.cssImports, "$1");
    });
    importData.absoluteUrls = importData.urls.map(function(url) {
      return getFullUrl$1(url, baseUrl);
    });
    importData.absoluteRules = importData.rules.map(function(rule, i4) {
      var oldUrl = importData.urls[i4];
      var newUrl = getFullUrl$1(importData.absoluteUrls[i4], baseUrl);
      return rule.replace(oldUrl, newUrl);
    });
    return importData;
  }
  function resolveImports(cssText, node, baseUrl, callbackFn) {
    var __errorData = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : [];
    var __errorRules = arguments.length > 5 && arguments[5] !== void 0 ? arguments[5] : [];
    var importData = parseImportData(cssText, baseUrl, __errorRules);
    if (importData.rules.length) {
      getUrls(importData.absoluteUrls, {
        onBeforeSend: function onBeforeSend2(xhr, url, urlIndex) {
          settings.onBeforeSend(xhr, node, url);
        },
        onSuccess: function onSuccess2(cssText2, url, urlIndex) {
          var returnVal = settings.onSuccess(cssText2, node, url);
          cssText2 = returnVal === false ? "" : returnVal || cssText2;
          var responseImportData = parseImportData(cssText2, url, __errorRules);
          responseImportData.rules.forEach(function(rule, i4) {
            cssText2 = cssText2.replace(rule, responseImportData.absoluteRules[i4]);
          });
          return cssText2;
        },
        onError: function onError2(xhr, url, urlIndex) {
          __errorData.push({
            xhr,
            url
          });
          __errorRules.push(importData.rules[urlIndex]);
          resolveImports(cssText, node, baseUrl, callbackFn, __errorData, __errorRules);
        },
        onComplete: function onComplete2(responseArray) {
          responseArray.forEach(function(importText, i4) {
            cssText = cssText.replace(importData.rules[i4], importText);
          });
          resolveImports(cssText, node, baseUrl, callbackFn, __errorData, __errorRules);
        }
      });
    } else {
      callbackFn(cssText, __errorData);
    }
  }
  if (sourceNodes.length) {
    sourceNodes.forEach(function(node, i4) {
      var linkHref = node.getAttribute("href");
      var linkRel = node.getAttribute("rel");
      var isLink = node.nodeName.toLowerCase() === "link" && linkHref && linkRel && linkRel.toLowerCase().indexOf("stylesheet") !== -1;
      var isSkip = settings.skipDisabled === false ? false : node.disabled;
      var isStyle = node.nodeName.toLowerCase() === "style";
      if (isLink && !isSkip) {
        var isURIScheme = linkHref.indexOf("data:text/css") !== -1;
        if (isURIScheme) {
          var cssText = decodeURIComponent(linkHref.substring(linkHref.indexOf(",") + 1));
          if (settings.useCSSOM) {
            cssText = Array.apply(null, node.sheet.cssRules).map(function(rule) {
              return rule.cssText;
            }).join("");
          }
          handleSuccess(cssText, i4, node, location.href);
        } else {
          getUrls(linkHref, {
            mimeType: "text/css",
            onBeforeSend: function onBeforeSend2(xhr, url, urlIndex) {
              settings.onBeforeSend(xhr, node, url);
            },
            onSuccess: function onSuccess2(cssText2, url, urlIndex) {
              var sourceUrl = getFullUrl$1(linkHref);
              handleSuccess(cssText2, i4, node, sourceUrl);
            },
            onError: function onError2(xhr, url, urlIndex) {
              cssArray[i4] = "";
              settings.onError(xhr, node, url);
              handleComplete();
            }
          });
        }
      } else if (isStyle && !isSkip) {
        var _cssText = node.textContent;
        if (settings.useCSSOM) {
          _cssText = Array.apply(null, node.sheet.cssRules).map(function(rule) {
            return rule.cssText;
          }).join("");
        }
        handleSuccess(_cssText, i4, node, location.href);
      } else {
        cssArray[i4] = "";
        handleComplete();
      }
    });
  } else {
    settings.onComplete("", []);
  }
}
function getFullUrl$1(url, base) {
  var d5 = document.implementation.createHTMLDocument("");
  var b6 = d5.createElement("base");
  var a5 = d5.createElement("a");
  d5.head.appendChild(b6);
  d5.body.appendChild(a5);
  b6.href = base || document.baseURI || (document.querySelector("base") || {}).href || location.href;
  a5.href = url;
  return a5.href;
}
function matchesSelector(elm, selector) {
  var matches = elm.matches || elm.matchesSelector || elm.webkitMatchesSelector || elm.mozMatchesSelector || elm.msMatchesSelector || elm.oMatchesSelector;
  return matches.call(elm, selector);
}
var balancedMatch = balanced;
function balanced(a5, b6, str) {
  if (a5 instanceof RegExp) a5 = maybeMatch(a5, str);
  if (b6 instanceof RegExp) b6 = maybeMatch(b6, str);
  var r4 = range(a5, b6, str);
  return r4 && {
    start: r4[0],
    end: r4[1],
    pre: str.slice(0, r4[0]),
    body: str.slice(r4[0] + a5.length, r4[1]),
    post: str.slice(r4[1] + b6.length)
  };
}
function maybeMatch(reg, str) {
  var m5 = str.match(reg);
  return m5 ? m5[0] : null;
}
balanced.range = range;
function range(a5, b6, str) {
  var begs, beg, left, right, result;
  var ai2 = str.indexOf(a5);
  var bi2 = str.indexOf(b6, ai2 + 1);
  var i4 = ai2;
  if (ai2 >= 0 && bi2 > 0) {
    if (a5 === b6) {
      return [ai2, bi2];
    }
    begs = [];
    left = str.length;
    while (i4 >= 0 && !result) {
      if (i4 == ai2) {
        begs.push(i4);
        ai2 = str.indexOf(a5, i4 + 1);
      } else if (begs.length == 1) {
        result = [begs.pop(), bi2];
      } else {
        beg = begs.pop();
        if (beg < left) {
          left = beg;
          right = bi2;
        }
        bi2 = str.indexOf(b6, i4 + 1);
      }
      i4 = ai2 < bi2 && ai2 >= 0 ? ai2 : bi2;
    }
    if (begs.length) {
      result = [left, right];
    }
  }
  return result;
}
function parseCss(css) {
  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  var defaults2 = {
    preserveStatic: true,
    removeComments: false
  };
  var settings = _extends2({}, defaults2, options);
  var errors = [];
  function error(msg) {
    throw new Error("CSS parse error: ".concat(msg));
  }
  function match2(re2) {
    var m5 = re2.exec(css);
    if (m5) {
      css = css.slice(m5[0].length);
      return m5;
    }
  }
  function open() {
    return match2(/^{\s*/);
  }
  function close() {
    return match2(/^}/);
  }
  function whitespace() {
    match2(/^\s*/);
  }
  function comment() {
    whitespace();
    if (css[0] !== "/" || css[1] !== "*") {
      return;
    }
    var i4 = 2;
    while (css[i4] && (css[i4] !== "*" || css[i4 + 1] !== "/")) {
      i4++;
    }
    if (!css[i4]) {
      return error("end of comment is missing");
    }
    var str = css.slice(2, i4);
    css = css.slice(i4 + 2);
    return {
      type: "comment",
      comment: str
    };
  }
  function comments() {
    var cmnts = [];
    var c4;
    while (c4 = comment()) {
      cmnts.push(c4);
    }
    return settings.removeComments ? [] : cmnts;
  }
  function selector() {
    whitespace();
    while (css[0] === "}") {
      error("extra closing bracket");
    }
    var m5 = match2(/^(("(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^{])+)/);
    if (m5) {
      var _selector = m5[0].trim();
      var selectorItems;
      var hasComment = /\/\*/.test(_selector);
      if (hasComment) {
        _selector = _selector.replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g, "");
      }
      var hasCommaInQuotes = /["']\w*,\w*["']/.test(_selector);
      if (hasCommaInQuotes) {
        _selector = _selector.replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g, function(m6) {
          return m6.replace(/,/g, "‌");
        });
      }
      var hasMultipleSelectors = /,/.test(_selector);
      if (hasMultipleSelectors) {
        selectorItems = _selector.split(/\s*(?![^(]*\)),\s*/);
      } else {
        selectorItems = [_selector];
      }
      if (hasCommaInQuotes) {
        selectorItems = selectorItems.map(function(s6) {
          return s6.replace(/\u200C/g, ",");
        });
      }
      return selectorItems;
    }
  }
  function declaration() {
    if (css[0] === "@") {
      return at_rule();
    }
    match2(/^([;\s]*)+/);
    var comment_regexp = /\/\*[^*]*\*+([^/*][^*]*\*+)*\//g;
    var prop = match2(/^(\*?[-#/*\\\w.]+(\[[0-9a-z_-]+\])?)\s*/);
    if (!prop) {
      return;
    }
    prop = prop[0].trim();
    if (!match2(/^:\s*/)) {
      return error("property missing ':'");
    }
    var val = match2(/^((?:\/\*.*?\*\/|'(?:\\'|.)*?'|"(?:\\"|.)*?"|\((\s*'(?:\\'|.)*?'|"(?:\\"|.)*?"|[^)]*?)\s*\)|[^};])+)/);
    var ret = {
      type: "declaration",
      property: prop.replace(comment_regexp, ""),
      value: val ? val[0].replace(comment_regexp, "").trim() : ""
    };
    match2(/^[;\s]*/);
    return ret;
  }
  function declarations() {
    if (!open()) {
      return error("missing '{'");
    }
    var d5;
    var decls = comments();
    while (d5 = declaration()) {
      decls.push(d5);
      decls = decls.concat(comments());
    }
    if (!close()) {
      return error("missing '}'");
    }
    return decls;
  }
  function keyframe() {
    whitespace();
    var vals = [];
    var m5;
    while (m5 = match2(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/)) {
      vals.push(m5[1]);
      match2(/^,\s*/);
    }
    if (vals.length) {
      return {
        type: "keyframe",
        values: vals,
        declarations: declarations()
      };
    }
  }
  function at_keyframes() {
    var m5 = match2(/^@([-\w]+)?keyframes\s*/);
    if (!m5) {
      return;
    }
    var vendor = m5[1];
    m5 = match2(/^([-\w]+)\s*/);
    if (!m5) {
      return error("@keyframes missing name");
    }
    var name = m5[1];
    if (!open()) {
      return error("@keyframes missing '{'");
    }
    var frame;
    var frames = comments();
    while (frame = keyframe()) {
      frames.push(frame);
      frames = frames.concat(comments());
    }
    if (!close()) {
      return error("@keyframes missing '}'");
    }
    return {
      type: "keyframes",
      name,
      vendor,
      keyframes: frames
    };
  }
  function at_page() {
    var m5 = match2(/^@page */);
    if (m5) {
      var sel = selector() || [];
      return {
        type: "page",
        selectors: sel,
        declarations: declarations()
      };
    }
  }
  function at_page_margin_box() {
    var m5 = match2(/@(top|bottom|left|right)-(left|center|right|top|middle|bottom)-?(corner)?\s*/);
    if (m5) {
      var name = "".concat(m5[1], "-").concat(m5[2]) + (m5[3] ? "-".concat(m5[3]) : "");
      return {
        type: "page-margin-box",
        name,
        declarations: declarations()
      };
    }
  }
  function at_fontface() {
    var m5 = match2(/^@font-face\s*/);
    if (m5) {
      return {
        type: "font-face",
        declarations: declarations()
      };
    }
  }
  function at_supports() {
    var m5 = match2(/^@supports *([^{]+)/);
    if (m5) {
      return {
        type: "supports",
        supports: m5[1].trim(),
        rules: rules()
      };
    }
  }
  function at_host() {
    var m5 = match2(/^@host\s*/);
    if (m5) {
      return {
        type: "host",
        rules: rules()
      };
    }
  }
  function at_media() {
    var m5 = match2(/^@media([^{]+)*/);
    if (m5) {
      return {
        type: "media",
        media: (m5[1] || "").trim(),
        rules: rules()
      };
    }
  }
  function at_custom_m() {
    var m5 = match2(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/);
    if (m5) {
      return {
        type: "custom-media",
        name: m5[1].trim(),
        media: m5[2].trim()
      };
    }
  }
  function at_document() {
    var m5 = match2(/^@([-\w]+)?document *([^{]+)/);
    if (m5) {
      return {
        type: "document",
        document: m5[2].trim(),
        vendor: m5[1] ? m5[1].trim() : null,
        rules: rules()
      };
    }
  }
  function at_x() {
    var m5 = match2(/^@(import|charset|namespace)\s*([^;]+);/);
    if (m5) {
      return {
        type: m5[1],
        name: m5[2].trim()
      };
    }
  }
  function at_rule() {
    whitespace();
    if (css[0] === "@") {
      var ret = at_x() || at_fontface() || at_media() || at_keyframes() || at_supports() || at_document() || at_custom_m() || at_host() || at_page() || at_page_margin_box();
      if (ret && !settings.preserveStatic) {
        var hasVarFunc = false;
        if (ret.declarations) {
          hasVarFunc = ret.declarations.some(function(decl) {
            return /var\(/.test(decl.value);
          });
        } else {
          var arr = ret.keyframes || ret.rules || [];
          hasVarFunc = arr.some(function(obj) {
            return (obj.declarations || []).some(function(decl) {
              return /var\(/.test(decl.value);
            });
          });
        }
        return hasVarFunc ? ret : {};
      }
      return ret;
    }
  }
  function rule() {
    if (!settings.preserveStatic) {
      var balancedMatch$1 = balancedMatch("{", "}", css);
      if (balancedMatch$1) {
        var hasVarDecl = /:(?:root|host)(?![.:#(])/.test(balancedMatch$1.pre) && /--\S*\s*:/.test(balancedMatch$1.body);
        var hasVarFunc = /var\(/.test(balancedMatch$1.body);
        if (!hasVarDecl && !hasVarFunc) {
          css = css.slice(balancedMatch$1.end + 1);
          return {};
        }
      }
    }
    var sel = selector() || [];
    var decls = settings.preserveStatic ? declarations() : declarations().filter(function(decl) {
      var hasVarDecl2 = sel.some(function(s6) {
        return /:(?:root|host)(?![.:#(])/.test(s6);
      }) && /^--\S/.test(decl.property);
      var hasVarFunc2 = /var\(/.test(decl.value);
      return hasVarDecl2 || hasVarFunc2;
    });
    if (!sel.length) {
      error("selector missing");
    }
    return {
      type: "rule",
      selectors: sel,
      declarations: decls
    };
  }
  function rules(core) {
    if (!core && !open()) {
      return error("missing '{'");
    }
    var node;
    var rules2 = comments();
    while (css.length && (core || css[0] !== "}") && (node = at_rule() || rule())) {
      if (node.type) {
        rules2.push(node);
      }
      rules2 = rules2.concat(comments());
    }
    if (!core && !close()) {
      return error("missing '}'");
    }
    return rules2;
  }
  return {
    type: "stylesheet",
    stylesheet: {
      rules: rules(true),
      errors
    }
  };
}
function parseVars(cssData) {
  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  var defaults2 = {
    parseHost: false,
    store: {},
    onWarning: function onWarning2() {
    }
  };
  var settings = _extends2({}, defaults2, options);
  var reVarDeclSelectors = new RegExp(":".concat(settings.parseHost ? "host" : "root", "$"));
  if (typeof cssData === "string") {
    cssData = parseCss(cssData, settings);
  }
  cssData.stylesheet.rules.forEach(function(rule) {
    if (rule.type !== "rule" || !rule.selectors.some(function(s6) {
      return reVarDeclSelectors.test(s6);
    })) {
      return;
    }
    rule.declarations.forEach(function(decl, i4) {
      var prop = decl.property;
      var value = decl.value;
      if (prop && prop.indexOf("--") === 0) {
        settings.store[prop] = value;
      }
    });
  });
  return settings.store;
}
function stringifyCss(tree) {
  var delim = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "";
  var cb = arguments.length > 2 ? arguments[2] : void 0;
  var renderMethods = {
    charset: function charset(node) {
      return "@charset " + node.name + ";";
    },
    comment: function comment(node) {
      return node.comment.indexOf("__CSSVARSPONYFILL") === 0 ? "/*" + node.comment + "*/" : "";
    },
    "custom-media": function customMedia(node) {
      return "@custom-media " + node.name + " " + node.media + ";";
    },
    declaration: function declaration(node) {
      return node.property + ":" + node.value + ";";
    },
    document: function document2(node) {
      return "@" + (node.vendor || "") + "document " + node.document + "{" + visit(node.rules) + "}";
    },
    "font-face": function fontFace(node) {
      return "@font-face{" + visit(node.declarations) + "}";
    },
    host: function host(node) {
      return "@host{" + visit(node.rules) + "}";
    },
    import: function _import(node) {
      return "@import " + node.name + ";";
    },
    keyframe: function keyframe(node) {
      return node.values.join(",") + "{" + visit(node.declarations) + "}";
    },
    keyframes: function keyframes(node) {
      return "@" + (node.vendor || "") + "keyframes " + node.name + "{" + visit(node.keyframes) + "}";
    },
    media: function media(node) {
      return "@media " + node.media + "{" + visit(node.rules) + "}";
    },
    namespace: function namespace(node) {
      return "@namespace " + node.name + ";";
    },
    page: function page(node) {
      return "@page " + (node.selectors.length ? node.selectors.join(", ") : "") + "{" + visit(node.declarations) + "}";
    },
    "page-margin-box": function pageMarginBox(node) {
      return "@" + node.name + "{" + visit(node.declarations) + "}";
    },
    rule: function rule(node) {
      var decls = node.declarations;
      if (decls.length) {
        return node.selectors.join(",") + "{" + visit(decls) + "}";
      }
    },
    supports: function supports(node) {
      return "@supports " + node.supports + "{" + visit(node.rules) + "}";
    }
  };
  function visit(nodes) {
    var buf = "";
    for (var i4 = 0; i4 < nodes.length; i4++) {
      var n4 = nodes[i4];
      if (cb) {
        cb(n4);
      }
      var txt = renderMethods[n4.type](n4);
      if (txt) {
        buf += txt;
        if (txt.length && n4.selectors) {
          buf += delim;
        }
      }
    }
    return buf;
  }
  return visit(tree.stylesheet.rules);
}
function walkCss(node, fn4) {
  node.rules.forEach(function(rule) {
    if (rule.rules) {
      walkCss(rule, fn4);
      return;
    }
    if (rule.keyframes) {
      rule.keyframes.forEach(function(keyframe) {
        if (keyframe.type === "keyframe") {
          fn4(keyframe.declarations, rule);
        }
      });
      return;
    }
    if (!rule.declarations) {
      return;
    }
    fn4(rule.declarations, node);
  });
}
var VAR_PROP_IDENTIFIER = "--";
var VAR_FUNC_IDENTIFIER = "var";
function transformCss(cssData) {
  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  var defaults2 = {
    preserveStatic: true,
    preserveVars: false,
    variables: {},
    onWarning: function onWarning2() {
    }
  };
  var settings = _extends2({}, defaults2, options);
  if (typeof cssData === "string") {
    cssData = parseCss(cssData, settings);
  }
  walkCss(cssData.stylesheet, function(declarations, node) {
    for (var i4 = 0; i4 < declarations.length; i4++) {
      var decl = declarations[i4];
      var type = decl.type;
      var prop = decl.property;
      var value = decl.value;
      if (type !== "declaration") {
        continue;
      }
      if (!settings.preserveVars && prop && prop.indexOf(VAR_PROP_IDENTIFIER) === 0) {
        declarations.splice(i4, 1);
        i4--;
        continue;
      }
      if (value.indexOf(VAR_FUNC_IDENTIFIER + "(") !== -1) {
        var resolvedValue = resolveValue(value, settings);
        if (resolvedValue !== decl.value) {
          resolvedValue = fixNestedCalc(resolvedValue);
          if (!settings.preserveVars) {
            decl.value = resolvedValue;
          } else {
            declarations.splice(i4, 0, {
              type,
              property: prop,
              value: resolvedValue
            });
            i4++;
          }
        }
      }
    }
  });
  return stringifyCss(cssData);
}
function fixNestedCalc(value) {
  var reCalcVal = /calc\(([^)]+)\)/g;
  (value.match(reCalcVal) || []).forEach(function(match2) {
    var newVal = "calc".concat(match2.split("calc").join(""));
    value = value.replace(match2, newVal);
  });
  return value;
}
function resolveValue(value) {
  var settings = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  var __recursiveFallback = arguments.length > 2 ? arguments[2] : void 0;
  if (value.indexOf("var(") === -1) {
    return value;
  }
  var valueData = balancedMatch("(", ")", value);
  function resolveFunc(value2) {
    var name = value2.split(",")[0].replace(/[\s\n\t]/g, "");
    var fallback = (value2.match(/(?:\s*,\s*){1}(.*)?/) || [])[1];
    var match2 = Object.prototype.hasOwnProperty.call(settings.variables, name) ? String(settings.variables[name]) : void 0;
    var replacement = match2 || (fallback ? String(fallback) : void 0);
    var unresolvedFallback = __recursiveFallback || value2;
    if (!match2) {
      settings.onWarning('variable "'.concat(name, '" is undefined'));
    }
    if (replacement && replacement !== "undefined" && replacement.length > 0) {
      return resolveValue(replacement, settings, unresolvedFallback);
    } else {
      return "var(".concat(unresolvedFallback, ")");
    }
  }
  if (!valueData) {
    if (value.indexOf("var(") !== -1) {
      settings.onWarning('missing closing ")" in the value "'.concat(value, '"'));
    }
    return value;
  } else if (valueData.pre.slice(-3) === "var") {
    var isEmptyVarFunc = valueData.body.trim().length === 0;
    if (isEmptyVarFunc) {
      settings.onWarning("var() must contain a non-whitespace string");
      return value;
    } else {
      return valueData.pre.slice(0, -3) + resolveFunc(valueData.body) + resolveValue(valueData.post, settings);
    }
  } else {
    return valueData.pre + "(".concat(resolveValue(valueData.body, settings), ")") + resolveValue(valueData.post, settings);
  }
}
var isBrowser = typeof window !== "undefined";
var isNativeSupport = isBrowser && window.CSS && window.CSS.supports && window.CSS.supports("(--a: 0)");
var counters = {
  group: 0,
  job: 0
};
var defaults = {
  rootElement: isBrowser ? document : null,
  shadowDOM: false,
  include: "style,link[rel=stylesheet]",
  exclude: "",
  variables: {},
  onlyLegacy: true,
  preserveStatic: true,
  preserveVars: false,
  silent: false,
  updateDOM: true,
  updateURLs: true,
  watch: null,
  onBeforeSend: function onBeforeSend() {
  },
  onError: function onError() {
  },
  onWarning: function onWarning() {
  },
  onSuccess: function onSuccess() {
  },
  onComplete: function onComplete() {
  },
  onFinally: function onFinally() {
  }
};
var regex = {
  cssComments: /\/\*[\s\S]+?\*\//g,
  cssKeyframes: /@(?:-\w*-)?keyframes/,
  cssMediaQueries: /@media[^{]+\{([\s\S]+?})\s*}/g,
  cssUrls: /url\((?!['"]?(?:data|http|\/\/):)['"]?([^'")]*)['"]?\)/g,
  cssVarDeclRules: /(?::(?:root|host)(?![.:#(])[\s,]*[^{]*{\s*[^}]*})/g,
  cssVarDecls: /(?:[\s;]*)(-{2}\w[\w-]*)(?:\s*:\s*)([^;]*);/g,
  cssVarFunc: /var\(\s*--[\w-]/,
  cssVars: /(?:(?::(?:root|host)(?![.:#(])[\s,]*[^{]*{\s*[^;]*;*\s*)|(?:var\(\s*))(--[^:)]+)(?:\s*[:)])/
};
var variableStore = {
  dom: {},
  job: {},
  user: {}
};
var cssVarsIsRunning = false;
var cssVarsObserver = null;
var cssVarsSrcNodeCount = 0;
var debounceTimer = null;
var isShadowDOMReady = false;
function cssVars() {
  var options = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
  var msgPrefix = "cssVars(): ";
  var settings = _extends2({}, defaults, options);
  function handleError(message, sourceNode, xhr, url) {
    if (!settings.silent && window.console) {
      console.error("".concat(msgPrefix).concat(message, "\n"), sourceNode);
    }
    settings.onError(message, sourceNode, xhr, url);
  }
  function handleWarning(message) {
    if (!settings.silent && window.console) {
      console.warn("".concat(msgPrefix).concat(message));
    }
    settings.onWarning(message);
  }
  function handleFinally(hasChanged) {
    settings.onFinally(Boolean(hasChanged), isNativeSupport, getTimeStamp() - settings.__benchmark);
  }
  if (!isBrowser) {
    return;
  }
  if (settings.watch) {
    settings.watch = defaults.watch;
    addMutationObserver(settings);
    cssVars(settings);
    return;
  } else if (settings.watch === false && cssVarsObserver) {
    cssVarsObserver.disconnect();
    cssVarsObserver = null;
  }
  if (!settings.__benchmark) {
    if (cssVarsIsRunning === settings.rootElement) {
      cssVarsDebounced(options);
      return;
    }
    var srcNodes = [].slice.call(settings.rootElement.querySelectorAll('[data-cssvars]:not([data-cssvars="out"])'));
    settings.__benchmark = getTimeStamp();
    settings.exclude = [cssVarsObserver ? '[data-cssvars]:not([data-cssvars=""])' : '[data-cssvars="out"]', "link[disabled]:not([data-cssvars])", settings.exclude].filter(function(selector) {
      return selector;
    }).join(",");
    settings.variables = fixVarNames(settings.variables);
    srcNodes.forEach(function(srcNode) {
      var hasStyleCache = srcNode.nodeName.toLowerCase() === "style" && srcNode.__cssVars.text;
      var hasStyleChanged = hasStyleCache && srcNode.textContent !== srcNode.__cssVars.text;
      if (hasStyleCache && hasStyleChanged) {
        srcNode.sheet && (srcNode.sheet.disabled = false);
        srcNode.setAttribute("data-cssvars", "");
      }
    });
    if (!cssVarsObserver) {
      var outNodes = [].slice.call(settings.rootElement.querySelectorAll('[data-cssvars="out"]'));
      outNodes.forEach(function(outNode) {
        var dataGroup = outNode.getAttribute("data-cssvars-group");
        var srcNode = dataGroup ? settings.rootElement.querySelector('[data-cssvars="src"][data-cssvars-group="'.concat(dataGroup, '"]')) : null;
        if (!srcNode) {
          outNode.parentNode.removeChild(outNode);
        }
      });
      if (cssVarsSrcNodeCount && srcNodes.length < cssVarsSrcNodeCount) {
        cssVarsSrcNodeCount = srcNodes.length;
        variableStore.dom = {};
      }
    }
  }
  if (document.readyState !== "loading") {
    if (isNativeSupport && settings.onlyLegacy) {
      var hasVarChange = false;
      if (settings.updateDOM) {
        var targetElm = settings.rootElement.host || (settings.rootElement === document ? document.documentElement : settings.rootElement);
        Object.keys(settings.variables).forEach(function(key) {
          var varValue = settings.variables[key];
          hasVarChange = hasVarChange || varValue !== getComputedStyle(targetElm).getPropertyValue(key);
          targetElm.style.setProperty(key, varValue);
        });
      }
      handleFinally(hasVarChange);
    } else if (!isShadowDOMReady && (settings.shadowDOM || settings.rootElement.shadowRoot || settings.rootElement.host)) {
      getCssData({
        rootElement: defaults.rootElement,
        include: defaults.include,
        exclude: settings.exclude,
        skipDisabled: false,
        onSuccess: function onSuccess2(cssText, node, url) {
          var isUserDisabled = (node.sheet || {}).disabled && !node.__cssVars;
          if (isUserDisabled) {
            return false;
          }
          cssText = cssText.replace(regex.cssComments, "").replace(regex.cssMediaQueries, "");
          cssText = (cssText.match(regex.cssVarDeclRules) || []).join("");
          return cssText || false;
        },
        onComplete: function onComplete2(cssText, cssArray, nodeArray) {
          parseVars(cssText, {
            store: variableStore.dom,
            onWarning: handleWarning
          });
          isShadowDOMReady = true;
          cssVars(settings);
        }
      });
    } else {
      cssVarsIsRunning = settings.rootElement;
      getCssData({
        rootElement: settings.rootElement,
        include: settings.include,
        exclude: settings.exclude,
        skipDisabled: false,
        onBeforeSend: settings.onBeforeSend,
        onError: function onError2(xhr, node, url) {
          var responseUrl = xhr.responseURL || getFullUrl(url, location.href);
          var statusText = xhr.statusText ? "(".concat(xhr.statusText, ")") : "Unspecified Error" + (xhr.status === 0 ? " (possibly CORS related)" : "");
          var errorMsg = "CSS XHR Error: ".concat(responseUrl, " ").concat(xhr.status, " ").concat(statusText);
          handleError(errorMsg, node, xhr, responseUrl);
        },
        onSuccess: function onSuccess2(cssText, node, url) {
          var isUserDisabled = (node.sheet || {}).disabled && !node.__cssVars;
          if (isUserDisabled) {
            return false;
          }
          var isLink = node.nodeName.toLowerCase() === "link";
          var isStyleImport = node.nodeName.toLowerCase() === "style" && cssText !== node.textContent;
          var returnVal = settings.onSuccess(cssText, node, url);
          cssText = returnVal !== void 0 && Boolean(returnVal) === false ? "" : returnVal || cssText;
          if (settings.updateURLs && (isLink || isStyleImport)) {
            cssText = fixRelativeCssUrls(cssText, url);
          }
          return cssText;
        },
        onComplete: function onComplete2(cssText, cssArray) {
          var nodeArray = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : [];
          var currentVars = _extends2({}, variableStore.dom, variableStore.user);
          var hasVarChange2 = false;
          variableStore.job = {};
          nodeArray.forEach(function(node, i5) {
            var nodeCSS = cssArray[i5];
            node.__cssVars = node.__cssVars || {};
            node.__cssVars.text = nodeCSS;
            if (regex.cssVars.test(nodeCSS)) {
              try {
                var cssTree = parseCss(nodeCSS, {
                  preserveStatic: settings.preserveStatic,
                  removeComments: true
                });
                parseVars(cssTree, {
                  parseHost: Boolean(settings.rootElement.host),
                  store: variableStore.dom,
                  onWarning: handleWarning
                });
                node.__cssVars.tree = cssTree;
              } catch (err) {
                handleError(err.message, node);
              }
            }
          });
          _extends2(variableStore.job, variableStore.dom);
          if (settings.updateDOM) {
            _extends2(variableStore.user, settings.variables);
            _extends2(variableStore.job, variableStore.user);
          } else {
            _extends2(variableStore.job, variableStore.user, settings.variables);
            _extends2(currentVars, settings.variables);
          }
          hasVarChange2 = counters.job > 0 && Boolean(Object.keys(variableStore.job).length > Object.keys(currentVars).length || Boolean(Object.keys(currentVars).length && Object.keys(variableStore.job).some(function(key) {
            return variableStore.job[key] !== currentVars[key];
          })));
          if (hasVarChange2) {
            resetCssNodes(settings.rootElement);
            cssVars(settings);
          } else {
            var outCssArray = [];
            var outNodeArray = [];
            var hasKeyframesWithVars = false;
            if (settings.updateDOM) {
              counters.job++;
            }
            nodeArray.forEach(function(node, i5) {
              var isSkip = !node.__cssVars.tree;
              if (node.__cssVars.tree) {
                try {
                  transformCss(node.__cssVars.tree, _extends2({}, settings, {
                    variables: variableStore.job,
                    onWarning: handleWarning
                  }));
                  var outCss = stringifyCss(node.__cssVars.tree);
                  if (settings.updateDOM) {
                    var nodeCSS = cssArray[i5];
                    var hasCSSVarFunc = regex.cssVarFunc.test(nodeCSS);
                    if (!node.getAttribute("data-cssvars")) {
                      node.setAttribute("data-cssvars", "src");
                    }
                    if (outCss.length && hasCSSVarFunc) {
                      var dataGroup = node.getAttribute("data-cssvars-group") || ++counters.group;
                      var outCssNoSpaces = outCss.replace(/\s/g, "");
                      var outNode = settings.rootElement.querySelector('[data-cssvars="out"][data-cssvars-group="'.concat(dataGroup, '"]')) || document.createElement("style");
                      hasKeyframesWithVars = hasKeyframesWithVars || regex.cssKeyframes.test(outCss);
                      if (settings.preserveStatic) {
                        node.sheet && (node.sheet.disabled = true);
                      }
                      if (!outNode.hasAttribute("data-cssvars")) {
                        outNode.setAttribute("data-cssvars", "out");
                      }
                      if (outCssNoSpaces === node.textContent.replace(/\s/g, "")) {
                        isSkip = true;
                        if (outNode && outNode.parentNode) {
                          node.removeAttribute("data-cssvars-group");
                          outNode.parentNode.removeChild(outNode);
                        }
                      } else if (outCssNoSpaces !== outNode.textContent.replace(/\s/g, "")) {
                        [node, outNode].forEach(function(n4) {
                          n4.setAttribute("data-cssvars-job", counters.job);
                          n4.setAttribute("data-cssvars-group", dataGroup);
                        });
                        outNode.textContent = outCss;
                        outCssArray.push(outCss);
                        outNodeArray.push(outNode);
                        if (!outNode.parentNode) {
                          node.parentNode.insertBefore(outNode, node.nextSibling);
                        }
                      }
                    }
                  } else {
                    if (node.textContent.replace(/\s/g, "") !== outCss) {
                      outCssArray.push(outCss);
                    }
                  }
                } catch (err) {
                  handleError(err.message, node);
                }
              }
              if (isSkip) {
                node.setAttribute("data-cssvars", "skip");
              }
              if (!node.hasAttribute("data-cssvars-job")) {
                node.setAttribute("data-cssvars-job", counters.job);
              }
            });
            cssVarsSrcNodeCount = settings.rootElement.querySelectorAll('[data-cssvars]:not([data-cssvars="out"])').length;
            if (settings.shadowDOM) {
              var elms = [].concat(settings.rootElement).concat([].slice.call(settings.rootElement.querySelectorAll("*")));
              for (var i4 = 0, elm; elm = elms[i4]; ++i4) {
                if (elm.shadowRoot && elm.shadowRoot.querySelector("style")) {
                  var shadowSettings = _extends2({}, settings, {
                    rootElement: elm.shadowRoot
                  });
                  cssVars(shadowSettings);
                }
              }
            }
            if (settings.updateDOM && hasKeyframesWithVars) {
              fixKeyframes(settings.rootElement);
            }
            cssVarsIsRunning = false;
            settings.onComplete(outCssArray.join(""), outNodeArray, JSON.parse(JSON.stringify(variableStore.job)), getTimeStamp() - settings.__benchmark);
            handleFinally(outNodeArray.length);
          }
        }
      });
    }
  } else {
    document.addEventListener("DOMContentLoaded", function init(evt) {
      cssVars(options);
      document.removeEventListener("DOMContentLoaded", init);
    });
  }
}
cssVars.reset = function() {
  counters.job = 0;
  counters.group = 0;
  cssVarsIsRunning = false;
  if (cssVarsObserver) {
    cssVarsObserver.disconnect();
    cssVarsObserver = null;
  }
  cssVarsSrcNodeCount = 0;
  debounceTimer = null;
  isShadowDOMReady = false;
  for (var prop in variableStore) {
    variableStore[prop] = {};
  }
};
function addMutationObserver(settings) {
  function isDisabled(node) {
    var isDisabledAttr = isLink(node) && node.hasAttribute("disabled");
    var isDisabledSheet = (node.sheet || {}).disabled;
    return isDisabledAttr || isDisabledSheet;
  }
  function isLink(node) {
    var isStylesheet = node.nodeName.toLowerCase() === "link" && (node.getAttribute("rel") || "").indexOf("stylesheet") !== -1;
    return isStylesheet;
  }
  function isStyle(node) {
    return node.nodeName.toLowerCase() === "style";
  }
  function isValidAttributeMutation(mutation) {
    var isValid2 = false;
    if (mutation.type === "attributes" && isLink(mutation.target) && !isDisabled(mutation.target)) {
      var isEnabledMutation = mutation.attributeName === "disabled";
      var isHrefMutation = mutation.attributeName === "href";
      var isSkipNode = mutation.target.getAttribute("data-cssvars") === "skip";
      var isSrcNode = mutation.target.getAttribute("data-cssvars") === "src";
      if (isEnabledMutation) {
        isValid2 = !isSkipNode && !isSrcNode;
      } else if (isHrefMutation) {
        if (isSkipNode) {
          mutation.target.setAttribute("data-cssvars", "");
        } else if (isSrcNode) {
          resetCssNodes(settings.rootElement, true);
        }
        isValid2 = true;
      }
    }
    return isValid2;
  }
  function isValidStyleTextMutation(mutation) {
    var isValid2 = false;
    if (mutation.type === "childList") {
      var isStyleElm = isStyle(mutation.target);
      var isOutNode = mutation.target.getAttribute("data-cssvars") === "out";
      isValid2 = isStyleElm && !isOutNode;
    }
    return isValid2;
  }
  function isValidAddMutation(mutation) {
    var isValid2 = false;
    if (mutation.type === "childList") {
      isValid2 = [].slice.call(mutation.addedNodes).some(function(node) {
        var isElm = node.nodeType === 1;
        var hasAttr = isElm && node.hasAttribute("data-cssvars");
        var isStyleWithVars = isStyle(node) && regex.cssVars.test(node.textContent);
        var isValid3 = !hasAttr && (isLink(node) || isStyleWithVars);
        return isValid3 && !isDisabled(node);
      });
    }
    return isValid2;
  }
  function isValidRemoveMutation(mutation) {
    var isValid2 = false;
    if (mutation.type === "childList") {
      isValid2 = [].slice.call(mutation.removedNodes).some(function(node) {
        var isElm = node.nodeType === 1;
        var isOutNode = isElm && node.getAttribute("data-cssvars") === "out";
        var isSrcNode = isElm && node.getAttribute("data-cssvars") === "src";
        var isValid3 = isSrcNode;
        if (isSrcNode || isOutNode) {
          var dataGroup = node.getAttribute("data-cssvars-group");
          var orphanNode = settings.rootElement.querySelector('[data-cssvars-group="'.concat(dataGroup, '"]'));
          if (isSrcNode) {
            resetCssNodes(settings.rootElement, true);
          }
          if (orphanNode) {
            orphanNode.parentNode.removeChild(orphanNode);
          }
        }
        return isValid3;
      });
    }
    return isValid2;
  }
  if (!window.MutationObserver) {
    return;
  }
  if (cssVarsObserver) {
    cssVarsObserver.disconnect();
    cssVarsObserver = null;
  }
  cssVarsObserver = new MutationObserver(function(mutations) {
    var hasValidMutation = mutations.some(function(mutation) {
      return isValidAttributeMutation(mutation) || isValidStyleTextMutation(mutation) || isValidAddMutation(mutation) || isValidRemoveMutation(mutation);
    });
    if (hasValidMutation) {
      cssVars(settings);
    }
  });
  cssVarsObserver.observe(document.documentElement, {
    attributes: true,
    attributeFilter: ["disabled", "href"],
    childList: true,
    subtree: true
  });
}
function cssVarsDebounced(settings) {
  var delay = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 100;
  clearTimeout(debounceTimer);
  debounceTimer = setTimeout(function() {
    settings.__benchmark = null;
    cssVars(settings);
  }, delay);
}
function fixKeyframes(rootElement) {
  var animationNameProp = ["animation-name", "-moz-animation-name", "-webkit-animation-name"].filter(function(prop) {
    return getComputedStyle(document.body)[prop];
  })[0];
  if (animationNameProp) {
    var allNodes = [].slice.call(rootElement.querySelectorAll("*"));
    var keyframeNodes = [];
    var nameMarker = "__CSSVARSPONYFILL-KEYFRAMES__";
    for (var i4 = 0, len = allNodes.length; i4 < len; i4++) {
      var node = allNodes[i4];
      var animationName = getComputedStyle(node)[animationNameProp];
      if (animationName !== "none") {
        node.style[animationNameProp] += nameMarker;
        keyframeNodes.push(node);
      }
    }
    void document.body.offsetHeight;
    for (var _i2 = 0, _len = keyframeNodes.length; _i2 < _len; _i2++) {
      var nodeStyle = keyframeNodes[_i2].style;
      nodeStyle[animationNameProp] = nodeStyle[animationNameProp].replace(nameMarker, "");
    }
  }
}
function fixRelativeCssUrls(cssText, baseUrl) {
  var cssUrls = cssText.replace(regex.cssComments, "").match(regex.cssUrls) || [];
  cssUrls.forEach(function(cssUrl) {
    var oldUrl = cssUrl.replace(regex.cssUrls, "$1");
    var newUrl = getFullUrl(oldUrl, baseUrl);
    cssText = cssText.replace(cssUrl, cssUrl.replace(oldUrl, newUrl));
  });
  return cssText;
}
function fixVarNames() {
  var varObj = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
  var reLeadingHyphens = /^-{2}/;
  return Object.keys(varObj).reduce(function(obj, value) {
    var key = reLeadingHyphens.test(value) ? value : "--".concat(value.replace(/^-+/, ""));
    obj[key] = varObj[value];
    return obj;
  }, {});
}
function getFullUrl(url) {
  var base = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : location.href;
  var d5 = document.implementation.createHTMLDocument("");
  var b6 = d5.createElement("base");
  var a5 = d5.createElement("a");
  d5.head.appendChild(b6);
  d5.body.appendChild(a5);
  b6.href = base;
  a5.href = url;
  return a5.href;
}
function getTimeStamp() {
  return isBrowser && (window.performance || {}).now ? window.performance.now() : (/* @__PURE__ */ new Date()).getTime();
}
function resetCssNodes(rootElement) {
  var resetDOMVariableStore = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : false;
  var resetNodes = [].slice.call(rootElement.querySelectorAll('[data-cssvars="skip"],[data-cssvars="src"]'));
  resetNodes.forEach(function(node) {
    return node.setAttribute("data-cssvars", "");
  });
  if (resetDOMVariableStore) {
    variableStore.dom = {};
  }
}

// node_modules/@sendbird/chat/openChannel.js
var Ce3 = function(r4) {
  function a5() {
    var e3 = null !== r4 && r4.apply(this, arguments) || this;
    return e3._channels = /* @__PURE__ */ new Map(), e3._enteredChannelUrls = [], e3;
  }
  return t(a5, r4), Object.defineProperty(a5.prototype, "enteredChannels", { get: function() {
    var e3 = this;
    return this._enteredChannelUrls.map(function(n4) {
      return e3._channels.get(n4);
    }).filter(function(e4) {
      return !!e4;
    });
  }, enumerable: false, configurable: true }), a5.prototype.isEnteredChannel = function(e3) {
    return this._enteredChannelUrls.includes(e3);
  }, a5.prototype.enter = function(e3) {
    this._enteredChannelUrls.indexOf(e3) < 0 && this._enteredChannelUrls.push(e3);
  }, a5.prototype.exit = function(e3) {
    var n4 = this._enteredChannelUrls.indexOf(e3);
    n4 >= 0 && this._enteredChannelUrls.splice(n4, 1);
  }, a5.prototype.exitAll = function() {
    this._enteredChannelUrls = [];
  }, a5.prototype.get = function(e3) {
    return r(this, void 0, void 0, function() {
      return s(this, function(n4) {
        return [2, this._channels.get(e3)];
      });
    });
  }, a5.prototype.upsert = function(e3) {
    return r(this, void 0, void 0, function() {
      var n4, r5 = this;
      return s(this, function(t7) {
        return n4 = [], e3.forEach(function(e4) {
          if (r5._channels.has(e4.url)) {
            var t8 = r5._channels.get(e4.url);
            Object.assign(t8, e4), n4.push(t8);
          } else r5._channels.set(e4.url, e4), n4.push(e4);
        }), [2, n4];
      });
    });
  }, a5.prototype.remove = function(e3) {
    return r(this, void 0, void 0, function() {
      return s(this, function(n4) {
        return this._channels.delete(e3), this.exit(e3), [2];
      });
    });
  }, a5.prototype.clear = function() {
    return r(this, void 0, void 0, function() {
      return s(this, function(e3) {
        return this._channels.clear(), this._enteredChannelUrls = [], [2];
      });
    });
  }, a5;
}(zr);
var ve2 = { channelUrl: void 0, name: void 0, coverUrlOrImage: void 0, data: void 0, customType: void 0, operatorUserIds: void 0, isEphemeral: void 0 };
var _e2 = function(n4) {
  function t7(e3) {
    var t8 = e3.channelUrl, r4 = e3.isInternalCall, a5 = n4.call(this) || this;
    return a5.method = oe.GET, a5.path = "".concat(r4 ? fe : _e, "/").concat(encodeURIComponent(t8)), a5.params = { show_pinned_messages: true }, a5;
  }
  return t(t7, n4), t7;
}(xe);
var ge2 = function(n4) {
  function t7(e3, t8) {
    var r4 = n4.call(this, e3, t8) || this;
    return r4.channel = new xe3(e3, t8), r4;
  }
  return t(t7, n4), t7;
}(Ue);
var ye2 = function(n4) {
  function t7(e3) {
    var t8 = this, r4 = e3.channelUrl, a5 = e3.coverUrlOrImage, u4 = e3.name, c4 = e3.data, h4 = e3.customType, f4 = e3.operatorUserIds, C3 = e3.isEphemeral;
    return (t8 = n4.call(this) || this).method = oe.POST, t8.path = _e, t8.params = re(se({ channel_url: r4, cover_url: w("string", a5) ? a5 : null, cover_file: k(a5) ? a5 : null, name: u4, data: c4, custom_type: h4, operators: f4, is_ephemeral: C3 })), t8;
  }
  return t(t7, n4), t7;
}(xe);
!function(n4) {
  function t7(e3, t8) {
    var r4 = n4.call(this, e3, t8) || this;
    return r4.channel = new xe3(e3, t8), r4;
  }
  t(t7, n4);
}(Ue);
var me2 = function(n4) {
  function t7(e3) {
    var t8 = e3.channelUrl;
    return n4.call(this, { code: "ENTR", payload: { channel_url: t8 }, ackRequired: true }) || this;
  }
  return t(t7, n4), t7;
}(qe);
var Ue2 = function(n4) {
  function t7(e3, t8, r4) {
    var a5, s6, i4 = this;
    return i4 = n4.call(this, e3, "SYEV", r4) || this, r4.data && (i4.participantCount = null !== (a5 = r4.data.participant_count) && void 0 !== a5 ? a5 : 0, i4.user = new es(e3, r4.data), i4.ts = null !== (s6 = r4.data.edge_ts) && void 0 !== s6 ? s6 : 0), i4;
  }
  return t(t7, n4), t7;
}(v3);
var Ee2 = function(n4) {
  function t7(e3) {
    var t8 = e3.channelUrl;
    return n4.call(this, { code: "EXIT", payload: { channel_url: t8 }, ackRequired: true }) || this;
  }
  return t(t7, n4), t7;
}(qe);
var Me2 = function(n4) {
  function t7(e3, t8, r4) {
    var a5, s6, i4 = this;
    return i4 = n4.call(this, e3, "EXIT", r4) || this, r4.data && (i4.participantCount = null !== (a5 = r4.data.participant_count) && void 0 !== a5 ? a5 : 0, i4.user = new es(e3, r4.data), i4.ts = null !== (s6 = r4.data.edge_ts) && void 0 !== s6 ? s6 : 0), i4;
  }
  return t(t7, n4), t7;
}(v3);
var we = {};
var Pe3 = function(r4) {
  function o3(e3, a5) {
    var s6 = r4.call(this, e3, n(n({}, a5), { channelType: q.OPEN })) || this;
    return s6.subscribeChannelEvent = st, s6.unsubscribeChannelEvent = st, s6.refreshChannel = function() {
      return r(s6, void 0, void 0, function() {
        return s(this, function(e4) {
          return [2, st()];
        });
      });
    }, s6._openChannelCache = new Ce3(e3), s6._openChannelHandlers = /* @__PURE__ */ new Map(), s6._dispatcher.on(function(e4) {
      var n4, t7;
      if (e4 instanceof Fe) s6._handleEvent(e4).catch(function(e5) {
        if (g(e5) && "foreground" === s6._sdkState.appState) throw e5;
      });
      else if (e4 instanceof kr && e4.stateType === Sr.CONNECTED) {
        var r5 = s6._openChannelCache.enteredChannels;
        try {
          for (var a6 = o(r5), i4 = a6.next(); !i4.done; i4 = a6.next()) {
            i4.value.enter();
          }
        } catch (e5) {
          n4 = { error: e5 };
        } finally {
          try {
            i4 && !i4.done && (t7 = a6.return) && t7.call(a6);
          } finally {
            if (n4) throw n4.error;
          }
        }
      }
    }), we[e3] || (we[e3] = s6), s6;
  }
  return t(o3, r4), o3.of = function(e3) {
    return we[e3];
  }, o3.prototype.buildOpenChannelFromSerializedData = function(e3) {
    var n4 = Xr(e3);
    return new xe3(this._iid, xe3.payloadify(n4));
  }, o3.prototype.getChannelFromCache = function(e3) {
    var r5;
    return r(this, void 0, void 0, function() {
      return s(this, function(n4) {
        switch (n4.label) {
          case 0:
            return [4, this._openChannelCache.get(e3)];
          case 1:
            return [2, null !== (r5 = n4.sent()) && void 0 !== r5 ? r5 : null];
        }
      });
    });
  }, o3.prototype.upsertChannelsToCache = function(e3) {
    return r(this, void 0, void 0, function() {
      return s(this, function(n4) {
        switch (n4.label) {
          case 0:
            return [4, this._openChannelCache.upsert(e3)];
          case 1:
            return [2, n4.sent()];
        }
      });
    });
  }, o3.prototype.removeChannelsFromCache = function(e3) {
    return r(this, void 0, void 0, function() {
      var n4, r5, a5, s6, i4, o4;
      return s(this, function(t7) {
        switch (t7.label) {
          case 0:
            t7.trys.push([0, 5, 6, 7]), n4 = o(e3), r5 = n4.next(), t7.label = 1;
          case 1:
            return r5.done ? [3, 4] : (a5 = r5.value, [4, this._openChannelCache.remove(a5)]);
          case 2:
            t7.sent(), t7.label = 3;
          case 3:
            return r5 = n4.next(), [3, 1];
          case 4:
            return [3, 7];
          case 5:
            return s6 = t7.sent(), i4 = { error: s6 }, [3, 7];
          case 6:
            try {
              r5 && !r5.done && (o4 = n4.return) && o4.call(n4);
            } finally {
              if (i4) throw i4.error;
            }
            return [7];
          case 7:
            return [2];
        }
      });
    });
  }, o3.prototype.setEnteredToCache = function(e3) {
    this._openChannelCache.enter(e3.url);
  }, o3.prototype.setExitedToCache = function(e3) {
    this._openChannelCache.exit(e3.url);
  }, Object.defineProperty(o3.prototype, "handlers", { get: function() {
    return c([], a(this._openChannelHandlers.values()), false);
  }, enumerable: false, configurable: true }), o3.prototype._handleEvent = function(e3) {
    return r(this, void 0, void 0, function() {
      var r5, a5, s6, i4, o4, u4, l3, c4, h4, d5, p4, f4, C3, v5, _2, g4, y6, U2, E4, w4, P2, O4, x2, L5, R4, F2, k3, S6, $2, J, ee, ne, te2, ae, fe2, Ce4, ve3, _e3, ge3, ye3, me3, Ee3, we2, Pe4, Te2, be3, Ne3, De5, He4, Ie3, Oe4, xe4, Ae3, Le4, Re4, Fe4, ke4, Se, ze3, qe4, Qe4, Ge2, je3, Be4, Ke3, Ve3, We4, Xe3, Ye4, Ze4, $e3, Je4, en4, nn4, tn4 = this;
      return s(this, function(rn4) {
        switch (rn4.label) {
          case 0:
            switch (rn4.trys.push([0, 59, , 60]), e3.code) {
              case "MESG":
              case "FILE":
              case "ADMM":
              case "BRDM":
                return [3, 1];
              case "MEDI":
              case "FEDI":
              case "AEDI":
                return [3, 4];
              case "DELM":
                return [3, 7];
              case "MRCT":
                return [3, 10];
              case "MTHD":
                return [3, 13];
              case "MCNT":
                return [3, 16];
              case "PEDI":
                return [3, 27];
              case "VOTE":
                return [3, 30];
              case "SYEV":
                return [3, 33];
            }
            return [3, 58];
          case 1:
            return i4 = null, "MESG" === e3.code ? i4 = e3.as(pr) : "FILE" === e3.code ? i4 = e3.as(Ct) : "ADMM" !== e3.code && "BRDM" != e3.code || (i4 = e3.as(L3)), i4 ? (r5 = i4.message, a5 = i4.isMentioned, r5.channelType !== q.OPEN ? [3, 3] : [4, this.getChannel(r5.channelUrl, true)]) : [3, 3];
          case 2:
            s6 = rn4.sent(), os(function() {
              return r(tn4, void 0, void 0, function() {
                var e4, n4, i5, o5, u5;
                return s(this, function(t7) {
                  try {
                    for (e4 = o(this._openChannelHandlers.values()), n4 = e4.next(); !n4.done; n4 = e4.next()) i5 = n4.value, this._openChannelCache.isEnteredChannel(s6.url) && (i5.onMessageReceived && i5.onMessageReceived(s6, r5), a5 && i5.onMentionReceived && i5.onMentionReceived(s6, r5));
                  } catch (e5) {
                    o5 = { error: e5 };
                  } finally {
                    try {
                      n4 && !n4.done && (u5 = e4.return) && u5.call(e4);
                    } finally {
                      if (o5) throw o5.error;
                    }
                  }
                  return [2];
                });
              });
            }), rn4.label = 3;
          case 3:
            return [3, 58];
          case 4:
            return i4 = null, "MEDI" === e3.code ? i4 = e3.as(vr) : "FEDI" === e3.code ? i4 = e3.as(_r) : "AEDI" === e3.code && (i4 = e3.as(I3)), i4 ? (o4 = i4.message, u4 = i4.mentionCountChange, o4.channelType !== q.OPEN ? [3, 6] : [4, this.getChannel(o4.channelUrl, true)]) : [3, 6];
          case 5:
            l3 = rn4.sent(), c4 = false, l3.lastPinnedMessage && l3.lastPinnedMessage.messageId === o4.messageId && l3.lastPinnedMessage.updatedAt < o4.updatedAt && (l3.lastPinnedMessage = o4, c4 = true), os(function() {
              return r(tn4, void 0, void 0, function() {
                var e4, n4, r6, a6, s7, i5, h5;
                return s(this, function(t7) {
                  try {
                    for (e4 = o(this._openChannelHandlers.values()), n4 = e4.next(); !n4.done; n4 = e4.next()) r6 = n4.value, this._openChannelCache.isEnteredChannel(l3.url) && (c4 && (null === (i5 = r6.onPinnedMessageUpdated) || void 0 === i5 || i5.call(r6, l3), null === (h5 = r6.onChannelChanged) || void 0 === h5 || h5.call(r6, l3)), r6.onMessageUpdated && r6.onMessageUpdated(l3, o4), u4 > 0 && r6.onMentionReceived && r6.onMentionReceived(l3, o4));
                  } catch (e5) {
                    a6 = { error: e5 };
                  } finally {
                    try {
                      n4 && !n4.done && (s7 = e4.return) && s7.call(e4);
                    } finally {
                      if (a6) throw a6.error;
                    }
                  }
                  return [2];
                });
              });
            }), rn4.label = 6;
          case 6:
            return [3, 58];
          case 7:
            return h4 = e3.as(it), ne = h4.channelUrl, te2 = h4.channelType, d5 = h4.messageId, te2 !== q.OPEN ? [3, 9] : [4, this.getChannel(ne, true)];
          case 8:
            p4 = rn4.sent(), os(function() {
              return r(tn4, void 0, void 0, function() {
                var e4, n4, r6, a6, s7;
                return s(this, function(t7) {
                  try {
                    for (e4 = o(this._openChannelHandlers.values()), n4 = e4.next(); !n4.done; n4 = e4.next()) r6 = n4.value, this._openChannelCache.isEnteredChannel(p4.url) && r6.onMessageDeleted && r6.onMessageDeleted(p4, d5);
                  } catch (e5) {
                    a6 = { error: e5 };
                  } finally {
                    try {
                      n4 && !n4.done && (s7 = e4.return) && s7.call(e4);
                    } finally {
                      if (a6) throw a6.error;
                    }
                  }
                  return [2];
                });
              });
            }), rn4.label = 9;
          case 9:
            return [3, 58];
          case 10:
            return f4 = e3.as(U), ne = f4.channelUrl, te2 = f4.channelType, C3 = f4.event, te2 !== q.OPEN ? [3, 12] : [4, this.getChannel(ne, true)];
          case 11:
            v5 = rn4.sent(), os(function() {
              return r(tn4, void 0, void 0, function() {
                var e4, n4, r6, a6, s7;
                return s(this, function(t7) {
                  try {
                    for (e4 = o(this._openChannelHandlers.values()), n4 = e4.next(); !n4.done; n4 = e4.next()) r6 = n4.value, this._openChannelCache.isEnteredChannel(v5.url) && r6.onReactionUpdated && r6.onReactionUpdated(v5, C3);
                  } catch (e5) {
                    a6 = { error: e5 };
                  } finally {
                    try {
                      n4 && !n4.done && (s7 = e4.return) && s7.call(e4);
                    } finally {
                      if (a6) throw a6.error;
                    }
                  }
                  return [2];
                });
              });
            }), rn4.label = 12;
          case 12:
            return [3, 58];
          case 13:
            return (_2 = e3.as(M2).event).channelType !== q.OPEN ? [3, 15] : [4, this.getChannel(_2.channelUrl, true)];
          case 14:
            g4 = rn4.sent(), os(function() {
              return r(tn4, void 0, void 0, function() {
                var e4, n4, r6, a6, s7;
                return s(this, function(t7) {
                  try {
                    for (e4 = o(this._openChannelHandlers.values()), n4 = e4.next(); !n4.done; n4 = e4.next()) r6 = n4.value, this._openChannelCache.isEnteredChannel(g4.url) && r6.onThreadInfoUpdated && r6.onThreadInfoUpdated(g4, _2);
                  } catch (e5) {
                    a6 = { error: e5 };
                  } finally {
                    try {
                      n4 && !n4.done && (s7 = e4.return) && s7.call(e4);
                    } finally {
                      if (a6) throw a6.error;
                    }
                  }
                  return [2];
                });
              });
            }), rn4.label = 15;
          case 15:
            return [3, 58];
          case 16:
            y6 = e3.as(y2).openChannelMemberCounts, U2 = [], rn4.label = 17;
          case 17:
            rn4.trys.push([17, 22, 23, 24]), E4 = o(y6), w4 = E4.next(), rn4.label = 18;
          case 18:
            return w4.done ? [3, 21] : (P2 = w4.value, ne = P2.channelUrl, Ee3 = P2.participantCount, O4 = P2.updatedAt, [4, this.getChannelFromCache(ne)]);
          case 19:
            (x2 = rn4.sent()) && x2._updateParticipantCount(Ee3, O4) && U2.push(x2), rn4.label = 20;
          case 20:
            return w4 = E4.next(), [3, 18];
          case 21:
            return [3, 24];
          case 22:
            return L5 = rn4.sent(), en4 = { error: L5 }, [3, 24];
          case 23:
            try {
              w4 && !w4.done && (nn4 = E4.return) && nn4.call(E4);
            } finally {
              if (en4) throw en4.error;
            }
            return [7];
          case 24:
            return U2.length > 0 ? [4, this.upsertChannelsToCache(U2)] : [3, 26];
          case 25:
            R4 = rn4.sent(), os(function() {
              return r(tn4, void 0, void 0, function() {
                var e4, n4, r6, a6, s7;
                return s(this, function(t7) {
                  try {
                    for (e4 = o(this._openChannelHandlers.values()), n4 = e4.next(); !n4.done; n4 = e4.next()) (r6 = n4.value).onChannelMemberCountChanged && r6.onChannelMemberCountChanged(R4);
                  } catch (e5) {
                    a6 = { error: e5 };
                  } finally {
                    try {
                      n4 && !n4.done && (s7 = e4.return) && s7.call(e4);
                    } finally {
                      if (a6) throw a6.error;
                    }
                  }
                  return [2];
                });
              });
            }), rn4.label = 26;
          case 26:
            return [3, 58];
          case 27:
            return F2 = e3.as(b2), k3 = F2.event, S6 = F2.status, ne = F2.channelUrl, te2 = F2.channelType, ne && te2 === q.OPEN ? [4, this.getChannel(ne, true)] : [3, 29];
          case 28:
            $2 = rn4.sent(), this._dispatcher.dispatch(new so({ event: k3, source: Ks.EVENT_POLL_UPDATED })), os(S6 === ao ? function() {
              return r(tn4, void 0, void 0, function() {
                var e4, n4, r6, a6, s7;
                return s(this, function(t7) {
                  try {
                    for (e4 = o(this._openChannelHandlers.values()), n4 = e4.next(); !n4.done; n4 = e4.next()) (r6 = n4.value).onPollDeleted && r6.onPollDeleted($2, k3.pollId);
                  } catch (e5) {
                    a6 = { error: e5 };
                  } finally {
                    try {
                      n4 && !n4.done && (s7 = e4.return) && s7.call(e4);
                    } finally {
                      if (a6) throw a6.error;
                    }
                  }
                  return [2];
                });
              });
            } : function() {
              return r(tn4, void 0, void 0, function() {
                var e4, n4, r6, a6, s7;
                return s(this, function(t7) {
                  try {
                    for (e4 = o(this._openChannelHandlers.values()), n4 = e4.next(); !n4.done; n4 = e4.next()) (r6 = n4.value).onPollUpdated && r6.onPollUpdated($2, k3);
                  } catch (e5) {
                    a6 = { error: e5 };
                  } finally {
                    try {
                      n4 && !n4.done && (s7 = e4.return) && s7.call(e4);
                    } finally {
                      if (a6) throw a6.error;
                    }
                  }
                  return [2];
                });
              });
            }), rn4.label = 29;
          case 29:
            return [3, 58];
          case 30:
            return J = e3.as(zr2), ee = J.event, ne = J.channelUrl, te2 = J.channelType, ne && te2 === q.OPEN ? [4, this.getChannel(ne, true)] : [3, 32];
          case 31:
            ae = rn4.sent(), this._dispatcher.dispatch(new oo({ event: ee, source: Ks.EVENT_POLL_VOTED })), os(function() {
              return r(tn4, void 0, void 0, function() {
                var e4, n4, r6, a6, s7;
                return s(this, function(t7) {
                  try {
                    for (e4 = o(this._openChannelHandlers.values()), n4 = e4.next(); !n4.done; n4 = e4.next()) (r6 = n4.value).onPollVoted && r6.onPollVoted(ae, ee);
                  } catch (e5) {
                    a6 = { error: e5 };
                  } finally {
                    try {
                      n4 && !n4.done && (s7 = e4.return) && s7.call(e4);
                    } finally {
                      if (a6) throw a6.error;
                    }
                  }
                  return [2];
                });
              });
            }), rn4.label = 32;
          case 32:
            return [3, 58];
          case 33:
            if (!(fe2 = e3.as(v3).event).isOpenChannelEvent) return [3, 57];
            switch (fe2.category) {
              case f2.CHANNEL_ENTER:
                return [3, 34];
              case f2.CHANNEL_EXIT:
                return [3, 36];
              case f2.CHANNEL_OPERATOR_UPDATE:
                return [3, 38];
              case f2.USER_CHANNEL_MUTE:
              case f2.USER_CHANNEL_UNMUTE:
                return [3, 40];
              case f2.USER_CHANNEL_BAN:
              case f2.USER_CHANNEL_UNBAN:
                return [3, 42];
              case f2.CHANNEL_FREEZE:
              case f2.CHANNEL_UNFREEZE:
                return [3, 44];
              case f2.CHANNEL_DELETED:
                return [3, 46];
              case f2.CHANNEL_PROP_CHANGED:
                return [3, 49];
              case f2.CHANNEL_META_DATA_CHANGED:
                return [3, 51];
              case f2.CHANNEL_META_COUNTERS_CHANGED:
                return [3, 53];
              case f2.PINNED_MESSAGE_CHANGED:
                return [3, 55];
            }
            return [3, 57];
          case 34:
            return [4, this.getChannel(fe2.channelUrl, true)];
          case 35:
            return Ce4 = rn4.sent(), ve3 = e3.as(Ue2), Ee3 = ve3.participantCount, _e3 = ve3.user, ge3 = Ce4._updateParticipantCount(Ee3, fe2.ts), os(function() {
              return r(tn4, void 0, void 0, function() {
                return s(this, function(e4) {
                  return this._openChannelHandlers.forEach(function(e5) {
                    e5.onUserEntered && e5.onUserEntered(Ce4, _e3), ge3 && e5.onChannelParticipantCountChanged && e5.onChannelParticipantCountChanged(Ce4);
                  }), [2];
                });
              });
            }), [3, 57];
          case 36:
            return [4, this.getChannel(fe2.channelUrl, true)];
          case 37:
            return ye3 = rn4.sent(), me3 = e3.as(Me2), Ee3 = me3.participantCount, we2 = me3.user, Pe4 = ye3._updateParticipantCount(Ee3, fe2.ts), os(function() {
              return r(tn4, void 0, void 0, function() {
                return s(this, function(e4) {
                  return this._openChannelHandlers.forEach(function(e5) {
                    e5.onUserExited && e5.onUserExited(ye3, we2), Pe4 && e5.onChannelParticipantCountChanged && e5.onChannelParticipantCountChanged(ye3);
                  }), [2];
                });
              });
            }), [3, 57];
          case 38:
            return [4, this.getChannel(fe2.channelUrl, true)];
          case 39:
            return Te2 = rn4.sent(), be3 = e3.as(T2).operators, Te2.operators = be3, this.upsertChannelsToCache([Te2]), os(function() {
              return r(tn4, void 0, void 0, function() {
                return s(this, function(e4) {
                  return this._openChannelHandlers.forEach(function(e5) {
                    e5.onOperatorUpdated && e5.onOperatorUpdated(Te2, be3);
                  }), [2];
                });
              });
            }), [3, 57];
          case 40:
            return [4, this.getChannel(fe2.channelUrl, true)];
          case 41:
            return Ne3 = rn4.sent(), De5 = fe2.category === f2.USER_CHANNEL_MUTE, He4 = e3.as(De5 ? tr : rr).user, os(function() {
              return r(tn4, void 0, void 0, function() {
                return s(this, function(e4) {
                  return this._openChannelHandlers.forEach(function(e5) {
                    De5 ? e5.onUserMuted && e5.onUserMuted(Ne3, He4) : e5.onUserUnmuted && e5.onUserUnmuted(Ne3, He4);
                  }), [2];
                });
              });
            }), [3, 57];
          case 42:
            return [4, this.getChannel(fe2.channelUrl, true)];
          case 43:
            return Ie3 = rn4.sent(), Oe4 = fe2.category === f2.USER_CHANNEL_BAN, xe4 = e3.as(Oe4 ? sr : or).user, os(function() {
              return r(tn4, void 0, void 0, function() {
                return s(this, function(e4) {
                  return this._openChannelHandlers.forEach(function(e5) {
                    Oe4 ? e5.onUserBanned && e5.onUserBanned(Ie3, xe4) : e5.onUserUnbanned && e5.onUserUnbanned(Ie3, xe4);
                  }), [2];
                });
              });
            }), [3, 57];
          case 44:
            return [4, this.getChannel(fe2.channelUrl, true)];
          case 45:
            return Ae3 = rn4.sent(), Le4 = e3.as(cr).freeze, Ae3.isFrozen = Le4, this.upsertChannelsToCache([Ae3]), os(function() {
              return r(tn4, void 0, void 0, function() {
                return s(this, function(e4) {
                  return this._openChannelHandlers.forEach(function(e5) {
                    Le4 ? e5.onChannelFrozen && e5.onChannelFrozen(Ae3) : e5.onChannelUnfrozen && e5.onChannelUnfrozen(Ae3);
                  }), [2];
                });
              });
            }), [3, 57];
          case 46:
            return [4, this.getChannel(fe2.channelUrl, true)];
          case 47:
            return Re4 = rn4.sent(), [4, this.removeChannelsFromCache([Re4.url])];
          case 48:
            return rn4.sent(), os(function() {
              return r(tn4, void 0, void 0, function() {
                return s(this, function(e4) {
                  return this._openChannelHandlers.forEach(function(e5) {
                    e5.onChannelDeleted && e5.onChannelDeleted(Re4.url, Re4.channelType);
                  }), [2];
                });
              });
            }), [3, 57];
          case 49:
            return [4, this.getChannelWithoutCache(fe2.channelUrl, true)];
          case 50:
            return Fe4 = rn4.sent(), os(function() {
              return r(tn4, void 0, void 0, function() {
                return s(this, function(e4) {
                  return this._openChannelHandlers.forEach(function(e5) {
                    e5.onChannelChanged && e5.onChannelChanged(Fe4);
                  }), [2];
                });
              });
            }), [3, 57];
          case 51:
            return [4, this.getChannel(fe2.channelUrl, true)];
          case 52:
            return ke4 = rn4.sent(), Se = e3.as(zn), ze3 = Se.created, qe4 = Se.updated, Qe4 = Se.deleted, ze3 && ke4._upsertCachedMetaData(ze3, fe2.ts), qe4 && ke4._upsertCachedMetaData(qe4, fe2.ts), Qe4 && ke4._removeFromCachedMetaData(Qe4, fe2.ts), os(function() {
              return r(tn4, void 0, void 0, function() {
                return s(this, function(e4) {
                  return this._openChannelHandlers.forEach(function(e5) {
                    ze3 && e5.onMetaDataCreated && e5.onMetaDataCreated(ke4, ze3), qe4 && e5.onMetaDataUpdated && e5.onMetaDataUpdated(ke4, qe4), Qe4 && e5.onMetaDataDeleted && e5.onMetaDataDeleted(ke4, Qe4);
                  }), [2];
                });
              });
            }), [3, 57];
          case 53:
            return [4, this.getChannel(fe2.channelUrl, true)];
          case 54:
            return Ge2 = rn4.sent(), je3 = e3.as(Xn), Be4 = je3.created, Ke3 = je3.updated, Ve3 = je3.deleted, os(function() {
              return r(tn4, void 0, void 0, function() {
                return s(this, function(e4) {
                  return this._openChannelHandlers.forEach(function(e5) {
                    Be4 && e5.onMetaCounterCreated && e5.onMetaCounterCreated(Ge2, Be4), Ke3 && e5.onMetaCounterUpdated && e5.onMetaCounterUpdated(Ge2, Ke3), Ve3 && e5.onMetaCounterDeleted && e5.onMetaCounterDeleted(Ge2, Ve3);
                  }), [2];
                });
              });
            }), [3, 57];
          case 55:
            return [4, this.getChannel(fe2.channelUrl, true)];
          case 56:
            return We4 = rn4.sent(), Xe3 = e3.as(g2), Ye4 = Xe3.pinnedMessageIds, Ze4 = Xe3.latestPinnedMessage, ($e3 = Xe3.ts) > We4._pinnedMessagesUpdatedAt && (We4.pinnedMessageIds = Ye4, We4.lastPinnedMessage = Ze4, We4._pinnedMessagesUpdatedAt = $e3, this.upsertChannelsToCache([We4]), os(function() {
              return r(tn4, void 0, void 0, function() {
                var e4, n4, r6, a6, s7;
                return s(this, function(t7) {
                  try {
                    for (e4 = o(this._openChannelHandlers.values()), n4 = e4.next(); !n4.done; n4 = e4.next()) (r6 = n4.value).onChannelChanged && r6.onChannelChanged(We4);
                  } catch (e5) {
                    a6 = { error: e5 };
                  } finally {
                    try {
                      n4 && !n4.done && (s7 = e4.return) && s7.call(e4);
                    } finally {
                      if (a6) throw a6.error;
                    }
                  }
                  return [2];
                });
              });
            }), os(function() {
              return r(tn4, void 0, void 0, function() {
                return s(this, function(e4) {
                  return this._openChannelHandlers.forEach(function(e5) {
                    e5.onPinnedMessageUpdated && e5.onPinnedMessageUpdated(We4);
                  }), [2];
                });
              });
            })), [3, 57];
          case 57:
            return [3, 58];
          case 58:
            return [3, 60];
          case 59:
            if (Je4 = rn4.sent(), g(Je4)) throw Je4;
            return [3, 60];
          case 60:
            return [2];
        }
      });
    });
  }, o3.prototype.addHandler = function(e3, n4) {
    this._openChannelHandlers.set(e3, n4);
  }, o3.prototype.removeHandler = function(e3) {
    this._openChannelHandlers.delete(e3);
  }, o3.prototype.clearHandler = function() {
    this._openChannelHandlers.clear();
  }, o3.prototype.getChannel = function(e3, r5) {
    return void 0 === r5 && (r5 = false), r(this, void 0, void 0, function() {
      var n4;
      return s(this, function(t7) {
        switch (t7.label) {
          case 0:
            Jr(w("string", e3)).throw(v.invalidParameters), t7.label = 1;
          case 1:
            return t7.trys.push([1, 3, , 4]), [4, this.getChannelFromCache(e3)];
          case 2:
            return (n4 = t7.sent()) ? [2, n4] : [3, 4];
          case 3:
            return t7.sent(), [3, 4];
          case 4:
            return [4, this.getChannelWithoutCache(e3, r5)];
          case 5:
            return [2, t7.sent()];
        }
      });
    });
  }, o3.prototype.getChannelWithoutCache = function(e3, r5) {
    return void 0 === r5 && (r5 = false), r(this, void 0, void 0, function() {
      var n4, a5, i4;
      return s(this, function(t7) {
        switch (t7.label) {
          case 0:
            return Jr(w("string", e3)).throw(v.invalidParameters), n4 = new _e2({ channelUrl: e3, isInternalCall: r5 }), [4, this._requestQueue.send(n4)];
          case 1:
            return a5 = t7.sent(), i4 = a5.as(ge2).channel, [4, this.upsertChannelsToCache([i4])];
          case 2:
            return [2, t7.sent()[0]];
        }
      });
    });
  }, o3.prototype.createChannel = function(e3) {
    return r(this, void 0, void 0, function() {
      var n4, r5, o4, u4;
      return s(this, function(t7) {
        switch (t7.label) {
          case 0:
            return n4 = n(n({}, ve2), e3), Jr(function(e4) {
              return N("string", e4.operatorUserIds, true) && (w("string", e4.coverUrlOrImage, true) || k(e4.coverUrlOrImage, true)) && w("string", e4.name, true) && w("string", e4.data, true) && w("string", e4.customType, true) && (w("string", e4.channelUrl) && /^\w+$/.test(e4.channelUrl) || null === e4.channelUrl || void 0 === e4.channelUrl) && w("boolean", e4.isEphemeral, true);
            }(n4)).throw(v.invalidParameters), r5 = new ye2(n4), [4, this._requestQueue.send(r5)];
          case 1:
            return o4 = t7.sent(), u4 = o4.as(ge2).channel, this.upsertChannelsToCache([u4]), [2, u4];
        }
      });
    });
  }, o3;
}(H2);
var Te = { name: void 0, coverUrlOrImage: void 0, data: void 0, customType: void 0, operatorUserIds: void 0 };
var be2 = function(n4) {
  function t7(e3) {
    var t8 = this, r4 = e3.channelUrl, a5 = e3.token, s6 = e3.limit;
    return (t8 = n4.call(this) || this).method = oe.GET, t8.path = "".concat(_e, "/").concat(encodeURIComponent(r4), "/participants"), t8.params = { token: a5, limit: s6 }, t8;
  }
  return t(t7, n4), t7;
}(xe);
var Ne2 = function(n4) {
  function t7(e3, t8) {
    var r4 = n4.call(this, e3, t8) || this;
    r4.participants = [];
    var a5 = t8.next, s6 = t8.participants;
    return r4.token = a5, r4.participants = s6.map(function(n5) {
      return new Jt(e3, n5);
    }), r4;
  }
  return t(t7, n4), t7;
}(Ue);
var De4 = function(r4) {
  function a5(e3, n4, t7) {
    return r4.call(this, e3, n4, q.OPEN, t7) || this;
  }
  return t(a5, r4), a5.prototype._validate = function() {
    return r4.prototype._validate.call(this);
  }, a5.prototype.next = function() {
    return r(this, void 0, void 0, function() {
      var e3, n4, r5, a6, s6, i4;
      return s(this, function(t7) {
        switch (t7.label) {
          case 0:
            return this._validate() ? this._isLoading ? [3, 3] : this._hasNext ? (this._isLoading = true, e3 = Ws.of(this._iid).requestQueue, n4 = new be2(n(n({}, this), { token: this._token })), [4, e3.send(n4)]) : [3, 2] : [3, 5];
          case 1:
            return r5 = t7.sent(), a6 = r5.as(Ne2), s6 = a6.participants, i4 = a6.token, this._token = i4, this._hasNext = !!i4, this._isLoading = false, [2, s6];
          case 2:
            return [2, []];
          case 3:
            throw v.queryInProgress;
          case 4:
            return [3, 6];
          case 5:
            throw v.invalidParameters;
          case 6:
            return [2];
        }
      });
    });
  }, a5;
}(fo);
var He3 = function(n4) {
  function t7(e3) {
    var t8 = this, r4 = e3.channelUrl, a5 = e3.coverUrlOrImage, u4 = e3.name, c4 = e3.data, h4 = e3.customType, f4 = e3.operatorUserIds;
    return (t8 = n4.call(this) || this).method = oe.PUT, t8.path = "".concat(_e, "/").concat(encodeURIComponent(r4)), t8.params = re(se({ cover_url: w("string", a5) ? a5 : null, cover_file: k(a5) ? a5 : null, name: u4, data: c4, custom_type: h4, operators: f4 })), t8;
  }
  return t(t7, n4), t7;
}(xe);
var Ie2 = function(n4) {
  function t7(e3, t8) {
    var r4 = n4.call(this, e3, t8) || this;
    return r4.channel = new xe3(e3, t8), r4;
  }
  return t(t7, n4), t7;
}(Ue);
var Oe3 = function(n4) {
  function t7(e3) {
    var t8 = this, r4 = e3.channelUrl;
    return (t8 = n4.call(this) || this).method = oe.DELETE, t8.path = "".concat(_e, "/").concat(encodeURIComponent(r4)), t8;
  }
  return t(t7, n4), t7;
}(xe);
!function(n4) {
  function t7(e3, t8) {
    return n4.call(this, e3, t8) || this;
  }
  t(t7, n4);
}(Ue);
var xe3 = function(r4) {
  function o3(e3, n4) {
    var t7, a5 = this;
    return (a5 = r4.call(this, e3, n4) || this)._lastParticipantCountUpdated = 0, a5.participantCount = 0, a5.operators = [], a5.lastPinnedMessage = null, a5._pinnedMessagesUpdatedAt = 0, a5.channelType = q.OPEN, a5.participantCount = null !== (t7 = n4.participant_count) && void 0 !== t7 ? t7 : 0, a5.operators = Array.isArray(n4.operators) ? n4.operators.map(function(n5) {
      return new es(e3, n5);
    }) : [], a5.lastPinnedMessage = n4.latest_pinned_message ? Mt(a5._iid, n({ channel_type: a5.channelType }, n4.latest_pinned_message)) : null, a5;
  }
  return t(o3, r4), o3.payloadify = function(e3) {
    return re(se(n(n({}, pi.payloadify(e3)), { participant_count: e3.participantCount, operators: e3.operators.map(function(e4) {
      return es.payloadify(e4);
    }), latest_pinned_message: e3.lastPinnedMessage ? wt(e3.lastPinnedMessage) : null })));
  }, o3.prototype.serialize = function() {
    return Yr(this);
  }, o3.prototype.isOperator = function(e3) {
    return e3 instanceof es ? this.isOperator(e3.userId) : this.operators.some(function(n4) {
      return n4.userId === e3;
    });
  }, o3.prototype._updateParticipantCount = function(e3, n4) {
    return n4 > this._lastParticipantCountUpdated && (this.participantCount = e3, this._lastParticipantCountUpdated = n4, true);
  }, o3.prototype.createParticipantListQuery = function(e3) {
    return new De4(this._iid, this.url, e3);
  }, o3.prototype.refresh = function() {
    return r(this, void 0, void 0, function() {
      return s(this, function(e3) {
        switch (e3.label) {
          case 0:
            return [4, Pe3.of(this._iid).getChannelWithoutCache(this.url)];
          case 1:
            return [2, e3.sent()];
        }
      });
    });
  }, o3.prototype.enter = function() {
    return r(this, void 0, void 0, function() {
      var e3, n4, r5, a5, s6, i4;
      return s(this, function(t7) {
        switch (t7.label) {
          case 0:
            return e3 = Ws.of(this._iid).requestQueue, n4 = new me2({ channelUrl: this.url }), [4, e3.send(n4)];
          case 1:
            return r5 = t7.sent(), a5 = r5.as(Ue2), s6 = a5.participantCount, i4 = a5.ts, this._updateParticipantCount(s6, i4), Pe3.of(this._iid).setEnteredToCache(this), [2];
        }
      });
    });
  }, o3.prototype.exit = function() {
    return r(this, void 0, void 0, function() {
      var e3, n4, r5, a5, s6, i4;
      return s(this, function(t7) {
        switch (t7.label) {
          case 0:
            return e3 = Ws.of(this._iid).requestQueue, n4 = new Ee2({ channelUrl: this.url }), [4, e3.send(n4)];
          case 1:
            return r5 = t7.sent(), a5 = r5.as(Me2), s6 = a5.participantCount, i4 = a5.ts, this._updateParticipantCount(s6, i4), Pe3.of(this._iid).setExitedToCache(this), ea.of(this._iid).fileMessageQueue.cancel(this), [2];
        }
      });
    });
  }, o3.prototype.updateChannel = function(e3) {
    return r(this, void 0, void 0, function() {
      var n4, r5, o4, u4, l3;
      return s(this, function(t7) {
        switch (t7.label) {
          case 0:
            return n4 = n(n({}, Te), e3), Jr(function(e4) {
              return N("string", e4.operatorUserIds, true) && (w("string", e4.coverUrlOrImage, true) || k(e4.coverUrlOrImage, true)) && w("string", e4.name, true) && w("string", e4.data, true) && w("string", e4.customType, true);
            }(n4)).throw(v.invalidParameters), r5 = Ws.of(this._iid).requestQueue, o4 = new He3(n({ channelUrl: this.url }, n4)), [4, r5.send(o4)];
          case 1:
            return u4 = t7.sent(), l3 = u4.as(Ie2).channel, this._update(l3), [4, Pe3.of(this._iid).upsertChannelsToCache([l3])];
          case 2:
            return t7.sent(), [2, this];
        }
      });
    });
  }, o3.prototype.updateChannelWithOperatorUserIds = function(e3, r5, a5, s6, i4) {
    return r(this, void 0, void 0, function() {
      var n4;
      return s(this, function(t7) {
        return n4 = n(n({}, Te), { name: e3, coverUrlOrImage: r5, data: a5, operatorUserIds: s6, customType: i4 }), [2, this.updateChannel(n4)];
      });
    });
  }, o3.prototype.delete = function() {
    return r(this, void 0, void 0, function() {
      var e3, n4;
      return s(this, function(t7) {
        switch (t7.label) {
          case 0:
            return e3 = Ws.of(this._iid).requestQueue, n4 = new Oe3({ channelUrl: this.url }), [4, e3.send(n4)];
          case 1:
            return t7.sent(), [4, Pe3.of(this._iid).removeChannelsFromCache([this.url])];
          case 2:
            return t7.sent(), [2];
        }
      });
    });
  }, o3.prototype.updateUserMessage = function(e3, a5) {
    return r(this, void 0, void 0, function() {
      var n4, s6, i4, o4 = this;
      return s(this, function(t7) {
        switch (t7.label) {
          case 0:
            return [4, r4.prototype.updateUserMessage.call(this, e3, a5)];
          case 1:
            return n4 = t7.sent(), s6 = false, i4 = false, this.lastPinnedMessage && this.lastPinnedMessage.messageId === n4.messageId && (this.lastPinnedMessage = n4, s6 = true, i4 = true), s6 && Pe3.of(this._iid).handlers.map(function(e4) {
              e4.onChannelChanged && e4.onChannelChanged(o4);
            }), i4 && Pe3.of(this._iid).handlers.map(function(e4) {
              e4.onPinnedMessageUpdated && e4.onPinnedMessageUpdated(o4);
            }), [2, n4];
        }
      });
    });
  }, o3.prototype.updateFileMessage = function(e3, a5) {
    return r(this, void 0, void 0, function() {
      var n4, s6, i4, o4 = this;
      return s(this, function(t7) {
        switch (t7.label) {
          case 0:
            return [4, r4.prototype.updateFileMessage.call(this, e3, a5)];
          case 1:
            return n4 = t7.sent(), s6 = false, i4 = false, this.lastPinnedMessage && this.lastPinnedMessage.messageId === n4.messageId && (this.lastPinnedMessage = n4, s6 = true, i4 = true), s6 && Pe3.of(this._iid).handlers.map(function(e4) {
              e4.onChannelChanged && e4.onChannelChanged(o4);
            }), i4 && Pe3.of(this._iid).handlers.map(function(e4) {
              e4.onPinnedMessageUpdated && e4.onPinnedMessageUpdated(o4);
            }), [2, n4];
        }
      });
    });
  }, o3;
}(pi);
var Ae2 = function(n4) {
  function t7(e3) {
    void 0 === e3 && (e3 = {});
    var t8 = n4.call(this) || this;
    return Object.keys(e3).forEach(function(n5) {
      t8.hasOwnProperty(n5) && (t8[n5] = e3[n5]);
    }), t8;
  }
  return t(t7, n4), t7;
}(function(n4) {
  function t7() {
    var e3 = null !== n4 && n4.apply(this, arguments) || this;
    return e3.onUserEntered = st, e3.onUserExited = st, e3.onChannelParticipantCountChanged = st, e3.onPollUpdated = st, e3.onPollVoted = st, e3.onPollDeleted = st, e3.onPinnedMessageUpdated = st, e3;
  }
  return t(t7, n4), t7;
}(t2));
var Le3 = function(n4) {
  function t7(e3) {
    var t8 = this, r4 = e3.token, a5 = e3.limit, s6 = e3.nameKeyword, i4 = e3.urlKeyword, u4 = e3.customTypes, c4 = e3.includeFrozen, h4 = e3.includeMetaData;
    return (t8 = n4.call(this) || this).method = oe.GET, t8.path = _e, t8.params = re({ token: r4, limit: a5, name_contains: s6, url_contains: i4, custom_types: u4, show_frozen: c4, show_metadata: h4, show_pinned_messages: true }), t8;
  }
  return t(t7, n4), t7;
}(xe);
var Re3 = function(n4) {
  function t7(e3, t8) {
    var r4 = n4.call(this, e3, t8) || this;
    r4.channels = [];
    var a5 = t8.next, s6 = t8.channels, i4 = t8.ts;
    return r4.token = a5, s6 && s6.length > 0 && (r4.channels = s6.map(function(n5) {
      return new xe3(e3, n5);
    })), r4.ts = "number" == typeof i4 ? i4 : null, r4;
  }
  return t(t7, n4), t7;
}(Ue);
var Fe3 = function(r4) {
  function i4(e3, n4) {
    var t7, a5, s6, i5, o3, u4 = this;
    return (u4 = r4.call(this, e3, n4) || this).includeFrozen = true, u4.includeMetaData = true, u4.nameKeyword = null, u4.urlKeyword = null, u4.customTypes = null, u4.includeFrozen = null === (t7 = n4.includeFrozen) || void 0 === t7 || t7, u4.includeMetaData = null === (a5 = n4.includeMetaData) || void 0 === a5 || a5, u4.nameKeyword = null !== (s6 = n4.nameKeyword) && void 0 !== s6 ? s6 : null, u4.urlKeyword = null !== (i5 = n4.urlKeyword) && void 0 !== i5 ? i5 : null, u4.customTypes = null !== (o3 = n4.customTypes) && void 0 !== o3 ? o3 : null, u4;
  }
  return t(i4, r4), i4.prototype._validate = function() {
    return r4.prototype._validate.call(this) && w("boolean", this.includeFrozen) && w("boolean", this.includeMetaData) && w("string", this.nameKeyword, true) && w("string", this.urlKeyword, true) && N("string", this.customTypes, true);
  }, i4.prototype.next = function() {
    return r(this, void 0, void 0, function() {
      var e3, n4, r5, a5, s6, i5;
      return s(this, function(t7) {
        switch (t7.label) {
          case 0:
            return this._validate() ? this._isLoading ? [3, 4] : this._hasNext ? (this._isLoading = true, e3 = Ws.of(this._iid).requestQueue, n4 = new Le3(se(n(n({}, this), { token: this._token }))), [4, e3.send(n4)]) : [3, 3] : [3, 6];
          case 1:
            return r5 = t7.sent(), a5 = r5.as(Re3), s6 = a5.channels, i5 = a5.token, this._token = i5, this._hasNext = !!i5, [4, Pe3.of(this._iid).upsertChannelsToCache(s6)];
          case 2:
            return t7.sent(), this._isLoading = false, [2, s6];
          case 3:
            return [2, []];
          case 4:
            throw v.queryInProgress;
          case 5:
            return [3, 7];
          case 6:
            throw v.invalidParameters;
          case 7:
            return [2];
        }
      });
    });
  }, i4;
}(_o);
var ke3 = function(r4) {
  function a5() {
    var e3 = null !== r4 && r4.apply(this, arguments) || this;
    return e3.name = "openChannel", e3;
  }
  return t(a5, r4), a5.prototype.init = function(e3, n4) {
    var t7 = n4.sdkState, a6 = n4.dispatcher, s6 = n4.sessionManager, i4 = n4.requestQueue, o3 = n4.logger, u4 = n4.onlineDetector, l3 = n4.cacheContext;
    r4.prototype.init.call(this, e3, { sdkState: t7, dispatcher: a6, sessionManager: s6, requestQueue: i4, logger: o3, onlineDetector: u4, cacheContext: l3 }), this._manager = new Pe3(e3, { sdkState: t7, dispatcher: a6, requestQueue: i4, logger: o3, cacheContext: l3, sessionManager: s6 });
  }, a5.prototype.createOpenChannelListQuery = function(e3) {
    return void 0 === e3 && (e3 = {}), new Fe3(this._iid, e3);
  }, a5.prototype.addOpenChannelHandler = function(e3, n4) {
    this._manager.addHandler(e3, n4);
  }, a5.prototype.removeOpenChannelHandler = function(e3) {
    this._manager.removeHandler(e3);
  }, a5.prototype.removeAllOpenChannelHandlers = function() {
    this._manager.clearHandler();
  }, a5.prototype.buildOpenChannelFromSerializedData = function(e3) {
    return this._manager.buildOpenChannelFromSerializedData(e3);
  }, a5.prototype.getChannel = function(e3) {
    return r(this, void 0, void 0, function() {
      return s(this, function(n4) {
        return [2, this._manager.getChannel(e3)];
      });
    });
  }, a5.prototype.getChannelWithoutCache = function(e3) {
    return r(this, void 0, void 0, function() {
      return s(this, function(n4) {
        return [2, this._manager.getChannelWithoutCache(e3)];
      });
    });
  }, a5.prototype.createChannel = function(e3) {
    return void 0 === e3 && (e3 = {}), r(this, void 0, void 0, function() {
      return s(this, function(n4) {
        return [2, this._manager.createChannel(e3)];
      });
    });
  }, a5.prototype.createChannelWithOperatorUserIds = function(e3, r5, a6, s6, i4) {
    return r(this, void 0, void 0, function() {
      var n4;
      return s(this, function(t7) {
        return (n4 = n({}, ve2)).name = e3, n4.coverUrlOrImage = r5, n4.data = a6, n4.operatorUserIds = s6, n4.customType = i4, [2, this._manager.createChannel(n4)];
      });
    });
  }, a5;
}(Zs);

// node_modules/@sendbird/uikit-react/chunks/bundle-DO8nji3n.js
var import_react26 = __toESM(require_react(), 1);
var INITIALIZE_AUDIO_UNIT = "INITIALIZE_AUDIO_UNIT";
var RESET_AUDIO_UNIT = "RESET_AUDIO_UNIT";
var SET_CURRENT_PLAYER = "SET_CURRENT_PLAYER";
var ON_VOICE_PLAYER_PLAY = "ON_VOICE_PLAYER_PLAY";
var ON_VOICE_PLAYER_PAUSE = "ON_VOICE_PLAYER_PAUSE";
var ON_CURRENT_TIME_UPDATE = "ON_CURRENT_TIME_UPDATE";
var VOICE_PLAYER_STATUS = {
  IDLE: "IDLE",
  PREPARING: "PREPARING",
  PLAYING: "PLAYING",
  PAUSED: "PAUSED",
  COMPLETED: "COMPLETED"
};
var AudioUnitDefaultValue = function() {
  return {
    audioFile: null,
    playbackTime: 0,
    duration: 1e3,
    playingStatus: VOICE_PLAYER_STATUS.IDLE
  };
};
var voicePlayerInitialState = {
  currentPlayer: null,
  currentGroupKey: "",
  audioStorage: {}
};
function voicePlayerReducer(state, action) {
  var _a2, _b2, _c, _d, _e3;
  var _f, _g2, _h, _j;
  switch (action.type) {
    case INITIALIZE_AUDIO_UNIT: {
      var groupKey = action.payload.groupKey;
      var audioUnit = ((_f = state.audioStorage) === null || _f === void 0 ? void 0 : _f[groupKey]) ? state.audioStorage[groupKey] : AudioUnitDefaultValue();
      audioUnit.playingStatus = VOICE_PLAYER_STATUS.PREPARING;
      return __assign(__assign({}, state), { audioStorage: __assign(__assign({}, state.audioStorage), (_a2 = {}, _a2[groupKey] = audioUnit, _a2)) });
    }
    case RESET_AUDIO_UNIT: {
      var groupKey = action.payload.groupKey;
      return __assign(__assign({}, state), { audioStorage: __assign(__assign({}, state.audioStorage), (_b2 = {}, _b2[groupKey] = AudioUnitDefaultValue(), _b2)) });
    }
    case SET_CURRENT_PLAYER: {
      var _k = action.payload, audioPlayer = _k.audioPlayer, groupKey = _k.groupKey;
      return __assign(__assign({}, state), { currentPlayer: audioPlayer, currentGroupKey: groupKey });
    }
    case ON_VOICE_PLAYER_PLAY: {
      var _l = action.payload, groupKey = _l.groupKey, audioFile = _l.audioFile;
      var audioUnit = ((_g2 = state.audioStorage) === null || _g2 === void 0 ? void 0 : _g2[groupKey]) ? state.audioStorage[groupKey] : AudioUnitDefaultValue();
      audioUnit.audioFile = audioFile;
      audioUnit.playingStatus = VOICE_PLAYER_STATUS.PLAYING;
      return __assign(__assign({}, state), { audioStorage: __assign(__assign({}, state.audioStorage), (_c = {}, _c[groupKey] = audioUnit, _c)) });
    }
    case ON_VOICE_PLAYER_PAUSE: {
      var _m = action.payload, groupKey = _m.groupKey, duration = _m.duration, currentTime = _m.currentTime;
      var audioUnit = ((_h = state.audioStorage) === null || _h === void 0 ? void 0 : _h[groupKey]) ? state.audioStorage[groupKey] : AudioUnitDefaultValue();
      audioUnit.playingStatus = VOICE_PLAYER_STATUS.PAUSED;
      if (duration === currentTime) {
        audioUnit.playbackTime = 0;
      }
      return __assign(__assign({}, state), { audioStorage: __assign(__assign({}, state.audioStorage), (_d = {}, _d[groupKey] = audioUnit, _d)) });
    }
    case ON_CURRENT_TIME_UPDATE: {
      var groupKey = action.payload.groupKey;
      var _o2 = state.currentPlayer, currentTime = _o2.currentTime, duration = _o2.duration;
      var audioUnit = ((_j = state.audioStorage) === null || _j === void 0 ? void 0 : _j[groupKey]) ? state.audioStorage[groupKey] : AudioUnitDefaultValue();
      if (audioUnit.playbackTime === audioUnit.duration && audioUnit.playingStatus === VOICE_PLAYER_STATUS.PAUSED) {
        audioUnit.playbackTime = 0;
      } else if (currentTime > 0 && duration > 0) {
        audioUnit.playbackTime = currentTime;
        audioUnit.duration = duration;
      }
      return __assign(__assign({}, state), { audioStorage: __assign(__assign({}, state.audioStorage), (_e3 = {}, _e3[groupKey] = audioUnit, _e3)) });
    }
    default:
      return state;
  }
}
var generateGroupKey = function(channelUrl, key) {
  if (channelUrl === void 0) {
    channelUrl = "";
  }
  if (key === void 0) {
    key = "";
  }
  return "".concat(channelUrl, "-").concat(key);
};
var getParsedVoiceAudioFileInfo = function(mimeType) {
  if (isSafari(navigator.userAgent) && mimeType.includes("m4a")) {
    return {
      name: VOICE_MESSAGE_FILE_NAME__XM4A,
      mimeType: VOICE_MESSAGE_MIME_TYPE__XM4A
    };
  }
  return {
    name: VOICE_MESSAGE_FILE_NAME,
    mimeType: VOICE_MESSAGE_MIME_TYPE
  };
};
var ALL = "ALL";
var noop2 = function() {
};
var VoicePlayerStoreDefaultValue = {
  currentGroupKey: "",
  currentPlayer: null,
  audioStorage: {}
};
var Context = (0, import_react26.createContext)({
  play: noop2,
  pause: noop2,
  stop: noop2,
  voicePlayerStore: VoicePlayerStoreDefaultValue
});
var VoicePlayerProvider = function(_a2) {
  var children = _a2.children;
  var _b2 = (0, import_react26.useReducer)(voicePlayerReducer, voicePlayerInitialState), voicePlayerStore = _b2[0], voicePlayerDispatcher = _b2[1];
  var currentGroupKey = voicePlayerStore.currentGroupKey, currentPlayer = voicePlayerStore.currentPlayer, audioStorage = voicePlayerStore.audioStorage;
  var config = useSendbirdStateContext().config;
  var logger = config.logger;
  var stop = function(text) {
    if (text === void 0) {
      text = "";
    }
    if (currentGroupKey.includes(text)) {
      logger.info("VoicePlayer: Pause playing(by text).");
      pause(currentGroupKey);
    }
  };
  var pause = function(groupKey) {
    if (currentPlayer) {
      if (groupKey === currentGroupKey) {
        logger.info("VoicePlayer: Pause playing(by group key).");
        currentPlayer.pause();
      } else if (groupKey === ALL) {
        logger.info("VoicePlayer: Pause playing(all).");
        currentPlayer.pause();
      }
    } else {
      logger.warning("VoicePlayer: No currentPlayer to pause.");
    }
  };
  var play = function(_a3) {
    var groupKey = _a3.groupKey, audioFile = _a3.audioFile, _b3 = _a3.audioFileUrl, audioFileUrl = _b3 === void 0 ? "" : _b3, _c = _a3.audioFileMimeType, audioFileMimeType = _c === void 0 ? VOICE_MESSAGE_MIME_TYPE : _c;
    if (groupKey !== currentGroupKey) {
      pause(currentGroupKey);
    }
    var voicePlayerRoot = document.getElementById(VOICE_PLAYER_ROOT_ID);
    var voicePlayerAudioElement = document.getElementById(VOICE_PLAYER_AUDIO_ID);
    if (voicePlayerRoot && voicePlayerAudioElement) {
      voicePlayerRoot.removeChild(voicePlayerAudioElement);
    }
    logger.info("VoicePlayer: Start getting audio file.");
    new Promise(function(resolve, reject) {
      var _a4;
      voicePlayerDispatcher({
        type: INITIALIZE_AUDIO_UNIT,
        payload: { groupKey }
      });
      if (audioFile) {
        logger.info("VoicePlayer: Use the audioFile instance.");
        resolve(audioFile);
        return;
      }
      var cachedAudioFile = (_a4 = audioStorage === null || audioStorage === void 0 ? void 0 : audioStorage[groupKey]) === null || _a4 === void 0 ? void 0 : _a4.audioFile;
      if (cachedAudioFile) {
        logger.info("VoicePlayer: Get from the audioStorage.");
        resolve(cachedAudioFile);
        return;
      }
      fetch(audioFileUrl).then(function(res) {
        return res.blob();
      }).then(function(blob) {
        var audioFile2 = new File([blob], getParsedVoiceAudioFileInfo(audioFileMimeType).name, {
          lastModified: (/* @__PURE__ */ new Date()).getTime(),
          type: getParsedVoiceAudioFileInfo(audioFileMimeType).mimeType
        });
        resolve(audioFile2);
        logger.info("VoicePlayer: Get the audioFile from URL.");
      }).catch(reject);
    }).then(function(audioFile2) {
      var _a4;
      var voicePlayerRoot2 = document.getElementById(VOICE_PLAYER_ROOT_ID);
      logger.info("VoicePlayer: Succeeded getting audio file.", { audioFile: audioFile2 });
      var currentAudioUnit = audioStorage[groupKey] || AudioUnitDefaultValue();
      var audioPlayer = new Audio((_a4 = URL === null || URL === void 0 ? void 0 : URL.createObjectURL) === null || _a4 === void 0 ? void 0 : _a4.call(URL, audioFile2));
      audioPlayer.id = VOICE_PLAYER_AUDIO_ID;
      audioPlayer.currentTime = currentAudioUnit.playbackTime;
      audioPlayer.volume = 1;
      audioPlayer.loop = false;
      audioPlayer.onplaying = function() {
        logger.info("VoicePlayer: OnPlaying event is called from audioPlayer", { groupKey, audioPlayer });
        voicePlayerDispatcher({
          type: ON_VOICE_PLAYER_PLAY,
          payload: { groupKey, audioFile: audioFile2 }
        });
      };
      audioPlayer.onpause = function() {
        logger.info("VoicePlayer: OnPause event is called from audioPlayer", { groupKey, audioPlayer });
        voicePlayerDispatcher({
          type: ON_VOICE_PLAYER_PAUSE,
          payload: { groupKey, duration: audioPlayer.duration, currentTime: audioPlayer.currentTime }
        });
      };
      audioPlayer.ontimeupdate = function() {
        voicePlayerDispatcher({
          type: ON_CURRENT_TIME_UPDATE,
          payload: { groupKey }
        });
      };
      audioPlayer.onerror = function(error) {
        logger.error("VoicePlayer: Failed to load the audioFile on the audio player.", error);
        voicePlayerDispatcher({
          type: RESET_AUDIO_UNIT,
          payload: { groupKey }
        });
      };
      audioPlayer.dataset.sbGroupId = groupKey;
      try {
        voicePlayerRoot2 === null || voicePlayerRoot2 === void 0 ? void 0 : voicePlayerRoot2.childNodes.forEach(function(node) {
          var _a5, _b4;
          var element = node;
          var thisGroupKey = (_a5 = element.dataset) === null || _a5 === void 0 ? void 0 : _a5.sbGroupKey;
          if (thisGroupKey !== groupKey) {
            (_b4 = element === null || element === void 0 ? void 0 : element.pause) === null || _b4 === void 0 ? void 0 : _b4.call(element);
            voicePlayerRoot2.removeChild(element);
            logger.info("VoicePlayer: Removed other player.", { element });
          }
        });
      } finally {
        audioPlayer === null || audioPlayer === void 0 ? void 0 : audioPlayer.play();
        voicePlayerRoot2 === null || voicePlayerRoot2 === void 0 ? void 0 : voicePlayerRoot2.appendChild(audioPlayer);
        voicePlayerDispatcher({
          type: SET_CURRENT_PLAYER,
          payload: { groupKey, audioPlayer }
        });
        logger.info("VoicePlayer: Succeeded playing audio player.", { groupKey, audioPlayer });
      }
    }).catch(function(error) {
      logger.warning("VoicePlayer: Failed loading audio file with URL.", error);
      voicePlayerDispatcher({
        type: RESET_AUDIO_UNIT,
        payload: { groupKey }
      });
    });
  };
  return import_react26.default.createElement(
    Context.Provider,
    { value: {
      play,
      pause,
      stop,
      voicePlayerStore
    } },
    import_react26.default.createElement("div", { id: VOICE_PLAYER_ROOT_ID, style: { display: "none" } }),
    children
  );
};
var useVoicePlayerContext = function() {
  return (0, import_react26.useContext)(Context);
};

// node_modules/@sendbird/uikit-react/ui/SortByRow.js
var import_react27 = __toESM(require_react(), 1);
var componentClassName = "sendbird-sort-by-row";
function SortByRow(_a2) {
  var _b2 = _a2.className, className = _b2 === void 0 ? "" : _b2, maxItemCount = _a2.maxItemCount, itemWidth = _a2.itemWidth, itemHeight = _a2.itemHeight, children = _a2.children;
  if (Array.isArray(children) && children.length > maxItemCount) {
    var result = [];
    for (var i4 = 0; i4 < children.length; i4 += maxItemCount) {
      result.push(import_react27.default.createElement("div", { className: __spreadArray(__spreadArray([], Array.isArray(className) ? className : [className], true), [
        componentClassName
      ], false).join(" "), key: uuidv4(), style: {
        width: itemWidth * maxItemCount,
        height: itemHeight
      } }, children.slice(i4, i4 + maxItemCount)));
    }
    return import_react27.default.createElement(import_react27.default.Fragment, null, result);
  }
  return import_react27.default.createElement("div", { className: __spreadArray(__spreadArray([], Array.isArray(className) ? className : [className], true), [
    componentClassName
  ], false).join(" "), style: {
    width: itemWidth * (Array.isArray(children) ? children.length : 1),
    height: itemHeight
  } }, children);
}

// node_modules/@sendbird/uikit-react/chunks/bundle-C7VSBUKJ.js
var import_react28 = __toESM(require_react(), 1);
var import_react_dom = __toESM(require_react_dom(), 1);
var APP_LAYOUT_ROOT = "sendbird-app__layout";
var HEIGHT_PADDING = 60;
var MenuItems$1 = (
  /** @class */
  function(_super) {
    __extends(MenuItems2, _super);
    function MenuItems2(props) {
      var _this = _super.call(this, props) || this;
      _this.menuRef = import_react28.default.createRef();
      _this.setupEvents = function() {
        var closeDropdown = _this.props.closeDropdown;
        var menuRef = _this.menuRef;
        var handleClickOutside = function(event) {
          var _a2, _b2;
          if ((menuRef === null || menuRef === void 0 ? void 0 : menuRef.current) && !((_b2 = (_a2 = menuRef === null || menuRef === void 0 ? void 0 : menuRef.current) === null || _a2 === void 0 ? void 0 : _a2.contains) === null || _b2 === void 0 ? void 0 : _b2.call(_a2, event.target))) {
            closeDropdown === null || closeDropdown === void 0 ? void 0 : closeDropdown();
          }
        };
        _this.setState({
          handleClickOutside
        });
        document.addEventListener("mousedown", handleClickOutside);
      };
      _this.cleanUpEvents = function() {
        var handleClickOutside = _this.state.handleClickOutside;
        document.removeEventListener("mousedown", handleClickOutside);
      };
      _this.getMenuPosition = function() {
        var _a2, _b2, _c;
        var _d = _this.props, parentRef = _d.parentRef, openLeft = _d.openLeft;
        var portalElement = document.getElementById(APP_LAYOUT_ROOT);
        var portalRect = ((_a2 = portalElement === null || portalElement === void 0 ? void 0 : portalElement.getBoundingClientRect) === null || _a2 === void 0 ? void 0 : _a2.call(portalElement)) || {
          top: 0,
          left: 0,
          width: window.innerWidth,
          height: window.innerHeight
        };
        var parentRect = (_c = (_b2 = parentRef === null || parentRef === void 0 ? void 0 : parentRef.current) === null || _b2 === void 0 ? void 0 : _b2.getBoundingClientRect) === null || _c === void 0 ? void 0 : _c.call(_b2);
        var x2 = ((parentRect === null || parentRect === void 0 ? void 0 : parentRect.x) || (parentRect === null || parentRect === void 0 ? void 0 : parentRect.left) || 0) - portalRect.left;
        var y6 = ((parentRect === null || parentRect === void 0 ? void 0 : parentRect.y) || (parentRect === null || parentRect === void 0 ? void 0 : parentRect.top) || 0) - portalRect.top;
        var menuStyle = {
          top: y6,
          left: x2
        };
        if (!_this.menuRef.current)
          return menuStyle;
        var rect = _this.menuRef.current.getBoundingClientRect();
        if (y6 + rect.height + HEIGHT_PADDING > portalRect.height) {
          menuStyle.top -= rect.height;
        }
        if (x2 + rect.width > portalRect.width && !openLeft) {
          menuStyle.left -= rect.width;
        }
        if (menuStyle.top < 0) {
          menuStyle.top = rect.height < portalRect.height ? (portalRect.height - rect.height) / 2 : 0;
        }
        menuStyle.top += 32;
        if (openLeft) {
          var padding = Number.isNaN(rect.width - 30) ? 108 : rect.width - 30;
          menuStyle.left -= padding;
        }
        if (menuStyle.left < 0) {
          menuStyle.left = rect.width < portalRect.width ? (portalRect.width - rect.width) / 2 : 0;
        }
        _this.setState({ menuStyle });
        return menuStyle;
      };
      _this.state = {
        menuStyle: { top: 0, left: 0 },
        handleClickOutside: function() {
        }
      };
      return _this;
    }
    MenuItems2.prototype.componentDidMount = function() {
      this.setupEvents();
      this.getMenuPosition();
    };
    MenuItems2.prototype.componentWillUnmount = function() {
      this.cleanUpEvents();
    };
    MenuItems2.prototype.render = function() {
      var portalElement = document.getElementById(MENU_ROOT_ID);
      if (!portalElement)
        return import_react28.default.createElement(import_react28.default.Fragment, null);
      var menuStyle = this.state.menuStyle;
      var _a2 = this.props, children = _a2.children, style = _a2.style, _b2 = _a2.className, className = _b2 === void 0 ? "" : _b2, testID = _a2.testID, id2 = _a2.id;
      return (0, import_react_dom.createPortal)(import_react28.default.createElement(
        "div",
        { className: classnames(MENU_OBSERVING_CLASS_NAME, className), "data-testid": testID, id: id2 },
        import_react28.default.createElement("div", { className: "sendbird-dropdown__menu-backdrop" }),
        import_react28.default.createElement("ul", { className: "".concat(className, " sendbird-dropdown__menu"), ref: this.menuRef, style: __assign({ display: "inline-block", position: "fixed", left: "".concat(Math.round(menuStyle.left), "px"), top: "".concat(Math.round(menuStyle.top), "px") }, style), "data-testid": "sendbird-dropdown-menu" }, children)
      ), portalElement);
    };
    return MenuItems2;
  }(import_react28.default.Component)
);
var MuteMenuItem = function(_a2) {
  var channel = _a2.channel, user = _a2.user, _b2 = _a2.className, className = _b2 === void 0 ? "" : _b2, children = _a2.children, _c = _a2.disable, disable = _c === void 0 ? false : _c, _d = _a2.dataSbId, dataSbId = _d === void 0 ? "" : _d, testID = _a2.testID, _e3 = _a2.onChange, onChange = _e3 === void 0 ? function() {
  } : _e3, _f = _a2.onError, onError2 = _f === void 0 ? function() {
  } : _f;
  var _g2 = (0, import_react28.useState)(user.isMuted), isMuted = _g2[0], setIsMuted = _g2[1];
  var isProcessing = (0, import_react28.useRef)(false);
  var onClickHandler = (0, import_react28.useCallback)(function() {
    if (!isProcessing.current) {
      isProcessing.current = true;
      if (isMuted) {
        channel.unmuteUser(user).then(function() {
          setIsMuted(false);
          onChange(channel, user, false);
          isProcessing.current = false;
        }).catch(function(err) {
          onError2(err);
          isProcessing.current = false;
        });
      } else {
        channel.muteUser(user).then(function() {
          setIsMuted(true);
          onChange(channel, user, true);
          isProcessing.current = false;
        }).catch(function(err) {
          onError2(err);
          isProcessing.current = false;
        });
      }
    }
  }, [isProcessing, isMuted]);
  return import_react28.default.createElement(MenuItem, { className, disable, testID: testID !== null && testID !== void 0 ? testID : dataSbId, onClick: onClickHandler }, children);
};
var OperatorMenuItem = function(_a2) {
  var channel = _a2.channel, user = _a2.user, _b2 = _a2.className, className = _b2 === void 0 ? "" : _b2, children = _a2.children, _c = _a2.disable, disable = _c === void 0 ? false : _c, _d = _a2.dataSbId, dataSbId = _d === void 0 ? "" : _d, testID = _a2.testID, _e3 = _a2.onChange, onChange = _e3 === void 0 ? function() {
  } : _e3, _f = _a2.onError, onError2 = _f === void 0 ? function() {
  } : _f;
  var _g2 = (0, import_react28.useState)(channel instanceof xe3 ? channel.isOperator(user) : user.role === V.OPERATOR), isOperator2 = _g2[0], setIsOperator = _g2[1];
  var isProcessing = (0, import_react28.useRef)(false);
  var onClickHandler = (0, import_react28.useCallback)(function() {
    if (!isProcessing.current) {
      isProcessing.current = true;
      if (isOperator2) {
        channel.removeOperators([user.userId]).then(function() {
          setIsOperator(false);
          onChange(channel, user, false);
          isProcessing.current = false;
        }).catch(function(err) {
          onError2(err);
          isProcessing.current = false;
        });
      } else {
        channel.addOperators([user.userId]).then(function() {
          setIsOperator(true);
          onChange(channel, user, true);
          isProcessing.current = false;
        }).catch(function(err) {
          onError2(err);
          isProcessing.current = false;
        });
      }
    }
  }, [isProcessing, isOperator2]);
  return import_react28.default.createElement(MenuItem, { className, disable, testID: testID !== null && testID !== void 0 ? testID : dataSbId, onClick: onClickHandler }, children);
};
var defaultParentRect = { x: 0, y: 0, left: 0, top: 0, height: 0 };
var EmojiListItems$1 = function(_a2) {
  var id2 = _a2.id, children = _a2.children, parentRef = _a2.parentRef, parentContainRef = _a2.parentContainRef, _b2 = _a2.spaceFromTrigger, spaceFromTrigger = _b2 === void 0 ? { x: 0, y: 0 } : _b2, closeDropdown = _a2.closeDropdown;
  var _c = (0, import_react28.useState)({ left: 0, top: 0 }), reactionStyle = _c[0], setReactionStyle = _c[1];
  var reactionRef = (0, import_react28.useRef)(null);
  (0, import_react28.useEffect)(function() {
    if (parentContainRef && (parentContainRef === null || parentContainRef === void 0 ? void 0 : parentContainRef.current)) {
      parentContainRef.current.classList.add("sendbird-reactions--pressed");
    }
    return function() {
      if (parentContainRef && (parentContainRef === null || parentContainRef === void 0 ? void 0 : parentContainRef.current)) {
        parentContainRef.current.classList.remove("sendbird-reactions--pressed");
      }
    };
  }, []);
  (0, import_react28.useEffect)(function() {
    var handleClickOutSide = function(event) {
      var _a3, _b3;
      if ((reactionRef === null || reactionRef === void 0 ? void 0 : reactionRef.current) && !((_b3 = (_a3 = reactionRef === null || reactionRef === void 0 ? void 0 : reactionRef.current) === null || _a3 === void 0 ? void 0 : _a3.contains) === null || _b3 === void 0 ? void 0 : _b3.call(_a3, event.target))) {
        closeDropdown();
      }
    };
    document.addEventListener("mousedown", handleClickOutSide);
    return function() {
      document.removeEventListener("mousedown", handleClickOutSide);
    };
  }, []);
  (0, import_react28.useEffect)(function() {
    var _a3, _b3, _c2, _d;
    var spaceFromTriggerX = (spaceFromTrigger === null || spaceFromTrigger === void 0 ? void 0 : spaceFromTrigger.x) || 0;
    var spaceFromTriggerY = (spaceFromTrigger === null || spaceFromTrigger === void 0 ? void 0 : spaceFromTrigger.y) || 0;
    var portalElement = document.getElementById(APP_LAYOUT_ROOT);
    var portalRect = ((_a3 = portalElement === null || portalElement === void 0 ? void 0 : portalElement.getBoundingClientRect) === null || _a3 === void 0 ? void 0 : _a3.call(portalElement)) || {
      top: 0,
      left: 0,
      width: window.innerWidth,
      height: window.innerHeight
    };
    var parentRect = (_c2 = (_b3 = parentRef === null || parentRef === void 0 ? void 0 : parentRef.current) === null || _b3 === void 0 ? void 0 : _b3.getBoundingClientRect()) !== null && _c2 !== void 0 ? _c2 : defaultParentRect;
    var x2 = ((parentRect === null || parentRect === void 0 ? void 0 : parentRect.x) || (parentRect === null || parentRect === void 0 ? void 0 : parentRect.left) || 0) - portalRect.left;
    var y6 = ((parentRect === null || parentRect === void 0 ? void 0 : parentRect.y) || (parentRect === null || parentRect === void 0 ? void 0 : parentRect.top) || 0) - portalRect.top;
    var reactionStyle2 = {
      top: y6,
      left: x2
    };
    if (!(reactionRef === null || reactionRef === void 0 ? void 0 : reactionRef.current)) {
      setReactionStyle(reactionStyle2);
    } else {
      var rect = (_d = reactionRef === null || reactionRef === void 0 ? void 0 : reactionRef.current) === null || _d === void 0 ? void 0 : _d.getBoundingClientRect();
      if (reactionStyle2.top < rect.height) {
        reactionStyle2.top += parentRect.height;
        reactionStyle2.top += spaceFromTriggerY;
      } else {
        reactionStyle2.top -= rect.height;
        reactionStyle2.top -= spaceFromTriggerY;
      }
      reactionStyle2.left -= rect.width / 2;
      reactionStyle2.left += parentRect.height / 2 - 2;
      reactionStyle2.left += spaceFromTriggerX;
      var maximumLeft = portalRect.width - rect.width;
      if (maximumLeft < reactionStyle2.left) {
        reactionStyle2.left = maximumLeft;
      }
      if (reactionStyle2.left < 0) {
        reactionStyle2.left = 0;
      }
      setReactionStyle(reactionStyle2);
    }
  }, []);
  var rootElement = document.getElementById(EMOJI_MENU_ROOT_ID);
  if (rootElement) {
    return (0, import_react_dom.createPortal)(import_react28.default.createElement(
      "div",
      { className: MENU_OBSERVING_CLASS_NAME, id: id2 },
      import_react28.default.createElement("div", { className: "sendbird-dropdown__menu-backdrop" }),
      import_react28.default.createElement(
        "ul",
        { className: "sendbird-dropdown__reaction-bar", "data-testid": "sendbird-dropdown__reaction-bar", ref: reactionRef, style: {
          display: "inline-block",
          position: "fixed",
          left: "".concat(Math.round(reactionStyle.left), "px"),
          top: "".concat(Math.round(reactionStyle.top), "px")
        } },
        import_react28.default.createElement(SortByRow, { className: "sendbird-dropdown__reaction-bar__row", maxItemCount: 8, itemWidth: 44, itemHeight: 40 }, children)
      )
    ), rootElement);
  }
  return null;
};
var MessageMenuContext = (0, import_react28.createContext)(void 0);
var MessageMenuProvider = function(_a2) {
  var children = _a2.children, value = _a2.value;
  return import_react28.default.createElement(MessageMenuContext.Provider, { value }, children);
};
var useMessageMenuContext = function() {
  var context = (0, import_react28.useContext)(MessageMenuContext);
  if (!context) {
    throw new Error("useMessageMenuContext must be used within a MessageMenuProvider.");
  }
  return context;
};
var MenuItem$1 = function(_a2) {
  var className = _a2.className, disabled = _a2.disabled, _b2 = _a2.tabIndex, tabIndex = _b2 === void 0 ? 0 : _b2, testID = _a2.testID, onClick = _a2.onClick, children = _a2.children;
  var handleClickEvent = function(e3) {
    if (!disabled && onClick) {
      onClick(e3);
    }
  };
  return import_react28.default.createElement(
    "li",
    { className: classnames("sendbird-menu-item", className), role: "menuitem", "aria-disabled": disabled, "data-testid": testID, tabIndex, onClick: handleClickEvent, onKeyDown: function(e3) {
      if (e3.code === "Enter")
        handleClickEvent(e3);
    } },
    import_react28.default.createElement(Label, { className: "sendbird-menu-item__text", type: LabelTypography.SUBTITLE_2, color: disabled ? LabelColors.ONBACKGROUND_4 : LabelColors.ONBACKGROUND_1 }, children)
  );
};
var BottomSheetMenuItem = function(_a2) {
  var className = _a2.className, _b2 = _a2.disabled, disabled = _b2 === void 0 ? false : _b2, _c = _a2.tabIndex, tabIndex = _c === void 0 ? 0 : _c, testID = _a2.testID, onClick = _a2.onClick, children = _a2.children;
  return import_react28.default.createElement("div", { className: classnames("sendbird-message__bottomsheet--action", className), role: "menuitem", tabIndex, "aria-disabled": disabled, onClick, "data-testid": testID }, children);
};
var MENU_OBSERVING_CLASS_NAME = "sendbird-observing-message-menu";
var getObservingId = function(txt) {
  return "m_".concat(txt);
};
var MenuItems = MenuItems$1;
var EmojiListItems = EmojiListItems$1;
var MenuItem = function(_a2) {
  var _b2 = _a2.className, className = _b2 === void 0 ? "" : _b2, children = _a2.children, onClick = _a2.onClick, _c = _a2.disable, disable = _c === void 0 ? false : _c, _d = _a2.dataSbId, dataSbId = _d === void 0 ? "" : _d, testID = _a2.testID;
  return import_react28.default.createElement(MenuItem$1, { className: classnames.apply(void 0, __spreadArray(__spreadArray([], Array.isArray(className) ? className : [className], false), [
    "sendbird-dropdown__menu-item",
    disable ? "disable" : ""
  ], false)), disabled: disable, testID: testID !== null && testID !== void 0 ? testID : dataSbId, onClick }, children);
};
var MENU_ROOT_ID = "sendbird-dropdown-portal";
var MenuRoot = function() {
  return import_react28.default.createElement("div", { id: MENU_ROOT_ID, className: MENU_ROOT_ID });
};
var EMOJI_MENU_ROOT_ID = "sendbird-emoji-list-portal";
var EmojiReactionListRoot = function() {
  return import_react28.default.createElement("div", { id: EMOJI_MENU_ROOT_ID });
};
function ContextMenu(_a2) {
  var menuTrigger = _a2.menuTrigger, menuItems = _a2.menuItems, isOpen = _a2.isOpen, onClick = _a2.onClick;
  var _b2 = (0, import_react28.useState)(false), showMenu = _b2[0], setShowMenu = _b2[1];
  return import_react28.default.createElement(
    "div",
    { className: "sendbird-context-menu", style: { display: "inline" }, onClick },
    menuTrigger === null || menuTrigger === void 0 ? void 0 : menuTrigger(function() {
      return setShowMenu(!showMenu);
    }),
    (showMenu || isOpen) && menuItems(function() {
      return setShowMenu(false);
    })
  );
}

// node_modules/@sendbird/uikit-react/chunks/bundle-Bh6KfMRl.js
var import_react29 = __toESM(require_react(), 1);
var import_react_dom2 = __toESM(require_react_dom(), 1);
var colorMapping = {
  // Primary / Secondary / Error / Information
  100: "extra-light",
  200: "light",
  300: "main",
  400: "dark",
  500: "extra-dark",
  // Overlay
  "overlay-01": "overlay-dark",
  "overlay-02": "overlay-light",
  // OnLight
  "onlight-01": "onlight-text-high-emphasis",
  "onlight-02": "onlight-text-mid-emphasis",
  "onlight-03": "onlight-text-low-emphasis",
  "onlight-04": "onlight-text-disabled",
  // OnDark
  "ondark-01": "ondark-text-high-emphasis",
  "ondark-02": "ondark-text-mid-emphasis",
  "ondark-03": "ondark-text-low-emphasis",
  "ondark-04": "ondark-text-disabled"
};
var colorMappingOrder = Object.values(colorMapping).sort(function(a5, b6) {
  return b6.length - a5.length;
});
var colorMappingMap = new Map(Object.entries(colorMapping).map(function(_a2) {
  var key = _a2[0], value = _a2[1];
  return [value, key];
}));
var mapColorKeys = function(colorSet) {
  var mappedColors = {};
  Object.entries(colorSet).forEach(function(_a2) {
    var key = _a2[0], value = _a2[1];
    var descriptiveKey = key;
    for (var _i2 = 0, colorMappingOrder_1 = colorMappingOrder; _i2 < colorMappingOrder_1.length; _i2++) {
      var mappingValue = colorMappingOrder_1[_i2];
      var regex2 = new RegExp("-".concat(mappingValue, "$"));
      if (regex2.test(key)) {
        var numericKey = colorMappingMap.get(mappingValue);
        if (numericKey) {
          descriptiveKey = key.replace(regex2, "-".concat(numericKey));
          break;
        }
      }
    }
    mappedColors[descriptiveKey] = value;
  });
  return mappedColors;
};
var MODAL_ROOT = "sendbird-modal-root";
var ModalRoot = function() {
  return import_react29.default.createElement("div", { id: MODAL_ROOT, className: MODAL_ROOT });
};
var ModalHeader = function(_a2) {
  var titleText = _a2.titleText, onCloseClick = _a2.onCloseClick;
  return import_react29.default.createElement(
    "div",
    { className: "sendbird-modal__header" },
    import_react29.default.createElement(Label, { type: LabelTypography.H_1, color: LabelColors.ONBACKGROUND_1 }, titleText),
    import_react29.default.createElement(
      "div",
      { className: "sendbird-modal__close" },
      import_react29.default.createElement(
        IconButton,
        { width: "32px", height: "32px", onClick: onCloseClick },
        import_react29.default.createElement(Icon, { type: IconTypes.CLOSE, fillColor: IconColors.DEFAULT, width: "24px", height: "24px" })
      )
    )
  );
};
var ModalBody = function(_a2) {
  var children = _a2.children;
  return import_react29.default.createElement(
    "div",
    { className: "sendbird-modal__body" },
    import_react29.default.createElement(Label, { type: LabelTypography.SUBTITLE_1, color: LabelColors.ONBACKGROUND_2 }, children)
  );
};
var ModalFooter = function(_a2) {
  var submitText = _a2.submitText, _b2 = _a2.disabled, disabled = _b2 === void 0 ? false : _b2, _c = _a2.hideCancelButton, hideCancelButton = _c === void 0 ? false : _c, _d = _a2.type, type = _d === void 0 ? ButtonTypes.DANGER : _d, onSubmit = _a2.onSubmit, onCancel = _a2.onCancel;
  var stringSet2 = (0, import_react29.useContext)(LocalizationContext).stringSet;
  return import_react29.default.createElement(
    "div",
    { className: "sendbird-modal__footer" },
    !hideCancelButton && import_react29.default.createElement(
      Button,
      { type: ButtonTypes.SECONDARY, onClick: onCancel },
      import_react29.default.createElement(Label, { type: LabelTypography.BUTTON_1, color: LabelColors.ONBACKGROUND_1 }, stringSet2.BUTTON__CANCEL)
    ),
    import_react29.default.createElement(Button, { type, disabled, onClick: onSubmit }, submitText)
  );
};
function Modal(props) {
  var _a2;
  var _b2 = props.children, children = _b2 === void 0 ? null : _b2, _c = props.className, className = _c === void 0 ? "" : _c, _d = props.contentClassName, contentClassName = _d === void 0 ? "" : _d, _e3 = props.isCloseOnClickOutside, isCloseOnClickOutside = _e3 === void 0 ? false : _e3, _f = props.isFullScreenOnMobile, isFullScreenOnMobile = _f === void 0 ? false : _f, titleText = props.titleText, submitText = props.submitText, _g2 = props.disabled, disabled = _g2 === void 0 ? false : _g2, _h = props.hideFooter, hideFooter = _h === void 0 ? false : _h, _j = props.type, type = _j === void 0 ? ButtonTypes.DANGER : _j, renderHeader = props.renderHeader, _k = props.onSubmit, onSubmit = _k === void 0 ? noop : _k, onClose = props.onClose, onCancel = props.onCancel, customFooter = props.customFooter;
  var handleClose = (_a2 = onClose !== null && onClose !== void 0 ? onClose : onCancel) !== null && _a2 !== void 0 ? _a2 : noop;
  var eventHandlers = useSendbirdStateContext().eventHandlers;
  var id2 = (0, import_react29.useState)(function() {
    return "sbu-modal-".concat(uuidv4());
  })[0];
  (0, import_react29.useEffect)(function() {
    var _a3, _b3;
    return (_b3 = (_a3 = eventHandlers === null || eventHandlers === void 0 ? void 0 : eventHandlers.modal) === null || _a3 === void 0 ? void 0 : _a3.onMounted) === null || _b3 === void 0 ? void 0 : _b3.call(_a3, { close: handleClose, id: id2 });
  }, []);
  var isMobile = useMediaQueryContext().isMobile;
  return (0, import_react_dom2.createPortal)(import_react29.default.createElement(
    "div",
    { className: classnames("sendbird-modal", className, isFullScreenOnMobile && isMobile && "sendbird-modal--full-mobile") },
    import_react29.default.createElement(
      "div",
      { className: classnames.apply(void 0, __spreadArray(["sendbird-modal__content"], Array.isArray(contentClassName) ? contentClassName : [contentClassName], false)) },
      (renderHeader === null || renderHeader === void 0 ? void 0 : renderHeader()) || import_react29.default.createElement(ModalHeader, { titleText: titleText !== null && titleText !== void 0 ? titleText : "", onCloseClick: handleClose }),
      import_react29.default.createElement(ModalBody, null, children),
      !hideFooter && (customFooter !== null && customFooter !== void 0 ? customFooter : import_react29.default.createElement(ModalFooter, { disabled, onCancel: handleClose, onSubmit, submitText: submitText !== null && submitText !== void 0 ? submitText : "", type }))
    ),
    import_react29.default.createElement("div", { className: classnames("sendbird-modal__backdrop", isCloseOnClickOutside && "sendbird-modal__backdrop--clickoutside"), onClick: function(e3) {
      e3 === null || e3 === void 0 ? void 0 : e3.stopPropagation();
      if (isCloseOnClickOutside) {
        handleClose();
      }
    } })
  ), document.getElementById(MODAL_ROOT));
}
var Context2 = (0, import_react29.createContext)({
  start: noop,
  stop: noop,
  isRecordable: false
});
var VoiceRecorderProvider = function(props) {
  var _a2;
  var children = props.children;
  var config = useSendbirdStateContext().config;
  var logger = config.logger, groupChannel = config.groupChannel;
  var _b2 = (0, import_react29.useState)(null), mediaRecorder = _b2[0], setMediaRecorder = _b2[1];
  var _c = (0, import_react29.useState)(false), isRecordable = _c[0], setIsRecordable = _c[1];
  var _d = (0, import_react29.useState)(false), permissionWarning = _d[0], setPermissionWarning = _d[1];
  var stringSet2 = useLocalization().stringSet;
  var isVoiceMessageEnabled = groupChannel.enableVoiceMessage;
  var _e3 = (0, import_react29.useState)(null), webAudioUtils = _e3[0], setWebAudioUtils = _e3[1];
  var browserSupportMimeType = (_a2 = BROWSER_SUPPORT_MIME_TYPE_LIST.find(function(mimeType) {
    return MediaRecorder.isTypeSupported(mimeType);
  })) !== null && _a2 !== void 0 ? _a2 : "";
  if (isVoiceMessageEnabled && !browserSupportMimeType) {
    logger.error("VoiceRecorder: Browser does not support mimeType", { mimmeTypes: BROWSER_SUPPORT_MIME_TYPE_LIST });
  }
  (0, import_react29.useEffect)(function() {
    if (isVoiceMessageEnabled && !webAudioUtils) {
      import("./bundle-CAKfDkwC-FLD3FI63.js").then(function(module) {
        return setWebAudioUtils(module);
      });
    }
  }, [isVoiceMessageEnabled, webAudioUtils]);
  var start = (0, import_react29.useCallback)(function(eventHandler) {
    var _a3, _b3;
    if (isVoiceMessageEnabled && !webAudioUtils) {
      logger.error("VoiceRecorder: Recording audio processor is being loaded.");
      return;
    }
    var checkPermission = function() {
      try {
        navigator.permissions.query({ name: "microphone" }).then(function(result) {
          if (result.state === "denied") {
            logger.warning("VoiceRecorder: Permission denied.");
            setPermissionWarning(true);
          }
        });
      } catch (error) {
        logger.warning("VoiceRecorder: Failed to check permission.", error);
      }
    };
    logger.info("VoiceRecorder: Start recording.");
    if (mediaRecorder) {
      stop();
      logger.info("VoiceRecorder: Previous mediaRecorder is stopped.");
    }
    checkPermission();
    (_b3 = (_a3 = navigator === null || navigator === void 0 ? void 0 : navigator.mediaDevices) === null || _a3 === void 0 ? void 0 : _a3.getUserMedia) === null || _b3 === void 0 ? void 0 : _b3.call(_a3, { audio: true }).then(function(stream) {
      var _a4;
      logger.info("VoiceRecorder: Succeeded getting media stream.", stream);
      setIsRecordable(true);
      var mediaRecorder2 = new MediaRecorder(stream, {
        mimeType: browserSupportMimeType,
        audioBitsPerSecond: VOICE_RECORDER_AUDIO_BIT_RATE
      });
      mediaRecorder2.ondataavailable = function(e3) {
        logger.info("VoiceRecorder: Succeeded getting an available data.", e3.data);
        var audioFile = new File([e3.data], VOICE_MESSAGE_FILE_NAME, {
          lastModified: (/* @__PURE__ */ new Date()).getTime(),
          type: VOICE_MESSAGE_MIME_TYPE
        });
        webAudioUtils === null || webAudioUtils === void 0 ? void 0 : webAudioUtils.downsampleToWav(audioFile, function(buffer) {
          var _a5;
          var mp3Buffer = webAudioUtils === null || webAudioUtils === void 0 ? void 0 : webAudioUtils.encodeMp3(buffer);
          var mp3blob = new Blob(mp3Buffer, { type: VOICE_MESSAGE_MIME_TYPE });
          var convertedAudioFile = new File([mp3blob], VOICE_MESSAGE_FILE_NAME, {
            lastModified: (/* @__PURE__ */ new Date()).getTime(),
            type: VOICE_MESSAGE_MIME_TYPE
          });
          (_a5 = eventHandler === null || eventHandler === void 0 ? void 0 : eventHandler.onRecordingEnded) === null || _a5 === void 0 ? void 0 : _a5.call(eventHandler, convertedAudioFile);
          logger.info("VoiceRecorder: Succeeded converting audio file.", convertedAudioFile);
        });
        var tracks = stream.getAudioTracks();
        tracks.forEach(function(track) {
          return track.stop();
        });
        setIsRecordable(false);
      };
      mediaRecorder2.onstart = (_a4 = eventHandler === null || eventHandler === void 0 ? void 0 : eventHandler.onRecordingStarted) !== null && _a4 !== void 0 ? _a4 : noop;
      mediaRecorder2 === null || mediaRecorder2 === void 0 ? void 0 : mediaRecorder2.start();
      setMediaRecorder(mediaRecorder2);
    }).catch(function(err) {
      logger.error("VoiceRecorder: Failed getting media stream.", err);
      setMediaRecorder(null);
    });
  }, [mediaRecorder, webAudioUtils]);
  var stop = (0, import_react29.useCallback)(function() {
    mediaRecorder === null || mediaRecorder === void 0 ? void 0 : mediaRecorder.stop();
    setMediaRecorder(null);
    setIsRecordable(false);
    logger.info("VoiceRecorder: Stop recording.");
  }, [mediaRecorder]);
  return import_react29.default.createElement(
    Context2.Provider,
    { value: { start, stop, isRecordable } },
    children,
    permissionWarning && import_react29.default.createElement(
      Modal,
      { hideFooter: true, onClose: function() {
        return setPermissionWarning(false);
      } },
      import_react29.default.createElement(import_react29.default.Fragment, null, stringSet2.VOICE_RECORDING_PERMISSION_DENIED)
    )
  );
};
var useVoiceRecorderContext = function() {
  return (0, import_react29.useContext)(Context2);
};
var GlobalModalContext = (0, import_react29.createContext)({
  openModal: noop
});
var GlobalModalProvider = function(_a2) {
  var children = _a2.children;
  var _b2 = (0, import_react29.useState)([]), globalModalQueue = _b2[0], setGlobalModalQueue = _b2[1];
  var openModal = (0, import_react29.useCallback)(function(props) {
    setGlobalModalQueue(function(currentQue) {
      return __spreadArray(__spreadArray([], currentQue, true), [props], false);
    });
  }, []);
  var closeModal = (0, import_react29.useCallback)(function() {
    setGlobalModalQueue(function(currentQue) {
      return currentQue.slice(1);
    });
  }, []);
  var ModalComponent = (0, import_react29.useMemo)(function() {
    return function() {
      return K2(globalModalQueue).when(function(q3) {
        return q3.length === 0;
      }, function() {
        return import_react29.default.createElement(import_react29.default.Fragment, null);
      }).otherwise(function() {
        var _a3 = globalModalQueue[0], modalProps = _a3.modalProps, childElement = _a3.childElement;
        return import_react29.default.createElement(Modal, __assign({}, modalProps, { className: classnames("sendbird-global-modal", modalProps === null || modalProps === void 0 ? void 0 : modalProps.className), onClose: function() {
          var _a4;
          (_a4 = modalProps === null || modalProps === void 0 ? void 0 : modalProps.onClose) === null || _a4 === void 0 ? void 0 : _a4.call(modalProps);
          closeModal();
        } }), childElement({
          closeModal
        }));
      });
    };
  }, [globalModalQueue]);
  return import_react29.default.createElement(
    GlobalModalContext.Provider,
    { value: {
      openModal
    } },
    import_react29.default.createElement(ModalComponent, null),
    children
  );
};
var useGlobalModalContext = function() {
  return (0, import_react29.useContext)(GlobalModalContext);
};
var EmojiManager = (
  /** @class */
  function() {
    function EmojiManager2(props) {
      var _this = this;
      var _a2;
      var sdk = props.sdk, logger = props.logger;
      (_a2 = sdk === null || sdk === void 0 ? void 0 : sdk.getAllEmoji) === null || _a2 === void 0 ? void 0 : _a2.call(sdk).then(function(emojiContainer) {
        _this._emojiContainer = emojiContainer;
        logger === null || logger === void 0 ? void 0 : logger.info("EmojiManager | Succeeded getting all emojis. ", emojiContainer);
      }).catch(function() {
        logger === null || logger === void 0 ? void 0 : logger.warning("EmojiManager | Failed getting all emojis.");
      });
    }
    Object.defineProperty(EmojiManager2.prototype, "AllEmojisAsArray", {
      get: function() {
        return this._emojiContainer.emojiCategories.flatMap(function(category) {
          return category.emojis;
        });
      },
      enumerable: false,
      configurable: true
    });
    Object.defineProperty(EmojiManager2.prototype, "AllEmojisAsMap", {
      get: function() {
        return this._emojiContainer.emojiCategories.flatMap(function(category) {
          return category.emojis;
        }).reduce(function(map, emoji) {
          map.set(emoji.key, emoji.url);
          return map;
        }, /* @__PURE__ */ new Map());
      },
      enumerable: false,
      configurable: true
    });
    EmojiManager2.prototype.getAllEmojis = function(type) {
      var _this = this;
      return K2(type).when(function(type2) {
        return ["array", "arr"].includes(type2);
      }, function() {
        return _this.AllEmojisAsArray;
      }).when(function(type2) {
        return ["map"].includes(type2);
      }, function() {
        return _this.AllEmojisAsMap;
      }).otherwise(function() {
        return _this.AllEmojisAsArray;
      });
    };
    EmojiManager2.prototype.getEmojiUrl = function(reactionKey) {
      var _a2, _b2;
      return (_b2 = (_a2 = this.AllEmojisAsArray.find(function(emoji) {
        return emoji.key === reactionKey;
      })) === null || _a2 === void 0 ? void 0 : _a2.url) !== null && _b2 !== void 0 ? _b2 : "";
    };
    Object.defineProperty(EmojiManager2.prototype, "emojiContainer", {
      get: function() {
        return this._emojiContainer;
      },
      enumerable: false,
      configurable: true
    });
    return EmojiManager2;
  }()
);

// node_modules/@sendbird/uikit-react/ui/Input.js
var import_react30 = __toESM(require_react(), 1);
var InputLabel = function(_a2) {
  var children = _a2.children;
  return import_react30.default.createElement(Label, { className: "sendbird-input-label", type: LabelTypography.CAPTION_3, color: LabelColors.ONBACKGROUND_1 }, children);
};
var Input = import_react30.default.forwardRef(function(props, ref) {
  var name = props.name, required = props.required, disabled = props.disabled, value = props.value, placeHolder = props.placeHolder, _a2 = props.autoFocus, autoFocus = _a2 === void 0 ? false : _a2;
  var _b2 = (0, import_react30.useState)(value), inputValue = _b2[0], setInputValue = _b2[1];
  return import_react30.default.createElement(
    "div",
    { className: "sendbird-input" },
    import_react30.default.createElement("input", { className: "sendbird-input__input", ref, name, required, disabled, value: inputValue, onChange: function(e3) {
      setInputValue(e3.target.value);
    }, autoFocus }),
    placeHolder && !inputValue && import_react30.default.createElement(Label, { className: "sendbird-input__placeholder", type: LabelTypography.BODY_1, color: LabelColors.ONBACKGROUND_3 }, placeHolder)
  );
});

// node_modules/@sendbird/uikit-react/ui/Loader.js
var import_react31 = __toESM(require_react(), 1);
function Loader(_a2) {
  var _b2 = _a2.className, className = _b2 === void 0 ? "" : _b2, _c = _a2.width, width = _c === void 0 ? "26px" : _c, _d = _a2.height, height = _d === void 0 ? "26px" : _d, children = _a2.children, testID = _a2.testID;
  return import_react31.default.createElement("div", { className: __spreadArray(__spreadArray([], Array.isArray(className) ? className : [className], true), [
    "sendbird-loader"
  ], false).join(" "), "data-testid": testID, style: {
    width: typeof width === "string" ? width : "".concat(width, "px"),
    height: typeof height === "string" ? height : "".concat(height, "px")
  } }, children || import_react31.default.createElement(Icon, { type: IconTypes.SPINNER, width: "26px", height: "26px" }));
}

// node_modules/@sendbird/uikit-react/ui/PlaceHolder.js
var import_react32 = __toESM(require_react(), 1);
var PlaceHolderTypes = {
  LOADING: "LOADING",
  NO_CHANNELS: "NO_CHANNELS",
  NO_MESSAGES: "NO_MESSAGES",
  WRONG: "WRONG",
  SEARCH_IN: "SEARCH_IN",
  SEARCHING: "SEARCHING",
  NO_RESULTS: "NO_RESULTS"
};
function PlaceHolder(_a2) {
  var _b2 = _a2.className, className = _b2 === void 0 ? "" : _b2, type = _a2.type, iconSize = _a2.iconSize, _c = _a2.searchInString, searchInString = _c === void 0 ? "" : _c, retryToConnect = _a2.retryToConnect;
  var stringSet2 = (0, import_react32.useContext)(LocalizationContext).stringSet;
  return import_react32.default.createElement(
    "div",
    { className: __spreadArray(__spreadArray([], Array.isArray(className) ? className : [className], true), [
      "sendbird-place-holder"
    ], false).join(" ") },
    type === PlaceHolderTypes.LOADING && import_react32.default.createElement(
      Loader,
      { width: iconSize || "48px", height: iconSize || "48px" },
      import_react32.default.createElement(Icon, { type: IconTypes.SPINNER, fillColor: IconColors.PRIMARY, width: iconSize || "48px", height: iconSize || "48px" })
    ),
    (type === PlaceHolderTypes.NO_CHANNELS || type === PlaceHolderTypes.NO_MESSAGES || type === PlaceHolderTypes.WRONG) && import_react32.default.createElement(
      "div",
      { className: "sendbird-place-holder__body" },
      type === PlaceHolderTypes.NO_CHANNELS && import_react32.default.createElement(Icon, { className: "sendbird-place-holder__body__icon", type: IconTypes.CHAT, fillColor: IconColors.ON_BACKGROUND_3, width: iconSize || "64px", height: iconSize || "64px" }),
      type === PlaceHolderTypes.WRONG && import_react32.default.createElement(Icon, { className: "sendbird-place-holder__body__icon", type: IconTypes.ERROR, fillColor: IconColors.ON_BACKGROUND_3, width: iconSize || "64px", height: iconSize || "64px" }),
      type === PlaceHolderTypes.NO_MESSAGES && import_react32.default.createElement(Icon, { className: "sendbird-place-holder__body__icon", type: IconTypes.MESSAGE, fillColor: IconColors.ON_BACKGROUND_3, width: iconSize || "64px", height: iconSize || "64px" }),
      import_react32.default.createElement(
        Label,
        { className: "sendbird-place-holder__body__text", type: LabelTypography.BODY_1, color: LabelColors.ONBACKGROUND_2 },
        type === PlaceHolderTypes.NO_CHANNELS && stringSet2.PLACE_HOLDER__NO_CHANNEL,
        type === PlaceHolderTypes.WRONG && stringSet2.PLACE_HOLDER__WRONG,
        type === PlaceHolderTypes.NO_MESSAGES && stringSet2.PLACE_HOLDER__NO_MESSAGES
      ),
      retryToConnect && import_react32.default.createElement(
        "div",
        { className: "sendbird-place-holder__body__reconnect", role: "button", onClick: retryToConnect, onKeyPress: retryToConnect, tabIndex: 0 },
        import_react32.default.createElement(Icon, { className: "sendbird-place-holder__body__reconnect__icon", type: IconTypes.REFRESH, fillColor: IconColors.PRIMARY, width: "20px", height: "20px" }),
        import_react32.default.createElement(Label, { className: "sendbird-place-holder__body__reconnect__text", type: LabelTypography.BUTTON_1, color: LabelColors.PRIMARY }, stringSet2.PLACE_HOLDER__RETRY_TO_CONNECT)
      )
    ),
    (type === PlaceHolderTypes.NO_RESULTS || type === PlaceHolderTypes.SEARCH_IN || type === PlaceHolderTypes.SEARCHING) && import_react32.default.createElement(
      "div",
      { className: "sendbird-place-holder__body--align-top" },
      type === PlaceHolderTypes.SEARCH_IN && import_react32.default.createElement(
        "div",
        { className: "sendbird-place-holder__body--align-top__text" },
        import_react32.default.createElement(Label, { className: "sendbird-place-holder__body--align-top__text__search-in", type: LabelTypography.BUTTON_2, color: LabelColors.ONBACKGROUND_2 }, stringSet2.SEARCH_IN),
        import_react32.default.createElement(Label, { className: "sendbird-place-holder__body--align-top__text__channel-name", type: LabelTypography.BUTTON_2, color: LabelColors.PRIMARY }, "'".concat(searchInString)),
        import_react32.default.createElement(Label, { className: "sendbird-place-holder__body--align-top__text__quote", type: LabelTypography.BUTTON_2, color: LabelColors.PRIMARY }, "'")
      ),
      type === PlaceHolderTypes.SEARCHING && import_react32.default.createElement(Label, { className: "sendbird-place-hlder__body--align-top__searching", type: LabelTypography.BODY_1, color: LabelColors.ONBACKGROUND_2 }, stringSet2.SEARCHING),
      type === PlaceHolderTypes.NO_RESULTS && import_react32.default.createElement(Label, { className: "sendbird-place-hlder__body--align-top__no-result", type: LabelTypography.BODY_1, color: LabelColors.ONBACKGROUND_2 }, stringSet2.NO_SEARCHED_MESSAGE)
    )
  );
}

// node_modules/@sendbird/uikit-react/chunks/bundle-Dt4PQi4u.js
var scrollToRenderedMessage = function(scrollRef, initialTimeStamp, setIsScrolled) {
  var _a2;
  try {
    var container = scrollRef.current;
    var element = (_a2 = container === null || container === void 0 ? void 0 : container.querySelectorAll('[data-sb-created-at="'.concat(initialTimeStamp, '"]'))) === null || _a2 === void 0 ? void 0 : _a2[0];
    if (container && element instanceof HTMLElement) {
      container.scrollTop = element.offsetTop;
    }
  } catch (_b2) {
  } finally {
    setIsScrolled === null || setIsScrolled === void 0 ? void 0 : setIsScrolled(true);
  }
};
var scrollIntoLast = function(initialTry, scrollRef, setIsScrolled) {
  if (initialTry === void 0) {
    initialTry = 0;
  }
  var MAX_TRIES = 10;
  var currentTry = initialTry;
  if (currentTry > MAX_TRIES) {
    setIsScrolled === null || setIsScrolled === void 0 ? void 0 : setIsScrolled(true);
    return;
  }
  try {
    var scrollDOM = (scrollRef === null || scrollRef === void 0 ? void 0 : scrollRef.current) || document.querySelector(".sendbird-conversation__messages-padding");
    if (scrollDOM)
      scrollDOM.scrollTop = scrollDOM.scrollHeight;
    setIsScrolled === null || setIsScrolled === void 0 ? void 0 : setIsScrolled(true);
  } catch (error) {
    setTimeout(function() {
      scrollIntoLast(currentTry + 1, scrollRef, setIsScrolled);
    }, 500 * currentTry);
  }
};
var isOperator = function(groupChannel) {
  var myRole = groupChannel === null || groupChannel === void 0 ? void 0 : groupChannel.myRole;
  return myRole === "operator";
};
var isDisabledBecauseFrozen = function(groupChannel) {
  var isFrozen = groupChannel === null || groupChannel === void 0 ? void 0 : groupChannel.isFrozen;
  return isFrozen && !isOperator(groupChannel);
};
var isDisabledBecauseMuted = function(groupChannel) {
  var myMutedState = groupChannel === null || groupChannel === void 0 ? void 0 : groupChannel.myMutedState;
  return myMutedState === "muted";
};
var getAllEmojisMapFromEmojiContainer = function(emojiContainer) {
  var _a2 = emojiContainer.emojiCategories, emojiCategories = _a2 === void 0 ? [] : _a2;
  var allEmojisMap = /* @__PURE__ */ new Map();
  for (var categoryIndex = 0; categoryIndex < emojiCategories.length; categoryIndex += 1) {
    var emojis = emojiCategories[categoryIndex].emojis;
    for (var emojiIndex = 0; emojiIndex < emojis.length; emojiIndex += 1) {
      var _b2 = emojis[emojiIndex], key = _b2.key, url = _b2.url;
      allEmojisMap.set(key, url);
    }
  }
  return allEmojisMap;
};
var getNicknamesMapFromMembers = function(members) {
  if (members === void 0) {
    members = [];
  }
  var nicknamesMap = /* @__PURE__ */ new Map();
  for (var memberIndex = 0; memberIndex < members.length; memberIndex += 1) {
    var _a2 = members[memberIndex], userId = _a2.userId, nickname = _a2.nickname;
    nicknamesMap.set(userId, nickname);
  }
  return nicknamesMap;
};
var getUniqueListBy = function(arr, key) {
  var entries = arr.map(function(item) {
    return [item[key], item];
  });
  return Array.from(new Map(entries).values());
};
var getUniqueListByMessageId = function(arr) {
  return getUniqueListBy(arr, "messageId");
};
var sortByCreatedAt = function(messages) {
  return messages.sort(function(a5, b6) {
    return a5.createdAt - b6.createdAt;
  });
};
var mergeAndSortMessages = function(oldMessages, newMessages) {
  var lastOldMessage = oldMessages[oldMessages.length - 1];
  var firstNewMessage = newMessages[0];
  if ((lastOldMessage === null || lastOldMessage === void 0 ? void 0 : lastOldMessage.createdAt) < (firstNewMessage === null || firstNewMessage === void 0 ? void 0 : firstNewMessage.createdAt)) {
    return __spreadArray(__spreadArray([], oldMessages, true), newMessages, true);
  }
  var mergedMessages = __spreadArray(__spreadArray([], oldMessages, true), newMessages, true);
  var unique = getUniqueListByMessageId(mergedMessages);
  return sortByCreatedAt(unique);
};
var passUnsuccessfullMessages = function(allMessages, newMessage) {
  if ("sendingStatus" in newMessage && (newMessage.sendingStatus === W.SUCCEEDED || newMessage.sendingStatus === W.PENDING)) {
    var lastIndexOfSucceededMessage = allMessages.map(function(message) {
      if ("sendingStatus" in message && message.sendingStatus)
        return message.sendingStatus;
      return message.isAdminMessage() ? W.SUCCEEDED : null;
    }).lastIndexOf(W.SUCCEEDED);
    if (lastIndexOfSucceededMessage + 1 < allMessages.length) {
      var messages = __spreadArray([], allMessages, true);
      messages.splice(lastIndexOfSucceededMessage + 1, 0, newMessage);
      return messages;
    }
  }
  return __spreadArray(__spreadArray([], allMessages, true), [newMessage], false);
};
var isAboutSame = function(a5, b6, px) {
  return Math.abs(a5 - b6) <= px;
};

// node_modules/@sendbird/uikit-react/chunks/bundle-C6F1gIgq.js
function isDate(value) {
  requiredArgs(1, arguments);
  return value instanceof Date || _typeof(value) === "object" && Object.prototype.toString.call(value) === "[object Date]";
}
function isValid(dirtyDate) {
  requiredArgs(1, arguments);
  if (!isDate(dirtyDate) && typeof dirtyDate !== "number") {
    return false;
  }
  var date = toDate(dirtyDate);
  return !isNaN(Number(date));
}
function toInteger(dirtyNumber) {
  if (dirtyNumber === null || dirtyNumber === true || dirtyNumber === false) {
    return NaN;
  }
  var number = Number(dirtyNumber);
  if (isNaN(number)) {
    return number;
  }
  return number < 0 ? Math.ceil(number) : Math.floor(number);
}
function addMilliseconds(dirtyDate, dirtyAmount) {
  requiredArgs(2, arguments);
  var timestamp = toDate(dirtyDate).getTime();
  var amount = toInteger(dirtyAmount);
  return new Date(timestamp + amount);
}
function subMilliseconds(dirtyDate, dirtyAmount) {
  requiredArgs(2, arguments);
  var amount = toInteger(dirtyAmount);
  return addMilliseconds(dirtyDate, -amount);
}
var MILLISECONDS_IN_DAY = 864e5;
function getUTCDayOfYear(dirtyDate) {
  requiredArgs(1, arguments);
  var date = toDate(dirtyDate);
  var timestamp = date.getTime();
  date.setUTCMonth(0, 1);
  date.setUTCHours(0, 0, 0, 0);
  var startOfYearTimestamp = date.getTime();
  var difference = timestamp - startOfYearTimestamp;
  return Math.floor(difference / MILLISECONDS_IN_DAY) + 1;
}
function startOfUTCISOWeek(dirtyDate) {
  requiredArgs(1, arguments);
  var weekStartsOn = 1;
  var date = toDate(dirtyDate);
  var day = date.getUTCDay();
  var diff = (day < weekStartsOn ? 7 : 0) + day - weekStartsOn;
  date.setUTCDate(date.getUTCDate() - diff);
  date.setUTCHours(0, 0, 0, 0);
  return date;
}
function getUTCISOWeekYear(dirtyDate) {
  requiredArgs(1, arguments);
  var date = toDate(dirtyDate);
  var year = date.getUTCFullYear();
  var fourthOfJanuaryOfNextYear = /* @__PURE__ */ new Date(0);
  fourthOfJanuaryOfNextYear.setUTCFullYear(year + 1, 0, 4);
  fourthOfJanuaryOfNextYear.setUTCHours(0, 0, 0, 0);
  var startOfNextYear = startOfUTCISOWeek(fourthOfJanuaryOfNextYear);
  var fourthOfJanuaryOfThisYear = /* @__PURE__ */ new Date(0);
  fourthOfJanuaryOfThisYear.setUTCFullYear(year, 0, 4);
  fourthOfJanuaryOfThisYear.setUTCHours(0, 0, 0, 0);
  var startOfThisYear = startOfUTCISOWeek(fourthOfJanuaryOfThisYear);
  if (date.getTime() >= startOfNextYear.getTime()) {
    return year + 1;
  } else if (date.getTime() >= startOfThisYear.getTime()) {
    return year;
  } else {
    return year - 1;
  }
}
function startOfUTCISOWeekYear(dirtyDate) {
  requiredArgs(1, arguments);
  var year = getUTCISOWeekYear(dirtyDate);
  var fourthOfJanuary = /* @__PURE__ */ new Date(0);
  fourthOfJanuary.setUTCFullYear(year, 0, 4);
  fourthOfJanuary.setUTCHours(0, 0, 0, 0);
  var date = startOfUTCISOWeek(fourthOfJanuary);
  return date;
}
var MILLISECONDS_IN_WEEK$1 = 6048e5;
function getUTCISOWeek(dirtyDate) {
  requiredArgs(1, arguments);
  var date = toDate(dirtyDate);
  var diff = startOfUTCISOWeek(date).getTime() - startOfUTCISOWeekYear(date).getTime();
  return Math.round(diff / MILLISECONDS_IN_WEEK$1) + 1;
}
var defaultOptions = {};
function getDefaultOptions() {
  return defaultOptions;
}
function startOfUTCWeek(dirtyDate, options) {
  var _ref, _ref2, _ref3, _options$weekStartsOn, _options$locale, _options$locale$optio, _defaultOptions$local, _defaultOptions$local2;
  requiredArgs(1, arguments);
  var defaultOptions2 = getDefaultOptions();
  var weekStartsOn = toInteger((_ref = (_ref2 = (_ref3 = (_options$weekStartsOn = options === null || options === void 0 ? void 0 : options.weekStartsOn) !== null && _options$weekStartsOn !== void 0 ? _options$weekStartsOn : options === null || options === void 0 ? void 0 : (_options$locale = options.locale) === null || _options$locale === void 0 ? void 0 : (_options$locale$optio = _options$locale.options) === null || _options$locale$optio === void 0 ? void 0 : _options$locale$optio.weekStartsOn) !== null && _ref3 !== void 0 ? _ref3 : defaultOptions2.weekStartsOn) !== null && _ref2 !== void 0 ? _ref2 : (_defaultOptions$local = defaultOptions2.locale) === null || _defaultOptions$local === void 0 ? void 0 : (_defaultOptions$local2 = _defaultOptions$local.options) === null || _defaultOptions$local2 === void 0 ? void 0 : _defaultOptions$local2.weekStartsOn) !== null && _ref !== void 0 ? _ref : 0);
  if (!(weekStartsOn >= 0 && weekStartsOn <= 6)) {
    throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");
  }
  var date = toDate(dirtyDate);
  var day = date.getUTCDay();
  var diff = (day < weekStartsOn ? 7 : 0) + day - weekStartsOn;
  date.setUTCDate(date.getUTCDate() - diff);
  date.setUTCHours(0, 0, 0, 0);
  return date;
}
function getUTCWeekYear(dirtyDate, options) {
  var _ref, _ref2, _ref3, _options$firstWeekCon, _options$locale, _options$locale$optio, _defaultOptions$local, _defaultOptions$local2;
  requiredArgs(1, arguments);
  var date = toDate(dirtyDate);
  var year = date.getUTCFullYear();
  var defaultOptions2 = getDefaultOptions();
  var firstWeekContainsDate = toInteger((_ref = (_ref2 = (_ref3 = (_options$firstWeekCon = options === null || options === void 0 ? void 0 : options.firstWeekContainsDate) !== null && _options$firstWeekCon !== void 0 ? _options$firstWeekCon : options === null || options === void 0 ? void 0 : (_options$locale = options.locale) === null || _options$locale === void 0 ? void 0 : (_options$locale$optio = _options$locale.options) === null || _options$locale$optio === void 0 ? void 0 : _options$locale$optio.firstWeekContainsDate) !== null && _ref3 !== void 0 ? _ref3 : defaultOptions2.firstWeekContainsDate) !== null && _ref2 !== void 0 ? _ref2 : (_defaultOptions$local = defaultOptions2.locale) === null || _defaultOptions$local === void 0 ? void 0 : (_defaultOptions$local2 = _defaultOptions$local.options) === null || _defaultOptions$local2 === void 0 ? void 0 : _defaultOptions$local2.firstWeekContainsDate) !== null && _ref !== void 0 ? _ref : 1);
  if (!(firstWeekContainsDate >= 1 && firstWeekContainsDate <= 7)) {
    throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");
  }
  var firstWeekOfNextYear = /* @__PURE__ */ new Date(0);
  firstWeekOfNextYear.setUTCFullYear(year + 1, 0, firstWeekContainsDate);
  firstWeekOfNextYear.setUTCHours(0, 0, 0, 0);
  var startOfNextYear = startOfUTCWeek(firstWeekOfNextYear, options);
  var firstWeekOfThisYear = /* @__PURE__ */ new Date(0);
  firstWeekOfThisYear.setUTCFullYear(year, 0, firstWeekContainsDate);
  firstWeekOfThisYear.setUTCHours(0, 0, 0, 0);
  var startOfThisYear = startOfUTCWeek(firstWeekOfThisYear, options);
  if (date.getTime() >= startOfNextYear.getTime()) {
    return year + 1;
  } else if (date.getTime() >= startOfThisYear.getTime()) {
    return year;
  } else {
    return year - 1;
  }
}
function startOfUTCWeekYear(dirtyDate, options) {
  var _ref, _ref2, _ref3, _options$firstWeekCon, _options$locale, _options$locale$optio, _defaultOptions$local, _defaultOptions$local2;
  requiredArgs(1, arguments);
  var defaultOptions2 = getDefaultOptions();
  var firstWeekContainsDate = toInteger((_ref = (_ref2 = (_ref3 = (_options$firstWeekCon = options === null || options === void 0 ? void 0 : options.firstWeekContainsDate) !== null && _options$firstWeekCon !== void 0 ? _options$firstWeekCon : options === null || options === void 0 ? void 0 : (_options$locale = options.locale) === null || _options$locale === void 0 ? void 0 : (_options$locale$optio = _options$locale.options) === null || _options$locale$optio === void 0 ? void 0 : _options$locale$optio.firstWeekContainsDate) !== null && _ref3 !== void 0 ? _ref3 : defaultOptions2.firstWeekContainsDate) !== null && _ref2 !== void 0 ? _ref2 : (_defaultOptions$local = defaultOptions2.locale) === null || _defaultOptions$local === void 0 ? void 0 : (_defaultOptions$local2 = _defaultOptions$local.options) === null || _defaultOptions$local2 === void 0 ? void 0 : _defaultOptions$local2.firstWeekContainsDate) !== null && _ref !== void 0 ? _ref : 1);
  var year = getUTCWeekYear(dirtyDate, options);
  var firstWeek = /* @__PURE__ */ new Date(0);
  firstWeek.setUTCFullYear(year, 0, firstWeekContainsDate);
  firstWeek.setUTCHours(0, 0, 0, 0);
  var date = startOfUTCWeek(firstWeek, options);
  return date;
}
var MILLISECONDS_IN_WEEK = 6048e5;
function getUTCWeek(dirtyDate, options) {
  requiredArgs(1, arguments);
  var date = toDate(dirtyDate);
  var diff = startOfUTCWeek(date, options).getTime() - startOfUTCWeekYear(date, options).getTime();
  return Math.round(diff / MILLISECONDS_IN_WEEK) + 1;
}
function addLeadingZeros(number, targetLength) {
  var sign = number < 0 ? "-" : "";
  var output = Math.abs(number).toString();
  while (output.length < targetLength) {
    output = "0" + output;
  }
  return sign + output;
}
var formatters$1 = {
  // Year
  y: function y4(date, token) {
    var signedYear = date.getUTCFullYear();
    var year = signedYear > 0 ? signedYear : 1 - signedYear;
    return addLeadingZeros(token === "yy" ? year % 100 : year, token.length);
  },
  // Month
  M: function M3(date, token) {
    var month = date.getUTCMonth();
    return token === "M" ? String(month + 1) : addLeadingZeros(month + 1, 2);
  },
  // Day of the month
  d: function d3(date, token) {
    return addLeadingZeros(date.getUTCDate(), token.length);
  },
  // AM or PM
  a: function a3(date, token) {
    var dayPeriodEnumValue = date.getUTCHours() / 12 >= 1 ? "pm" : "am";
    switch (token) {
      case "a":
      case "aa":
        return dayPeriodEnumValue.toUpperCase();
      case "aaa":
        return dayPeriodEnumValue;
      case "aaaaa":
        return dayPeriodEnumValue[0];
      case "aaaa":
      default:
        return dayPeriodEnumValue === "am" ? "a.m." : "p.m.";
    }
  },
  // Hour [1-12]
  h: function h2(date, token) {
    return addLeadingZeros(date.getUTCHours() % 12 || 12, token.length);
  },
  // Hour [0-23]
  H: function H3(date, token) {
    return addLeadingZeros(date.getUTCHours(), token.length);
  },
  // Minute
  m: function m3(date, token) {
    return addLeadingZeros(date.getUTCMinutes(), token.length);
  },
  // Second
  s: function s4(date, token) {
    return addLeadingZeros(date.getUTCSeconds(), token.length);
  },
  // Fraction of second
  S: function S4(date, token) {
    var numberOfDigits = token.length;
    var milliseconds = date.getUTCMilliseconds();
    var fractionalSeconds = Math.floor(milliseconds * Math.pow(10, numberOfDigits - 3));
    return addLeadingZeros(fractionalSeconds, token.length);
  }
};
var lightFormatters = formatters$1;
var dayPeriodEnum = {
  am: "am",
  pm: "pm",
  midnight: "midnight",
  noon: "noon",
  morning: "morning",
  afternoon: "afternoon",
  evening: "evening",
  night: "night"
};
var formatters = {
  // Era
  G: function G2(date, token, localize2) {
    var era = date.getUTCFullYear() > 0 ? 1 : 0;
    switch (token) {
      case "G":
      case "GG":
      case "GGG":
        return localize2.era(era, {
          width: "abbreviated"
        });
      case "GGGGG":
        return localize2.era(era, {
          width: "narrow"
        });
      case "GGGG":
      default:
        return localize2.era(era, {
          width: "wide"
        });
    }
  },
  // Year
  y: function y5(date, token, localize2) {
    if (token === "yo") {
      var signedYear = date.getUTCFullYear();
      var year = signedYear > 0 ? signedYear : 1 - signedYear;
      return localize2.ordinalNumber(year, {
        unit: "year"
      });
    }
    return lightFormatters.y(date, token);
  },
  // Local week-numbering year
  Y: function Y2(date, token, localize2, options) {
    var signedWeekYear = getUTCWeekYear(date, options);
    var weekYear = signedWeekYear > 0 ? signedWeekYear : 1 - signedWeekYear;
    if (token === "YY") {
      var twoDigitYear = weekYear % 100;
      return addLeadingZeros(twoDigitYear, 2);
    }
    if (token === "Yo") {
      return localize2.ordinalNumber(weekYear, {
        unit: "year"
      });
    }
    return addLeadingZeros(weekYear, token.length);
  },
  // ISO week-numbering year
  R: function R3(date, token) {
    var isoWeekYear = getUTCISOWeekYear(date);
    return addLeadingZeros(isoWeekYear, token.length);
  },
  // Extended year. This is a single number designating the year of this calendar system.
  // The main difference between `y` and `u` localizers are B.C. years:
  // | Year | `y` | `u` |
  // |------|-----|-----|
  // | AC 1 |   1 |   1 |
  // | BC 1 |   1 |   0 |
  // | BC 2 |   2 |  -1 |
  // Also `yy` always returns the last two digits of a year,
  // while `uu` pads single digit years to 2 characters and returns other years unchanged.
  u: function u3(date, token) {
    var year = date.getUTCFullYear();
    return addLeadingZeros(year, token.length);
  },
  // Quarter
  Q: function Q2(date, token, localize2) {
    var quarter = Math.ceil((date.getUTCMonth() + 1) / 3);
    switch (token) {
      case "Q":
        return String(quarter);
      case "QQ":
        return addLeadingZeros(quarter, 2);
      case "Qo":
        return localize2.ordinalNumber(quarter, {
          unit: "quarter"
        });
      case "QQQ":
        return localize2.quarter(quarter, {
          width: "abbreviated",
          context: "formatting"
        });
      case "QQQQQ":
        return localize2.quarter(quarter, {
          width: "narrow",
          context: "formatting"
        });
      case "QQQQ":
      default:
        return localize2.quarter(quarter, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  // Stand-alone quarter
  q: function q2(date, token, localize2) {
    var quarter = Math.ceil((date.getUTCMonth() + 1) / 3);
    switch (token) {
      case "q":
        return String(quarter);
      case "qq":
        return addLeadingZeros(quarter, 2);
      case "qo":
        return localize2.ordinalNumber(quarter, {
          unit: "quarter"
        });
      case "qqq":
        return localize2.quarter(quarter, {
          width: "abbreviated",
          context: "standalone"
        });
      case "qqqqq":
        return localize2.quarter(quarter, {
          width: "narrow",
          context: "standalone"
        });
      case "qqqq":
      default:
        return localize2.quarter(quarter, {
          width: "wide",
          context: "standalone"
        });
    }
  },
  // Month
  M: function M4(date, token, localize2) {
    var month = date.getUTCMonth();
    switch (token) {
      case "M":
      case "MM":
        return lightFormatters.M(date, token);
      case "Mo":
        return localize2.ordinalNumber(month + 1, {
          unit: "month"
        });
      case "MMM":
        return localize2.month(month, {
          width: "abbreviated",
          context: "formatting"
        });
      case "MMMMM":
        return localize2.month(month, {
          width: "narrow",
          context: "formatting"
        });
      case "MMMM":
      default:
        return localize2.month(month, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  // Stand-alone month
  L: function L4(date, token, localize2) {
    var month = date.getUTCMonth();
    switch (token) {
      case "L":
        return String(month + 1);
      case "LL":
        return addLeadingZeros(month + 1, 2);
      case "Lo":
        return localize2.ordinalNumber(month + 1, {
          unit: "month"
        });
      case "LLL":
        return localize2.month(month, {
          width: "abbreviated",
          context: "standalone"
        });
      case "LLLLL":
        return localize2.month(month, {
          width: "narrow",
          context: "standalone"
        });
      case "LLLL":
      default:
        return localize2.month(month, {
          width: "wide",
          context: "standalone"
        });
    }
  },
  // Local week of year
  w: function w3(date, token, localize2, options) {
    var week = getUTCWeek(date, options);
    if (token === "wo") {
      return localize2.ordinalNumber(week, {
        unit: "week"
      });
    }
    return addLeadingZeros(week, token.length);
  },
  // ISO week of year
  I: function I4(date, token, localize2) {
    var isoWeek = getUTCISOWeek(date);
    if (token === "Io") {
      return localize2.ordinalNumber(isoWeek, {
        unit: "week"
      });
    }
    return addLeadingZeros(isoWeek, token.length);
  },
  // Day of the month
  d: function d4(date, token, localize2) {
    if (token === "do") {
      return localize2.ordinalNumber(date.getUTCDate(), {
        unit: "date"
      });
    }
    return lightFormatters.d(date, token);
  },
  // Day of year
  D: function D2(date, token, localize2) {
    var dayOfYear = getUTCDayOfYear(date);
    if (token === "Do") {
      return localize2.ordinalNumber(dayOfYear, {
        unit: "dayOfYear"
      });
    }
    return addLeadingZeros(dayOfYear, token.length);
  },
  // Day of week
  E: function E3(date, token, localize2) {
    var dayOfWeek = date.getUTCDay();
    switch (token) {
      case "E":
      case "EE":
      case "EEE":
        return localize2.day(dayOfWeek, {
          width: "abbreviated",
          context: "formatting"
        });
      case "EEEEE":
        return localize2.day(dayOfWeek, {
          width: "narrow",
          context: "formatting"
        });
      case "EEEEEE":
        return localize2.day(dayOfWeek, {
          width: "short",
          context: "formatting"
        });
      case "EEEE":
      default:
        return localize2.day(dayOfWeek, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  // Local day of week
  e: function e2(date, token, localize2, options) {
    var dayOfWeek = date.getUTCDay();
    var localDayOfWeek = (dayOfWeek - options.weekStartsOn + 8) % 7 || 7;
    switch (token) {
      case "e":
        return String(localDayOfWeek);
      case "ee":
        return addLeadingZeros(localDayOfWeek, 2);
      case "eo":
        return localize2.ordinalNumber(localDayOfWeek, {
          unit: "day"
        });
      case "eee":
        return localize2.day(dayOfWeek, {
          width: "abbreviated",
          context: "formatting"
        });
      case "eeeee":
        return localize2.day(dayOfWeek, {
          width: "narrow",
          context: "formatting"
        });
      case "eeeeee":
        return localize2.day(dayOfWeek, {
          width: "short",
          context: "formatting"
        });
      case "eeee":
      default:
        return localize2.day(dayOfWeek, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  // Stand-alone local day of week
  c: function c3(date, token, localize2, options) {
    var dayOfWeek = date.getUTCDay();
    var localDayOfWeek = (dayOfWeek - options.weekStartsOn + 8) % 7 || 7;
    switch (token) {
      case "c":
        return String(localDayOfWeek);
      case "cc":
        return addLeadingZeros(localDayOfWeek, token.length);
      case "co":
        return localize2.ordinalNumber(localDayOfWeek, {
          unit: "day"
        });
      case "ccc":
        return localize2.day(dayOfWeek, {
          width: "abbreviated",
          context: "standalone"
        });
      case "ccccc":
        return localize2.day(dayOfWeek, {
          width: "narrow",
          context: "standalone"
        });
      case "cccccc":
        return localize2.day(dayOfWeek, {
          width: "short",
          context: "standalone"
        });
      case "cccc":
      default:
        return localize2.day(dayOfWeek, {
          width: "wide",
          context: "standalone"
        });
    }
  },
  // ISO day of week
  i: function i3(date, token, localize2) {
    var dayOfWeek = date.getUTCDay();
    var isoDayOfWeek = dayOfWeek === 0 ? 7 : dayOfWeek;
    switch (token) {
      case "i":
        return String(isoDayOfWeek);
      case "ii":
        return addLeadingZeros(isoDayOfWeek, token.length);
      case "io":
        return localize2.ordinalNumber(isoDayOfWeek, {
          unit: "day"
        });
      case "iii":
        return localize2.day(dayOfWeek, {
          width: "abbreviated",
          context: "formatting"
        });
      case "iiiii":
        return localize2.day(dayOfWeek, {
          width: "narrow",
          context: "formatting"
        });
      case "iiiiii":
        return localize2.day(dayOfWeek, {
          width: "short",
          context: "formatting"
        });
      case "iiii":
      default:
        return localize2.day(dayOfWeek, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  // AM or PM
  a: function a4(date, token, localize2) {
    var hours = date.getUTCHours();
    var dayPeriodEnumValue = hours / 12 >= 1 ? "pm" : "am";
    switch (token) {
      case "a":
      case "aa":
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "abbreviated",
          context: "formatting"
        });
      case "aaa":
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "abbreviated",
          context: "formatting"
        }).toLowerCase();
      case "aaaaa":
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "narrow",
          context: "formatting"
        });
      case "aaaa":
      default:
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  // AM, PM, midnight, noon
  b: function b5(date, token, localize2) {
    var hours = date.getUTCHours();
    var dayPeriodEnumValue;
    if (hours === 12) {
      dayPeriodEnumValue = dayPeriodEnum.noon;
    } else if (hours === 0) {
      dayPeriodEnumValue = dayPeriodEnum.midnight;
    } else {
      dayPeriodEnumValue = hours / 12 >= 1 ? "pm" : "am";
    }
    switch (token) {
      case "b":
      case "bb":
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "abbreviated",
          context: "formatting"
        });
      case "bbb":
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "abbreviated",
          context: "formatting"
        }).toLowerCase();
      case "bbbbb":
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "narrow",
          context: "formatting"
        });
      case "bbbb":
      default:
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  // in the morning, in the afternoon, in the evening, at night
  B: function B2(date, token, localize2) {
    var hours = date.getUTCHours();
    var dayPeriodEnumValue;
    if (hours >= 17) {
      dayPeriodEnumValue = dayPeriodEnum.evening;
    } else if (hours >= 12) {
      dayPeriodEnumValue = dayPeriodEnum.afternoon;
    } else if (hours >= 4) {
      dayPeriodEnumValue = dayPeriodEnum.morning;
    } else {
      dayPeriodEnumValue = dayPeriodEnum.night;
    }
    switch (token) {
      case "B":
      case "BB":
      case "BBB":
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "abbreviated",
          context: "formatting"
        });
      case "BBBBB":
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "narrow",
          context: "formatting"
        });
      case "BBBB":
      default:
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  // Hour [1-12]
  h: function h3(date, token, localize2) {
    if (token === "ho") {
      var hours = date.getUTCHours() % 12;
      if (hours === 0) hours = 12;
      return localize2.ordinalNumber(hours, {
        unit: "hour"
      });
    }
    return lightFormatters.h(date, token);
  },
  // Hour [0-23]
  H: function H4(date, token, localize2) {
    if (token === "Ho") {
      return localize2.ordinalNumber(date.getUTCHours(), {
        unit: "hour"
      });
    }
    return lightFormatters.H(date, token);
  },
  // Hour [0-11]
  K: function K3(date, token, localize2) {
    var hours = date.getUTCHours() % 12;
    if (token === "Ko") {
      return localize2.ordinalNumber(hours, {
        unit: "hour"
      });
    }
    return addLeadingZeros(hours, token.length);
  },
  // Hour [1-24]
  k: function k2(date, token, localize2) {
    var hours = date.getUTCHours();
    if (hours === 0) hours = 24;
    if (token === "ko") {
      return localize2.ordinalNumber(hours, {
        unit: "hour"
      });
    }
    return addLeadingZeros(hours, token.length);
  },
  // Minute
  m: function m4(date, token, localize2) {
    if (token === "mo") {
      return localize2.ordinalNumber(date.getUTCMinutes(), {
        unit: "minute"
      });
    }
    return lightFormatters.m(date, token);
  },
  // Second
  s: function s5(date, token, localize2) {
    if (token === "so") {
      return localize2.ordinalNumber(date.getUTCSeconds(), {
        unit: "second"
      });
    }
    return lightFormatters.s(date, token);
  },
  // Fraction of second
  S: function S5(date, token) {
    return lightFormatters.S(date, token);
  },
  // Timezone (ISO-8601. If offset is 0, output is always `'Z'`)
  X: function X2(date, token, _localize, options) {
    var originalDate = options._originalDate || date;
    var timezoneOffset = originalDate.getTimezoneOffset();
    if (timezoneOffset === 0) {
      return "Z";
    }
    switch (token) {
      case "X":
        return formatTimezoneWithOptionalMinutes(timezoneOffset);
      case "XXXX":
      case "XX":
        return formatTimezone(timezoneOffset);
      case "XXXXX":
      case "XXX":
      default:
        return formatTimezone(timezoneOffset, ":");
    }
  },
  // Timezone (ISO-8601. If offset is 0, output is `'+00:00'` or equivalent)
  x: function x(date, token, _localize, options) {
    var originalDate = options._originalDate || date;
    var timezoneOffset = originalDate.getTimezoneOffset();
    switch (token) {
      case "x":
        return formatTimezoneWithOptionalMinutes(timezoneOffset);
      case "xxxx":
      case "xx":
        return formatTimezone(timezoneOffset);
      case "xxxxx":
      case "xxx":
      default:
        return formatTimezone(timezoneOffset, ":");
    }
  },
  // Timezone (GMT)
  O: function O3(date, token, _localize, options) {
    var originalDate = options._originalDate || date;
    var timezoneOffset = originalDate.getTimezoneOffset();
    switch (token) {
      case "O":
      case "OO":
      case "OOO":
        return "GMT" + formatTimezoneShort(timezoneOffset, ":");
      case "OOOO":
      default:
        return "GMT" + formatTimezone(timezoneOffset, ":");
    }
  },
  // Timezone (specific non-location)
  z: function z2(date, token, _localize, options) {
    var originalDate = options._originalDate || date;
    var timezoneOffset = originalDate.getTimezoneOffset();
    switch (token) {
      case "z":
      case "zz":
      case "zzz":
        return "GMT" + formatTimezoneShort(timezoneOffset, ":");
      case "zzzz":
      default:
        return "GMT" + formatTimezone(timezoneOffset, ":");
    }
  },
  // Seconds timestamp
  t: function t6(date, token, _localize, options) {
    var originalDate = options._originalDate || date;
    var timestamp = Math.floor(originalDate.getTime() / 1e3);
    return addLeadingZeros(timestamp, token.length);
  },
  // Milliseconds timestamp
  T: function T3(date, token, _localize, options) {
    var originalDate = options._originalDate || date;
    var timestamp = originalDate.getTime();
    return addLeadingZeros(timestamp, token.length);
  }
};
function formatTimezoneShort(offset, dirtyDelimiter) {
  var sign = offset > 0 ? "-" : "+";
  var absOffset = Math.abs(offset);
  var hours = Math.floor(absOffset / 60);
  var minutes = absOffset % 60;
  if (minutes === 0) {
    return sign + String(hours);
  }
  var delimiter = dirtyDelimiter || "";
  return sign + String(hours) + delimiter + addLeadingZeros(minutes, 2);
}
function formatTimezoneWithOptionalMinutes(offset, dirtyDelimiter) {
  if (offset % 60 === 0) {
    var sign = offset > 0 ? "-" : "+";
    return sign + addLeadingZeros(Math.abs(offset) / 60, 2);
  }
  return formatTimezone(offset, dirtyDelimiter);
}
function formatTimezone(offset, dirtyDelimiter) {
  var delimiter = dirtyDelimiter || "";
  var sign = offset > 0 ? "-" : "+";
  var absOffset = Math.abs(offset);
  var hours = addLeadingZeros(Math.floor(absOffset / 60), 2);
  var minutes = addLeadingZeros(absOffset % 60, 2);
  return sign + hours + delimiter + minutes;
}
var dateLongFormatter = function dateLongFormatter2(pattern, formatLong2) {
  switch (pattern) {
    case "P":
      return formatLong2.date({
        width: "short"
      });
    case "PP":
      return formatLong2.date({
        width: "medium"
      });
    case "PPP":
      return formatLong2.date({
        width: "long"
      });
    case "PPPP":
    default:
      return formatLong2.date({
        width: "full"
      });
  }
};
var timeLongFormatter = function timeLongFormatter2(pattern, formatLong2) {
  switch (pattern) {
    case "p":
      return formatLong2.time({
        width: "short"
      });
    case "pp":
      return formatLong2.time({
        width: "medium"
      });
    case "ppp":
      return formatLong2.time({
        width: "long"
      });
    case "pppp":
    default:
      return formatLong2.time({
        width: "full"
      });
  }
};
var dateTimeLongFormatter = function dateTimeLongFormatter2(pattern, formatLong2) {
  var matchResult = pattern.match(/(P+)(p+)?/) || [];
  var datePattern = matchResult[1];
  var timePattern = matchResult[2];
  if (!timePattern) {
    return dateLongFormatter(pattern, formatLong2);
  }
  var dateTimeFormat;
  switch (datePattern) {
    case "P":
      dateTimeFormat = formatLong2.dateTime({
        width: "short"
      });
      break;
    case "PP":
      dateTimeFormat = formatLong2.dateTime({
        width: "medium"
      });
      break;
    case "PPP":
      dateTimeFormat = formatLong2.dateTime({
        width: "long"
      });
      break;
    case "PPPP":
    default:
      dateTimeFormat = formatLong2.dateTime({
        width: "full"
      });
      break;
  }
  return dateTimeFormat.replace("{{date}}", dateLongFormatter(datePattern, formatLong2)).replace("{{time}}", timeLongFormatter(timePattern, formatLong2));
};
var longFormatters = {
  p: timeLongFormatter,
  P: dateTimeLongFormatter
};
function getTimezoneOffsetInMilliseconds(date) {
  var utcDate = new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate(), date.getHours(), date.getMinutes(), date.getSeconds(), date.getMilliseconds()));
  utcDate.setUTCFullYear(date.getFullYear());
  return date.getTime() - utcDate.getTime();
}
var protectedDayOfYearTokens = ["D", "DD"];
var protectedWeekYearTokens = ["YY", "YYYY"];
function isProtectedDayOfYearToken(token) {
  return protectedDayOfYearTokens.indexOf(token) !== -1;
}
function isProtectedWeekYearToken(token) {
  return protectedWeekYearTokens.indexOf(token) !== -1;
}
function throwProtectedError(token, format2, input) {
  if (token === "YYYY") {
    throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(format2, "`) for formatting years to the input `").concat(input, "`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));
  } else if (token === "YY") {
    throw new RangeError("Use `yy` instead of `YY` (in `".concat(format2, "`) for formatting years to the input `").concat(input, "`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));
  } else if (token === "D") {
    throw new RangeError("Use `d` instead of `D` (in `".concat(format2, "`) for formatting days of the month to the input `").concat(input, "`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));
  } else if (token === "DD") {
    throw new RangeError("Use `dd` instead of `DD` (in `".concat(format2, "`) for formatting days of the month to the input `").concat(input, "`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));
  }
}
var formattingTokensRegExp = /[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g;
var longFormattingTokensRegExp = /P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;
var escapedStringRegExp = /^'([^]*?)'?$/;
var doubleQuoteRegExp = /''/g;
var unescapedLatinCharacterRegExp = /[a-zA-Z]/;
function format(dirtyDate, dirtyFormatStr, options) {
  var _ref, _options$locale, _ref2, _ref3, _ref4, _options$firstWeekCon, _options$locale2, _options$locale2$opti, _defaultOptions$local, _defaultOptions$local2, _ref5, _ref6, _ref7, _options$weekStartsOn, _options$locale3, _options$locale3$opti, _defaultOptions$local3, _defaultOptions$local4;
  requiredArgs(2, arguments);
  var formatStr = String(dirtyFormatStr);
  var defaultOptions2 = getDefaultOptions();
  var locale2 = (_ref = (_options$locale = options === null || options === void 0 ? void 0 : options.locale) !== null && _options$locale !== void 0 ? _options$locale : defaultOptions2.locale) !== null && _ref !== void 0 ? _ref : defaultLocale;
  var firstWeekContainsDate = toInteger((_ref2 = (_ref3 = (_ref4 = (_options$firstWeekCon = options === null || options === void 0 ? void 0 : options.firstWeekContainsDate) !== null && _options$firstWeekCon !== void 0 ? _options$firstWeekCon : options === null || options === void 0 ? void 0 : (_options$locale2 = options.locale) === null || _options$locale2 === void 0 ? void 0 : (_options$locale2$opti = _options$locale2.options) === null || _options$locale2$opti === void 0 ? void 0 : _options$locale2$opti.firstWeekContainsDate) !== null && _ref4 !== void 0 ? _ref4 : defaultOptions2.firstWeekContainsDate) !== null && _ref3 !== void 0 ? _ref3 : (_defaultOptions$local = defaultOptions2.locale) === null || _defaultOptions$local === void 0 ? void 0 : (_defaultOptions$local2 = _defaultOptions$local.options) === null || _defaultOptions$local2 === void 0 ? void 0 : _defaultOptions$local2.firstWeekContainsDate) !== null && _ref2 !== void 0 ? _ref2 : 1);
  if (!(firstWeekContainsDate >= 1 && firstWeekContainsDate <= 7)) {
    throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");
  }
  var weekStartsOn = toInteger((_ref5 = (_ref6 = (_ref7 = (_options$weekStartsOn = options === null || options === void 0 ? void 0 : options.weekStartsOn) !== null && _options$weekStartsOn !== void 0 ? _options$weekStartsOn : options === null || options === void 0 ? void 0 : (_options$locale3 = options.locale) === null || _options$locale3 === void 0 ? void 0 : (_options$locale3$opti = _options$locale3.options) === null || _options$locale3$opti === void 0 ? void 0 : _options$locale3$opti.weekStartsOn) !== null && _ref7 !== void 0 ? _ref7 : defaultOptions2.weekStartsOn) !== null && _ref6 !== void 0 ? _ref6 : (_defaultOptions$local3 = defaultOptions2.locale) === null || _defaultOptions$local3 === void 0 ? void 0 : (_defaultOptions$local4 = _defaultOptions$local3.options) === null || _defaultOptions$local4 === void 0 ? void 0 : _defaultOptions$local4.weekStartsOn) !== null && _ref5 !== void 0 ? _ref5 : 0);
  if (!(weekStartsOn >= 0 && weekStartsOn <= 6)) {
    throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");
  }
  if (!locale2.localize) {
    throw new RangeError("locale must contain localize property");
  }
  if (!locale2.formatLong) {
    throw new RangeError("locale must contain formatLong property");
  }
  var originalDate = toDate(dirtyDate);
  if (!isValid(originalDate)) {
    throw new RangeError("Invalid time value");
  }
  var timezoneOffset = getTimezoneOffsetInMilliseconds(originalDate);
  var utcDate = subMilliseconds(originalDate, timezoneOffset);
  var formatterOptions = {
    firstWeekContainsDate,
    weekStartsOn,
    locale: locale2,
    _originalDate: originalDate
  };
  var result = formatStr.match(longFormattingTokensRegExp).map(function(substring) {
    var firstCharacter = substring[0];
    if (firstCharacter === "p" || firstCharacter === "P") {
      var longFormatter = longFormatters[firstCharacter];
      return longFormatter(substring, locale2.formatLong);
    }
    return substring;
  }).join("").match(formattingTokensRegExp).map(function(substring) {
    if (substring === "''") {
      return "'";
    }
    var firstCharacter = substring[0];
    if (firstCharacter === "'") {
      return cleanEscapedString(substring);
    }
    var formatter = formatters[firstCharacter];
    if (formatter) {
      if (!(options !== null && options !== void 0 && options.useAdditionalWeekYearTokens) && isProtectedWeekYearToken(substring)) {
        throwProtectedError(substring, dirtyFormatStr, String(dirtyDate));
      }
      if (!(options !== null && options !== void 0 && options.useAdditionalDayOfYearTokens) && isProtectedDayOfYearToken(substring)) {
        throwProtectedError(substring, dirtyFormatStr, String(dirtyDate));
      }
      return formatter(utcDate, substring, locale2.localize, formatterOptions);
    }
    if (firstCharacter.match(unescapedLatinCharacterRegExp)) {
      throw new RangeError("Format string contains an unescaped latin alphabet character `" + firstCharacter + "`");
    }
    return substring;
  }).join("");
  return result;
}
function cleanEscapedString(input) {
  var matched = input.match(escapedStringRegExp);
  if (!matched) {
    return input;
  }
  return matched[1].replace(doubleQuoteRegExp, "'");
}

// node_modules/@sendbird/uikit-react/chunks/bundle-q_YvxT21.js
function startOfDay(dirtyDate) {
  requiredArgs(1, arguments);
  var date = toDate(dirtyDate);
  date.setHours(0, 0, 0, 0);
  return date;
}
function isSameDay(dirtyDateLeft, dirtyDateRight) {
  requiredArgs(2, arguments);
  var dateLeftStartOfDay = startOfDay(dirtyDateLeft);
  var dateRightStartOfDay = startOfDay(dirtyDateRight);
  return dateLeftStartOfDay.getTime() === dateRightStartOfDay.getTime();
}

// node_modules/@sendbird/uikit-react/chunks/bundle-BxrZduJE.js
function isToday(dirtyDate) {
  requiredArgs(1, arguments);
  return isSameDay(dirtyDate, Date.now());
}
function isSameYear(dirtyDateLeft, dirtyDateRight) {
  requiredArgs(2, arguments);
  var dateLeft = toDate(dirtyDateLeft);
  var dateRight = toDate(dirtyDateRight);
  return dateLeft.getFullYear() === dateRight.getFullYear();
}
function isThisYear(dirtyDate) {
  requiredArgs(1, arguments);
  return isSameYear(dirtyDate, Date.now());
}
function addDays(dirtyDate, dirtyAmount) {
  requiredArgs(2, arguments);
  var date = toDate(dirtyDate);
  var amount = toInteger(dirtyAmount);
  if (isNaN(amount)) {
    return /* @__PURE__ */ new Date(NaN);
  }
  if (!amount) {
    return date;
  }
  date.setDate(date.getDate() + amount);
  return date;
}
function subDays(dirtyDate, dirtyAmount) {
  requiredArgs(2, arguments);
  var amount = toInteger(dirtyAmount);
  return addDays(dirtyDate, -amount);
}
function isYesterday(dirtyDate) {
  requiredArgs(1, arguments);
  return isSameDay(dirtyDate, subDays(Date.now(), 1));
}

// node_modules/@sendbird/uikit-react/chunks/bundle-j0SR3DhQ.js
var import_react33 = __toESM(require_react(), 1);
var getChannelTitle = function(channel, currentUserId, stringSet2) {
  var _a2;
  if (stringSet2 === void 0) {
    stringSet2 = LabelStringSet;
  }
  if (!(channel === null || channel === void 0 ? void 0 : channel.name) && !(channel === null || channel === void 0 ? void 0 : channel.members)) {
    return stringSet2.NO_TITLE;
  }
  if ((channel === null || channel === void 0 ? void 0 : channel.name) && channel.name !== "Group Channel") {
    return channel.name;
  }
  if (((_a2 = channel === null || channel === void 0 ? void 0 : channel.members) === null || _a2 === void 0 ? void 0 : _a2.length) === 1) {
    return stringSet2.NO_MEMBERS;
  }
  return ((channel === null || channel === void 0 ? void 0 : channel.members) || []).filter(function(_a3) {
    var userId = _a3.userId;
    return userId !== currentUserId;
  }).map(function(_a3) {
    var nickname = _a3.nickname;
    return nickname || stringSet2.NO_NAME;
  }).join(", ");
};
var getLastMessageCreatedAt = function(_a2) {
  var _b2;
  var channel = _a2.channel, locale2 = _a2.locale, _c = _a2.stringSet, stringSet2 = _c === void 0 ? LabelStringSet : _c;
  var createdAt = (_b2 = channel === null || channel === void 0 ? void 0 : channel.lastMessage) === null || _b2 === void 0 ? void 0 : _b2.createdAt;
  var optionalParam = locale2 ? { locale: locale2 } : null;
  if (!createdAt) {
    return "";
  }
  if (isToday(createdAt)) {
    return format(createdAt, "p", optionalParam);
  }
  if (isYesterday(createdAt)) {
    return stringSet2.MESSAGE_STATUS__YESTERDAY || "Yesterday";
  }
  if (isThisYear(createdAt)) {
    return format(createdAt, "MMM d", optionalParam);
  }
  return format(createdAt, "yyyy/M/d", optionalParam);
};
var getTotalMembers = function(channel) {
  return (channel === null || channel === void 0 ? void 0 : channel.memberCount) ? channel.memberCount : 0;
};
var getChannelPreviewFileDisplayString = function(mimeType, stringSet2) {
  var _a2, _b2, _c, _d, _e3, _f;
  if (stringSet2 === void 0) {
    stringSet2 = LabelStringSet;
  }
  if (isGif(mimeType)) {
    return (_a2 = stringSet2 === null || stringSet2 === void 0 ? void 0 : stringSet2.CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_GIF) !== null && _a2 !== void 0 ? _a2 : "";
  }
  if (isImage(mimeType)) {
    return (_b2 = stringSet2 === null || stringSet2 === void 0 ? void 0 : stringSet2.CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_PHOTO) !== null && _b2 !== void 0 ? _b2 : "";
  }
  if (isVideo(mimeType)) {
    return (_c = stringSet2 === null || stringSet2 === void 0 ? void 0 : stringSet2.CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_VIDEO) !== null && _c !== void 0 ? _c : "";
  }
  if (isAudio(mimeType)) {
    return (_d = stringSet2 === null || stringSet2 === void 0 ? void 0 : stringSet2.CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_AUDIO) !== null && _d !== void 0 ? _d : "";
  }
  if (isVoiceMessageMimeType(mimeType)) {
    return (_e3 = stringSet2 === null || stringSet2 === void 0 ? void 0 : stringSet2.CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_VOICE_MESSAGE) !== null && _e3 !== void 0 ? _e3 : "";
  }
  return (_f = stringSet2 === null || stringSet2 === void 0 ? void 0 : stringSet2.CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_GENERAL) !== null && _f !== void 0 ? _f : "";
};
var getPrettyLastMessage = function(message, stringSet2) {
  var _a2, _b2, _c, _d;
  if (message === void 0) {
    message = null;
  }
  if (stringSet2 === void 0) {
    stringSet2 = LabelStringSet;
  }
  if (!message)
    return "";
  if (isTemplateMessage(message)) {
    return stringSet2.CHANNEL_PREVIEW_LAST_MESSAGE_TEMPLATE_MESSAGE;
  }
  if (message.isFileMessage()) {
    return getChannelPreviewFileDisplayString(message.type, stringSet2);
  }
  if (message.isMultipleFilesMessage()) {
    var mimeType = (_b2 = (_a2 = message.fileInfoList) === null || _a2 === void 0 ? void 0 : _a2[0]) === null || _b2 === void 0 ? void 0 : _b2.mimeType;
    if (isImage(mimeType) || isGif(mimeType)) {
      return (_c = stringSet2 === null || stringSet2 === void 0 ? void 0 : stringSet2.CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_PHOTO) !== null && _c !== void 0 ? _c : "";
    }
    return getChannelPreviewFileDisplayString(mimeType, stringSet2);
  }
  return (_d = message.message) !== null && _d !== void 0 ? _d : "";
};
var getLastMessage = function(channel, stringSet2) {
  if (stringSet2 === void 0) {
    stringSet2 = LabelStringSet;
  }
  return (channel === null || channel === void 0 ? void 0 : channel.lastMessage) ? getPrettyLastMessage(channel === null || channel === void 0 ? void 0 : channel.lastMessage, stringSet2) : "";
};
var getChannelUnreadMessageCount = function(channel) {
  return (channel === null || channel === void 0 ? void 0 : channel.unreadMessageCount) ? channel.unreadMessageCount : 0;
};
var _a;
var _b;
var iconType = (_a = {}, _a[OutgoingMessageStates.SENT] = IconTypes.DONE, _a[OutgoingMessageStates.DELIVERED] = IconTypes.DONE_ALL, _a[OutgoingMessageStates.READ] = IconTypes.DONE_ALL, _a[OutgoingMessageStates.FAILED] = IconTypes.ERROR, _a[OutgoingMessageStates.PENDING] = void 0, _a[OutgoingMessageStates.NONE] = void 0, _a);
var iconColor = (_b = {}, _b[OutgoingMessageStates.SENT] = IconColors.SENT, _b[OutgoingMessageStates.DELIVERED] = IconColors.SENT, _b[OutgoingMessageStates.READ] = IconColors.READ, _b[OutgoingMessageStates.FAILED] = IconColors.ERROR, _b[OutgoingMessageStates.PENDING] = void 0, _b[OutgoingMessageStates.NONE] = void 0, _b);
function MessageStatus(_a2) {
  var _b2;
  var className = _a2.className, message = _a2.message, channel = _a2.channel, _c = _a2.isDateSeparatorConsidered, isDateSeparatorConsidered = _c === void 0 ? true : _c;
  var _d = useLocalization(), stringSet2 = _d.stringSet, dateLocale = _d.dateLocale;
  var status = getOutgoingMessageState(channel, message);
  var hideMessageStatusIcon = ((_b2 = channel === null || channel === void 0 ? void 0 : channel.isGroupChannel) === null || _b2 === void 0 ? void 0 : _b2.call(channel)) && ((channel.isSuper || channel.isPublic || channel.isBroadcast) && !(status === OutgoingMessageStates.PENDING || status === OutgoingMessageStates.FAILED));
  return import_react33.default.createElement(
    "div",
    { className: __spreadArray(__spreadArray([], Array.isArray(className) ? className : [className], true), [
      "sendbird-message-status"
    ], false).join(" ") },
    status === OutgoingMessageStates.PENDING ? import_react33.default.createElement(
      Loader,
      { className: "sendbird-message-status__icon", testID: "sendbird-message-status-icon", width: "16px", height: "16px" },
      import_react33.default.createElement(Icon, { type: IconTypes.SPINNER, fillColor: IconColors.PRIMARY, width: "16px", height: "16px" })
    ) : import_react33.default.createElement(Icon, { className: classnames("sendbird-message-status__icon", hideMessageStatusIcon && "hide-icon", status !== OutgoingMessageStates.FAILED && "sendbird-message-status--sent"), testID: "sendbird-message-status-icon", type: iconType[status] || IconTypes.ERROR, fillColor: iconColor[status], width: "16px", height: "16px" }),
    isSentStatus(status) && import_react33.default.createElement(Label, { className: "sendbird-message-status__text", testID: "sendbird-message-status-text", type: LabelTypography.CAPTION_3, color: LabelColors.ONBACKGROUND_2 }, isDateSeparatorConsidered ? format((message === null || message === void 0 ? void 0 : message.createdAt) || 0, "p", { locale: dateLocale }) : getLastMessageCreatedAt({ channel, locale: dateLocale, stringSet: stringSet2 }))
  );
}

// node_modules/@sendbird/uikit-react/chunks/bundle-DxDVBm6N.js
var import_react34 = __toESM(require_react(), 1);
var DEFAULT_DURATION = 300;
function preventDefault(e3) {
  if (!isTouchEvent(e3)) {
    return;
  }
  if (e3.touches.length < 2 && e3.preventDefault) {
    e3.preventDefault();
  }
}
function isTouchEvent(e3) {
  return e3 && "touches" in e3;
}
function useLongPress(_a2, _b2) {
  var onLongPress = _a2.onLongPress, onClick = _a2.onClick;
  var _c = _b2 === void 0 ? {} : _b2, _d = _c.delay, delay = _d === void 0 ? DEFAULT_DURATION : _d, _e3 = _c.shouldPreventDefault, shouldPreventDefault = _e3 === void 0 ? true : _e3, _f = _c.shouldStopPropagation, shouldStopPropagation = _f === void 0 ? false : _f;
  var isMobile = useMediaQueryContext().isMobile;
  var _g2 = (0, import_react34.useState)(false), longPressTriggered = _g2[0], setLongPressTriggered = _g2[1];
  var _h = (0, import_react34.useState)(false), dragTriggered = _h[0], setDragTriggered = _h[1];
  var timeout = (0, import_react34.useRef)();
  var target = (0, import_react34.useRef)();
  var start = (0, import_react34.useCallback)(function(e3) {
    e3.persist();
    var clonedEvent = __assign({}, e3);
    setDragTriggered(false);
    if (shouldStopPropagation) {
      e3.stopPropagation();
    }
    if (shouldPreventDefault && e3.target) {
      e3.target.addEventListener("touchend", preventDefault, {
        passive: false
      });
      target.current = e3.target;
    }
    timeout.current = setTimeout(function() {
      onLongPress(clonedEvent);
      setLongPressTriggered(true);
    }, delay);
  }, [onLongPress, delay, shouldPreventDefault, shouldStopPropagation, isMobile]);
  var clear = (0, import_react34.useCallback)(function(e3, shouldTriggerClick, onDrag) {
    if (shouldTriggerClick === void 0) {
      shouldTriggerClick = true;
    }
    if (onDrag === void 0) {
      onDrag = false;
    }
    if (onDrag) {
      setDragTriggered(true);
    } else {
      setDragTriggered(false);
    }
    if (timeout === null || timeout === void 0 ? void 0 : timeout.current) {
      clearTimeout(timeout.current);
    }
    if (shouldTriggerClick && !longPressTriggered && !dragTriggered) {
      onClick === null || onClick === void 0 ? void 0 : onClick(e3);
    }
    setLongPressTriggered(false);
    if (shouldPreventDefault && target.current) {
      target.current.removeEventListener("touchend", preventDefault);
    }
  }, [shouldPreventDefault, onClick, longPressTriggered, dragTriggered]);
  return {
    onMouseDown: function(e3) {
      return start(e3);
    },
    onMouseUp: function(e3) {
      return clear(e3);
    },
    onMouseLeave: function(e3) {
      return clear(e3, false);
    },
    onTouchStart: function(e3) {
      return start(e3);
    },
    // setDragTriggered as true on touchmove, so that next onTouchEnd is ignored
    // if we dont do it, onClick?.(e) will be triggred, see inside clear()
    onTouchMove: function(e3) {
      return clear(e3, false, true);
    },
    onTouchEnd: function(e3) {
      return clear(e3);
    }
  };
}

// node_modules/@sendbird/uikit-react/GroupChannel/components/TypingIndicator.js
var import_react35 = __toESM(require_react(), 1);
var TypingIndicatorText = function(_a2) {
  var members = _a2.members;
  function getText() {
    var stringSet2 = (0, import_react35.useContext)(LocalizationContext).stringSet;
    if (!members || members.length === 0) {
      return "";
    }
    if (members && members.length === 1) {
      return "".concat(members[0].nickname, " ").concat(stringSet2.TYPING_INDICATOR__IS_TYPING);
    }
    if (members && members.length === 2) {
      return "".concat(members[0].nickname, " ").concat(stringSet2.TYPING_INDICATOR__AND, " ").concat(members[1].nickname, " ").concat(stringSet2.TYPING_INDICATOR__ARE_TYPING);
    }
    return stringSet2.TYPING_INDICATOR__MULTIPLE_TYPING;
  }
  return import_react35.default.createElement(import_react35.default.Fragment, null, getText());
};
var TypingIndicator = function(_a2) {
  var _b2, _c, _d;
  var channelUrl = _a2.channelUrl;
  var globalStore = useSendbirdStateContext();
  var sb = (_c = (_b2 = globalStore === null || globalStore === void 0 ? void 0 : globalStore.stores) === null || _b2 === void 0 ? void 0 : _b2.sdkStore) === null || _c === void 0 ? void 0 : _c.sdk;
  var logger = (_d = globalStore === null || globalStore === void 0 ? void 0 : globalStore.config) === null || _d === void 0 ? void 0 : _d.logger;
  var _e3 = (0, import_react35.useState)(uuidv4()), handlerId = _e3[0], setHandlerId = _e3[1];
  var _f = (0, import_react35.useState)([]), typingMembers = _f[0], setTypingMembers = _f[1];
  (0, import_react35.useEffect)(function() {
    var _a3;
    if ((_a3 = sb === null || sb === void 0 ? void 0 : sb.groupChannel) === null || _a3 === void 0 ? void 0 : _a3.addGroupChannelHandler) {
      sb.groupChannel.removeGroupChannelHandler(handlerId);
      var newHandlerId = uuidv4();
      var handler = new Ye3({
        onTypingStatusUpdated: function(groupChannel) {
          logger.info("Channel > Typing Indicator: onTypingStatusUpdated", groupChannel);
          if (groupChannel.url === channelUrl) {
            var members = groupChannel.getTypingUsers();
            setTypingMembers(members);
          }
        }
      });
      sb.groupChannel.addGroupChannelHandler(newHandlerId, handler);
      setHandlerId(newHandlerId);
    }
    return function() {
      var _a4;
      setTypingMembers([]);
      if ((_a4 = sb === null || sb === void 0 ? void 0 : sb.groupChannel) === null || _a4 === void 0 ? void 0 : _a4.removeGroupChannelHandler) {
        sb.groupChannel.removeGroupChannelHandler(handlerId);
      }
    };
  }, [channelUrl]);
  return import_react35.default.createElement(
    Label,
    { className: "sendbird-conversation__footer__typing-indicator__text", type: LabelTypography.CAPTION_2, color: LabelColors.ONBACKGROUND_2 },
    import_react35.default.createElement(TypingIndicatorText, { members: typingMembers })
  );
};

// node_modules/@sendbird/uikit-react/chunks/bundle-CRKkgI5q.js
var DEFAULT_URL_PREFIX = "https://static.sendbird.com/sample/cover/cover_";
var getOpenChannelAvatar = function(channel) {
  if (channel === null || channel === void 0 ? void 0 : channel.coverUrl) {
    return channel.coverUrl;
  }
  return void 0;
};
var getChannelAvatarSource = function(channel, currentUserId) {
  if (channel === null || channel === void 0 ? void 0 : channel.coverUrl) {
    if (!new RegExp("^".concat(DEFAULT_URL_PREFIX)).test(channel.coverUrl)) {
      return channel.coverUrl;
    }
  }
  return ((channel === null || channel === void 0 ? void 0 : channel.members) || []).filter(function(member) {
    return member.userId !== currentUserId;
  }).map(function(_a2) {
    var profileUrl = _a2.profileUrl;
    return profileUrl;
  });
};
var generateDefaultAvatar = function(channel) {
  if (channel === null || channel === void 0 ? void 0 : channel.coverUrl) {
    if (new RegExp("^".concat(DEFAULT_URL_PREFIX)).test(channel.coverUrl)) {
      return true;
    }
    return false;
  }
  return true;
};

// node_modules/@sendbird/uikit-react/ui/ChannelAvatar.js
var import_react36 = __toESM(require_react(), 1);
function ChannelAvatar(_a2) {
  var channel = _a2.channel, userId = _a2.userId, theme = _a2.theme, _b2 = _a2.width, width = _b2 === void 0 ? 56 : _b2, _c = _a2.height, height = _c === void 0 ? 56 : _c;
  var isBroadcast = channel === null || channel === void 0 ? void 0 : channel.isBroadcast;
  var memoizedAvatar = (0, import_react36.useMemo)(function() {
    return isBroadcast ? generateDefaultAvatar(channel) ? import_react36.default.createElement(
      "div",
      { className: "sendbird-chat-header--default-avatar", style: {
        width,
        height,
        display: "flex",
        justifyContent: "center",
        alignItems: "center"
      } },
      import_react36.default.createElement(Icon, { type: IconTypes.BROADCAST, fillColor: IconColors.CONTENT, width: width * 0.575, height: height * 0.575 })
    ) : import_react36.default.createElement(Avatar$1, { className: "sendbird-chat-header--avatar--broadcast-channel", src: getChannelAvatarSource(channel, userId), width, height, alt: channel === null || channel === void 0 ? void 0 : channel.name }) : import_react36.default.createElement(Avatar$1, { className: "sendbird-chat-header--avatar--group-channel", src: getChannelAvatarSource(channel, userId), width: "".concat(width, "px"), height: "".concat(height, "px"), alt: channel === null || channel === void 0 ? void 0 : channel.name });
  }, [getChannelAvatarSource(channel, userId), theme]);
  return import_react36.default.createElement(import_react36.default.Fragment, null, memoizedAvatar);
}

// node_modules/@sendbird/uikit-react/chunks/bundle-i2i0G-ml.js
var MENTION_USER_LABEL_CLASSNAME = "sendbird-mention-user-label";

// node_modules/@sendbird/uikit-react/chunks/bundle-DZhG3Z6D.js
var PublishingModuleType;
(function(PublishingModuleType2) {
  PublishingModuleType2["CHANNEL"] = "CHANNEL";
  PublishingModuleType2["THREAD"] = "THREAD";
})(PublishingModuleType || (PublishingModuleType = {}));
var isTargetIncludedInModules = function(target, modules) {
  if (!modules || modules.length === 0)
    return true;
  else
    return modules.includes(target);
};
function shouldPubSubPublishToChannel(modules) {
  return isTargetIncludedInModules(PublishingModuleType.CHANNEL, modules);
}
function shouldPubSubPublishToThread(modules) {
  return isTargetIncludedInModules(PublishingModuleType.THREAD, modules);
}
var PUBSUB_TOPICS;
(function(PUBSUB_TOPICS2) {
  PUBSUB_TOPICS2["USER_UPDATED"] = "USER_UPDATED";
  PUBSUB_TOPICS2["SEND_MESSAGE_START"] = "SEND_MESSAGE_START";
  PUBSUB_TOPICS2["SEND_MESSAGE_FAILED"] = "SEND_MESSAGE_FAILED";
  PUBSUB_TOPICS2["SEND_USER_MESSAGE"] = "SEND_USER_MESSAGE";
  PUBSUB_TOPICS2["SEND_FILE_MESSAGE"] = "SEND_FILE_MESSAGE";
  PUBSUB_TOPICS2["ON_FILE_INFO_UPLOADED"] = "ON_FILE_INFO_UPLOADED";
  PUBSUB_TOPICS2["UPDATE_USER_MESSAGE"] = "UPDATE_USER_MESSAGE";
  PUBSUB_TOPICS2["DELETE_MESSAGE"] = "DELETE_MESSAGE";
  PUBSUB_TOPICS2["LEAVE_CHANNEL"] = "LEAVE_CHANNEL";
  PUBSUB_TOPICS2["CREATE_CHANNEL"] = "CREATE_CHANNEL";
  PUBSUB_TOPICS2["UPDATE_OPEN_CHANNEL"] = "UPDATE_OPEN_CHANNEL";
})(PUBSUB_TOPICS || (PUBSUB_TOPICS = {}));
var pubSubTopics = PUBSUB_TOPICS;

// node_modules/@sendbird/uikit-react/sendbirdSelectors.js
var getSdk = function(state) {
  var _a2 = state.stores, stores = _a2 === void 0 ? {} : _a2;
  var _b2 = stores.sdkStore, sdkStore = _b2 === void 0 ? {} : _b2;
  var sdk = sdkStore.sdk;
  return sdk;
};
var getPubSub = function(state) {
  var _a2 = state.config, config = _a2 === void 0 ? {} : _a2;
  var pubSub = config.pubSub;
  return pubSub;
};
var getConnect = function(state) {
  return function(userId, accessToken) {
    return new Promise(function(resolve, reject) {
      var sdk = getSdk(state);
      if (!sdk) {
        reject(new Error("Sdk not found"));
      }
      if (!((sdk === null || sdk === void 0 ? void 0 : sdk.connect) && typeof sdk.connect === "function")) {
        reject(new Error('Not found the function "connect'));
      }
      if (!accessToken) {
        sdk.connect(userId).then(function(res) {
          return resolve(res);
        }).catch(function(err) {
          return reject(err);
        });
      } else {
        sdk.connect(userId, accessToken).then(function(res) {
          return resolve(res);
        }).catch(function(err) {
          return reject(err);
        });
      }
    });
  };
};
var getDisconnect = function(state) {
  return function() {
    return new Promise(function(resolve, reject) {
      var sdk = getSdk(state);
      if (!sdk) {
        reject(new Error("Sdk not found"));
      }
      if (!(sdk.disconnect && typeof sdk.disconnect === "function")) {
        reject(new Error('Not found the function "disconnect'));
      }
      sdk.disconnect().then(function(res) {
        return resolve(res);
      }).catch(function(err) {
        return reject(err);
      });
    });
  };
};
var getUpdateUserInfo = function(state) {
  return function(nickname, profileUrl) {
    return new Promise(function(resolve, reject) {
      var sdk = getSdk(state);
      if (!sdk) {
        reject(new Error("Sdk not found"));
      }
      if (!(sdk.updateCurrentUserInfo && typeof sdk.updateCurrentUserInfo === "function")) {
        reject(new Error('Not found the function "updateCurrentUserInfo"'));
      }
      var userParams = { nickname };
      if (profileUrl) {
        userParams.profileUrl = profileUrl;
      }
      sdk.updateCurrentUserInfo(userParams).then(function(res) {
        return resolve(res);
      }).catch(function(err) {
        return reject(err);
      });
    });
  };
};
var getCreateGroupChannel = function(state) {
  return function(params) {
    return new Promise(function(resolve, reject) {
      var sdk = getSdk(state);
      var pubSub = getPubSub(state);
      if (!sdk) {
        reject(new Error("Sdk not found"));
      }
      if (!sdk.groupChannel) {
        reject(new Error("Not found GroupChannelModule"));
      }
      if (!(sdk.groupChannel.createChannel && typeof sdk.groupChannel.createChannel === "function")) {
        reject(new Error('Not found the function "createChannel"'));
      }
      sdk.groupChannel.createChannel(params).then(function(channel) {
        resolve(channel);
        pubSub.publish(pubSubTopics.CREATE_CHANNEL, { channel });
      }).catch(reject);
    });
  };
};
var getCreateOpenChannel = function(state) {
  return function(params) {
    return new Promise(function(resolve, reject) {
      var sdk = getSdk(state);
      if (!sdk) {
        reject(new Error("Sdk not found"));
      }
      if (!sdk.openChannel) {
        reject(new Error("Not found OpenChannelModule"));
      }
      if (!(sdk.openChannel.createChannel && typeof sdk.openChannel.createChannel === "function")) {
        reject(new Error('Not found the function "createChannel"'));
      }
      sdk.openChannel.createChannel(params).then(function(channel) {
        resolve(channel);
      }).catch(reject);
    });
  };
};
var getGetGroupChannel = function(state) {
  return function(channelUrl) {
    return new Promise(function(resolve, reject) {
      var sdk = getSdk(state);
      if (!sdk) {
        reject(new Error("Sdk not found"));
      }
      if (!sdk.groupChannel) {
        reject(new Error("Not found GroupChannelModule"));
      }
      if (!(sdk.groupChannel.getChannel && typeof sdk.groupChannel.getChannel === "function")) {
        reject(new Error('Not found the function "getChannel"'));
      }
      sdk.groupChannel.getChannel(channelUrl).then(function(channel) {
        resolve(channel);
      }).catch(reject);
    });
  };
};
var getGetOpenChannel = function(state) {
  return function(channelUrl) {
    return new Promise(function(resolve, reject) {
      var sdk = getSdk(state);
      if (!sdk) {
        reject(new Error("Sdk not found"));
      }
      if (!sdk.openChannel) {
        reject(new Error("Not found OpenChannelModule"));
      }
      if (!(sdk.openChannel.getChannel && typeof sdk.openChannel.getChannel === "function")) {
        reject(new Error('Not found the function "getChannel"'));
      }
      sdk.openChannel.getChannel(channelUrl).then(function(channel) {
        resolve(channel);
      }).catch(reject);
    });
  };
};
var getLeaveGroupChannel = function(state) {
  return function(channelUrl) {
    return new Promise(function(resolve, reject) {
      var _a2;
      (_a2 = getGetGroupChannel(state)) === null || _a2 === void 0 ? void 0 : _a2(channelUrl).then(function(channel) {
        channel.leave().then(function() {
          resolve();
        }).catch(reject);
      }).catch(reject);
    });
  };
};
var getEnterOpenChannel = function(state) {
  return function(channelUrl) {
    return new Promise(function(resolve, reject) {
      var _a2;
      (_a2 = getGetOpenChannel(state)) === null || _a2 === void 0 ? void 0 : _a2(channelUrl).then(function(channel) {
        channel.enter().then(function() {
          resolve(channel);
        }).catch(reject);
      }).catch(reject);
    });
  };
};
var getExitOpenChannel = function(state) {
  return function(channelUrl) {
    return new Promise(function(resolve, reject) {
      var _a2;
      (_a2 = getGetOpenChannel(state)) === null || _a2 === void 0 ? void 0 : _a2(channelUrl).then(function(channel) {
        channel.exit().then(function() {
          resolve(channel);
        }).catch(reject);
      }).catch(reject);
    });
  };
};
var getFreezeChannel = function() {
  return function(channel) {
    return new Promise(function(resolve, reject) {
      if (!(channel.freeze && typeof (channel === null || channel === void 0 ? void 0 : channel.freeze) === "function")) {
        reject(new Error('Not found the function "freeze"'));
      }
      channel.freeze().then(function() {
        resolve();
      }).catch(reject);
    });
  };
};
var getUnfreezeChannel = function() {
  return function(channel) {
    return new Promise(function(resolve, reject) {
      if (!(channel.unfreeze && typeof (channel === null || channel === void 0 ? void 0 : channel.unfreeze) === "function")) {
        reject(new Error('Not found the function "unfreeze"'));
      }
      channel.unfreeze().then(function() {
        resolve();
      }).catch(reject);
    });
  };
};
var UikitMessageHandler = (
  /** @class */
  function() {
    function UikitMessageHandler2() {
      this._onPending = noop;
      this._onFailed = noop;
      this._onSucceeded = noop;
    }
    UikitMessageHandler2.prototype.triggerPending = function(message) {
      this._onPending(message);
    };
    UikitMessageHandler2.prototype.triggerFailed = function(error, message) {
      this._onFailed(error, (message === null || message === void 0 ? void 0 : message.isResendable) ? message : null);
    };
    UikitMessageHandler2.prototype.triggerSucceeded = function(message) {
      this._onSucceeded(message);
    };
    UikitMessageHandler2.prototype.onPending = function(handler) {
      if (typeof handler === "function") {
        this._onPending = handler;
      }
      return this;
    };
    UikitMessageHandler2.prototype.onFailed = function(handler) {
      if (typeof handler === "function") {
        this._onFailed = handler;
      }
      return this;
    };
    UikitMessageHandler2.prototype.onSucceeded = function(handler) {
      if (typeof handler === "function") {
        this._onSucceeded = handler;
      }
      return this;
    };
    return UikitMessageHandler2;
  }()
);
var getSendUserMessage = function(state, publishingModules) {
  if (publishingModules === void 0) {
    publishingModules = [];
  }
  return function(channel, params) {
    var handler = new UikitMessageHandler();
    var pubSub = getPubSub(state);
    channel.sendUserMessage(params).onFailed(function(error, message) {
      pubSub.publish(pubSubTopics.SEND_MESSAGE_FAILED, { error, message, channel, publishingModules });
      handler.triggerFailed(error, message);
    }).onPending(function(message) {
      pubSub.publish(pubSubTopics.SEND_MESSAGE_START, { message, channel, publishingModules });
      handler.triggerPending(message);
    }).onSucceeded(function(message) {
      pubSub.publish(pubSubTopics.SEND_USER_MESSAGE, { message, channel, publishingModules });
      handler.triggerSucceeded(message);
    });
    return handler;
  };
};
var getSendFileMessage = function(state, publishingModules) {
  if (publishingModules === void 0) {
    publishingModules = [];
  }
  return function(channel, params) {
    var handler = new UikitMessageHandler();
    var pubSub = getPubSub(state);
    channel.sendFileMessage(params).onFailed(function(error, message) {
      pubSub.publish(pubSubTopics.SEND_MESSAGE_FAILED, { error, message, channel, publishingModules });
      handler.triggerFailed(error, message);
    }).onPending(function(message) {
      pubSub.publish(pubSubTopics.SEND_MESSAGE_START, { message, channel, publishingModules });
      handler.triggerPending(message);
    }).onSucceeded(function(message) {
      pubSub.publish(pubSubTopics.SEND_FILE_MESSAGE, { message, channel, publishingModules });
      handler.triggerSucceeded(message);
    });
    return handler;
  };
};
var getUpdateUserMessage = function(state, publishingModules) {
  if (publishingModules === void 0) {
    publishingModules = [];
  }
  return function(channel, messageId, params) {
    return new Promise(function(resolve, reject) {
      var pubSub = getPubSub(state);
      channel.updateUserMessage(messageId, params).then(function(message) {
        pubSub.publish(pubSubTopics.UPDATE_USER_MESSAGE, { message, channel, fromSelector: true, publishingModules });
        resolve(message);
      }).catch(reject);
    });
  };
};
var getDeleteMessage = function(state) {
  return function(channel, message) {
    return new Promise(function(resolve, reject) {
      var pubSub = getPubSub(state);
      var messageId = message.messageId;
      channel.deleteMessage(message).then(function() {
        pubSub.publish(pubSubTopics.DELETE_MESSAGE, { messageId, channel });
        resolve(message);
      }).catch(reject);
    });
  };
};
var getResendUserMessage = function(state, publishingModules) {
  if (publishingModules === void 0) {
    publishingModules = [];
  }
  return function(channel, failedMessage) {
    return new Promise(function(resolve, reject) {
      var pubSub = getPubSub(state);
      channel.resendUserMessage(failedMessage).then(function(message) {
        pubSub.publish(pubSubTopics.SEND_USER_MESSAGE, { message, channel, publishingModules });
        resolve(message);
      }).catch(reject);
    });
  };
};
var getResendFileMessage = function(state, publishingModules) {
  if (publishingModules === void 0) {
    publishingModules = [];
  }
  return function(channel, failedMessage, blob) {
    return new Promise(function(resolve, reject) {
      var pubSub = getPubSub(state);
      channel.resendFileMessage(failedMessage, blob).then(function(message) {
        pubSub.publish(pubSubTopics.SEND_FILE_MESSAGE, { message, channel, publishingModules });
        resolve(message);
      }).catch(reject);
    });
  };
};
var sendbirdSelectors = {
  getSdk,
  getPubSub,
  getConnect,
  getDisconnect,
  getUpdateUserInfo,
  getCreateGroupChannel,
  getCreateOpenChannel,
  getGetGroupChannel,
  getGetOpenChannel,
  getLeaveGroupChannel,
  getEnterOpenChannel,
  getExitOpenChannel,
  getFreezeChannel,
  getUnfreezeChannel,
  getSendUserMessage,
  getSendFileMessage,
  getUpdateUserMessage,
  getDeleteMessage,
  getResendUserMessage,
  getResendFileMessage
};

// node_modules/@sendbird/uikit-react/ui/MutedAvatarOverlay.js
var import_react37 = __toESM(require_react(), 1);
function MutedAvatarOverlay(props) {
  var _a2 = props.height, height = _a2 === void 0 ? 24 : _a2, _b2 = props.width, width = _b2 === void 0 ? 24 : _b2;
  return import_react37.default.createElement(
    "div",
    { className: "sendbird-muted-avatar", style: {
      height: "".concat(height, "px"),
      width: "".concat(width, "px")
    } },
    import_react37.default.createElement(
      "div",
      { className: "sendbird-muted-avatar__icon" },
      import_react37.default.createElement("div", { className: "sendbird-muted-avatar__bg", style: {
        height: "".concat(height, "px"),
        width: "".concat(width, "px")
      } }),
      import_react37.default.createElement(Icon, { type: IconTypes.MUTE, fillColor: IconColors.WHITE, width: "".concat(height - 8, "px"), height: "".concat(width - 8, "px") })
    )
  );
}

// node_modules/@sendbird/uikit-react/ui/Checkbox.js
var import_react38 = __toESM(require_react(), 1);
function Checkbox(_a2) {
  var id2 = _a2.id, _b2 = _a2.checked, checked = _b2 === void 0 ? false : _b2, disabled = _a2.disabled, onChange = _a2.onChange;
  var _c = (0, import_react38.useState)(checked), isChecked = _c[0], setIsCheck = _c[1];
  return import_react38.default.createElement(
    "label",
    { className: [
      "sendbird-checkbox",
      disabled ? "disabled" : ""
    ].join(" "), htmlFor: id2 },
    import_react38.default.createElement("input", { disabled, id: id2, type: "checkbox", checked: isChecked, onClick: function() {
      if (!disabled)
        setIsCheck(!isChecked);
    }, onChange }),
    import_react38.default.createElement("span", { className: [
      "sendbird-checkbox--checkmark",
      disabled ? "disabled" : ""
    ].join(" ") })
  );
}

// node_modules/@sendbird/uikit-react/ui/UserProfile.js
var import_react39 = __toESM(require_react(), 1);
function UserProfile(_a2) {
  var _b2, _c;
  var user = _a2.user, currentUserId = _a2.currentUserId, _d = _a2.disableMessaging, disableMessaging = _d === void 0 ? false : _d, onSuccess2 = _a2.onSuccess;
  var store = useSendbirdStateContext();
  var createChannel = getCreateGroupChannel(store);
  var logger = (_b2 = store === null || store === void 0 ? void 0 : store.config) === null || _b2 === void 0 ? void 0 : _b2.logger;
  var stringSet2 = (0, import_react39.useContext)(LocalizationContext).stringSet;
  var currentUserId_ = currentUserId || ((_c = store === null || store === void 0 ? void 0 : store.config) === null || _c === void 0 ? void 0 : _c.userId);
  var onUserProfileMessage = (0, import_react39.useContext)(UserProfileContext).onUserProfileMessage;
  return import_react39.default.createElement(
    "div",
    { className: "sendbird__user-profile" },
    import_react39.default.createElement(
      "section",
      { className: "sendbird__user-profile-avatar" },
      import_react39.default.createElement(Avatar$1, { height: "80px", width: "80px", src: user === null || user === void 0 ? void 0 : user.profileUrl })
    ),
    import_react39.default.createElement(
      "section",
      { className: "sendbird__user-profile-name" },
      import_react39.default.createElement(Label, { type: LabelTypography.H_2, color: LabelColors.ONBACKGROUND_1 }, (user === null || user === void 0 ? void 0 : user.nickname) || stringSet2.NO_NAME)
    ),
    (user === null || user === void 0 ? void 0 : user.userId) !== currentUserId_ && !disableMessaging && import_react39.default.createElement(
      "section",
      { className: "sendbird__user-profile-message" },
      import_react39.default.createElement(Button, { type: ButtonTypes.SECONDARY, onClick: function() {
        var params = {
          isDistinct: false,
          invitedUserIds: (user === null || user === void 0 ? void 0 : user.userId) ? [user === null || user === void 0 ? void 0 : user.userId] : [],
          operatorUserIds: [currentUserId_]
        };
        onSuccess2 === null || onSuccess2 === void 0 ? void 0 : onSuccess2();
        createChannel(params).then(function(groupChannel) {
          logger.info("UserProfile, channel create", groupChannel);
          if (typeof onUserProfileMessage === "function") {
            onUserProfileMessage === null || onUserProfileMessage === void 0 ? void 0 : onUserProfileMessage(groupChannel);
          }
        });
      } }, stringSet2.USER_PROFILE__MESSAGE)
    ),
    import_react39.default.createElement("div", { className: "sendbird__user-profile-separator" }),
    import_react39.default.createElement(
      "section",
      { className: "sendbird__user-profile-userId" },
      import_react39.default.createElement(Label, { className: "sendbird__user-profile-userId--label", type: LabelTypography.CAPTION_2, color: LabelColors.ONBACKGROUND_2 }, stringSet2.USER_PROFILE__USER_ID),
      import_react39.default.createElement(Label, { className: "sendbird__user-profile-userId--value", type: LabelTypography.BODY_1, color: LabelColors.ONBACKGROUND_1 }, user === null || user === void 0 ? void 0 : user.userId)
    )
  );
}

// node_modules/@sendbird/uikit-react/ui/UserListItem.js
var import_react40 = __toESM(require_react(), 1);
var import_react_dom3 = __toESM(require_react_dom(), 1);
function UserListItem(_a2) {
  var user = _a2.user, channel = _a2.channel, _b2 = _a2.className, className = _b2 === void 0 ? void 0 : _b2, checked = _a2.checked, checkBox = _a2.checkBox, isOperator2 = _a2.isOperator, disabled = _a2.disabled, disableMessaging = _a2.disableMessaging, action = _a2.action, onChange = _a2.onChange, _c = _a2.avatarSize, avatarSize = _c === void 0 ? "40px" : _c, onClick = _a2.onClick, onUserAvatarClick = _a2.onUserAvatarClick, renderListItemMenu = _a2.renderListItemMenu, _d = _a2.size, size = _d === void 0 ? "normal" : _d;
  var operator = isOperator2 !== null && isOperator2 !== void 0 ? isOperator2 : (user === null || user === void 0 ? void 0 : user.role) === "operator";
  var uniqueKey = user.userId;
  var actionRef = (0, import_react40.useRef)(null);
  var parentRef = (0, import_react40.useRef)(null);
  var avatarRef = (0, import_react40.useRef)(null);
  var _e3 = (0, import_react40.useContext)(UserProfileContext), disableUserProfile = _e3.disableUserProfile, renderUserProfile = _e3.renderUserProfile;
  var stringSet2 = useLocalization().stringSet;
  var config = useSendbirdStateContext().config;
  var currentUser = config.userId;
  var itemClassName = size === "small" ? "sendbird-user-list-item--small" : "sendbird-user-list-item";
  var avatarClassName = size === "small" ? "sendbird-user-list-item--small__avatar" : "sendbird-user-list-item__avatar";
  var titleClassName = size === "small" ? "sendbird-user-list-item--small__title" : "sendbird-user-list-item__title";
  var subtitleClassName = size === "small" ? "sendbird-user-list-item--small__subtitle" : "sendbird-user-list-item__subtitle";
  var checkboxClassName = size === "small" ? "sendbird-user-list-item--small__checkbox" : "sendbird-user-list-item__checkbox";
  var actionClassName = size === "small" ? "sendbird-user-list-item--small__action" : "sendbird-user-list-item__action";
  var operatorClassName = size === "small" ? "sendbird-user-list-item--small__operator" : "sendbird-user-list-item__operator";
  return import_react40.default.createElement(
    "div",
    { className: classnames.apply(void 0, __spreadArray([itemClassName], Array.isArray(className) ? className : [className], false)), ref: parentRef },
    import_react40.default.createElement(ContextMenu, { menuTrigger: function(toggleDropdown) {
      return import_react40.default.createElement(
        import_react40.default.Fragment,
        null,
        import_react40.default.createElement(Avatar$1, { className: avatarClassName, ref: avatarRef, src: (user === null || user === void 0 ? void 0 : user.profileUrl) || (user === null || user === void 0 ? void 0 : user.plainProfileUrl) || "", width: avatarSize, height: avatarSize, onClick: function() {
          var _a3;
          if (!disableUserProfile) {
            toggleDropdown();
            (_a3 = onUserAvatarClick !== null && onUserAvatarClick !== void 0 ? onUserAvatarClick : onClick) === null || _a3 === void 0 ? void 0 : _a3();
          }
        } }),
        (user === null || user === void 0 ? void 0 : user.isMuted) && import_react40.default.createElement(MutedAvatarOverlay, { height: pxToNumber(avatarSize), width: pxToNumber(avatarSize) })
      );
    }, menuItems: function(closeDropdown) {
      return renderUserProfile ? renderUserProfile({
        user,
        currentUserId: currentUser !== null && currentUser !== void 0 ? currentUser : "",
        close: closeDropdown,
        avatarRef
      }) : import_react40.default.createElement(
        MenuItems,
        { openLeft: true, parentRef: avatarRef, parentContainRef: avatarRef, closeDropdown, style: { paddingTop: "0px", paddingBottom: "0px" } },
        import_react40.default.createElement(UserProfile, { disableMessaging, user, currentUserId: currentUser, onSuccess: closeDropdown })
      );
    } }),
    import_react40.default.createElement(
      Label,
      { className: titleClassName, type: LabelTypography.SUBTITLE_1, color: LabelColors.ONBACKGROUND_1 },
      user.nickname || stringSet2.NO_NAME,
      currentUser === user.userId && stringSet2.CHANNEL_SETTING__MEMBERS__YOU
    ),
    !user.nickname && import_react40.default.createElement(Label, { className: subtitleClassName, type: LabelTypography.CAPTION_3, color: LabelColors.ONBACKGROUND_2 }, user.userId),
    checkBox && import_react40.default.createElement(
      "label",
      { className: checkboxClassName, htmlFor: uniqueKey },
      import_react40.default.createElement(Checkbox, { id: uniqueKey, checked, disabled, onChange: function(event) {
        return onChange === null || onChange === void 0 ? void 0 : onChange(event);
      } })
    ),
    operator && import_react40.default.createElement(Label, { className: classnames(operatorClassName, checkBox && "checkbox"), type: LabelTypography.SUBTITLE_2, color: LabelColors.ONBACKGROUND_2 }, stringSet2.LABEL__OPERATOR),
    !checkBox && !renderListItemMenu && action && import_react40.default.createElement("div", { className: actionClassName, ref: actionRef }, action({ actionRef, parentRef })),
    !checkBox && renderListItemMenu && import_react40.default.createElement("div", { className: actionClassName, ref: actionRef }, renderListItemMenu({ channel, user }))
  );
}

export {
  __extends,
  __assign,
  __rest,
  __awaiter,
  __generator,
  __spreadArray,
  xe2 as xe,
  Be,
  je,
  Jt,
  mi,
  Os,
  E,
  Zt2 as Zt,
  rn2 as rn,
  Ye3 as Ye,
  $e2 as $e,
  useAsyncEffect,
  useAsyncLayoutEffect,
  useGroupChannelHandler,
  usePreservedCallback,
  useGroupChannelList,
  mt2 as mt,
  In3 as In,
  useGroupChannelMessages,
  useIIFE,
  UIKitConfigProvider,
  useUIKitConfig,
  SendbirdSdkContext,
  withSendbirdContext,
  useSendbirdStateContext,
  UserProfileContext,
  UserProfileProvider,
  uuidv4,
  noop,
  deleteNullish,
  openURL,
  classnames,
  getStringSet,
  LocalizationContext,
  LocalizationProvider,
  useLocalization,
  getBorderRadiusForMultipleImageRenderer,
  ImageRenderer,
  pxToNumber,
  Icon,
  IconTypes,
  IconColors,
  AvatarDefault,
  Avatar$1,
  changeColorToClassName2 as changeColorToClassName,
  Label,
  LabelTypography,
  LabelColors,
  LabelStringSet,
  MediaQueryProvider,
  useMediaQueryContext,
  Colors3 as Colors,
  changeColorToClassName3 as changeColorToClassName2,
  TextButton,
  IconButton,
  Header$1,
  isMobileIOS,
  S3 as S,
  K2 as K,
  TypingIndicatorType,
  getMimeTypesUIKitAccepts,
  UIKitMessageTypes,
  isTextuallyNull,
  isImage,
  isVideo,
  isGif,
  isSupportedFileView,
  getUIKitFileTypes,
  getUIKitFileType,
  isSentMessage,
  isReadMessage,
  isFailedMessage,
  isPendingMessage,
  isAdminMessage,
  isUserMessage,
  isFileMessage,
  isMultipleFilesMessage,
  isThreadMessage,
  isTemplateMessage,
  UI_CONTAINER_TYPES,
  getMessageContentMiddleClassNameByContainerType,
  isOGMessage,
  isTextMessage,
  isThumbnailMessage,
  isImageMessage,
  isVideoMessage,
  isGifMessage,
  isAudioMessage,
  isImageFileInfo,
  isVoiceMessage,
  isEditedMessage,
  getUIKitMessageTypes,
  getUIKitMessageType,
  getClassName,
  startsWithAtAndEndsWithBraces,
  removeAtAndBraces,
  isReactedBy,
  getEmojiTooltipString,
  getSuggestedReplies,
  truncateString,
  copyToClipboard,
  getEmojiListAll,
  getEmojiMapAll,
  getEmojiUrl,
  getSenderName,
  filterMessageListParams,
  filterChannelListParams,
  getChannelsWithUpsertedChannel,
  arrayEqual,
  isSendableMessage2 as isSendableMessage,
  isChannelJustCreated,
  ButtonTypes,
  ButtonSizes,
  Button,
  cssVars,
  xe3 as xe2,
  Ae2 as Ae,
  ke3 as ke,
  VOICE_PLAYER_STATUS,
  AudioUnitDefaultValue,
  generateGroupKey,
  ALL,
  VoicePlayerProvider,
  useVoicePlayerContext,
  APP_LAYOUT_ROOT,
  MuteMenuItem,
  OperatorMenuItem,
  MessageMenuProvider,
  useMessageMenuContext,
  MenuItem$1,
  BottomSheetMenuItem,
  MENU_OBSERVING_CLASS_NAME,
  getObservingId,
  MenuItems,
  EmojiListItems,
  MenuItem,
  MENU_ROOT_ID,
  MenuRoot,
  EMOJI_MENU_ROOT_ID,
  EmojiReactionListRoot,
  ContextMenu,
  mapColorKeys,
  MODAL_ROOT,
  ModalRoot,
  ModalFooter,
  Modal,
  VoiceRecorderProvider,
  useVoiceRecorderContext,
  GlobalModalProvider,
  useGlobalModalContext,
  EmojiManager,
  InputLabel,
  Input,
  Loader,
  PlaceHolderTypes,
  PlaceHolder,
  scrollToRenderedMessage,
  scrollIntoLast,
  isOperator,
  isDisabledBecauseFrozen,
  isDisabledBecauseMuted,
  getAllEmojisMapFromEmojiContainer,
  getNicknamesMapFromMembers,
  mergeAndSortMessages,
  passUnsuccessfullMessages,
  isAboutSame,
  format,
  isSameDay,
  isToday,
  isThisYear,
  isYesterday,
  getChannelTitle,
  getLastMessageCreatedAt,
  getTotalMembers,
  getLastMessage,
  getChannelUnreadMessageCount,
  MessageStatus,
  useLongPress,
  TypingIndicatorText,
  TypingIndicator,
  getOpenChannelAvatar,
  ChannelAvatar,
  MENTION_USER_LABEL_CLASSNAME,
  PublishingModuleType,
  shouldPubSubPublishToChannel,
  shouldPubSubPublishToThread,
  PUBSUB_TOPICS,
  pubSubTopics,
  getSdk,
  getCreateGroupChannel,
  sendbirdSelectors,
  MutedAvatarOverlay,
  UserProfile,
  UserListItem
};
/*! Bundled license information:

css-vars-ponyfill/dist/css-vars-ponyfill.esm.js:
  (*!
   * css-vars-ponyfill
   * v2.4.9
   * https://jhildenbiddle.github.io/css-vars-ponyfill/
   * (c) 2018-2024 John Hildenbiddle <http://hildenbiddle.com>
   * MIT license
   *)
  (*!
   * get-css-data
   * v2.1.0
   * https://github.com/jhildenbiddle/get-css-data
   * (c) 2018-2022 John Hildenbiddle <http://hildenbiddle.com>
   * MIT license
   *)
  (**
   * Gets CSS data from <style> and <link> nodes (including @imports), then
   * returns data in order processed by DOM. Allows specifying nodes to
   * include/exclude and filtering CSS data using RegEx.
   *
   * @preserve
   * @param {object}   [options] The options object
   * @param {object}   [options.rootElement=document] Root element to traverse for
   *                   <link> and <style> nodes.
   * @param {string}   [options.include] CSS selector matching <link> and <style>
   *                   nodes to include
   * @param {string}   [options.exclude] CSS selector matching <link> and <style>
   *                   nodes to exclude
   * @param {object}   [options.filter] Regular expression used to filter node CSS
   *                   data. Each block of CSS data is tested against the filter,
   *                   and only matching data is included.
   * @param {boolean}  [options.skipDisabled=true] Determines if disabled
   *                   stylesheets will be skipped while collecting CSS data.
   * @param {boolean}  [options.useCSSOM=false] Determines if CSS data will be
   *                   collected from a stylesheet's runtime values instead of its
   *                   text content. This is required to get accurate CSS data
   *                   when a stylesheet has been modified using the deleteRule()
   *                   or insertRule() methods because these modifications will
   *                   not be reflected in the stylesheet's text content.
   * @param {function} [options.onBeforeSend] Callback before XHR is sent. Passes
   *                   1) the XHR object, 2) source node reference, and 3) the
   *                   source URL as arguments.
   * @param {function} [options.onSuccess] Callback on each CSS node read. Passes
   *                   1) CSS text, 2) source node reference, and 3) the source
   *                   URL as arguments.
   * @param {function} [options.onError] Callback on each error. Passes 1) the XHR
   *                   object for inspection, 2) soure node reference, and 3) the
   *                   source URL that failed (either a <link> href or an @import)
   *                   as arguments
   * @param {function} [options.onComplete] Callback after all nodes have been
   *                   processed. Passes 1) concatenated CSS text, 2) an array of
   *                   CSS text in DOM order, and 3) an array of nodes in DOM
   *                   order as arguments.
   *
   * @example
   *
   *   getCssData({
   *     rootElement : document,
   *     include     : 'style,link[rel="stylesheet"]',
   *     exclude     : '[href="skip.css"]',
   *     filter      : /red/,
   *     skipDisabled: true,
   *     useCSSOM    : false,
   *     onBeforeSend(xhr, node, url) {
   *       // ...
   *     }
   *     onSuccess(cssText, node, url) {
   *       // ...
   *     }
   *     onError(xhr, node, url) {
   *       // ...
   *     },
   *     onComplete(cssText, cssArray, nodeArray) {
   *       // ...
   *     }
   *   });
   *)
  (**
   * Fetches, parses, and transforms CSS custom properties from specified
   * <style> and <link> elements into static values, then appends a new <style>
   * element with static values to the DOM to provide CSS custom property
   * compatibility for legacy browsers. Also provides a single interface for
   * live updates of runtime values in both modern and legacy browsers.
   *
   * @preserve
   * @param {object}   [options] Options object
   * @param {object}   [options.rootElement=document] Root element to traverse for
   *                   <link> and <style> nodes
   * @param {boolean}  [options.shadowDOM=false] Determines if shadow DOM <link>
   *                   and <style> nodes will be processed.
   * @param {string}   [options.include="style,link[rel=stylesheet]"] CSS selector
   *                   matching <link re="stylesheet"> and <style> nodes to
   *                   process
   * @param {string}   [options.exclude] CSS selector matching <link
   *                   rel="stylehseet"> and <style> nodes to exclude from those
   *                   matches by options.include
   * @param {object}   [options.variables] A map of custom property name/value
   *                   pairs. Property names can omit or include the leading
   *                   double-hyphen (—), and values specified will override
   *                   previous values
   * @param {boolean}  [options.onlyLegacy=true] Determines if the ponyfill will
   *                   only generate legacy-compatible CSS in browsers that lack
   *                   native support (i.e., legacy browsers)
   * @param {boolean}  [options.preserveStatic=true] Determines if CSS
   *                   declarations that do not reference a custom property will
   *                   be preserved in the transformed CSS
   * @param {boolean}  [options.preserveVars=false] Determines if CSS custom
   *                   property declarations will be preserved in the transformed
   *                   CSS
   * @param {boolean}  [options.silent=false] Determines if warning and error
   *                   messages will be displayed on the console
   * @param {boolean}  [options.updateDOM=true] Determines if the ponyfill will
   *                   update the DOM after processing CSS custom properties
   * @param {boolean}  [options.updateURLs=true] Determines if relative url()
   *                   paths will be converted to absolute urls in external CSS
   * @param {boolean}  [options.watch=false] Determines if a MutationObserver will
   *                   be created that will execute the ponyfill when a <link> or
   *                   <style> DOM mutation is observed
   * @param {function} [options.onBeforeSend] Callback before XHR is sent. Passes
   *                   1) the XHR object, 2) source node reference, and 3) the
   *                   source URL as arguments
   * @param {function} [options.onError] Callback after a CSS parsing error has
   *                   occurred or an XHR request has failed. Passes 1) an error
   *                   message, and 2) source node reference, 3) xhr, and 4 url as
   *                   arguments.
   * @param {function} [options.onWarning] Callback after each CSS parsing warning
   *                   has occurred. Passes 1) a warning message as an argument.
   * @param {function} [options.onSuccess] Callback after CSS data has been
   *                   collected from each node and before CSS custom properties
   *                   have been transformed. Allows modifying the CSS data before
   *                   it is transformed by returning any string value (or false
   *                   to skip). Passes 1) CSS text, 2) source node reference, and
   *                   3) the source URL as arguments.
   * @param {function} [options.onComplete] Callback after all CSS has been
   *                   processed, legacy-compatible CSS has been generated, and
   *                   (optionally) the DOM has been updated. Passes 1) a CSS
   *                   string with CSS variable values resolved, 2) an array of
   *                   output <style> node references that have been appended to
   *                   the DOM, 3) an object containing all custom properies names
   *                   and values, and 4) the ponyfill execution time in
   *                   milliseconds.
   * @param {function} [options.onFinally] Callback in modern and legacy browsers
   *                   after the ponyfill has finished all tasks. Passes 1) a
   *                   boolean indicating if the last ponyfill call resulted in a
   *                   style change, 2) a boolean indicating if the current
   *                   browser provides native support for CSS custom properties,
   *                   and 3) the ponyfill execution time in milliseconds.
   * @example
   *
   *   cssVars({
   *     rootElement   : document,
   *     shadowDOM     : false,
   *     include       : 'style,link[rel="stylesheet"]',
   *     exclude       : '',
   *     variables     : {},
   *     onlyLegacy    : true,
   *     preserveStatic: true,
   *     preserveVars  : false,
   *     silent        : false,
   *     updateDOM     : true,
   *     updateURLs    : true,
   *     watch         : false,
   *     onBeforeSend(xhr, node, url) {},
   *     onError(message, node, xhr, url) {},
   *     onWarning(message) {},
   *     onSuccess(cssText, node, url) {},
   *     onComplete(cssText, styleNode, cssVariables, benchmark) {},
   *     onFinally(hasChanged, hasNativeSupport, benchmark)
   *   });
   *)
*/
//# sourceMappingURL=chunk-6LPVY4UA.js.map
